
## Break in a Table control
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Overview
<a name="overview_ELTTEXTE000358"></a>
A break in a Table control is used to group rows according to one or more criteria. 

For example, you have the ability to group:

- the customers by country and by city, 

- the products according to their family, ...




![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) Implementing a total on a break is used to automatically perform a calculation (sum, count, average) for all the rows found in a given break. For example, a total on a break is used to calculate the turnover generated by each customer. 

The breaks in a Table control are available for:

- the browsing Table controls loaded in memory, 

- the Table controls populated programmatically.




![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) Remarks: 

- At runtime, the user has the ability to store the status of the current breaks in the Table control (collapsed breaks, expanded breaks, ...). For more details, see [Storing the breaks in the Table/Looper controls (AAF)](../WDChamp/9500138.md). 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) At runtime, breaks can be expanded or collapsed by double-clicking them.

- You have the ability to manage the [breaks found in a Table control through programming](#NOTE8_1). 






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## How to?
<a name="how_ELTTEXTE000382"></a>


### Adding a break into a Table control
<a name="adding_break_into_table_control_ELTPARAGRAPHE000071"></a>

To add a break into a Table control: 

1. Display the description of the Table control ("Description" from the popup menu).

2. In the "Content" tab, click ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=3&name=ico_rupture_table.gif). The window for break management is displayed.
	**Remark**: The breaks are not available for the browsing Table controls with direct access.

3. Select the item on which the break must be performed. Several items can be selected in order to perform several breaks. The proposed items depend on the type of the Table control:

	- **Table control based on a data file loaded in memory**:

		- *automatic browse*: the search item, the column linked to the search item and the columns linked to no item are proposed. If the search item corresponds to a composite key, the components of this composite key, the columns linked to these components and the columns linked to no item are proposed.

		- *programmed browse*: the items of data file and the columns linked to these items are proposed.




- **Table control based on a data file linked to a query**:

	- *automatic browse*: the search item, the columns linked to this search item and the columns linked to no item are proposed. If the search item is not specified ("&lt;Automatic&gt;" option), the sorted items of the query, the columns linked to these items and the columns linked to no item are proposed.

	- *programmed browse*: the query items, the columns linked to these items and the columns linked to no item are proposed.

4. The breaks are performed according to their display order. Modify (if necessary) this order via the arrow buttons found on the right of table.

5. Validate.



<a name="NOTE2_2"></a>


### Break header and footer
<a name="break_header_and_footer_ELTPARAGRAPHE000098"></a>

When adding a new break, a break header and a break footer are automatically added to the Table control. If the Table control includes several breaks, there will be as many break headers and break footers as the number of breaks.

**The break headers and the break footers appear in edit in the Table control**. 

The characteristics of these break headers and footers (name, visibility, background color, ...) can be modified in their description window ("Description" from the popup menu).

Each break header and break footer is associated with the "Display a row" event. This event is run when a new break header or break footer is displayed in the Table control.

These break headers and footers can contain controls. These controls can be handled through programming. Various WLanguage events are associated with break headers. 

![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) The sums, means and counts are automatically performed in the breaks of the Table control. The controls found in the break headers and footers can display these calculations. For more details, see [Automatic calculations in the table breaks](#NOTE4_1).

**Remarks**: 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) In the description of the Table control ("Content" tab), you have the ability to specify whether the breaks must display (or not) a button used to collapse/expand the break ("Breaks with collapse/expand" option).

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) In the description of the Table control, you have the ability to configure the image used to draw the "+" and "-" buttons in the table breaks. To do so, select the "Break, border in creation" element in the "Style" table then click the "Plus/Minus image of breaks" button.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) A break header can be always visible. In this case, during the scroll, the bar of the break will not be moved. In order for a break header to be always visible: 

	- Select the break header and display its description ("Description" in the context menu). 

	- In the "UI" tab, check "Break header always visible". 






<a name="NOTE2_3"></a>


### How to fill a Table control with breaks?
<a name="how_fill_table_control_with_breaks_ELTPARAGRAPHE000146"></a>

***For the Table controls based on a data file***, the addition of records is automatically performed according to the file or to the associated query. The sort is performed according to the search item.

***For Table controls populated programmatically***, data is added with [TableAddLine](../WDLang1/3074006.md). In order for a Table control to be sorted according to the specified breaks, you must use [TableSort](../WDLang1/3074035.md).

**Example: Table control populated programmatically**: A break was defined on the Country and City columns:


```wl
// Fill the Table control
TableAddLine(TABLE_Breaks, "FRANCE", "Montpellier", "TEXT1", "Text1")
TableAddLine(TABLE_Breaks, "FRANCE", "Paris", "TEXT2", "Text2")
TableAddLine(TABLE_Breaks, "FRANCE", "Montpellier", "TEXT3", "Text3")
TableAddLine(TABLE_Breaks, "FRANCE", "Lille", "TEXT4", "Text4")

TableAddLine(TABLE_Breaks, "SPAIN", "Madrid", "TEXT1", "Text1")
TableAddLine(TABLE_Breaks, "SPAIN", "Barcelona", "TEXT3", "Text3")
TableAddLine(TABLE_Breaks, "SPAIN", "Barcelona", "TEXT4", "Text4")

TableAddLine(TABLE_Breaks, "ALGERIA", "Alger", "TEXT5", "Text5")
TableAddLine(TABLE_Breaks, "ALGERIA", "Oran", "TEXT6", "Text6")
TableAddLine(TABLE_Breaks, "ALGERIA", "Alger", "TEXT7", "Text7")
TableAddLine(TABLE_Breaks, "ALGERIA", "Chlef", "TEXT8", "Text8")
TableAddLine(TABLE_Breaks, "ALGERIA", "Alger", "TEXT9", "Text9")

TableAddLine(TABLE_Breaks, "SPAIN", "Madrid", "TEXT2", "Text2")

// Sort the content of the Table control according to the breaks
TableSort(TABLE_Breaks, TABLE_Breaks.Country.Name, TABLE_Breaks.City.Name)
```


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Handling the controls found in the break headers and footers
<a name="handling_the_controls_found_the_break_headers_and_footers_ELTTEXTE000418"></a>


### How to?
<a name="how_ELTPARAGRAPHE000167"></a>

To handle the controls found in the break headers and footers

- handle each control found in all the break headers and footers: 
	
	```txt
	<Control name>.<Property name> = <Value>
		or
	<Table name>.<Break header/footer name>.<Control name>.<Property name> = <Value>
	```


- handle each control found in a given break:
	
	```txt
	<Table name>[<Index>].<Control name>.<Property name> = <Value>
	```

	&lt;Subscript&gt; corresponds to the row number for the break.




Remarks: 

- These lines of code must be in the "Display a row" event of the break header / footer.

- Special case: Check Box control: a Check Box control containing several options and located in the break headers and footers cannot be assigned through programming. If several check boxes are required in the break headers and footers, we recommend that you use a Check Box control for each checkmark.



<a name="NOTE3_2"></a>


### Example
<a name="example_ELTPARAGRAPHE000188"></a>

This code is used to display in the "STC_Country" control the name of the country displayed in the Country column. This code is entered in the code for displaying a row of BreakHeader:


```wl
// Code for displaying the break
// Retrieves the index of the break (BRK_BreakHeader) 
BreakIndex is int = TableBreakIndex(BRK_BreakHeader)

// Fixes the value of the text in the break
TABLE_CUSTOMERS[BreakIndex].STC_COUNTRY = "Country: " + TABLE_Articles.COL_CountryName
```


<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Automatic calculations in the breaks of a Table control
<a name="automatic_calculations_the_breaks_table_control_ELTTEXTE000448"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) 
You have the ability to perform automatic calculations (sum, count and average) in the break headers and footers.

To implement the automatic calculations:

1. Insert a Static control or an edit control into the break header and footer. This control will contain the automatic calculation. 

2. Open the control description window (select "Description" in the context menu).

3. In the "UI" tab, in the "In a break, display" area, click the "No calculation" link or click the calculation description (if an automatic calculation was already defined). The description window of an automatic calculation is displayed.

4. Select the calculation to perform. You can choose:

	- "The sum of": the control will display the sum per break.

	- "The average of": the control will display the average on the break.

	- "The number (count) of": the control will count the number of elements per break.




5. Select the element on which the calculation must be performed. You have the ability to perform the calculation on a column of the Table control.

6. Validate the different windows. 




Tips:

- Don't forget to modify the input mask of the control that displays the calculation according to the type of calculated information.

- Don't hesitate to use the "eye magnet" technology on the edit controls that display calculations in the breaks. This gives you the ability you to highlight a calculation (displaying an insufficient turnover in red for example).








<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Handling the break headers and footers
<a name="handling_the_break_headers_and_footers_ELTTEXTE000472"></a>


### To initialize the break headers and footers
<a name="initialize_the_break_headers_and_footers_ELTPARAGRAPHE000229"></a>

All the break headers and footers can handled:


```txt
<Break header/footer name>.<Property name> = <Value>
```


**Remark**: These lines of code must be in the "Display a row" event of the break header/footer.

**Example**: Code used to modify the height of the break headers:


```wl
BreakHeader1.Height += 10
```

<a name="NOTE6_2"></a>


### Properties associated with the break headers and footers
<a name="properties_associated_with_the_break_headers_and_footers_ELTPARAGRAPHE000244"></a>

The following properties are associated with the break headers and footers:


|   |   |
| --- | --- |
| [Collapsed](../Proprietes/2513014.md) | Allows you to find out and modify the "collapsed" status of a break. |
| [Height](../Proprietes/2510050.md) | Allows you to find out and modify the height of a break header or footer. |
| [Name](../Proprietes/2510082.md) | Returns the name of a break header or footer. |
| [Type](../Proprietes/2510131.md) | Returns the type of an element. |
| [Visible](../Proprietes/2510138.md) | Allows you to find out whether a break header or footer is visible and to make a break header or footer visible. |


For a complete list of available properties, see [Properties available for the breaks (Table)](../WDChamp/9500144.md). 

<a name="NOTE7"></a>
<a name="NOTE7_1"></a>


## WLanguage functions specific to the Table controls with breaks
<a name="wlanguage_functions_specific_the_table_controls_with_breaks_ELTTEXTE000502"></a>
The following functions can be used to handle the breaks in the Table controls:



|   |   |
| --- | --- |
| [TableBreakIndex](../WDLang1/1000018758.md) | Returns the index of the break header and footer for a given break in a Table control. |
| [TableCollapse](../WDLang1/1000010008.md) | Collapses:<br><br>- a branch that was previously expanded in a TreeView Table control. <br><br>- a break that was previously expanded in a Table control. <br><br>- a detailed window displayed for a row.<br><br><br> |
| [TableCollapseAll](../WDLang1/1000010003.md) | Collapses:<br><br>- the entire hierarchy (all nodes) of a TreeView Table control.<br><br>- all breaks of a Table control. <br><br><br> |
| [TableExpand](../WDLang1/1000010007.md) | Expands:<br><br>- a branch that was previously collapsed in a TreeView Table control. <br><br>- a branch that was previously collapsed in a Table control. <br><br>- a detailed window displayed for a row.<br><br><br> |
| [TableExpandAll](../WDLang1/1000010001.md) | Expands:<br><br>- the entire hierarchy (all nodes) of a TreeView Table control.<br><br>- all breaks of a Table control. <br><br><br> |





<a name="NOTE8"></a>
<a name="NOTE8_1"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) 

## Managing breaks in the Table controls through programming
<a name="managing_breaks_the_table_controls_through_programming_ELTTEXTE000577"></a>
The following functions are used to create and handle breaks in the tables: 



|   |   |
| --- | --- |
| [BreakAdd](../WDLang1/1000022737.md) | Adds a break into a Table or Looper control. |
| [BreakDelete](../WDLang1/1000022738.md) | Deletes a break from a Table control or from a Looper control. |
| [BreakDeleteAll](../WDLang1/1000022739.md) | Deletes all breaks from a Table control or from a Looper control. |





Adding a break into a table is performed by [BreakAdd](../WDLang1/1000022737.md). The new break corresponds to a variable of type [Control](../WDLang1/1000020967.md) that can be handled with the same WLanguage properties as a break created in the editor. 

Example: 

```wl
// Add a green break on the date into the Table control
x is Control
x <- BreakAdd(TABLE_Order.COL_DATE, "BrkDate", brkHeader, 50) 
x.BackgroundColor = DarkGreen // Applies green color to the break
```





- ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=3&name=TheTablecontrolwithbreak.gif) ***Unit examples (WINDEV)*** : **The Table control with break** <br>Using the Table control with break.


