
## sRead (Function)

***In french: sLit***



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Reads a character string in the entry buffer of the specified serial port. The port must be opened beforehand ([sOpen](../WDLang3/3062013.md)).

**Remarks**: 

- This function cannot be used with a parallel port.

- ![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Infrared ports are not supported.

- ![Linux](https://doc.pcsoft.fr/ext/images/us/LX.png) Only serial ports are supported.  









<a name="Example1"></a>
<a name="sample_code"></a>

## Example

![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![User code (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 
```wl
// Read 20 characters in the Message variable from
// the entry buffer of COM1
Msg is string
Msg = sRead(1, 20)
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Syntax

### Reading a number of bytes and retrieving a string

`<Result> = sRead(<Port number> , <Number of bytes to read>)`
---

**`<Result>: (Character string)`**



- Character string read in the entry buffer, 

- 0 if the read operation was not performed.




**`<Port number>: (Integer)`**



- Number of the relevant serial port: 1, 2, 3, ... 32 for COM1, COM2, COM3, ... COM32. 

- Identifier of the serial port returned by [sOpen](../WDLang3/3062013.md) (if this function was called with a serial port name). 
	![Linux](https://doc.pcsoft.fr/ext/images/us/LX.png) Only this type of parameter is available.




**`<Number of bytes to read>: (Integer)`**

Number of bytes to read in the entry buffer of the serial port. The number of bytes to read is returned by [sInEntryQueue](../WDLang3/3062004.md).  



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarks


### Miscellaneous 
<a name="miscellaneous_ELTPARAGRAPHE000101"></a>

- **[sOpen](../WDLang3/3062013.md)** has no effect if the port was not opened by sRead.

- **sRead** clears the input queue of bytes actually read.

- A 32-bit application is locked during the duration of the transfer. To avoid this lock, the timeout between two read operations must be specified in [sOpen](../WDLang3/3062013.md). If the timeout is reached and the data could not be read, **sRead** returns 0.

- WLanguage does not allow you to manage the control signals.

- The time to wait for a character to be read or written is specified with [sOpen](../WDLang3/3062013.md). 

	- If this time is set to 1s when reading 1024 bytes, the waiting time will be 1024s. 

	- If this time is set to "-1s" when reading 1024 bytes, the waiting time will be 1s.


 This prevents lock problems when reading from or writing to the print port.



<a name="NOTE0_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![User code (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 

### Transmission between two computers that use character strings in different formats (UNICODE and ANSI)
<a name="transmission_between_two_computers_that_use_character_strings_different_formats_unicode_and_ansi_ELTPARAGRAPHE000135"></a>

Some conversions are required to perform a transmission between two computers that use different formats of character strings (Windows (ANSI) and Windows Mobile (UNICODE) for example):


|   |   |   |   |
| --- | --- | --- | --- |
| **Format of character strings on the current computer** | **Write operation**<br>([sWrite](../WDLang3/3062009.md) function) | **Read operation**<br>(**sRead** function) |
| **Buffer containing an ANSI string** | **Buffer containing a UNICODE string** |
| ANSI<br>(PC running Windows for example) | The character string will be in ANSI format | No conversion is required | Conversion required ([UnicodeToAnsi](../WDLang1/3024025.md)) |
| UNICODE | The character string will be in UNICODE format | Conversion required ([AnsiToUnicode](../WDLang1/3024002.md)) | No conversion is required |


![Linux](https://doc.pcsoft.fr/ext/images/us/LX.png) **Special case for Linux**: 

- Only serial ports can be opened and initialized. 

- By default, users do not have access to serial ports. It is necessary to grant them specific rights to manage serial ports. 



![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) 

### Using an external library: RXTX
<a name="using_external_library_rxtx_ELTPARAGRAPHE000364"></a>

In Java, the use of functions for handling the serial and parallel ports ([sOpen](../WDLang3/3062013.md), [sWrite](../WDLang3/3062009.md), [sRead](../WDLang3/3062012.md), ...) requires the presence of an external library: RXTX. 

This library includes a Jar archive and one or more native libraries that depend on the operating system on which the application is run.
 
To use these functions: 

- the Jar archive (RXTXComm.jar) must: 

	- be found in the same directory as the Java application generated by WINDEV, 

	- be found in the execution classpath of the application, 

	- be directly included in the generated application (from the wizard for Java generation). 




- the native libraries corresponding to the operating system on which the application is run must be found: 

	- in the same directory as the Java application generated by WINDEV, 

	- in the path of the application libraries (librarypath).







The RXTX library and its documentation can be downloaded from: [http://users.frii.com/jarvi/rxtx/index.html](http://users.frii.com/jarvi/rxtx/index.html) (link valid at the time this documentation was published). 

**Caution**: The management of infrared ports is not available in Java. 
<a name="NOTE0_3"></a>

<a name="XComponent"></a>

## Business / UI classification:
Business Logic
## Component:
wd280com.dll
