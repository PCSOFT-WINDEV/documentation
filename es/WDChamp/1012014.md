
## Eventos asociados a las páginas
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Eventos de Default
<a name="eventos_default_ELTTEXTE000340"></a>
![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png)![Linux](https://doc.pcsoft.fr/ext/images/us/LX.png) WEBDEV gestiona los siguientes eventos de forma predeterminada (orden de aparición en el editor de código):

| Event | Condición de ejecución |
| --- | --- |
| Declaraciones globales <br>(Código Servidor) | Declaración de variables globales a la página. Este es el primer código que se ejecuta al abrir la página. |
| Inicialización <br>(Código Servidor) | Se ejecuta al abrir la página.<br>Los eventos se ejecutan en el siguiente orden:<br><br>- Inicialización de los controles de la página.<br><br>- Inicialización de la página.<br><br><br> |
| Carga (onload) de la Page <br>(Código Navegador) | Código del navegador que se ejecuta cuando el Page se muestra en el navegador (realizado por [PageDisplay](../WDLang2/3058008.md) o [PageRefresh](../WDLang2/3058011.md), por ejemplo). |
| Descarga (onunload) Page <br>(Código Navegador) | Este código Navegador se ejecuta cuando se muestra una nueva página en el navegador. |
| Actualización de los datos de Page <br>(Código Servidor) | Evento disponible sólo si los datos automatic actualización fueron definidos para el Page (ver [Actualización de los datos de Page](../Editeurs/2030067.md)). Esta Event se ejecuta cuando se actualiza la Page. Se utiliza, por ejemplo, para actualización los controles deseados: llenando una lista, ... Este es un Ajax Event.<br><br>Si este evento devuelve <u><u><u><u>False</u></u></u></u>, el evento "Después de actualizar datos de la página (código Navegador)" no se ejecuta. |
| Solicitud para actualizar la visualización <br>(Código Servidor) | Se utiliza para agrupar el código de actualización de los controles de la página: contenido de los controles, estado (visible, en gris, etc.), título a actualizar, etc.<br><br>Este evento puede recibir parámetros. Solo se debe declarar un procedimiento en el evento. Por ejemplo: <br><br><br><pre><code>// Request for refreshing the display <br>PROCEDURE AskForRefresh(RefreshType is Boolean)</code></pre><br><br><br><br><br>Este evento se ejecuta mediante solicitud previa con las siguientes funciones: <br><br>- [RequestRefreshUI](../WDLang1/1000023899.md) o [RequestRefreshUIParent](../WDLang1/1000023900.md): Ejecuta el evento al final del evento actual (ejecución asíncrona). <br><br>- [ExecuteRefreshUI](../WDLang1/1000023901.md) o [ExecuteRefreshUIParent](../WDLang1/1000023902.md): Ejecuta el evento inmediatamente. <br><br><br>Al llamar a estas funciones, se puede especificar el valor de los parámetros esperados por el evento. |
| Tras actualizar los datos de Page <br>(Código Navegador) | Evento disponible sólo si los datos automatic actualización fueron definidos para el Page (ver [Actualización de los datos de Page](../Editeurs/2030067.md)). <br><br>Esta Event se ejecuta después de la "Actualización de los datos de Page (código del servidor)". Se utiliza para realizar un Process adicional en el navegador. Si el evento "Actualización de datos de la página (código Servidor)" devuelve <u><u><u><u>False</u></u></u></u>, el evento "Después de actualizar datos de la página (código Navegador)" no se ejecuta. |
| Cerrar la Page <br>(Código Servidor) | Se ejecuta al cerrar la página. |
| Sincronización de la Page <br>(Código Servidor) | Este código Servidor permite gestionar la sincronización de la página al hacer clic en el botón "Atrás" del navegador. Para obtener más información, consulte [Gestión del botón "Atrás" del navegador](../WDChamp/1012001.md). |


**Observación**: Solo los códigos Navegador están disponibles en una página estática.





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Eventos opcionales
<a name="eventos_opcionales_ELTTEXTE000370"></a>
Se pueden utilizar varios eventos opcionales.

Para añadir un evento opcional:

1. Seleccione la control deseada.

2. Mostrar la ventana del código de esta control (tecla F2).

3. Haga clic en el enlace "Añadir otras Event s a xxx" en la parte inferior del código de la ventana, después de la última Event.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Traitements_optionnels_WD_OK%20-%20HC%20N%B0001.gif)


4. Todos los eventos opcionales disponibles para el control se muestran. 

5. Marque la opción Event para agregar y validar. 
	Observación: Puede seleccionar varios eventos opcionales. 

6. El Event opcional seleccionado se agrega automáticamente a los Event s administrados por el control.




Para desactivar un Event opcional, simplemente realice las mismas operaciones para mostrar la lista de Event s opcionales. A continuación, simplemente desmarque los eventos opcionales para eliminar. 
Observación: Si el código desactivado contiene código WLanguage, este código se elimina automáticamente.

Se puede gestionar, por ejemplo:

- el botón izquierdo del ratón presionado, liberado o con doble clic,

- botón derecho abajo, arriba, con doble clic, ...




Para más detalles, consulte la página web de [Eventos opcionales](../WDChamp/1014004.md).
<a name="NOTE2_2"></a>


### Eventos opcionales para gestionar el modo off-Line
<a name="eventos_opcionales_para_gestionar_modo_offline_ELTPARAGRAPHE000245"></a>

Se pueden utilizar varios eventos opcionales para optimizar la gestión de los sitios offline: 

| Event | Condición de ejecución |
| --- | --- |
| Cambiar a modo off-Line (Código del navegador) | Corre cuando cambies al modo apagado -Line. |
| Cambiar a modo on-Line (Código del navegador) | Corre cuando cambies al modo on-Line. |
| Cada vez que cambia el estado de la caché HTML (código del navegador) | Esta Event se utiliza para comprobar lo que ocurre cuando se carga la Page. Este Event se llama cada vez que se comprueba el caché. <br>El siguiente comando Line se utiliza para recuperar las acciones realizadas por el navegador:<br><br><br><pre><code>Trace(JSInfoEvent("type"))</code></pre><br>Tienes la habilidad de averiguarlo:<br><br>- si el navegador está actualizando la caché,<br><br>- si se produce un error<br><br>- si se ha completado la actualización de la caché<br><br>- si no se debe realizar ninguna actualización, .....<br><br><br> |


<a name="NOTE2_3"></a>


### Event opcional para gestionar el historial de navegación
<a name="event_opcional_para_gestionar_historial_navegacion_ELTPARAGRAPHE000281"></a>

Un Event específico opcional está disponible para optimizar la gestión de los botones Atrás/Siguiente: "Pasar al historial de navegación (onpopstate)". 

Este Event espera que los datos se muestren, como parámetro. Estos datos fueron almacenados en el historial por [NavegadorHistorialAñadir](../WDLang2/1000023458.md) y [NavegadorHistoriaModificar](../WDLang2/1000023459.md). 

Si el usuario web vuelve a una entrada del historial, los datos almacenados se transmitirán al evento "Mover en el historial de navegación" (evento de página opcional).. Este evento debe procesar los datos para restaurar el estado de la página.. Este proceso debe estar asociado a un procedimiento que espera que los datos transmitidos en el parámetro: 

```txt
// Event "Move in the navigation history (onpopstate)"
PROCEDURE <ProcedureName>(<Data>)
```


Ejemplo: Este ejemplo añade la página al historial y almacena la hora de inserción. Al volver a la página del historial anterior se muestra la hora.

```wl
x is Variant
x.Time = TimeSys()
BrowserHistoryAdd(x, MyPage..Title, "#before") 

x.Time = TimeSys()
BrowserHistoryAdd(x, MyPage..Title, "#after")
```

```wl
// Event "Move in the navigation history (onpopstate)" 
PROCEDURE ProcessHistory(stStatus)
Info(stStatus.Time)
```


Observación: Dependiendo del navegador, el evento "Move in the navigation history (onpopstate)" también se ejecuta al cargar la página y al volver a la visualización inicial de la página.. En este caso, el parámetro &lt;Data&gt; transmitido al evento corresponde a Null.


