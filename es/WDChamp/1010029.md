


## Gestión de los contextos HFSQL en las ventanas y en los informes
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000242"></a>
Un contexto HFSQL contiene información relativa a los datos utilizados:

- Información sobre la actual Record: El número de Record, el contenido de los artículos, ...

- Valores de [HFound](../WDLang4/3044104.md), [HOut](../WDLang4/3044094.md), ...

- Características del filtro actual.

- Características de la búsqueda actual.

- Características de la navegación actual.

- Nombre de los archivos abiertos.

- Nombre y características de las consultas ([HExecuteSQLQuery](../WDLang4/3044084.md), [HExecuteQuery](../WDLang4/3044080.md), [SQLExec](../WDLang4/3072007.md), [SQLExecWDR](../WDLang4/3072010.md)).




**Observación**: Se permite una sola transacción por contexto HFSQL.


<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Qué es un contexto HFSQL?
<a name="¿que_contexto_hfsql_ELTTEXTE000272"></a>


### Contexto HFSQL independiente
<a name="contexto_hfsql_independiente_ELTPARAGRAPHE000047"></a>

WINDEV le permite crear contextos HFSQL independientes:

- Para ventanas WINDEV.

- Para informes WINDEV.

- [Para el manejo de las roscas](../WDLang1/3077026.md).




Al abrir la ventana (o el reporte), el contexto HFSQL existente se "duplica" automáticamente (se crea un copy del contexto existente): las operaciones realizadas en cada uno de los contextos serán independientes de las realizadas en los otros contextos. El uso de un contexto independiente proporciona el mismo resultado que si dos instancias de la misma aplicación se ejecutaran en paralelo.

Se recomienda la gestión de un contexto independiente de HFSQL para las aplicaciones MDI y multi-Thread.

**Se tiene en cuenta el contexto independiente de HFSQL:**

- Cuando una base de datos HFSQL es manejada por la [Funciones HFSQL](../WDLang4/3044156.md) (que comienza con la letra H).

- Cuando una base de datos HFSQL es manejada por la [Funciones SQL](../WDLang4/3072002.md) (que comienza con las letras SQL).

- Cuando se maneja cualquier base de datos a través de un controlador ODBC, mediante el uso de la herramienta [Funciones SQL](../WDLang4/3072002.md).




**Observaciones**: 

- Desde el código global de una ventana padre MDI, no se puede acceder a una ejecución de consulta en una ventana secundaria con un contexto HFSQL independiente, incluso si la fuente de datos utilizada es global para el proyecto.

- Todos los Conectores Nativos soportan contextos HFSQL independientes: el contexto se copia y las operaciones realizadas son independientes. Sin embargo, algunos Conectores Nativos no guardan la posición actual al copiar el contexto.. En este caso, es necesario volver a fijar la posición a la Record actual después de copiar el contexto.. 



<a name="NOTE2_2"></a>


### Transacciones y contexto HFSQL independiente
<a name="transacciones_contexto_hfsql_independiente_ELTPARAGRAPHE000084"></a>

Al copiar un contexto, si una transacción está en curso en el primer contexto, el nuevo contexto no está en la transacción.. Debe llamar a [HTransactionStart](../WDLang4/3044002.md) para iniciar una transacción en el nuevo contexto.
<a name="NOTE2_3"></a>


### Limitación: Archivos de datos en formato 5.5 y vistas en formato Hyper File 5.5
<a name="limitacion_archivos_datos_formato_55_vistas_formato_hyper_file_55_ELTPARAGRAPHE000094"></a>

- Los contextos independientes no son compatibles con los archivos de Hyper File 5.5.

- La copy de un contexto HFSQL (contexto HFSQL independiente creado a partir de un contexto existente) falla si hay una vista de Hyper File 5.5 (HCreateView_55 mantenida por compatibilidad con versiones anteriores) en el contexto HFSQL original.



<a name="NOTE2_5"></a>


### Limitación: Contexto HFSQL independiente y uso de un controlador ODBC
<a name="limitacion_contexto_hfsql_independiente_uso_controlador_odbc_ELTPARAGRAPHE000105"></a>

Atención: la consulta se duplicará sólo si la copy del contexto (apertura de la ventana o de la reporte) se realiza UNA VEZ que la navegación fue inicializada por [SQLFirst](../WDLang4/3072017.md).


|   |   |
| --- | --- |
| **No hacer**<br><br><pre><code>IF SQLExec("Query1") THEN <br>	Open(WIN_Result)<br>END</code></pre><br> | **Do**<br><br><pre><code>IF SQLExec("Query1") THEN<br>	SQLFirst("Query1")<br>	Open(WIN_Result)<br>END</code></pre><br> |



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Contextos y ventanas HFSQL
<a name="contextos_ventanas_hfsql_ELTTEXTE000314"></a>


### ¿Cómo administrar el contexto HFSQL de una ventana?
<a name="¿como_administrar_contexto_hfsql_una_ventana_ELTPARAGRAPHE000126"></a>

Administrar (o no) el contexto HFSQL independiente de una ventana:

1. Mostrar la ventana description.

2. Vaya a la pestaña "Detalles".

3. Si es necesario, seleccione "Contexto HFSQL independiente".



<a name="NOTE3_2"></a>


### Si los contextos HFSQL no son independientes para cada ventana (opción no seleccionada)
<a name="los_contextos_hfsql_son_independientes_para_cada_ventana_opcion_seleccionada_ELTPARAGRAPHE000141"></a>

Cada vez que se abre una ventana, el contexto HFSQL se actualiza según las operaciones realizadas en la ventana.

Todas las ventanas trabajan en el mismo contexto HFSQL.

Si la misma ventana se abre varias veces en paralelo en la aplicación, los contextos HFSQL pueden solaparse y los datos utilizados pueden no corresponderse con los datos esperados.
<a name="NOTE3_3"></a>


### Si los contextos HFSQL son independientes para cada ventana (opción seleccionada)
<a name="los_contextos_hfsql_son_independientes_para_cada_ventana_opcion_seleccionada_ELTPARAGRAPHE000152"></a>

El contexto HFSQL actual se copia por completo cada vez que se abre una nueva ventana.. Esto le permite realizar diferentes operaciones (filtros, clasificaciones, búsquedas) en el mismo archivo, en ventanas abiertas en paralelo.. Cada ventana tiene su propio contexto. No hay riesgo de que se mezclen los datos.

Cada contexto HFSQL es independiente, los bloqueos de Record pueden ser manejados en cada contexto. Cerrar una ventana con un contexto independiente:

- desbloquea automáticamente los registros bloqueados por esta ventana,

- cerrará el contexto independiente.




Además, una función HFSQL utilizada en un contexto no tendrá ningún efecto fuera de este contexto. Por lo tanto, si la gestión de notas está habilitada al abrir los contextos independientes, tiene la posibilidad de deshabilitar esta función en una ventana.: la desactivación de los memos sólo se realizará en el contexto correspondiente a la ventana.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Contextos e informes HFSQL
<a name="contextos_informes_hfsql_ELTTEXTE000350"></a>


### ¿Cómo gestionar el contexto HFSQL de una reporte?
<a name="¿como_gestionar_contexto_hfsql_una_reporte_ELTPARAGRAPHE000168"></a>

Gestionar (o no) el contexto HFSQL independiente de una reporte:

1. Abra la descripción del reporte (seleccione "Descripción del reporte" en el menú contextual).

2. En la pestaña "Datos", marque "La ejecución del reporte no afecta las operaciones de navegación (contexto HFSQL independiente)", si es necesario.



<a name="NOTE4_2"></a>


### Si los contextos HFSQL no son independientes para cada reporte
<a name="los_contextos_hfsql_son_independientes_para_cada_reporte_ELTPARAGRAPHE000182"></a>

Cada vez que se imprime una reporte, el contexto HFSQL se actualiza de acuerdo con las operaciones realizadas en el reporte. Todos los informes actualmente impresos utilizan el mismo contexto HFSQL.

Si varios informes examinan simultáneamente el mismo archivo, le recomendamos que utilice contextos HFSQL independientes.
<a name="NOTE4_3"></a>


### Si los contextos HFSQL son independientes para cada reporte
<a name="los_contextos_hfsql_son_independientes_para_cada_reporte_ELTPARAGRAPHE000191"></a>

El contexto HFSQL actual se copia completamente cada vez que se imprime una nueva reporte.. Esto le permite realizar diferentes operaciones (filtros, clasificaciones, búsquedas) en el mismo archivo, en informes abiertos en paralelo.. Cada reporte tiene su propio contexto. No hay riesgo de que se mezclen los datos.




