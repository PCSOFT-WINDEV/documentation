
## Vinculación de una control Imagen a un elemento
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Características del campo
<a name="caracteristicas_del_campo_ELTTEXTE000187"></a>
Un control Imagen puede corresponder a un artículo encontrado en un archivo de datos, en una consulta, ... Dos tipos de artículos pueden ser associated con un control Imagen:

- Una posición de "Texto: la información almacenada es la ruta de la Image.

- Un campo de tipo "Sonido, imagen, binario": la información almacenada es la propia Image.




En ambos casos, el control Imagen se utiliza para mostrar la información que se encuentra en el el archivo de datos.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Cómo proceder?
<a name="¿como_proceder_ELTTEXTE000211"></a>


### Almacenamiento de las imágenes en el archivo de datos como elementos de texto
<a name="almacenamiento_las_imagenes_archivo_datos_como_elementos_texto_ELTPARAGRAPHE000023"></a>

Esta solución se utiliza para almacenar la ruta de imágenes en el archivo de datos.

**Para gestionar las imágenes como elementos de texto**: 

1. En el editor de análisis: 

	- Crear un elemento de texto (por ejemplo, PHOTO_Path). Este artículo se utilizará para almacenar el ruta dando acceso al Image. 

	- No olvide cambiar el tamaño de este elemento (255 caracteres por ejemplo). 

	- En la información compartida del artículo, este control es associated con un control Campo de entrada. 

	- Generar el análisis para tener en cuenta las modificaciones.




2. En la ventana (o en la página) que se usará para editar/ver la Image:

	- Crear una control Imagen (IMG_Photo en nuestro ejemplo). Esta control Imagen no está vinculada a ningún artículo.

	- Cree una control de edición vinculada al elemento PHOTO_Path (en nuestro ejemplo, el nombre de esta control es EDT_Photo). 
			Para crear esta control, arrastre y suelte el elemento que se encuentra en el panel "Análisis" a su ventana o Page. 
			Este control permite al usuario especificar el ruta del archivo Image a utilizar. Un botón utilizado para seleccionar la imagen solicitada puede ser añadido al lado de esta control. La Event "Click" de la control Botón puede contener el siguiente código (por ejemplo):
			
		```wl
		// Opens an image picker
		EDT_Photo = fImageSelect("c:\my documents", "", "Select the customer photo")
		// Run the "Whenever modifying" event of the EDT_Photo Edit control 
		// to update the Image control
		ExecuteProcess(EDT_Photo, trtChange)
		```


	- Escriba el siguiente código en la Event "Siempre que se modifique" de esta control: 
			
		```wl
		IF fFileExist(MySelf) = True THEN
			IMG_Photo = MySelf
		ELSE
			IMG_Photo = ""
		END
		```

			Este código permite:

		- comprobar la existencia del archivo de Image.

		- mostrar el Image en el control Imagen. Todo lo que tienes que hacer es asignar el ruta del Image al control Imagen para que el Image se muestre. Si el Image no existe, no se muestra ningún Image.  




- Al mostrar la ventana o la página, forzar (si es necesario) la ejecución de la "Siempre que se modifique" Event del control con [ExecuteProcess](../WDLang1/3013031.md). Por ejemplo:
			
		```wl
		ExecuteProcess(EDT_Photo, trtChange)
		```


3. La información se guardará automáticamente en el el archivo de datos cuando se utilice: 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) [ScreenToFile](../WDLang4/3044146.md).





El ruta del Image se guardará automáticamente en el elemento Texto.
<a name="NOTE2_2"></a>


### Guardar los Image en el archivo de datos como artículos "Image".
<a name="guardar_los_image_archivo_datos_como_articulos_image_ELTPARAGRAPHE000077"></a>

Esta solución se utiliza para almacenar directamente las imágenes en el archivo de datos.

Para manejar los Image en el formato de los artículos "Image":

1. En el editor de análisis: 

	- Cree un campo de tipo "Sonido, imagen, binario" (por ejemplo, PHOTO_Imagen). Este artículo se utilizará para almacenar el Image. 

	- En la ficha "General" del artículo, especifique el subtipo "Image (nota binaria). 

	- En la información compartida del artículo, este control es associated con un control Imagen. 

	- Generar el análisis para tener en cuenta las modificaciones.




2. En la ventana (o en la página) que se usará para editar/ver la Image:

	- Crear una control Imagen (IMG_Photo en nuestro ejemplo). Esta control Imagen está vinculada al elemento "Sonido, Image, binario" creado en el análisis. Para crear esta control, arrastre y suelte el elemento que se encuentra en el panel "Análisis" a su ventana o Page.

	- Crear una control Campo de entrada si es necesario (EDT_Photo en nuestro ejemplo). Este control permite al usuario especificar el ruta del archivo Image a utilizar. Esta control no está vinculada a ningún artículo. Un botón utilizado para seleccionar la imagen solicitada puede ser añadido al lado de esta control. La Event "Click" de la control Botón puede contener el siguiente código (por ejemplo):
			
		```wl
		// Opens an image picker
		EDT_Photo = fImageSelect("c:\my documents", "", "Select the customer photo")
		// Run the "Whenever modifying" event of the EDT_Photo Edit control 
		// to update the Image control
		ExecuteProcess(EDT_Photo, trtChange)
		```


	- Escriba el siguiente código en la Event "Siempre que se modifique" de esta control: 
			
		```wl
		IF fFileExist(MySelf) = True THEN
			IMG_Photo = MySelf
		ELSE
			IMG_Photo = ""
		END
		```

			Este código permite:

		- comprobar la existencia del archivo de Image.

		- mostrar el Image en el control Imagen. Todo lo que tienes que hacer es asignar el ruta del Image al control Imagen para que el Image se muestre. Si el Image no existe, no se muestra ningún Image. 




3. La información se guardará automáticamente en el el archivo de datos cuando se utilice: 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) [ScreenToFile](../WDLang4/3044146.md).





El Image se guardará automáticamente en el elemento "Sonido, Image, binario".

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Recuperación del contenido de la Image en un artículo
<a name="recuperacion_del_contenido_image_articulo_ELTTEXTE000241"></a>
**Primer caso: los controles de la ventana o página están enlazados a los campos de un archivo de datos**
Todos los campos de el archivo de datos enlazados a un control de la ventana o página se actualizarán con:

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) [ScreenToFile](../WDLang4/3044146.md) en WINDEV o WINDEV Mobile.




**Segundo caso: los controles de la ventana o página no están enlazados a los campos de un archivo de datos**
El valor de cada control debe asignarse a cada campo utilizando la siguiente sintaxis:


```txt
<Data file>.<Item> = <Control name>
```


***Para un campo de tipo memo binario***: Hay que asignar un valor a cada control mediante [HLinkMemo](../WDLang4/3044173.md).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Miniaturas HFSQL
<a name="miniaturas_hfsql_ELTTEXTE000286"></a>
El elemento vinculado a la control Imagen puede utilizar miniaturas HFSQL. En este caso, se optimizará la visualización de las imágenes.

Para obtener más información, consulte [Miniaturas HFSQL](../WDLang4/3044348.md).


