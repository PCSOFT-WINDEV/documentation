


## Bloque de iteración (o bloque de sustitución)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000208"></a>
El bloque **Iteración** es un bloque libre, creado manualmente en el editor de reportes. Se puede utilizar como cualquier otro tipo de bloque. Por ejemplo, un bloque **Iteración** puede usarse para reemplazar un bloque *Encabezado de página* para identificar las páginas pares e impares.

La sustitución de bloques se realiza mediante programación con [iSubstBlock](../WDLang5/3046048.md). También tiene la posibilidad de imprimir un bloque específico con [iPrintBlock](../WDLang5/3046030.md).

**Observación**: Los planos están disponibles en los informes de la versión 19. En la mayoría de los casos, el uso de planos en los informes permite reemplazar los bloques de iteración.. El uso de planos en los informes es más fácil que el uso de bloques de iteración.. Para obtener más información, consulte [Los aviones](../WDChamp/1013078.md).



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Creación del bloque de iteración
<a name="creacion_del_bloque_iteracion_ELTTEXTE000232"></a>
Para crear un bloque de Iteración: 

1. Realice una de las siguientes operaciones en el editor de reportes:

	- en la pestaña "Creación", en el grupo "Estructura", despliegue "Bloques".

	- seleccione "Añadir un bloque" en la el menú contextual de la reporte (haga clic con el botón derecho del ratón en la reporte actualmente creada).

	- haga clic en el botón "Añadir un bloque" de la pestaña "Bloques" de reporte description.




2. Seleccione el tipo "Bloque de iteración".




Observación: En Default, los bloques de iteración se muestran en el orden en que se crearon. Puede cambiar este orden en el editor. Para obtener más información, consulte [Manipulación de los bloques reporte](../WDChamp/1011041.md). 

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Impresión de un bloque de iteración
<a name="impresion_bloque_iteracion_ELTTEXTE000256"></a>
Un bloque *de iteración* se utiliza para:

- reemplazar un bloque existente.

- añadir un bloque adicional a la reporte.



<a name="NOTE3_2"></a>


### Sustitución de un bloque existente
<a name="sustitucion_bloque_existente_ELTPARAGRAPHE000082"></a>

La programación necesaria para sustituir un bloque existente se ilustra con el siguiente ejemplo:
|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=exemple-WD.png) | Ejemplo | La cabecera Page de mi reporte debe ser diferente para los Page pares y para los Page impares.<br>El bloque *de encabezado Page* corresponde a los impares Page s (se imprimirá en Page 1, 3, 5 ...). Por lo tanto, este bloque se imprimirá en la primera Page de mi reporte.<br>El bloque *de iteración* corresponde a las páginas pares. |





1. Si es necesario agregue un bloque *Encabezado de página*: en la pestaña "Creación", en el grupo "Estructura", expanda "Bloques" y seleccione "Encabezado Page". Este bloque se llama "PageHeader".

2. Personalice el bloque "PageHeader" como el correspondiente a las páginas impares.

3. Escriba el siguiente código En el "Después de imprimir" del bloque "PageHeader" Event:
	
	```wl
	// --After printing the PageHeader
	// Substitute the PageHeader block by the
	// Iteration block on the next page of my report
	iSubstBlock(PageHeader, Iteration)
	```


4. Si es necesario, agregue un bloque *Iteración*: en la pestaña "Creación", en el grupo "Estructura", despliegue "Bloques" y seleccione "Bloque de iteración". Este bloque se denomina "Iteración".

5. Personalice el bloque "Iteración" como el correspondiente a las páginas pares.

6. Escriba el siguiente código en el "Después de imprimir" del bloque "Iteración" Event:
	
	```wl
	// --After printing the Iteration 
	// Cancel the substitution of the PageHeader block 
	// by the Iteration block on next page of my report
	iSubstBlock(PageHeader, "")
	```



**Observación**: Para sustituir un bloque *de pie de página Page* , le recomendamos que utilice bloques de la misma altura para evitar problemas de impresión.
<a name="NOTE2_3"></a>


### Añadir un bloque adicional a la reporte
<a name="anadir_bloque_adicional_reporte_ELTPARAGRAPHE000135"></a>

La programación requerida para agregar un bloque *de iteración* se presenta en el siguiente ejemplo:
|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=exemple-WD.png) | Ejemplo | La reporte "RPT_ProductReport" imprime la description de cada producto (se realiza una ruptura en "ProductNum"). Una promoción está disponible para algunos productos. En este caso, la partida "Promoción" de el archivo de datos "Producto" corresponde a True. Este ítem es un booleano.<br>Para los productos en promoción, el bloque "Iteración" se añade a reporte. Este bloque describe el tipo de oferta aplicable al producto (compre dos por el precio de uno, 20% de descuento, ....). |





1. Añada, si es necesario, un bloque "Iteración: en la pestaña "Creación", en el grupo "Estructura", despliegue "Bloques" y seleccione "Bloque de iteración". Este bloque se denomina "Iteración".

2. Personalice el bloque "Iteración".

3. Escriba el siguiente código En el "Después de la impresión" del bloque "Fin de la pausa" Event:
	
	```wl
	// --After printing the End of break 
	// Is the product currently printed in promotion?
	IF MySource.Promotion = True THEN
		// Print the Iteration block
		iPrintBlock("Iteration")
	END
	```






