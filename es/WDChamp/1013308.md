


## Ejemplo de gestión de vídeos (emitidos por una control Cámara) (sintaxis del prefijo)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000065"></a>
En este ejemplo, la aplicación le permite hacerlo:

- ver la secuencia de vídeo emitida actualmente por la cámara instalada en el ordenador actual.

- modificar la configuración del controlador para la captura de vídeo.

- guardar el vídeo que se está emitiendo actualmente por la cámara especificada como un Image (archivo BMP) o como una secuencia de vídeo (archivo AVI).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Ejemplo de uso
<a name="ejemplo_uso_ELTTEXTE000095"></a>
Para desarrollar esta aplicación:

1. Cree una ventana en blanco: 

	- Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_nouveau.gif) en los botones de acceso rápido. 

	- Aparece la ventana de creación: haga clic en "Ventana", y luego en "Ventana". 

	- En la asistente, seleccione "Blank". 




2. En esta nueva ventana:

	- Crear una control Cámara llamada "CAM_Camera".: en la pestaña "Creación", en el grupo "Controles gráficos", despliegue "Video y captura" y haga clic en "Cámara".
			Observación: Por Default, la cámara associated con este control corresponderá a la cámara Default que se encuentra en el ordenador actual.

	- Crea una control Botón y llámala "BTN_Film": en la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Botón".
			Esta control Botón se utilizará para mostrar la secuencia de vídeo en la control Cámara.

	- Crear una control Botón y nombrarla "BTN_Configuración": en la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Botón".
			Esta control Botón se utilizará para modificar la configuración del controlador para la captura de vídeo.

	- Cree un control Botón y control Botón un nombre: en la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Botón".
			Esta control Botón se utilizará para guardar la secuencia de vídeo que se está transmitiendo actualmente, como una Image (archivo BMP).

	- Crea una control Botón y llámala "BTN_Video": en la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Botón".
			Esta control Botón se utilizará para guardar la secuencia de vídeo que se está transmitiendo actualmente, como una secuencia de vídeo (archivo AVI).

	- Crear una control Botón y nombrarla "BTN_Stop": en la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Botón".
			Esta control Botón se usará para dejar de mostrar y/o guardar la secuencia de video en la control Cámara.




3. Escriba el siguiente código en el "Click" Event de "BTN_Film":
	
	```wl
	// Displays the video sequence currently transmitted in the "CAM_Camera" control
	ResDisplay is boolean
	ResDisplay = CAM_Camera.Display()
	// Displays an error message if a problem occurs
	IF ResDisplay = False THEN Error(ErrorInfo())
	```


4. Escriba el siguiente código en el "Click" Event de "BTN_Configuración":
	
	```wl
	// Displays the standard dialog box used to 
	// configure the driver for video capture used by the "CAM_Camera" control
	CAM_Camera.Configure()
	```


5. Escriba el siguiente código en el "Click" Event de "BTN_Image": 
	
	```wl
	// Save the image currently broadcasted in the "CAM_Camera" control
	ResImgBck is boolean
	ResImgBck = CAM_Camera.Capture("Temp.bmp", viPictureCapture)
	IF ResImgBck = False THEN 
		Error(ErrorInfo())
	END
	
	// Select the file to create
	ImageFile is string 
	ImageFile = fSelect(fExeDir(), "Image", ...
		"Save as...", "BMP" + TAB + "*.BMP", "bmp", fselCreate + fselExist)
	
	// Renames the created BMP file
	IF ImageFile ~= "" THEN
		// Delete the temporary file
		fDelete("Temp.BMP")
	ELSE
		// Renames and moves the generated file
		fRename("Temp.BMP", ImageFile)
	END
	```


6. Escriba el siguiente código en el "Click" Event de "BTN_Video":
	
	```wl
	// Save the video sequence currently broadcasted 
	// in the "CAM_Camera" control in the format of a 3-minute AVI
	ResVideoBck is boolean
	ResVideoBck = CAM_Camera.Capture("Temp.avi", viVideoCapture, 180)
	IF ResVideoBck = False THEN 
		Error(ErrorInfo())
	END
	
	// Select the file to create
	VideoFile is string = fSelect(fExeDir(), "Video", ...
		"Save as...", "AVI" + TAB + "*.avi", "avi", fselCreate + fselExist)
	
	// Renames the created AVI file
	IF VideoFile ~= "" THEN
		// Delete the temporary file
		fDelete("Temp.avi")
	ELSE
		// Renames and moves the generated file
		fRename("Temp.avi", ImageFile)
	END
	```


7. Escriba el siguiente código en el "Click" Event de "BTN_Stop":
	
	```wl
	// Displays the display or the backup of the video sequence
	ResStop is boolean 
	ResStop = CAM_Camera.Stop()
	// Displays an error message if a problem occurs
	IF ResStop = False THEN Error(ErrorInfo())
	```






