
## Página AWP sin UI
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000229"></a>
Bootstrap, Angular, React y Vue.JS son algunos de los frameworks más utilizados para crear páginas Web.

A partir de la versión 26, podrá utilizar fácilmente las páginas creadas con estos frameworks en un sitio WEBDEV. Puede aprovechar tanto la potencia de WEBDEV Application Server como su experiencia con estos frameworks.

WLanguage se comunica con el código que utiliza los frameworks mediante llamadas a procedimientos: 

- En la página AWP, puede utilizar procedimientos en código Navegador y Servidor. 

- Puede llamar a estos procedimientos WLanguage desde el código JS de la página HTML que utiliza los frameworks de terceros.




Esto significa que puede aprovechar toda la potencia de WLanguage en el servidor de aplicaciones. Además, puede utilizar los elementos existentes.

Para utilizar páginas creadas con Bootstrap, Angular, React y Vue.JS en un sitio WEBDEV, cree una página AWP sin UI. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Cómo proceder?
<a name="¿como_proceder_ELTTEXTE000253"></a>


### Principio
<a name="principio_ELTPARAGRAPHE000027"></a>

Para establecer una página AWP sin UI: 

- Cree una página AWP sin UI con los procedimientos WLanguage a utilizar. Si es necesario, especifique una URL para la prueba (mediante "GO"). 

- En la página externa, incluya la URL especificada en el editor: 
	
	```txt
	<script src="/<Project name>_WEB/UK/<Page name>.awp"></script>
	```


- Llame a los procedimientos WLanguage desde la página externa. 




Para realizar una prueba desde WEBDEV: 

- Implemente el sitio HTML en localhost (como el sitio WEBDEV).

- Inicie la prueba ("GO") desde el editor. 




Para la implementación, publique el sitio HTML y el sitio WEBDEV en el mismo servidor IIS. 


### Crear una página AWP sin UI
<a name="crear_una_pagina_awp_sin_ELTPARAGRAPHE000045"></a>

Para crear una página AWP sin UI:   

1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_nouveau.gif) en los botones de acceso rápido. 

2. La ventana de creación de nuevos elementos se abre: haga clic en "Página", y luego en "Página". 

3. El asistente de creación de páginas se abre automáticamente.

4. Seleccione el tipo de página "En blanco" y valide. 

5. Defina el nombre de la página y valide. 

6. Abra la ventana de descripción de la página (Alt + Entrar). 

7. En la pestaña "General": 

	- En "Tipo de página", seleccione "AWP sin UI". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Page_AWP_Sans_UI%20-%20HC%20N%B0001.gif)


	- Si es necesario, en la sección "URL de la prueba (GO)", especifique la URL de la página externa que se abrirá en el navegador durante la prueba. 

8. Valide. La página aparece en el editor: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Page_AWP_Sans_UI%20-%20HC%20N%B0003.gif&type=thumb)





Esta página contendrá los diferentes procedimientos WLanguage a utilizar.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Ejemplo práctico con React
<a name="ejemplo_practico_con_react_ELTTEXTE000283"></a>


### Condición previa
<a name="condicion_previa_ELTPARAGRAPHE000073"></a>

Para esta documentación, utilizaremos un entorno estándar para un desarrollador de React, basado en NPM y el paquete create-react-app.




### Página AWP sin UI
<a name="pagina_awp_sin_ELTPARAGRAPHE000079"></a>

En un proyecto WEBDEV en blanco, cree una página AWP sin UI: 

1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_nouveau.gif) en los botones de acceso rápido. 

2. La ventana de creación de nuevos elementos se abre: haga clic en "Página", y luego en "Página". 

3. El asistente de creación de páginas se abre automáticamente.

4. Seleccione el tipo de página "En blanco" y valide. 

5. Defina el nombre de la página y valide. 

6. Abra la ventana de descripción de la página (Alt + Entrar). 

7. En la pestaña "General": 

	- En "Tipo de página", seleccione el modo "AWP sin UI".

	- En la sección "URL de la prueba (GO)", especifique la ubicación del archivo "index.html" que será generado por React (después de la compilación). Por ejemplo: http://localhost:8026/woui/index.html




8. Valide. 




Observación: React genera los archivos a implementar en una carpeta "/build". Todo el contenido de esta carpeta debe copiarse en el directorio de implementación de WEBDEV para la prueba.


### Código de la página AWP sin UI
<a name="codigo_pagina_awp_sin_ELTPARAGRAPHE000100"></a>

React solo puede acceder a los procedimientos Navegador de la página AWP. Por lo tanto, se debe llamar a los códigos Servidor desde un código Navegador. Para el ejemplo, la página AWP contiene un procedimiento Navegador local a la página:

```wl
PROCEDURE GetDate()
sCitizenDate is string
sCitizenDate = AJAXExecute(ajaxStraightCall, GetCitizenDate)
RESULT sCitizenDate
```
Este procedimiento devuelve una cadena que contiene el nombre del día en el calendario republicano francés, por ejemplo:

```txt
3 Frimaire of the year CCXXIX
Day of the Chicory
```


GetCitizenDate() es un procedimiento global (servidor) de tipo Ajax. Debe ser
un procedimiento Ajax.


### Aplicación React
<a name="aplicacion_react_ELTPARAGRAPHE000113"></a>

La aplicación React se crea en una carpeta diferente a la del proyecto WEBDEV, a través de Node.js y el paquete create-react-app: 

```txt
npx create-react-app my-app
cd my-app
npm start
```
donde my-app es el nombre de la aplicación React. 

React utiliza un "live server" para la prueba. En este punto, la aplicación React se puede ver en la siguiente URL:

```txt
http://localhost:3000
```


Es importante tener en cuenta que este servidor debe ser diferente al que utiliza WEBDEV.

La aplicación React utiliza un archivo "index.html" ubicado en la carpeta "/public/" como punto de partida. El script que integra la página AWP del proyecto debe estar ubicado en este archivo: 

```txt
<script src="/AWPTEST1_WEB/FR/PageSUI.awp"></script>
```
Esta línea debe incluirse en el HEAD de la página "index.html". Por ejemplo, justo debajo de TITLE: 

```txt
<title>React App</title>
<script src="/AWPTEST1_WEB/FR/PageSUI.awp"></script>
</head>
```


El código WEBDEV se llama desde el código JavaScript de los diferentes componentes de la aplicación React.


### Archivo App.js
<a name="archivo_appjs_ELTPARAGRAPHE000136"></a>

App.js es el archivo principal de la aplicación React, y el único componente (en términos de React) de la aplicación en este ejemplo. Se encuentra en la carpeta "/src".

Para llamar a los procedimientos WLanguage desde un componente de React, preceda el nombre de la función con "window.MyPage" (conserve las mayúsculas y minúsculas).

En nuestro ejemplo, este es el código de la función a incluir en el archivo App.js para llamar al procedimiento GetDate() de la página AWP sin UI.

```txt
const displayCitizenDate = () => {
alert(window.MyPage.GetDate())
}
```
Para llamar a esta función, agregaremos un botón en el componente React.

```txt
<button onClick={displayCitizenDate}>Call AWP without UI</button>
```


El código completo del archivo App.js es el siguiente: 

```txt
import logo from './logo.svg';
import './App.css';
const displayCitizenDate = () => {
alert(window.MyPage.GetDate())
}
function App() {
return (
<div className="App">
<header className="App-header">
<img src={logo} className="App-logo" alt="logo" />
<p>Edit src/App.js and save to reload...</p>
<a className="App-link"
href="https://reactjs.org"
target="_blank"
rel="noopener noreferrer">
Learn React. </a>
<button onClick={displayCitizenDate}>Call AWP without UI</button>
</header>
</div>
);
}
export default App;
```



### Crear la aplicación React a implementar
<a name="crear_aplicacion_react_implementar_ELTPARAGRAPHE000154"></a>

Para obtener una carpeta a implementar, utilice el siguiente comando NPM: 

```txt
npm run build
```


Debe modificar el archivo package.json previamente para especificar la URL de implementación. Package.json es el archivo JSON utilizado para configurar la aplicación. Antes de la implementación, debe indicar la URL de implementación en este archivo.

Para ello, agregue la información "homepage" justo debajo de la línea "private": 

```txt
{
"name": "my-app",
"version": "0.1.0",
"private": true,
"homepage": "http://localhost:8026/woui",
```


El comando **npm run build** genera la versión que se va a implementar de la aplicación React.

Esta etapa creará una carpeta /build/ que se implementará en la URL especificada en la página AWP:

```txt
http://localhost:8026/woui/
```



### Volver al editor de WEBDEV
<a name="volver_editor_webdev_ELTPARAGRAPHE000173"></a>

Ahora puede probar la página AWP sin UI desde WEBDEV a través del botón ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_Go_Page_bl.gif).


### Posibles mejoras
<a name="posibles_mejoras_ELTPARAGRAPHE000180"></a>

Para facilitar las pruebas, el desarrollador de React puede definir un script específico de React a utilizar en lugar de **npm run build**. Por ejemplo, un script que copie automáticamente la carpeta /build generada en la carpeta de implementación utilizada por WEBDEV.


