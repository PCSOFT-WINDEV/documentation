
## Ventanas de widgets Android
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000200"></a>
Una aplicación Android puede contener una o varias ventanas Widget. Estas ventanas pueden mostrarse en la pantalla de inicio de una tableta o teléfono. 

La información que aparece en estas ventanas se actualiza periódicamente. Las ventanas de widgets permiten interacciones sencillas con el usuario. 
<a name="NOTE1_2"></a>


### Creación de una ventana del widget Android
<a name="creacion_una_ventana_del_widget_android_ELTPARAGRAPHE000016"></a>

Para crear una ventana del widget Android: 

1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_nouveau.gif) en los botones de acceso rápido: 

	- La ventana de creación de nuevos elementos se abre: haga clic en "Ventana", y luego en "Ventana". 

	- El asistente de creación de ventanas se abre.




2. En la pestaña "Estándar", en el área "Otra plataforma", seleccione "En blanco para widget" y valide.

3. Una nueva ventana se crea en el editor. Sólo hay 3 tipos de controles disponibles en las ventanas de widgets: [Controles Botón](../WDChamp/1013076.md), [Controles estáticos](../WDChamp/1013179.md) y [controles Imagen](../WDChamp/1013218.md).
	Atención: Los estilos definidos para los controles de un widget en modo de edición se ignorarán en tiempo de ejecución. Sólo puede set el fondo Color de los controles y el fondo Image de los controles Botón.




**Observación**: También puede cambiar el tipo de una ventana existente: 

1. Abra la descripción de la ventana (opción "Descripción" del menú contextual). 

2. En la pestaña "IU", seleccione "Widget (Android/iOS14+)". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Fen%EAtre_android_Widget%20-%20HC%20N%B0001.gif)


3. Validar. 




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Características de una ventana del widget Android
<a name="caracteristicas_una_ventana_del_widget_android_ELTTEXTE000230"></a>


### Tamaño de la ventana widget
<a name="tamano_ventana_widget_ELTPARAGRAPHE000052"></a>

El tamaño de una ventana widget depende del número de celdas que ocupa horizontal y verticalmente. Este tamaño puede configurarse en la pestaña "UI" de la ventana de descripción: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Fen%EAtre_android_Widget%20-%20HC%20N%B0003%202.gif)


El tamaño de una celda es set a 74 píxeles por el lado (para un dpi de 160). 

Para una pantalla compatible con la mayoría de los dispositivos (teléfonos y tabletas), el tamaño máximo no debe exceder las 4 x 4 celdas.. 

**Observación**: Los widgets creados con WINDEV Mobile no se pueden redimensionar. 


### Actualizar el contenido
<a name="actualizar_contenido_ELTPARAGRAPHE000064"></a>

Las ventanas de tipo widget incluyen un evento específico: Actualizar el widget. Este evento actualiza el contenido del widget. Este evento se ejecuta a intervalos de tiempo regulares. La frecuencia de actualización se define en la pestaña "UI" de la ventana de descripción. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Fen%EAtre_android_Widget%20-%20HC%20N%B0003%201.gif)


Observaciones: 

- Esta frecuencia de actualización no puede ser inferior a 30 minutos. 

- La función [WidgetDisplay](../WDLang3/1000020647.md) vuelve a mostrar el widget y ejecuta el evento "Actualización del widget". 





### Volver a mostrar la ventana widget
<a name="volver_mostrar_ventana_widget_ELTPARAGRAPHE000078"></a>

El proceso que gestiona la pantalla de inicio del dispositivo muestra la ventana widget. Esta visualización no siempre se realiza. Se actualiza en los siguientes casos: 

- Cuando se agrega una instancia del widget a la pantalla de inicio. 

- Cuando se pulsa un botón o una imagen del widget. 

- Cuando se actualiza el contenido del widget. 




**Observación**: La función [WidgetDisplay](../WDLang3/1000020647.md) vuelve a mostrar el widget y ejecuta el evento "Actualización del widget". 


### Widget Image
<a name="widget_image_ELTPARAGRAPHE000092"></a>

Al instalar un widget en el escritorio, los usuarios pueden ver la lista de widgets en sus equipos. Esta lista contiene, para cada widget, el nombre del widget y la vista previa Image. 

La imagen de previsualización del widget se define en la pestaña "UI" de la ventana description. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Fen%EAtre_android_Widget%20-%20HC%20N%B0003%203.gif)


Usted puede: 

- proporcionar una Image específica . 

- genere una captura de pantalla de la ventana. En este caso, la captura de pantalla es automáticamente associated con la vista previa Image. 




Si no se especifica ningún Image, se utilizará automáticamente el Icon de la aplicación Android. 

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Programación de una ventana de widgets Android
<a name="programacion_una_ventana_widgets_android_ELTTEXTE000272"></a>


### Abrir una ventana widget
<a name="abrir_una_ventana_widget_ELTPARAGRAPHE000111"></a>

No puede abrir una ventana de tipo widget directamente. Las funciones de apertura ([OpenSister](../WDLang1/3038045.md), [OpenChild](../WDLang1/3038021.md), [aprovechamiento](../WDLang1/3038044.md)) provocarán un error fatal si se utilizan en modo widget. 

Las ventanas de tipo widget se abren automáticamente en los siguientes casos: 

- Cuando la primera instancia del widget que corresponde a la ventana se agrega a la pantalla de inicio.

- Después de iniciar el dispositivo, si al menos una instancia del widget está presente en la pantalla de inicio.

- Cuando se actualiza el widget o cuando el usuario interactúa con él (pulsa un botón, por ejemplo). 

- Si el sistema detuvo el proceso (si necesita recursos, por ejemplo). 




Los siguientes eventos se ejecutan cuando se abre una ventana de tipo widget: 

- "Declaraciones globales" de la ventana.

- Evento "Inicialización" de los controles. 

- Evento "Inicialización" de la ventana. 

- "Actualización del widget". 




El evento "Inicialización" del proyecto solo se ejecutará antes de que se abra la primera ventana de tipo widget de la aplicación. Para diferenciar el código específico del widget del código específico de la aplicación en este evento, utilice la función [InWidgetMode](../WDLang1/1000020649.md).


### Cerrar una ventana widget
<a name="cerrar_una_ventana_widget_ELTPARAGRAPHE000144"></a>

No puede cerrar directamente una ventana de tipo widget. La función [Cerrar](../WDLang1/3038018.md) provocará un error fatal si se utiliza en modo widget. 

Las ventanas de tipo widget se cierran automáticamente cuando se quita la última instancia del widget de la pantalla de inicio. El evento "Cierre" de la ventana se ejecuta cuando se cierra una ventana de tipo widget.

El evento "Cierre" del proyecto se ejecutará cuando se elimine la última instancia de un widget de la aplicación de la pantalla de inicio y no se muestren más instancias de otros widgets.


