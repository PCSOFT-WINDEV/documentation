
## Conector Nativo PostgreSQL: Características y observaciones específicas
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000296"></a>
Los siguientes párrafos presentan los principales aspectos y características específicas del Conector Nativo PostgreSQL.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principales observaciones
<a name="principales_observaciones_ELTTEXTE000320"></a>


### Versiones necesarias
<a name="versiones_necesarias_ELTPARAGRAPHE000018"></a>

**Atención**: Esta versión del Conector Nativo PostgreSQL funciona con:

- WINDEV 28 o WEBDEV 28.

- PostgreSQL a partir de la versión 7.4 (las pruebas se han realizado con las versiones 8.3.6 y 9.1.3).



<a name="NOTE2_2"></a>


### Uso de los comandos de WLanguage en las consultas SQL
<a name="uso_los_comandos_wlanguage_las_consultas_sql_ELTPARAGRAPHE000032"></a>

Los comandos de WLanguage no pueden utilizarse en las consultas SQL. 
<a name="NOTE2_3"></a>


### Gestión de archivos de gran tamaño
<a name="gestion_archivos_gran_tamano_ELTPARAGRAPHE000039"></a>

Cuando se manejan archivos grandes, todos los registros se cargan en la memoria. Para reducir el uso de la memoria, se recomienda:

- utilizar un filtro ([HFilter](../WDLang4/3044100.md)) antes de inicializar una iteración ([HReadFirst](../WDLang4/3044051.md) / [HReadLast](../WDLang4/3044140.md), ...).

- utilizar consultas cuyas condiciones de selección sean suficientemente selectivas.

- evitar realizar búsquedas.



<a name="NOTE2_4"></a>


### Soporte para Unicode con las funciones HFSQL
<a name="soporte_para_unicode_con_las_funciones_hfsql_ELTPARAGRAPHE000059"></a>

Para utilizar cadenas Unicode, el juego de caracteres "UTF8" debe especificarse al crear la base de datos PostgreSQL.. En este caso, todas las cadenas serán cadenas Unicode.

**Cuando la conexión soporta Unicode (modo predeterminado),** los elementos de texto de las consultas ejecutadas con la constante *hQueryWithoutCorrection* adoptan el formato Unicode. Si se asigna una cadena Unicode a una cadena ANSI, WINDEV y WEBDEV realizan la conversión automáticamente utilizando el carácter set definido en [ChangeCharset](../WDLang1/3054001.md).

**Atención**: [ChangeCharset](../WDLang1/3054001.md) debe utilizarse ANTES de abrir la conexión. La conexión debe cerrarse y volver a abrirse después de cada llamada a [ChangeCharset](../WDLang1/3054001.md) para que los datos se conviertan correctamente en el carácter especificado set.

**Si la conexión es ANSI** (opción "WD Unicode Support = 0" en la información especificada con las funciones [HDescribeConnection](../WDLang4/3044205.md) o [HOpenConnection](../WDLang4/3044107.md)), los elementos de texto de las consultas ejecutadas con la constante *hQueryWithoutCorrection* adoptan el formato ANSI.

Para más detalles sobre las conexiones Unicode o ANSI, consulte [Programación de una base de datos PostgreSQL con las funciones HFSQL](../WDPostgreSQL/5518003.md).
<a name="NOTE2_5"></a>


### Gestión de juegos de caracteres con las funciones SQL
<a name="gestion_juegos_caracteres_con_las_funciones_sql_ELTPARAGRAPHE000092"></a>

Todos los intercambios se realizan en el personaje actual set (charset). Se produce un error durante la conexión si el servidor no soporta las conversiones desde o hacia el carácter actual set.

En este caso, hay que utilizar [ChangeCharset](../WDLang1/3054001.md) antes de [SQLConnect](../WDLang4/3072005.md) para seleccionar un carácter set compatible con el servidor.
<a name="NOTE2_6"></a>


### certificados SSL
<a name="certificados_ssl_ELTPARAGRAPHE000109"></a>

El conector nativo PostgreSQL soporta las conexiones que usan certificados SSL. 

Para apoyar las conexiones que utilizan certificados SSL: 

1. **En el servidor**: Usar un servidor PostgreSQL que soporte las conexiones SSL. Vea la documentación de PostgreSQL para saber cómo generar los archivos SSL Certificate y cómo configurar el servidor para que sólo permita las conexiones SSL. 

2. **En el ordenador cliente**: Usar una capa de cliente PostgreSQL compilada con el soporte para conexiones SSL. 

3. Por defecto, la capa de cliente PostgreSQL encontrará los archivos SSL Certificate en el directorio: APPDATA%\\postgresql. Por ejemplo: "C:\\Usuarios\\Florence\\appData\\roaming\\postgresql". Usted tiene la capacidad de renombrar y colocar estos archivos en diferentes directorios especificando sus ubicaciones en la cadena de conexión a través de las palabras clave: SSL Cret, SSL Key, SSL CA. 

4. Utilice las palabras clave correspondientes a las opciones SSL en la información de conexión. Las palabras clave reconocidas son: 

	- clave SSL

	- Certificado SSL

	- SSL CA

	- CRL SSL

	- Modo SSL







Estos parámetros corresponden a los parámetros del mismo nombre que se encuentran en **PQconnectdb**. 

Observación: Por Default, el Conector Nativo intenta abrir una conexión SSL y luego una conexión no SSL en caso de fallo. 
Para comprobar el modo de apertura de la conexión, añada la palabra clave "Modo SSL" a la información ampliada de la conexión, seguida del modo deseado.

Ejemplo de información ampliada para utilizar los certificados de Default : Los archivos postgresql.crt, postgresql.key, Root.crt se encuentran en el directorio %APPDATA%\\postgresql: 


```txt
Server Port=5432;SSL Mode = verify-full
```


Ejemplo de información extendida para utilizar certificados renombrados:


```txt
Server Port=5432; 
SSL CA = C:\Certificats SSL\CA.crt ; 
SSL Cert = C:\Certificats SSL\my.crt ; 
SSL Key = C:\Certificats SSL\my.key ; 
SSL Mode = verify-full
```


Para obtener más información, consulte [Información opcional de conexión](../WDLang4/9000124.md). 

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Principales características específicas
<a name="principales_caracteristicas_especificas_ELTTEXTE000374"></a>


### Bloqueo de registros
<a name="bloqueo_registros_ELTPARAGRAPHE000150"></a>

Las opciones de bloqueo (***hLockWrite*** y ***hLockReadWrite*** constantes) que se pueden utilizar con las funciones HFSQL no son compatibles. De hecho, las operaciones de bloqueo son relacionado a las transacciones. Un bloqueo sólo puede ser eliminado una vez que la transacción se ha completado, y no puede haber un bloqueo sin una transacción.  
<a name="NOTE3_2"></a>


### Registros idénticos
<a name="registros_identicos_ELTPARAGRAPHE000157"></a>

El Native PostgreSQL Connector no puede diferenciar entre dos registros idénticos (es decir, con valores idénticos para todos los elementos, excluyendo los elementos memo).

Cuando se modifica o elimina una Record, se modifican o eliminan todas las Record idénticas.
<a name="NOTE3_3"></a>


### Campos de tipo Array
<a name="campos_tipo_array_ELTPARAGRAPHE000166"></a>

Los artículos de Array no están soportados por el Conector Nativo. Si está utilizando un elemento array, sólo el valor del índice 1 en la array será manejado por las funciones HFSQL (lectura/escritura).
<a name="NOTE3_4"></a>


### Partial indexación de memos e indexación de texto completo
<a name="partial_indexacion_memos_indexacion_texto_completo_ELTPARAGRAPHE000173"></a>

La indexación de los memorandos de Partial, así como la indexación del texto completo no se tienen en cuenta:

- al importar tablas PostgreSQL al análisis.

- cuando se utiliza [HCreation](../WDLang4/3044255.md).




Si estas funcionalidades se definen en el análisis, se tendrán en cuenta solo al ejecutar las consultas SQL (con la constante *hQueryWithoutCorrection*).
<a name="NOTE3_5"></a>


### Consultas anidadas
<a name="consultas_anidadas_ELTPARAGRAPHE000188"></a>

La corrección de consultas anidadas no está soportada en esta versión de Native PostgreSQL Connector. Sin embargo, se puede utilizar la constante *hQueryWithoutCorrection*.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Características específicas para las funciones HFSQL y SQL
<a name="caracteristicas_especificas_para_las_funciones_hfsql_sql_ELTTEXTE000422"></a>
Las características específicas para usar las funciones HFSQL y SQL con el conector PostgreSQL nativo son las siguientes:

| Características específicas | Funciones afectadas |
| --- | --- |
| Consulta multiarchivo: <br>Las funciones **HAdd**, **HModify** y **HDelete** no están soportadas. | [HAdd](../WDLang4/3044147.md)<br>[HModify](../WDLang4/3044042.md)<br>[HDelete](../WDLang4/3044018.md) |


<a name="NOTE4_2"></a>


### Gestión de los identificadores de automatic
<a name="gestion_los_identificadores_automatic_ELTPARAGRAPHE000220"></a>

La gestión de las constantes *hForceIdAuto* y *hSetIdAuto* es idéntica a la gestión realizada por le motor HFSQL.

Para restablecer el valor inicial de la secuencia de un identificador automático después de llamar a [HAdd](../WDLang4/3044147.md) con la constante *hForceIDAuto*, ejecute la siguiente consulta con la constante *hQueryWithoutCorrection*:


```txt
ALTER SEQUENCE "<FileName>_<ItemName>_seq" 
RESTART WITH [ Start identifier ]
```


Ejemplo: Para que el próximo Identificador de automatic gestionado por PostgreSQL comience en 5, se debe utilizar la siguiente consulta:


```txt
ALTER SEQUENCE "MyFile_AutoID_seq" RESTART WITH 5
```

<a name="NOTE4_3"></a>


### Comandos SQL no soportados
<a name="comandos_sql_soportados_ELTPARAGRAPHE000238"></a>

Los siguientes comandos SQL no son compatibles con una fuente de datos PostgreSQL:

- ARRIBA

- LONGITUD_DE_CARÁCTER

- BIN

- OCT

- HEX

- LOG10

- PATINDEX

- LEFT(String, longitud)





