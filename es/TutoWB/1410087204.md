
## Lección 10.1. Optimizar un proyecto: auditorías
<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE000387"></a>


- ¿Qué es una auditoría y cuál es su propósito?

- Iniciar y analizar la auditoría estática.

- Iniciar y analizar la auditoría dinámica.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 20 min |

| [Lección anterior](../TutoWB/1410087509.md) | [Tabla de contenido](../TutoWB/1410087510.md) | [Siguiente lección](../TutoWB/1410087206.md) |
| --- | --- | --- |









<a name="NOTE2b"></a>
<a name="NOTE2b_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000434"></a>
Se ha completado la creación del sitio. Funciona correctamente y se implementará.

¿Alguna vez ha utilizado las herramientas de WEBDEV para optimizar sus sitios? WEBDEV ofrece una serie de herramientas y funcionalidades que le ayudan a optimizar rápidamente un sitio web y a evitar errores graves.

Esta parte presenta estas herramientas y su uso: 

- auditorías (en esta lección). Las auditorías estáticas y dinámicas analizan el código para detectar posibles problemas. 

- analizador de rendimiento (en la segunda lección de esta parte). 




¡Hemos preparado un proyecto para ayudare a comprender y utilizar mejor estas herramientas!
<a name="NOTE2b_2"></a>


### Abrir un proyecto
<a name="abrir_proyecto_ELTPARAGRAPHE000041"></a>

- Abra el proyecto "WW_Optimization".

	1. Abra WEBDEV 28.

	2. Vaya a la página de inicio de WEBDEV si es necesario (Ctrl + &lt;).

	3. Haga clic en "Tutorial" y, luego en "Part 10 - Optimize a project", haga doble clic en "Optimize a project - Exercise".







<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Qué es una auditoría?
<a name="¿que_una_auditoria_ELTTEXTE000464"></a>
Las auditorías proporcionan un conjunto de funcionalidades para mejorar automáticamente la calidad y el rendimiento del proyecto, y para supervisar las condiciones en las que se ejecuta.

Hay dos tipos de auditorías disponibles:

- **La auditoría estática**. La auditoría estática analiza un proyecto y sus elementos. Esta auditoría se realiza desde el editor del proyecto.

- **La auditoría dinámica**. La auditoría dinámica analiza el comportamiento de un proyecto durante su ejecución. Esta auditoría puede realizarse en modo de prueba o en el entorno de producción.




Vamos a probar estas auditorías en el proyecto "WW_Optimization".

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Auditoría estática
<a name="auditoria_estatica_ELTTEXTE000488"></a>
La auditoría estática es una funcionalidad del entorno que permite analizar el código fuente de un proyecto con el fin de detectar diferentes problemas y proponer mejoras.



- Para iniciar la auditoría estática del proyecto "WW_Optimization":

	1. En la cinta de opciones, vaya a la pestaña "Proyecto", grupo "Auditoría y rendimiento", despliegue "Auditoría estática" y seleccione "Iniciar auditoría estática".

	2. El asistente se abre. Vamos a definir el objetivo de la auditoría estática.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_Audit%20statique%20WB%20-%20HC%20N%B0002.jpg&type=thumb)


	3. Seleccione "Ejecutar auditoría estática en todo el proyecto".

4. Valide el asistente.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La auditoría estática del proyecto también puede iniciarse desde el cuadro de mando del proyecto, a través del widget "Auditoría estática y Compilación".<br><br>Para ello: <br><br>		- abra el widget si es necesario: <br><br>			- Cambie el cuadro de mando al modo de edición (haga clic derecho y seleccione "Modo de edición" en el menú contextual). <br><br>			- Agregue el widget (haga clic derecho y seleccione "Agregar .. Auditoría estática").<br><br>			- Salga del modo de edición (haga clic derecho y seleccione de nuevo "Modo de edición" en el menú contextual).<br><br><br><br><br>		- haga clic en la flecha.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_Audit%20statique%20WB%20-%20HC%20N%B0001.jpg)<br><br><br><br> |





5. El reporte de auditoría se abre: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_Audit%20statique%20WB%20-%20HC%20N%B0003.jpg&type=thumb)
La auditoría estática incluye:

	- La auditoría estática del proyecto.

	- La auditoría del contenido de la biblioteca de la aplicación.




- Veamos con más detalle los puntos presentados en el reporte.



<a name="NOTE3_2"></a>


### Procedimiento no ejecutado
<a name="procedimiento_ejecutado_ELTPARAGRAPHE000126"></a>

En nuestro proyecto, la auditoría indica que un procedimiento nunca se ejecuta.

En proyectos grandes, es posible que desee crear uno o varios procedimientos para realizar un proceso y que, tras una reorganización del código, el procedimiento ya no se utilice pero permanezca en el proyecto.

Los procedimientos no utilizados sobrecargan innecesariamente los recursos distribuidos a los usuarios finales.



- Para solucionar este problema:

	1. Haga clic en el botón [...] para obtener más información. La ventana que contiene la lista de código muerto se abre.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_Audit%20statique%20WB%20-%20HC%20N%B0004.jpg&type=thumb)


	2. Nunca se llama al procedimiento "ObsoleteProcedure". Esta ventana permite:

	- especificar que el procedimiento se sigue utilizando (botón "Marcar como útil"). En este caso, el procedimiento no se volverá a tener en cuenta en la auditoría.

	- eliminar el procedimiento si no se utiliza (botón "Eliminar").

	- ver el procedimiento (botón "Ver").

	- buscar usos en las cadenas (botón "Buscar").




- En la ventana de auditoría estática, haga clic en el botón "Actualizar" para actualizar el reporte de auditoría.



<a name="NOTE3_3"></a>


### Elemento huérfano
<a name="elemento_huerfano_ELTPARAGRAPHE000182"></a>

La auditoría indica que nuestro proyecto contiene un elemento huérfano.

Al igual que con los procedimientos, puede que se creen ventanas o reportes para realizar una prueba rápida, y luego se guarden y se olviden. La presencia de elementos huérfanos en el ejecutable consume de manera innecesaria los recursos distribuidos a los usuarios finales.



- Para solucionar este problema:

	1. Haga clic en el botón [...] para obtener más información. La ventana que muestra los elementos huérfanos se abre.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_Audit%20statique%20WB%20-%20HC%20N%B0005.jpg&type=thumb)


	2. Nunca se llama a la página "PAGE_Unused_Page". La ventana que muestra la lista de elementos huérfanos permite:

	- especificar que el elemento se sigue utilizando (botón "Marcar como útil"). En este caso, la página no se seguirá teniendo en cuenta en la auditoría. Esta opción puede ser útil cuando se utiliza una página de prueba específica para un proyecto de desarrollo, por ejemplo.

	- eliminar la página si no se utiliza (botón "Eliminar").

	- ver la página (botón "Ver").

	- buscar usos en las cadenas (botón "Buscar").




- En la ventana de auditoría estática, haga clic en el botón "Actualizar" para actualizar el reporte de auditoría.



<a name="NOTE3_4"></a>


### Limpiar el proyecto
<a name="limpiar_proyecto_ELTPARAGRAPHE000235"></a>

Nuestro proyecto contiene varios archivos que no se utilizan. Puede limpiar el proyecto para conservar solo los elementos necesarios. Esto impide que la instalación cliente se sobrecargue con archivos no utilizados: imágenes, archivos externos, etc.



- Para solucionar este problema:

	1. Haga clic en el botón [...] para obtener más información.

	2. El asistente de limpieza del proyecto se abre. Este asistente muestra los archivos no utilizados que se pueden eliminar.

	3. Pase a la etapa siguiente.

	4. Seleccione el tipo de limpieza. Es posible:

		- crear un archivo zip con los archivos no utilizados.

		- mover los archivos no utilizados a un directorio específico.




5. Valide la opción propuesta de forma predeterminada y vaya a la etapa siguiente.

6. Finalice el asistente.






- El proyecto se ha optimizado siguiendo todos los consejos de la auditoría estática. La auditoría estática permite obtener el estado general del código fuente del proyecto. Nuestro consejo: ¡realícela de forma regular!




Veamos qué ocurre en tiempo de ejecución cuando se inicia la auditoría dinámica.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Auditoría dinámica
<a name="auditoria_dinamica_ELTTEXTE000548"></a>
La auditoría dinámica permite analizar la ejecución de la aplicación. La auditoría detecta problemas como:

- Consumo excesivo de la memoria,

- Lentitud de los algoritmos utilizados,

- Errores "ocultos" en tiempo de ejecución,

- ...


Una auditoría dinámica puede realizarse en un entorno de pruebas o en una aplicación real.

El proyecto "WW_Optimization" contiene una página específica que desencadena errores que pueden ser detectados por la auditoría dinámica.

Vamos a iniciar la auditoría dinámica y la prueba del proyecto al mismo tiempo.



- Para iniciar la auditoría dinámica del proyecto "WW_Optimization":

	1. En la cinta de opciones, en la pestaña "Proyecto", en el grupo "Modo de prueba", despliegue "Modo de prueba" y seleccione "Depurar proyecto con la auditoría activada". La prueba del proyecto inicia.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La auditoría dinámica del proyecto también puede iniciarse desde el cuadro de mando del proyecto, a través del widget "Auditoría dinámica". Para ello:<br><br>		- active el widget si es necesario (haga clic en el enlace "Haga clic para reactivar").<br><br>		- despliegue la flecha y seleccione "Prueba detallada del proyecto (Go)".<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_WB%20Audit%20dynamique%20-%20HC%20N%B0001.jpg)<br><br><br><br>Observación: La auditoría dinámica se ejecuta cada vez que se prueba el proyecto. Un reporte se muestra automáticamente en el cuadro de mando:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_WB%20Audit%20dynamique%20-%20HC%20N%B0002.jpg)<br> |





	2. Haga clic en "PÁGINA DE PRUEBA DE LA AUDITORÍA DINÁMICA".

	3. Haga clic en los diferentes botones de la página. 

		- Al final de cada proceso, se muestra un mensaje toast para indicar que el proceso ha terminado.
						Observación: Espere a que se muestre el toast antes de hacer clic en otro botón.

		- Para la opción "Aserción  y Excepción", se muestra una aserción: haga clic en "Continuar" para ver el mensaje como un toast.




4. Detenga la prueba de sitio.

5. La ventana del reporte de la auditoría dinámica se abre.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_WB%20Audit%20dynamique%20-%20HC%20N%B0003.jpg&type=thumb)




- Analicemos esta ventana:

	- La parte superior de la ventana le permite elegir las opciones de visualización de los datos. Es posible:

		- seleccionar una visualización cronológica (basada en el orden en que ocurrieron los eventos), o una visualización general para agrupar los diferentes tipos de problemas. Cuando los datos se muestran en orden cronológico, una línea de tiempo muestra la posición y la importancia de los problemas.

		- seleccionar el tipo de problema que se mostrará (error, aserción, etc.). Esto le permite centrarse en los errores más graves, etc.




- La parte inferior de la ventana muestra los diferentes eventos que ocurrieron y que pueden causar problemas en la aplicación.




- En este ejemplo, la auditoría dinámica detecta varios problemas:

	- Una instrucción SWITCH para la que no se ejecuta la instrucción CASE,

	- Una aserción desencadenada,

	- Una excepción desencadenada,

	- La asignación de un archivo de imagen que no existe a un control Imagen.


 Por cada problema, un botón "... " permite acceder a los detalles del evento. Si el evento está relacionado con una línea de código específica, el botón ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P10_WB%20Audit%20dynamique%20-%20HC%20N%B0003%201.jpg) le permite abrir el editor de código directamente en el lugar correspondiente para solucionar el problema.




- Cierre la ventana de la auditoría dinámica.


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La auditoría dinámica de un proyecto también se puede realizar cuando se implementa el sitio.<br><br>Solo tiene que llamar a la función [dbgEnableAudit](../WDLang1/1000018835.md) para activar la auditoría dinámica.<br>La auditoría genera un archivo ".wdaudit", este archivo debe cargarse en el entorno de desarrollo para analizar el resultado.<br><br>Para obtener más información, consulte [Auditoría dinámica](../Editeurs/1014502.md). |





| [Lección anterior](../TutoWB/1410087509.md) | [Tabla de contenido](../TutoWB/1410087510.md) | [Siguiente lección](../TutoWB/1410087206.md) |
| --- | --- | --- |




