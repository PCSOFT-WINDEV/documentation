
## Lección 1.3. Crear las páginas


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE000767"></a>


- Crear una página de formulario.

- Guardar datos.

- Controlar la entrada de datos.

- Realizar una búsqueda simple en una base de datos.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 30 min |

| [Lección anterior](../TutoWB/1410087405.md) | [Tabla de contenido](../TutoWB/1410087510.md) | [Siguiente lección](../TutoWB/1410087411.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000814"></a>
Para desarrollar con WEBDEV, vamos a comenzar creando algunas páginas.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Las páginas muestran información y permiten a los usuarios introducir datos. Los usuarios pueden interactuar directamente con las páginas mediante controles, botones, etc. |



Estos ejemplos le permitirán entender el modo de funcionamiento de los sitios de Internet e Intranet, y le permitirán manipular su primera base de datos.


### Abrir un proyecto
<a name="abrir_proyecto_ELTPARAGRAPHE000034"></a>

- Abra WEBDEV 28. 




- Abra el proyecto "My_First_Pages". 

	1. Vaya a la página de inicio de WEBDEV (Ctrl +&lt;). 

	2. Haga clic en "Tutorial", y luego en "Part 1 - Lesson 1.3 - My first pages", haga doble clic en "My first pages - Exercise".





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=avertissement.png) | ¡Importante! | En esta parte, nos centraremos en cómo crear páginas simples. "My_first_pages" es un proyecto vacío que se creó previamente.<br><br>En otra lección, veremos cómo crear un proyecto. |




|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=exemple-WB.png) | Corregido | Hay un proyecto completado disponible. Este proyecto contiene las diferentes páginas creadas en esta lección. Para abrir el proyecto completado, vaya a la página de inicio de WEBDEV y haga clic en "Tutorial", luego en "Part 1 - Lesson 1.3 - My first pages", haga doble clic en "My first pages - Answers". |





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Crear una página de formulario
<a name="crear_una_pagina_formulario_ELTTEXTE000898"></a>
Vamos a crear un formulario de registro. Este formulario contendrá diferentes controles para introducir información personal. 


### Crear la página
<a name="crear_pagina_ELTPARAGRAPHE000063"></a>

- Para crear la página:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Cr%E9er_WB_GAF.jpg) en los botones de acceso rápido. <br>![Botón de creación (botones de acceso rápido)](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20pages%20-%20Nouvelle_page%20-%20HC%20N%B0001.jpg)


	2. La ventana de creación de nuevos elementos se abre. Esta ventana permite crear los elementos del proyecto.

3. Haga clic en "Página", y luego en "Página". El asistente de creación de páginas se abre automáticamente.

4. Seleccione "En blanco". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20pages%20-%20Nouvelle_page%20-%20HC%20N%B0002.jpg&type=thumb)


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Por cada página creada en el editor, WEBDEV genera varios tipos de archivos:<br><br>- Un archivo "WWH" que contiene la descripción de la página para el editor de páginas. Este archivo se guarda en el directorio del proyecto.<br><br>- Un archivo "AWL" que corresponde a la descripción de la página para el motor WEBDEV en el subdirectorio EXE del proyecto.<br><br>- Un archivo "HTM" que contiene el código HTML y el código JavaScript de la página que se enviará al navegador. Este archivo se guarda en el subdirectorio "\\&lt;Nombre del proyecto&gt;_WEB\\XX" (un subdirectorio por idioma, por ejemplo "EN" para el inglés, "ES" para el español, etc.).<br><br><br> |






### Crear controles
<a name="crear_controles_ELTPARAGRAPHE000094"></a>

Vamos a crear los diferentes controles del formulario. Estos controles permitirán al usuario rellenar los datos necesarios para el registro.

El formulario incluirá los siguientes controles:

- Last name.

- First name.

- Address.

- Email.

- Username.

- Password.


Todos estos controles son controles Campo de entrada que permitirán a los usuarios introducir datos.

- Para crear un control Campo de entrada:

	1. En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_champ_saisie_WB_GAF.jpg). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0003%201.jpg)


	2. El control sigue el movimiento del cursor.

3. Haga clic dentro de la página en blanco para crear el control. El control se crea con controladores de tamaño y bordes alrededor para indicar que está seleccionado.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | ¿Desea crear un control? Vaya a la pestaña "Creación" de WEBDEV: en esta pestaña podrá acceder a todos los controles disponibles. |








- Para cambiar el título del control:

	1. Haga clic en el control (un solo clic): el texto pasa a modo de edición. Si prefiere utilizar el teclado, pulse la barra espaciadora o la tecla Entrar para editar el texto. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0004.jpg)


	2. Escriba "Last name" y presione Entrar para validar. El título cambia inmediatamente. El nombre del control también cambia: aparece en el tooltip al pasar el cursor sobre el control: EDT_Last_name. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0005.jpg)


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Analicemos el nombre sugerido por WEBDEV: comienza con las letras "EDT_". Este prefijo se agrega automáticamente porque el proyecto utiliza un estilo de código.<br><br>El estilo de código permite definir un prefijo para cada tipo de objeto, lo que le permite identificar rápidamente el elemento:<br><br>- una página comienza con "PAGE_" (lo vimos al guardar la página).<br><br>- un control Campo de entrada comienza con "EDT_".<br><br>- un botón comienza con "BTN_", etc.<br><br><br>Si no desea utilizar este estilo de código, puede desactivarlo: en la cinta de opciones, en la pestaña "Proyecto", en el grupo "Otras acciones", despliegue "Estilo de código" y deseleccione "Utilizar estilo de código". |







- Haga doble clic en el control para editar sus características. La ventana de descripción del control se abre: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0006.jpg&type=thumb)





- Vamos a establecer el tamaño máximo de entrada: introduzca el nuevo tamaño (30 en nuestro caso) en "Tamaño de entrada (caracteres)". También puede configurar otras características. Haga clic en "OK" para guardar los cambios.




- Ahora es su turno. Utilice el mismo método para crear los siguientes controles Campo de entrada, debajo del control "Last name": 
	

| Título | Tipo | Tamaño |
| --- | --- | --- |
| First name | Texto | 30 |
| Address | Texto multilínea |   |
| Email | Texto | 255 |
| Username | Texto | 10 |
| Password | Contraseña | 10 |




Como acabamos de ver, los anteriores controles no son del mismo tipo. Puede cambiar el tipo del control Campo de entrada en la ventana de descripción. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0007.jpg&type=thumb)
Hemos creado los principales elementos del formulario. Ahora vamos a mejorarlo.

Veamos la página que queremos obtener: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20Corrig%E9%20-%20HC%20N%B0001.jpg)


- El control Campo de entrada "Address" admite texto multilínea.

- Los diferentes controles Campo de entrada están alineados.

- Los controles "Username" y "Password" tienen un texto en rojo.





### Mejoras en la página
<a name="mejoras_pagina_ELTPARAGRAPHE000216"></a>

Vamos a hacer algunos cambios en la interfaz de esta página.

Primero, veamos el control "Address". Este control debe mostrar varias líneas. Vamos a agrandarlo.

Luego, vamos a alinear los controles de la página.

Por último, estableceremos el estilo de los controles "Username" y "Password".

- Para agrandar el control "Address":

	1. Haga clic en el control "Address".

	2. Los controladores de tamaño aparecen.

	3. Haga clic en el controlador inferior y arrástralo hacia abajo para ampliar el área.







- Así, puede aumentar el ancho de los diferentes controles en la página.




- Para alinear los controles de la página:

	1. Seleccione el control "Last name" y, a continuación, todos los controles Campo de entrada de la página (mantenga pulsada la tecla Ctrl y haga clic en los diferentes controles).
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Atención: elija cuidadosamente el primer control. Las opciones de alineación se basan en:<br><br>		- El tamaño del primer control seleccionado: se utilizará como referencia para el tamaño de los demás controles.<br><br>		- La posición del primer control seleccionado: todos los controles seleccionados se alinearán de acuerdo con el primer control seleccionado.<br><br><br> |





	2. Vaya a la pestaña "Alineación" del menú de WEBDEV. Esta pestaña contiene todas las opciones de alineación disponibles para los controles. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20Corrig%E9%20-%20HC%20N%B0002.jpg&type=thumb)


	3. Vamos a alinear los lados izquierdo y derecho de los controles. Haga clic en "Justificar (Int. y Ext.)".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Si no está seguro de qué alineación elegir, pase el cursor por encima de las opciones de la pestaña "Alineación". Cuando se pasa el cursor por encima de una opción, los controles seleccionados en la página se posicionan automáticamente de acuerdo con la opción por la que se pasa el cursor.<br><br>Para aplicar la alineación, haga clic en la opción deseada.<br><br>Si no desea elegir ninguna opción de alineación, simplemente haga clic dentro de la página: los controles vuelven a su posición inicial. |





4. Guarde la página: haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WB_GAF.jpg) en los botones de acceso rápido (o presione Ctrl + S).





### Definir el estilo de los controles "Username" y "Password"
<a name="definir_estilo_los_controles_username_password_ELTPARAGRAPHE000260"></a>

Para que el texto de los controles "Username" y "Password" se muestre en rojo, cambiaremos el estilo predeterminado de estos controles.



- Para cambiar el estilo perdeterminado:

	1. Seleccione el control "Username".

	2. Haga doble clic en el control para abrir la ventana de descripción.

	3. En la pestaña "Estilo" seleccione el elemento "Texto (CSS)".

	4. Despliegue las opciones de "Color" y seleccione el color rojo. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20Style%20-%20HC%20N%B0001.jpg&type=thumb)

			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Para reutilizar este estilo, agréguelo a la hoja de estilo del proyecto. Para ello:<br><br>		1. Haga clic en el botón "Agregar este estilo al proyecto" en la sección "Estilo WEBDEV" que se muestra al lado de la ventana de descripción.<br><br>		2. Defina un nombre para el estilo.<br><br>		3. Haga clic en "Agregar". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20Style%20-%20HC%20N%B0002.jpg)<br><br><br><br><br><br>Para reutilizar el nuevo estilo y aplicarlo a otro control:<br><br>		1. Seleccione el control al que desea aplicar el nuevo estilo.<br><br>		2. Haga clic derecho para abrir el menú contextual del control y seleccione la opción "Seleccionar un estilo WEBDEV".<br><br>		3. En la ventana que aparece, seleccione el estilo deseado y valide.<br><br><br>Nota: Veremos cómo elegir un estilo existente en la [lección 5](../TutoWB/1410087494.md). |





	5. Valide la ventana de descripción del control "Username".







- Para aplicar el mismo estilo al control "Password":

	1. Seleccione el control "Password".

	2. Presione F4.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La tecla F4 aplica la última acción a los controles seleccionados. En nuestro caso, el nuevo color se aplica automáticamente al control "Password". |





	3. Obtendrá la siguiente UI: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20Style%20-%20HC%20N%B0003.jpg)









### Piense en los dispositivos móviles
<a name="piense_los_dispositivos_moviles_ELTPARAGRAPHE000311"></a>

Los sitios Web deben funcionar tanto en PC como en dispositivos móviles: es una necesidad actual. Desde el principio, un sitio web debe estar diseñado para ser utilizado en dispositivos móviles. 

WEBDEV incluye diferentes layouts para simplificar el uso de sitios Web tanto en el PC como en dispositivos móviles. Al utilizar layouts, solo se adapta la interfaz de la página a los dispositivos móviles. El código no cambia. No es necesario utilizar dos páginas diferentes. El sitio web sigue siendo el mismo. 

Dado que estamos empezando, aún no utilizaremos layouts. Veremos este tema en la [parte 8, "Sitio web adaptado a dispositivos móviles"](../TutoWB/1410087416.md). 


### Prueba de la página
<a name="prueba_pagina_ELTPARAGRAPHE000323"></a>

- Pruebe la página (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Go_Page_WB_GAF.jpg) en los botones de acceso rápido). Puede introducir datos pero estos no se procesan ni se guardan.




- Cierre el navegador.




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Guardar datos en un archivo de datos
<a name="guardar_datos_archivo_datos_ELTTEXTE001084"></a>
Al crear un formulario, lo primero que hay que hacer es guardar los datos introducidos. Estos datos se pueden guardar en un archivo de texto, en un archivo XML o incluso en una base de datos.

En este caso, elegimos la última opción.

En WEBDEV, la base de datos se define en un editor específico, el editor de análisis. Veremos este editor en detalle en la siguiente parte del tutorial.

En este ejemplo, vamos a definir una base de datos y a vincularla con los controles que creamos anteriormente mediante un proceso muy sencillo: ingeniería inversa.


### Crear el archivo de datos
<a name="crear_archivo_datos_ELTPARAGRAPHE000345"></a>

- Para crear un archivo de datos automáticamente:

	1. En la cinta de opciones, en la pestaña "Página", en el grupo "Edición", despliegue "Otras acciones" y seleccione "Generar una descripción de archivo".

	2. Un nuevo editor aparece: el editor de análisis. El editor de análisis contiene la descripción de todos los archivos de datos que se utilizarán en el proyecto.

	3. El asistente de generación del archivo de datos se abre. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20pages%20-%20Analyse%20-%20HC%20N%B0001.jpg&type=thumb)


	4. El nombre del archivo de datos se rellena automáticamente con el nombre de la página. Vamos a modificar algunos elementos:

	- Introduzca "Registration" en el nombre.

	- Introduzca "Registration" en el título.

	- Introduzca "a registration" en el último campo.


No pasaremos más tiempo en el editor de análisis. Lo veremos en detalle en otra lección.


### Guardar datos
<a name="guardar_datos_ELTPARAGRAPHE000393"></a>

- Volvamos al formulario de registro para determinar cómo se guardarán los datos introducidos por el usuario en el archivo de datos. Las pestañas de documentos abiertos se encuentran en la parte superior del editor. Cada pestaña representa un documento abierto en el editor. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20pages%20-%20Analyse%20-%20HC%20N%B0005.jpg)


	- "P" representa el proyecto.

- "PAGE_Form" representa la página de formulario.




- Necesitamos un control Botón para guardar los datos del formulario. Este control permitirá validar la información introducida en la página y guardar los datos en el archivo de datos de registro.




- Para crear un control Botón:

	1. En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_champ_bouton_WB_GAF.jpg). 

	2. El control sigue el movimiento del cursor.

	3. Haga clic dentro de la página para crear el control (debajo de los controles Campo de entrada, por ejemplo). El control se crea.

	4. Presione la barra espaciadora: el texto pasa a modo de edición.

	5. Introduzca "Save".

	6. Presione la tecla Entrar para validar.







- Para escribir el código WLanguage del control Botón:

	1. Abra el menú contextual del control y seleccione "Código" (o presione F2).

	2. Los eventos asociados al control se muestran. Los eventos ejecutados en el servidor y en el navegador se muestran en los encabezados.

	3. Vamos a guardar los datos en la base de datos. Solo se puede acceder a la base de datos mediante el código Servidor: el código WLanguage se debe escribir en el evento "Clic (servidor)" de color amarillo.

	4. Introduzca el siguiente código WLanguage:
			
		```wl
		PAGE_Form.ToFile()
		Registration.Add()
		Info("Record added.")
		```


	5. Analicemos este código:

		- La función [&lt;Página&gt;.ToFile](../WDLang4/1000021390.md) recupera los datos de los controles Campo de entrada y los transfiere al archivo de datos.

		- La función [&lt;Archivo de datos&gt;.Add](../WDLang4/1000024187.md) escribe los datos en el archivo de datos.

		- La función [Info](../WDLang1/3021011.md) muestra un mensaje.




6. Guarde los cambios (Ctrl + S) y cierre el editor de código (haga clic en la "X" de la esquina superior derecha).





### Prueba de la página
<a name="prueba_pagina_ELTPARAGRAPHE000447"></a>

- Pruebe la página:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Go_Page_WB_GAF.jpg) en los botones de acceso rápido.

	2. La página se muestra en un navegador. 

	3. Defina los siguientes datos:

		- Last name: Doe

		- First name: Paul

		- Address: 5th avenue, New York

		- Email: john.doe@atandt.com

		- Username: john

		- Password: john




4. Haga clic en "SAVE". El navegador muestra un mensaje para confirmar que se agregó el registro.

5. Cierre el navegador.





### Visualización de los datos introducidos
<a name="visualizacion_los_datos_introducidos_ELTPARAGRAPHE000467"></a>

WEBDEV incluye una herramienta para ver los datos de los archivos de datos mientras se desarrolla el sitio (cuando aún no se han creado las páginas, por ejemplo).

Esta herramienta es WDMap. Vamos a utilizarla para comprobar si la información introducida se guardó correctamente.

- Para abrir WDMap:

	1. En la cinta de opciones, en la pestaña "Herramientas", en el grupo "Base de datos", haga clic en "WDMap". 

	2. Seleccione el archivo de datos "Registration". El contenido del archivo de datos se muestra. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_WDMap%20-%20HC%20N%B0001.jpg&type=thumb)


	3. Los datos se guardaron correctamente.

4. Cierre WDMap (botón "Cerrar").




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Agregar verificaciones de entrada
<a name="agregar_verificaciones_entrada_ELTTEXTE001150"></a>
Vamos a mejorar nuestro formulario agregando verificaciones de entrada de datos. Vamos a:

- establecer los controles Last name, Email y Username como campos obligatorios.

- crear un nuevo control para confirmar la contraseña.





### Entrada obligatoria
<a name="entrada_obligatoria_ELTPARAGRAPHE000504"></a>

- Vuelva (si es necesario) a la página "PAGE_Form" haciendo clic en ella en las pestañas de documentos abiertos.




- Para establecer el control "Last name" como campo obligatorio:

	1. Haga doble clic en el control "Last name": la ventana de descripción del control se abre.

	2. Vaya a la pestaña "Detalles".

	3. Seleccione la opción "Entrada obligatoria". Si esta opción está seleccionada, WEBDEV comprueba automáticamente si se rellena el control Campo de entrada.

	4. Valide la ventana de descripción. 







- Para aplicar la misma modificación al control "Email":

	1. Seleccione el control "Email".

	2. Presione F4: la última acción realizada en un control se aplica al control seleccionado.







- Aplique la misma modificación al control "Username".




- Pruebe la página:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Go_Page_WB_GAF.jpg) en los botones de acceso rápido.

	2. En la ventana que aparece, haga clic en "SAVE".

	3. Una ventana de información indica que no se han rellenado los controles obligatorios. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20Pages%20-%20Partie%203%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Valide el cuadro de información.

5. Cierre el navegador.





### Verificación de la contraseña
<a name="verificacion_contrasena_ELTPARAGRAPHE000534"></a>

Para verificar la contraseña, crearemos un control Campo de entrada que permita a los usuarios confirmar la contraseña. A continuación, escribiremos el código WLanguage necesario para verificar las contraseñas.



- Cree un nuevo control Campo de entrada. Defina el nombre "Confirm" para este control y seleccione el tipo "Contraseña".




- El código WLanguage para verificar la contraseña debe escribirse en los eventos del botón "SAVE" .

	1. Haga clic en el botón "SAVE" y presione la tecla F2.

	2. Esta verificación compara los valores introducidos en los controles "Password" y "Confirm". No es necesario acceder al servidor para verificar la contraseña: se puede verificar directamente en el navegador.

	3. Vamos a escribir el siguiente código en el evento "Clic" (navegador):
			
		```wl
		IF EDT_Password <> EDT_Confirm THEN
			Info("Error, the password and confirmation password do not match.")
			EDT_Password = ""
			EDT_Confirm = ""
			SetFocusAndReturnToUserInput(EDT_Password)
		END
		```


	4. Analicemos este código:

		- La instrucción [IF](../Motscles/1510011.md) establece una condición para realizar una acción. En este caso, la acción se realiza si los controles "Password" y "Confirm" no coinciden (operador '&lt;&gt;'). 

		- Si los valores son diferentes, los controles Campo de entrada se  ponen en blanco: se les asigna una cadena vacía.

		- La función [SetFocusAndReturnToUserInput](../WDLang1/1410088107.md) posiciona el cursor en el control especificado (en este caso, el control "Password") sin ejecutar el siguiente código. En nuestro caso, si las contraseñas no coinciden, el control "Password" obtiene el foco y el código que se está ejecutando se detiene: el código (servidor) que guarda los datos en la base de datos no se ejecuta.







- Pruebe la página:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Go_Page_WB_GAF.jpg) en los botones de acceso rápido.

	2. Introduzca la siguiente información en la página que aparece:

		- Last name: "Doe"

		- First name: "Peter"

		- Email: "Peter.Doe@gmail.com"

		- Username: "Peter"

		- Password: "Peter"

		- Confirm: "Louis"




3. Haga clic en "SAVE".

4. Un mensaje de error aparece automáticamente para indicar que las contraseñas no coinciden.

5. Valide el mensaje.

6. Cierre el navegador.




<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Realizar una búsqueda simple en una base de datos
<a name="realizar_una_busqueda_simple_una_base_datos_ELTTEXTE001186"></a>
Hemos visto cómo crear un formulario y guardar los valores en una base de datos. Ahora vamos a realizar una búsqueda en la base de datos.

Vamos a crear una página de inicio de sesión para introducir el nombre de usuario y la contraseña. A continuación, comprobaremos la validez de las credenciales de acceso.


### Crear la página
<a name="crear_pagina_ELTPARAGRAPHE000589"></a>

- Para crear la página:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Cr%E9er_WB_GAF.jpg) en los botones de acceso rápido.

	2. La ventana de creación de nuevos elementos se abre.

	3. Haga clic en "Página", y luego en "Página". El asistente de creación de páginas se abre automáticamente.

	4. Seleccione "En blanco". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20pages%20-%20Nouvelle_page%20-%20HC%20N%B0002.jpg&type=thumb)


	5. Valide.

6. La página se crea y la ventana para guardar el nuevo elemento se abre automáticamente.

7. Introduzca el título de la página: "Login".

8. Valide.





### Crear controles
<a name="crear_controles_ELTPARAGRAPHE000606"></a>

La página de inicio de sesión contendrá los siguientes controles:

- Dos controles Campo de entrada:

	- "Username" para introducir el nombre de usuario.

	- "Password" para escribir la contraseña.




- Dos controles Botón:

	- "Log in" para comprobar el nombre de usuario y la contraseña.

	- "Register" para abrir la página de registro (que creamos anteriormente).







Ya hemos creado este tipo de controles, veamos de nuevo los pasos a seguir:

- Para crear el control Campo de entrada:

	1. En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_champ_saisie_WB_GAF.jpg).

	2. Haga clic dentro de la página en blanco para crear el control.

	3. Haga clic en el control (un solo clic): el texto pasa a modo de edición.

	4. Escriba el título ("Username" y "Password") y presione Entrar para validar. El título cambia inmediatamente.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El control "Password" debe ser de tipo "Contraseña". Puede cambiar el tipo del control Campo de entrada en la ventana de descripción. |











- Para crear cada control Botón:

	1. En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_champ_bouton_WB_GAF.jpg).

	2. Haga clic dentro de la página para crear el control Botón (debajo de los controles Campo de entrada, por ejemplo). El control se crea.

	3. Presione la barra espaciadora: el texto pasa a modo de edición.

	4. Escriba el título ("Log in" y "Register") y presione Enter para validar. El título cambia inmediatamente.







- Obtendrá la siguiente página: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20pages%20-%20Partie%203%20-%20HC%20N%B0002.jpg&type=thumb)





- Vamos a ver los controles Botón en detalle. En primer lugar, veamos el botón "REGISTER".

	1. Seleccione el botón "REGISTER".

	2. Haga doble clic en el control para abrir la ventana de descripción.

	3. En la pestaña "General", en el área "Acción del botón", vamos a especificar la acción a realizar. En nuestro caso, vamos a abrir la página de registro: 

		- En la opción "Tipo", seleccione "Mostrar una página del sitio". 

		- En la opción "Página", seleccione "PAGE_Form". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P1_Mes%20Premi%E8res%20pages%20-%20Partie%203%20-%20HC%20N%B0003.jpg&type=thumb)







- En el caso del botón "LOG IN", necesitamos escribir código WLanguage para realizar la búsqueda:

	1. Seleccione el botón "LOG IN" y abra los eventos asociados (F2).

	2. Escriba el siguiente código WLanguage en el evento "Clic en xxx (servidor)":
			
		```wl
		Registration.ReadSeekFirst(Username, EDT_Username)
		IF NOT Registration.Found() THEN
			Error ("Unknown username.")
			RETURN
		END
		
		IF EDT_Password = Registration.Password THEN
			Info("You are logged in.")
		ELSE
			Error ("Wrong password.")
		END
		```


	3. Analicemos este código WLanguage:

		- El código se ejecuta en código Servidor porque la búsqueda se realiza en una base de datos que se encuentra en el servidor.

		- La función [&lt;Archivo de datos&gt;.ReadSeekFirst](../WDLang4/1000025034.md) busca un valor en un archivo de datos (en este caso, el archivo de datos "Registration"). De forma predeterminada, la búsqueda se realiza por palabras completas. Para realizar una búsqueda de tipo "Comienza por", simplemente agregue la constante ***hGeneric*** como parámetro.

		- La función [&lt;Archivo de datos&gt;.Found](../WDLang4/1000025076.md) determina si la búsqueda realizada en el archivo de datos Registration se realizó correctamente. "IF NOT Registration.found" define la acción a realizar si no se encuentra el nombre de usuario (por ejemplo, mostrar "Nombre de usuario desconocido"). La palabra clave RETURN sale del proceso actual. Si no se encuentra el nombre de usuario, no es necesario ejecutar el siguiente código.

		- Si se encuentra el nombre de usuario, la contraseña introducida en EDT_Password se compara con la del archivo de datos (para el nombre de usuario especificado). Si las dos contraseñas coinciden, el usuario se conecta, de lo contrario aparece un mensaje de error.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El código que se presenta aquí es para fines educativos. En un proyecto real:<br><br>			- La contraseña no debe almacenarse en un formato legible. Le recomendamos cifrar la contraseña. <br><br>			- Se recomienda mostrar el mismo mensaje de error en caso de nombres de usuario o contraseñas no válidos (para evitar intentos de hackeo).<br><br><br> |








4. Guarde los cambios (Ctrl + S) y cierre el editor de código (haga clic en la "X" de la esquina superior derecha).





### Prueba de la página
<a name="prueba_pagina_ELTPARAGRAPHE000705"></a>

- Pruebe la página:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Go_Page_WB_GAF.Jpg) en los botones de acceso rápido.

	2. Introduzca los siguientes datos en la página que aparece:

		- Username: john

		- Password: john1




3. Haga clic en el botón "LOG IN". Un mensaje de error aparece.

4. Valide el mensaje y cambie la contraseña: "john".

5. Haga clic en el botón "LOG IN". La sesión inicia correctamente.

6. Cierre el navegador.




<a name="NOTE7"></a>
<a name="NOTE7_1"></a>


## Conclusión
<a name="conclusion_ELTTEXTE001282"></a>
Con tal solo estas dos páginas, hemos descubierto varias funcionalidades de WEBDEV:

- la creación de controles: controles Campo de entrada y controles Botón,

- las posibilidades para alinear y organizar los controles en la página,

- la adición de registros a los archivos de datos,

- la secuencia de las páginas,

- la búsqueda de registros en los archivos de datos,

- el uso de eventos WLanguage (servidor y navegador),

- ...


Después de esta visión general, entraremos en más detalles en la siguiente parte, especialmente en lo que respecta al análisis y la definición de las características de la base de datos, antes de explicar cómo desarrollar un sitio completo.

| [Lección anterior](../TutoWB/1410087405.md) | [Tabla de contenido](../TutoWB/1410087510.md) | [Siguiente lección](../TutoWB/1410087411.md) |
| --- | --- | --- |




