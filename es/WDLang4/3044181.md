


## Implementar el registro Process en una aplicación
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000463"></a>
Independientemente de los archivos de datos utilizados por su aplicación (HFSQL Classic o HFSQL Client/Server), el registro Process puede implementarse en estos archivos de datos.

**To implementar el registro Process en los archivos de su aplicación**, debe:

1. Definir el tipo de registro Process a realizar.

2. Define el registro Process para los archivos de datos.

3. Defina el registro Process para los artículos.




Los archivos creados por el registro Process dependen del tipo de acceso a sus archivos de datos (HFSQL Classic o HFSQL Client/Server).

Los archivos registrados pueden ser manejados por WDLog o por programación.

**Observación**: El registro no está disponible cuando se accede a una base de datos a través de .


<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Los diferentes tipos de troncos
<a name="los_diferentes_tipos_troncos_ELTTEXTE000493"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png) 

### Registros disponibles en el modo HFSQL Classic
<a name="registros_disponibles_modo_hfsql_classic_ELTPARAGRAPHE000036"></a>

WINDEV, WEBDEV y WINDEV Mobile proponen las siguientes opciones para registrar sus archivos de datos: se crean automáticamente varios archivos según la opción seleccionada.

| Opción | Acción realizada | Archivos creados automáticamente |
| --- | --- | --- |
| Sin opción predeterminada Log( ) |   | nono |
| Registro de escrituras | Se guardará la siguiente información:<br><br>1. Todas las adiciones, modificaciones y eliminaciones realizadas en el archivo actual.<br><br>2. El valor de los registros manejados ANTES y DESPUÉS de la operación. <br><br><br><br><br>**¿Cuándo debo elegir esta opción?**<br>Para averiguar quién modificó el archivo así como la modificación que se realizó. | &lt;Nombre de archivo&gt;JNL.fic |
| Historial de acceso | Se guardan todas las operaciones realizadas en los archivos registrados de la aplicación.. El valor de los registros utilizados no se guarda. <br><br>**¿Cuándo debo elegir esta opción?**<br>Para conocer las operaciones realizadas en los ficheros registrados de la aplicación. | JournalOperation.fic<br>JournalIdentification.Fic |
| Registro de escrituras + historial de acceso | Se guardará la siguiente información:<br><br>1. Todas las adiciones, modificaciones y eliminaciones realizadas en el archivo actual.<br><br>2. El valor de los registros manejados ANTES y DESPUÉS de la operación.<br><br>3. Se guardan todas las operaciones realizadas en los archivos registrados de la aplicación.. <br><br><br>**¿Cuándo debo elegir esta opción?**<br>Para averiguar: <br><br>- que modificó el archivo,<br><br>- qué modificación se realizó. <br><br>- cuáles son las operaciones realizadas en el archivo.<br><br><br> | &lt;Nombre de archivo&gt;.JNL.fic<br>JournalOperation.fic<br>JournalIdentification. follar |


<a name="NOTE2_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) 

### Logs disponibles en modo HFSQL Client/Server
<a name="logs_disponibles_modo_hfsql_clientserver_ELTPARAGRAPHE000104"></a>

En el modo Cliente/Servidor, WINDEV, WEBDEV y WINDEV Mobile proponen las siguientes opciones para registrar sus archivos de datos: se crean automáticamente varios archivos según la opción seleccionada.

| Opción | Acción realizada | Archivos creados automáticamente |
| --- | --- | --- |
| Sin opción predeterminada Log( ) |   | nono |
| Registro de escrituras | Se guardará la siguiente información:<br><br>1. Todas las adiciones, modificaciones y eliminaciones realizadas en el archivo actual.<br><br>2. El valor de los registros manejados ANTES y DESPUÉS de la operación.<br><br><br> | &lt;Nombre de archivo&gt;JNL.fic<br>JNL_FILES.fic<br>JNL_OPERATION.fic<br>JNL_USER.fic |



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Implementación del tronco Process
<a name="implementacion_del_tronco_process_ELTTEXTE000523"></a>


### Definiendo el registro Process para los archivos de datos
<a name="definiendo_registro_process_para_los_archivos_datos_ELTPARAGRAPHE000139"></a>

El registro Process en archivos de datos HFSQL Classic o Cliente/Servidor se implementa en el editor de análisis.

Para implementar el registro Process en un archivo de datos descrito en el análisis:

1. Hacer una copia de seguridad copy de los archivos de datos en su estado actual con [WDLog](../WDJournal/3516012.md).

2. En el editor de análisis, abra el description del archivo de datos deseado:

	- Seleccione el archivo de datos en el editor. 

	- Seleccione "description de archivo de datos" de el menú contextual.




3. En la pestaña "Varios", seleccione el tipo de registro que desea gestionar para este archivo de datos.

4. Dependiendo de la opción seleccionada, especifique (si es necesario) el directorio de los diferentes archivos creados por el registro Process.


![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png) Observaciones: 

- **Atención: los archivos JournalIdentification y JournalOperation se encuentran siempre en el mismo directorio**. Por Default, estos archivos se crean en el directorio de la aplicación. 
	Este directorio se define en las opciones de análisis: haga clic en el fondo del esquema del análisis y seleccione "Descripción del análisis" en el menú contextual.
	Este directorio puede ser modificado para cada archivo de datos.

- **Consejo**: los archivos de registro se utilizan para guardar las operaciones realizadas en un archivo y para reproducirlas en una copia de seguridad si se produce un problema (por ejemplo, un disco inutilizable). Le recomendamos que guarde los archivos de registro en directorios (e incluso en discos) diferentes de los utilizados para los archivos de datos.



<a name="NOTE3_2"></a>


### Definiendo el registro Process para los artículos
<a name="definiendo_registro_process_para_los_articulos_ELTPARAGRAPHE000170"></a>

Por Default, todos los elementos de un archivo registrado se registran automáticamente. Usted tiene la capacidad de definir:

- si se deben registrar algunas posiciones o no. Por ejemplo, si uno de los archivos de datos utiliza un elemento de memo para almacenar un Image (información no tan importante y que no cambia muy a menudo), tiene la posibilidad de no registrar este elemento.

- Si la posición grabada en log debe ser una clave en el log.. Esta opción le permite recuperar fácilmente una Record en el registro.




Para evitar la implementación de un log en una posición:

1. Mostrar el archivo description.

2. Mostrar la description del artículo solicitado.

3. En la pestaña "Avanzado", deseleccione la opción "Crear registro del campo".



<a name="NOTE3_3"></a>


### Generación del análisis
<a name="generacion_del_analisis_ELTPARAGRAPHE000190"></a>

Una vez que el registro Process fue definido en el editor de análisis, el análisis puede ser generado.

**Atención**: Antes de realizar esta operación, le recomendamos que guarde los archivos de datos con [WDLog](../WDJournal/3516012.md).
<a name="NOTE3_4"></a>


### Modificación de datos de automatic y registro de Process
<a name="modificacion_datos_automatic_registro_process_ELTPARAGRAPHE000202"></a>

Cuando la modificación de los archivos de datos de automatic se realiza en los archivos de datos registrados:

1. Los archivos de registro se guardan automáticamente.

2. Los archivos de registro se limpian con un chorro de agua.




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Los diferentes archivos creados al implementar el registro Process
<a name="los_diferentes_archivos_creados_implementar_registro_process_ELTTEXTE000565"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png) 

### Archivos creados en modo HFSQL Classic
<a name="archivos_creados_modo_hfsql_classic_ELTPARAGRAPHE000216"></a>

Cuando se ha solicitado una opción de registro para un archivo de análisis, se pueden crear los siguientes archivos:


|   |   |
| --- | --- |
| JournalOpération.Fic | Lista de todas las operaciones realizadas en los ficheros de datos HFSQL registrados que utiliza la aplicación. Una operación corresponde a una función HFSQL. |
| JournalIdentification.Fic | Lista de ubicaciones físicas de todos los archivos registrados que se encuentran en la aplicación |
| \* JNL.Fic | Archivo creado para cada archivo registrado. Contiene el valor de los registros utilizados antes y después de cada operación. |


Para obtener más información, consulte: [estructura de los archivos de registro](../WDLang4/3044182.md).

**Para configurar la ubicación de estos archivos y su contraseña:**

- **Archivos JournalOperation y JournalIdentification**: Por Default, estos archivos se crean en el directorio de la aplicación. Para modificar este directorio:

	1. Mostrar el análisis description: haga clic en el gráfico de análisis, abra el menú contextual y seleccione "Análisis description". 

	2. Visualizar la ficha "Log".

	3. Seleccione el directorio de archivos y su contraseña si es necesario.


 Observación: Este directorio también puede modificarse para cada archivo registrado ("description del archivo de datos" en el menú contextual, pestaña "Varios"). En este caso, se crearán los archivos JournalOperation y JournalIdentification para cada archivo en la ubicación especificada.

- **\*Fichero JNL**: Por Default, este archivo se crea en el directorio de la aplicación. Para modificar este directorio: 

	1. Mostrar el archivo description: "description de archivo de datos" de el menú contextual.

	2. Visualizar la pestaña "Notas adicionales".

	3. Seleccione el directorio del archivo.


 Observación: La contraseña del archivo \*JNL será idéntica a la contraseña del archivo de datos.



<a name="NOTE4_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) 

### Archivos creados en modo HFSQL Client/Server
<a name="archivos_creados_modo_hfsql_clientserver_ELTPARAGRAPHE000260"></a>

Cuando se ha solicitado una opción de registro para un archivo de análisis, se pueden crear los siguientes archivos:


|   |   |
| --- | --- |
| **JNL_FILES.Fic** | description de los archivos registrados. |
| **JNL_OPERATION.Fic** | description de acciones realizadas en un archivo registrado. |
| **JNL_USERS.Fic** | description de usuarios que realizan una acción en un archivo registrado. |
| **\*JNL.Fic** | Archivo creado para cada archivo registrado. Contiene el valor de los registros utilizados antes y después de cada operación. |


Para obtener más información, consulte: [estructura de los archivos de registro en modo Cliente/Servidor](../WDLang4/3044197.md).

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## WDLog: herramienta para la gestión de registros
<a name="wdlog_herramienta_para_gestion_registros_ELTTEXTE000595"></a>
WDLog está acostumbrado a:

- Guardar y restaurar sus archivos de datos

- Verificar la consistencia de un log y compensarlo si es necesario.

- Restaure a un archivo de datos de su bitácora.

- Averigua quién modificó un Record, y cuándo, ...




Esta herramienta puede ser distribuida gratuitamente junto con sus aplicaciones.. Para obtener más información, consulte [WDLog](../WDJournal/3516012.md).

<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Manejo de los registros a través de la programación
<a name="manejo_los_registros_traves_programacion_ELTTEXTE000619"></a>
La gestión de los logs se realiza automáticamente. Sin embargo, se pueden utilizar varias funciones de WLanguage para manipular los logs:


|   |   |
| --- | --- |
| [HChangeLogDir](../WDLang4/3044164.md) | Modifica dinámicamente la ubicación de los archivos de registro correspondientes a un archivo HFSQL (archivos JNL de \*y archivos JournalOperation y JournalIdentification).<br>![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Esta función no tiene ningún efecto. |
| [HHistoryModification](../WDLang4/3044344.md) | Devuelve las modificaciones realizadas en uno o varios elementos de una Record dada. |
| [HLogInfo](../WDLang4/3044009.md) | Agrega comentarios al registro al guardar la operación registrada.. Estos comentarios se pueden ver en el WDLog. |
| [HLogRecreate](../WDLang4/3044033.md) | Vuelve a crear un log vacío. Esta función se utiliza para restablecer un registro a 0 después de una copia de seguridad o una réplica, por ejemplo.. El contenido de los archivos existentes se pierde. |
| [HLogRestart](../WDLang4/3044019.md) | Reinicia el registro del archivo. Este tronco Process fue detenido por HLogStop. |
| [HLogStop](../WDLang4/3044035.md) | Detiene el registro del archivo. Las operaciones realizadas en el archivo registrado ya no se guardan. |
| [HRegenerateFile](../WDLang4/3044122.md) | Regenera un archivo a partir de su registro. |
| [HSetLog](../WDLang4/3044052.md) | Se utiliza para habilitar (o no) la gestión de registros. Esta gestión está habilitada por Default. Si los registros no tienen que ser gestionados en un Process, llame a HSetLog(False). En este caso, la ejecución de los procesos será más rápida. |


Las propiedades WLanguage también se pueden utilizar para administrar los archivos registrados:


|   |   |
| --- | --- |
| [LogDirectorio](../Proprietes/2512075.md) | Gestiona el directorio de archivos de registro descrito en el análisis. Es posible:<br><br>- Busque el directorio de log para un fichero definido en la editor de análisis o dinámicamente.<br><br>- Defina el directorio de registro para un fichero que se ha definido dinámicamente.<br><br><br>![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Este Property devuelve "." (directorio actual). |
| [LogFile](../Proprietes/2512032.md) | Le permite averiguar si un archivo de datos es un archivo de registro o no. |
| [LogMétodo](../Proprietes/2512044.md) | Identifica el modo de registro usado para un archivo de datos (definido en el editor de análisis o dinámicamente). |
| [OperaciónLogDirectorio](../Proprietes/2512076.md) | Se utiliza para gestionar el directorio para el archivo de operaciones del registro associated con un archivo de registro. Es posible:<br><br>- Busque el directorio del log de operaciones relacionado en un fichero log definido en el editor de análisis o de forma dinámica.<br><br>- Defina el directorio de archivos de registro para un archivo definido dinámicamente.<br><br><br>![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Este Property no tiene ningún efecto. |


<a name="NOTE6_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png) 

### Dos archivos de datos no deben utilizar el mismo archivo de registro
<a name="dos_archivos_datos_deben_utilizar_mismo_archivo_registro_ELTPARAGRAPHE000399"></a>

Pueden ocurrir varios casos:

- **Al crear un archivo de datos**, el registro utiliza los GUID para comprobar que dos archivos de datos que se encuentran en diferentes ubicaciones no utilicen el mismo archivo de registro. De hecho, los datos encontrados en el registro podrían corromperse si el mismo archivo de registro es utilizado por varios archivos de datos.. 
	Se muestra un error si varios archivos utilizan el mismo archivo de registro.

- **Al copiar o mover un archivo de datos**, el GUID de este archivo no se modifica. En este caso, el motor HFSQL detecta que la ubicación del archivo de datos fue modificada. Un nuevo Record se añade automáticamente al archivo **JournalIdentification** para especificar la nueva ubicación del archivo de datos y su GUÍA. Sin embargo, el log no realiza ninguna verificación..
	El elaborador debe asegurarse de que dos copias del mismo archivo de datos que se encuentren en lugares diferentes no utilicen el mismo archivo de registro, en cuyo caso el contenido del archivo de registro no correspondería a ninguno de los dos archivos.

- **Al reemplazar un archivo de datos por una copia de seguridad anterior**, el GUID no se modifica. Esta operación no es detectada automáticamente por el registro Process. 
	En tal situación, debe borrar el archivo JNL al mismo tiempo que su archivo de datos y eventualmente restaurar el archivo JNL guardado en ese momento como el archivo de datos.




**Recordatorio**: El motor HFSQL soporta dos tipos de archivos GUID:

- GUÍA del archivo definida cuando el archivo fue descrito en el archivo editor de análisis. Esta GUID se utiliza para administrar el.REP.

- El archivo GUID definido al crear el archivo de datos físicos. Esta GUÍA se utiliza en el registro Process.





