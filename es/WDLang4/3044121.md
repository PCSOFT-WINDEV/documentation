


## HCross (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Tacha un registro en un archivo de datos. La Record se borra lógicamente y puede ser recuperada si es necesario.

Se realizan las siguientes operaciones:

- el Record se convierte en Inactive. Los datos se almacenan (lo que no ocurre cuando un Record es eliminado por [HDelete](../WDLang4/3044018.md)).

- los índices (correspondientes a las claves de Record) se borran del archivo de índices.

- los memos asociados con la Record se almacenan.




Esta función se puede utilizar en los archivos de datos, las vistas de HFSQL Mobile o las consultas.


<a name="sample_code"></a>

## Ejemplo

<a name="Example1"></a>

```wl
// Crosses the record #123
HCross(Customer, 123)
```
<a name="Example2"></a>

```wl
// Cross the customer orders
HReadSeekFirst(ORDERS, CUSTNUM, ValCustNum)
WHILE HFound() = True
	HCross()
	HReadNext()
END
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

`<Result> = HCross([<Data file> [, <Record number> [, <Options>]]])`
---

**`<Result>: (booleano)`**



- <u><u><u><u>True</u></u></u></u> si se tachó el registro,

- <u><u><u><u>False</u></u></u></u> si se produce un problema (registro bloqueado, problema de integridad, etc.). [HErrorInfo](../WDLang4/3044071.md) devuelve más detalles.




**`<Data file>: (Cadena de caracteres opcional)`**

Nombre del archivo de datos HFSQL, consulta o vista utilizada. 
Si este parámetro es una cadena vacía (""), **HCross** manipula el último archivo de datos utilizado por la última función HFSQL (función que empieza por "H").

**`<Record number>: (Entero opcional)`**

Número de la Record a cruzar. 
Si no se especifica este parámetro (igual a 0 o a la constante *hCurrentRecNum*), el registro activo se tachará.

**`<Options>: (Constante opcional)`**

Configura:

- el modo de bloqueo aplicado a la cruzada Record. Si no se especifica una constante de bloqueo, la Record cruzada no está bloqueada.
	


|   |   |
| --- | --- |
| *hLockNo*<br>(valor predeterminado) | Sin bloqeuo: el cruce de Record no se cerrará. |
| *hLockReadWrite* | Bloqueo de lectura/escritura: la corriente cruzada Record no puede ser leída o reactivada por otra aplicación. |
| *hLockWrite* | Bloqueo de escritura: otra aplicación puede leer y consultar la record cruzada actual ([HRead](../WDLang4/3044047.md)) pero no puede volver a activarla. Sólo la aplicación actual puede volver a activarla. |



- la gestión de la integridad aplicada a la cruzada Record.
	


|   |   |
| --- | --- |
| *hCheckIntegrity* | Comprueba la integridad de la operación, incluso si la comprobación de integridad de automatic está desactivada ([HSetIntegrity](../WDLang4/3044058.md)). |
| *hIgnoreIntegrity* | Ignora la comprobación de integridad para esta operación, incluso si la comprobación de integridad de automatic está activada ([HSetIntegrity](../WDLang4/3044058.md)). |


	Se produce un error de WLanguage si se utilizan las dos constantes al mismo tiempo.. Estas constantes no tienen ningún efecto en el borrado en cascada.  






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Manejando un Record cruzado
<a name="manejando_record_cruzado_ELTPARAGRAPHE000172"></a>

- Un Record cruzado no se leerá:

	- mediante funciones de iteración: [HFirst](../WDLang4/3044113.md), [HLast](../WDLang4/3044101.md), [HNext](../WDLang4/3044027.md), [HPrevious](../WDLang4/3044112.md), [HReadFirst](../WDLang4/3044051.md), [HReadLast](../WDLang4/3044140.md), [HReadNext](../WDLang4/3044037.md), [HReadPrevious](../WDLang4/3044048.md), [HForward](../WDLang4/3044154.md), [HBackward](../WDLang4/3044126.md)

	- por las funciones de búsqueda: [HSeekFirst](../WDLang4/3044125.md), [HReadSeekFirst](../WDLang4/3044036.md), [HSeekLast](../WDLang4/3044129.md), [HReadSeekLast](../WDLang4/3044034.md).




- Una Record cruzada puede ser leída por [HRead](../WDLang4/3044047.md).

- Un Record cruzado puede volver a activarse mediante [HModify](../WDLang4/3044042.md) o [HWrite](../WDLang4/3044092.md).

- [HState](../WDLang4/3044081.md) sirve para conocer el estado de record (active, cruzado, borrado, etc.).

- La ubicación física de una Record cruzada sólo puede ser reutilizada (por [HAdd](../WDLang4/3044147.md), por ejemplo) después:

	- la ejecución de [HFree](../WDLang4/3044064.md),

	- una operación de reindexación (con compresión).






<a name="NOTE0_2"></a>


### Número de registros tachados
<a name="numero_registros_tachados_ELTPARAGRAPHE000249"></a>

[HNbRec](../WDLang4/3044006.md) se utiliza para conocer el número de registros cruzados en el archivo de datos.

Observación: Para la compatibilidad con WEBDEV 1.5/WINDEV 5.5, el número de registros cruzados también puede ser devuelto por el *H.NbDel* Variable.
<a name="NOTE0_3"></a>


### Versión del archivo de datos
<a name="version_del_archivo_datos_ELTPARAGRAPHE000262"></a>

Si **HCross** tiene éxito, se modifica el número de versión de el archivo de datos. Este número de versión es devuelto por [HVersion](../WDLang4/3044020.md).
<a name="NOTE0_4"></a>


### Cruzar un Record de una consulta
<a name="cruzar_record_una_consulta_ELTPARAGRAPHE000276"></a>

Un registro puede ser tachado:

- en el resultado de la consulta.

- en los archivos tratados por la consulta (*hModifyFile* constante utilizada en [HExecuteQuery](../WDLang4/3044080.md) o [HExecuteSQLQuery](../WDLang4/3044084.md)). En este caso, la constante *hWithFilter* se selecciona automáticamente.




Independientemente del modo de ejecución de la consulta (con o sin la constante *hWithFilter*), **HCross** sólo puede utilizarse en consultas de un solo archivo.

Atención: 

- Los registros no pueden cruzarse en una consulta que utilice grupos o agregados.

- La gestión de la integridad y de los duplicados no se realiza durante las operaciones en las consultas multiarchivo.: se recomienda utilizar las transacciones para evitar cualquier problema.



<a name="NOTE0_5"></a>


### Casos especiales
<a name="casos_especiales_ELTPARAGRAPHE000303"></a>

- **Gestión de cierres**: 
	Si se produce un problema de bloqueo al "tachar" un registro (intentar tachar un registro bloqueado, por ejemplo), no se modifica el registro y la función [HErrorLock](../WDLang4/3044099.md) devuelve <u><u><u><u>True</u></u></u></u>.

- **Gestión de la integridad referencial**
	Si la gestión de la integridad referencial está activa (función [HSetIntegrity](../WDLang4/3044058.md)), y no se verifica la integridad durante la eliminación, no se ejecuta la función **HCross**. Se debe probar la función [HErrorIntegrity](../WDLang4/3044086.md) después de la función **HCross**.

- **Registros borrados**
	No se debe llamar a la función **HCross** en un registro eliminado previamente. 



<a name="NOTE0_6"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Archivos xBase
<a name="archivos_xbase_ELTPARAGRAPHE000341"></a>

La función [HDelete](../WDLang4/3044018.md) y **HCross** tienen el mismo efecto: el Record se cruza pero no se borra. Por lo tanto, la Record puede volver a activarse mediante [HModify](../WDLang4/3044042.md). En este caso, la función [HState](../WDLang4/3044081.md) devuelve la constante *hStateCrossed* en un registro eliminado (y no la constante *hStateDel*).

<a name="XComponent"></a>

## Componente:
wd280hf.dll
