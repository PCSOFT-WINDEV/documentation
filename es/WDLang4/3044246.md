
## Implementación de la replicación basada en el logaritmo: Modificación del análisis
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000191"></a>
La réplica basada en los registros puede ser implementada en el editor de análisis:

- al crear un fichero. La creación de este archivo asistente pregunta si este archivo debe gestionar la replicación basada en el registro.

- en un archivo existente (sin importar si la aplicación fue distribuida o no).






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Gestionar la replicación basada en logs para un archivo de datos
<a name="gestionar_replicacion_basada_logs_para_archivo_datos_ELTTEXTE000221"></a>
Para implementar la replicación basada en el registro en un archivo: 

1. Abra su análisis en el editor de análisis.

2. Para todos los expedientes en replicación, seleccione "Replicación basada en registros (para compatibilidad con versiones anteriores)" (pestaña "Varios" del expediente description). Los mensajes se muestran si sus archivos no cumplen las condiciones para utilizar la replicación (véase el párrafo siguiente)..
	**Atención**: el registro Process se implementa automáticamente cuando se implementa la replicación basada en el registro. En efecto, el registro Process permite conocer fácilmente todas las operaciones realizadas en los archivos para aplicarlas a las diferentes bases de datos. Para más detalles sobre los registros, véase [El tronco Process](../WDLang4/3044184.md).

3. Genere su análisis.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Consecuencias de la aplicación de la replicación basada en registros
<a name="consecuencias_aplicacion_replicacion_basada_registros_ELTTEXTE000245"></a>


### Condiciones requeridas o recomendadas
<a name="condiciones_requeridas_recomendadas_ELTPARAGRAPHE000043"></a>

Al implementar la replicación basada en logs en un archivo de datos, WINDEV y WEBDEV:

- **Proponer el uso de un identificador de 8 bytes de automatic en los archivos de la réplica basada en el registro**: 
	Para simplificar la replicación basada en el registro, recomendamos que use un identificador automatic en sus archivos de datos. Este identificador de automatic está totalmente gestionado por WINDEV y WEBDEV. Para evitar la duplicación de errores durante la replicación, se asignan rangos de números de identificador a cada centro implicado en la replicación.. 
	El uso de un identificador de automatic es muy recomendable pero no obligatorio. De hecho, siempre tiene la posibilidad de gestionar un identificador personalizado que contiene, por ejemplo, un identificador automático y las iniciales del sitio o de la persona que crea el Record.

- **Establecen el registro para el archivo de datos seleccionado**: 
	En efecto, el registro Process permite conocer fácilmente todas las operaciones realizadas en los archivos para aplicarlas a las diferentes bases de datos. El registro "Log de operaciones de escritura + historial de accesos" Process se implementa automáticamente cuando se comprueba la "Replicación basada en el registro".



<a name="NOTE3_2"></a>


### Directorio para crear los archivos requeridos por la replicación basada en el registro
<a name="directorio_para_crear_los_archivos_requeridos_por_replicacion_basada_registro_ELTPARAGRAPHE000059"></a>

La replicación basada en el registro es muy parecida a la relacionado del registro Process. El registro Process se habilita automáticamente cuando se implementa la replicación basada en el registro en una aplicación.

Para todos los ficheros utilizados (ficheros de datos, ficheros log o ficheros de replicación), las rutas de los ficheros físicos correspondientes se pueden definir en editor de análisis o por programación.

Por Default, la estructura de árbol de los archivos de datos es la siguiente (ejemplo para la aplicación SalesMgt):
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Replic_repertoire.gif)


El siguiente tabla presenta el valor de Default para estos diferentes directorios y su modo de configuración en el editor de análisis o mediante programación.

|   | Valor predeterminado | ¿Dónde configurarlo en la editor de análisis? | ¿Cómo cambiar el valor de Default mediante la programación? |
| --- | --- | --- | --- |
| **Directorio de archivos de datos** | Directorio del ejecutable. | <br><br>- Para todos los ficheros de datos de la aplicación: Pestaña "Detalles" del análisis description<br><br>- Para cada archivo: La pestaña "Info" del archivo description.<br><br><br> | Para modificar el directorio Default para los archivos de datos de la aplicación, utilice [HSubstDir](../WDLang4/3044028.md).<br>Al crear los archivos para la bitácora Process y para la réplica, los directorios creados serán relativos a este nuevo directorio. <br>Observación: Para modificar el directorio de uno de los archivos de datos solamente, utilice [HChangeDir](../WDLang4/3044168.md). |
| **Directorio de los archivos para replicación** | Subdirectorio RPL del directorio Default de los archivos de datos. | "Log\\Replica" del análisis description. | Especifique el directorio deseado en [HCreateMasterReplica](../WDLang4/3044175.md) y [HCreateSubscriberReplica](../WDLang4/3044253.md). |
| **Directorio de archivos para el registro Process** | Subdirectorio JNL del directorio Default de archivos de datos. | <br><br>- Para todos los ficheros de datos de la aplicación: "Log\\Replica" del análisis description.<br><br>- Para cada archivo: "Notas adicionales" ficha del archivo description.<br><br><br> | Para modificar el directorio de archivos de registro, utilice [HChangeLogDir](../WDLang4/3044164.md). Esta función permite:<br><br>- modificar el directorio del fichero Log (fichero JNL)<br><br>- cambiar el directorio del archivo JNL y el directorio de los archivos para el registro Process (archivos de JournalIdentification y JournalOpération).<br><br><br> |


**Atención**: Para gestionar la replicación basada en logs en una aplicación, el tabla de operaciones de logs (archivo JournalOpération.fic) debe ser idéntico para todos los archivos en replicación en el mismo análisis.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Generación del análisis
<a name="generacion_del_analisis_ELTTEXTE000275"></a>
Para tener en cuenta la implementación de la replicación basada en logs en el análisis, **debe generar el análisis.**

Si la aplicación ya maneja archivos de datos, esta generación de análisis desencadena una modificación automatic de los archivos de datos para: 

- tener en cuenta la replicación basada en el registro,

- tener en cuenta el registro Process (si es necesario)

- implementar los identificadores de automatic.




Esta modificación de los ficheros de datos también deberá realizarse en el momento de la instalación de la aplicación (si la aplicación ya estaba desplegada).

**Atención**: Si los registros ya existían, estos registros son despejados automatic ally durante la modificación de automatic. Antes de iniciar la modificación de automatic, los registros existentes pueden ser guardados por WDLog.


