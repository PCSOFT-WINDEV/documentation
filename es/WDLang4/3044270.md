


## WDModFic : Herramienta para la modificación automática de archivos de datos
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000370"></a>


### WDModFic
<a name="wdmodfic_ELTPARAGRAPHE000011"></a>

WDModFic es una herramienta utilizada para realizar la modificación automática de los archivos de datos que se encuentran en el ordenador de desarrollo y en los ordenadores de los usuarios finales.

Por defecto, la modificación automática de los archivos de datos se realiza en las computadoras de los usuarios finales o en la computadora de implementación del sitio cuando se actualizan las aplicaciones. Sin embargo, en algunos casos (archivos de datos ubicados en un ordenador portátil que no estaba conectado a la red cuando se realizó la actualización, fallas en la actualización, etc.), **WDModFic** para realizar esta modificación automática una vez actualizada la aplicación.

**Atención**: El uso de WDModFic debe estar limitado a usuarios avanzados (el administrador de la aplicación, por ejemplo).

**Recordatorio**: La modificación automática de datos se utiliza para aplicar las modificaciones realizadas en el análisis HFSQL a los archivos de datos.. Para obtener más información, consulte [Modificación automática de archivos de datos](../WDLang4/3044195.md).

**Condiciones de uso**: WDModFic no se instala automáticamente con las aplicaciones desarrolladas con WINDEV o WEBDEV.. El archivo WDModFic.exe debe ser seleccionado junto con los archivos necesarios (ver el siguiente párrafo) al crear el instalación.

La licencia de WINDEV o WEBDEV se aplica plenamente.
**Observación**: La modificación automática de los archivos de datos también se puede hacer programando con [HModifyStructure](../WDLang4/1000019439.md).

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Iniciar WDModFic
<a name="iniciar_wdmodfic_ELTTEXTE000400"></a>
WDModFic se puede iniciar:

- en modo de línea de comando (sin mostrar la asistente de WDModFic). Tiene la posibilidad de modificar los archivos de datos de HFSQL Classic, HFSQL Mobile o HFSQL Client/Server.

- en modo interactivo (mientras se muestra la asistente de WDModFic):

	- en el panel "Análisis", en el grupo "Análisis", expanda "Sincronización " y seleccione "Sincronizar Estructura y Datos Desplegados (SDD, Auto Modif...") (de la editor de análisis en el ordenador de desarrollo solamente).

	- ejecute "WDModFic.EXE" directamente.






<a name="NOTE2_2"></a>


### Archivos necesarios
<a name="archivos_necesarios_ELTPARAGRAPHE000066"></a>

Los siguientes archivos son necesarios para ejecutar WDModFic en un ordenador cliente:

- wdxxxcpl.dll

- wdxxxhf.dll

- wdxxxobj.dll

- wdxxxpnt.dll

- WDOutil.WDK

- wdxxxstd.dll

- wdxxxtrs.dll (sólo se requiere si los archivos se replican)

- wdxxxvm.dll

- WDModxxx.DLL

- WDModFic.exe

- wdxxxmat.dll

- wdxxxprn.dll (requerido para la impresión)




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Uso de WDModFic en modo de línea de comandos
<a name="uso_wdmodfic_modo_linea_comandos_ELTTEXTE000430"></a>
Para realizar una modificación automática de los ficheros de datos, la sintaxis es la siguiente:


```txt
WDModFic.EXE [-subdir][-report][-error][-wizard][-nobackup][-noprogress][-PDA][-nolink]
			[-noanaguid][-noanaconnection]
			/WDD=<WDDPath>
			/PWD=<WDDPassword>
			/DIR=<DataFileDir>
			/FILE=<DataFile>
			/FILEPWD=<FilePassword>
			/PRJ=<ProjectName>
			/SERVER=<HFSQLClientServerDatabase>
			/US
```
Detalles de los parámetros:

| paramétrico | Significado |
| --- | --- |
| -subdir | Si se especifica este parámetro, los archivos de datos se buscan en el directorio especificado (parámetro "/DIR") y sus subdirectorios.<br><br>Por defecto, si no se especifica este parámetro, los archivos de datos sólo se buscan en el directorio especificado (parámetro "/DIR") |
| -reporte | Si se especifica este parámetro, se visualizará un estado reporte al final de la modificación automática de los ficheros de datos.<br><br>Si no se especifica este parámetro, no se visualizará ningún estado reporte al final de la modificación automática de los ficheros de datos. |
| -error | Si se especifica este parámetro, cuando se produce un error, se mostrará un mensaje al final de la modificación automática de los ficheros de datos.<br><br>Si no se especifica este parámetro, no se mostrará ningún mensaje de error al final de la modificación automática de los archivos de datos. |
| -asistente | Si se especifica este parámetro, se iniciará la asistente para la modificación automática de los archivos de datos.<br><br>Por defecto, si no se especifica este parámetro, no se iniciará la asistente para la modificación automática de los archivos de datos. |
| -nobackup | Si se especifica este parámetro, no se realizará la copia de seguridad automática de los archivos de datos modificados.<br><br>Por defecto, si no se especifica este parámetro, se realizará la copia de seguridad automática de los archivos de datos modificados. |
| -...no progresa. | Si se especifica este parámetro, no se mostrará ninguna barra de progreso durante la modificación automática. |
| -noanaguid | Si se especifica este parámetro, la modificación automática de los ficheros de datos se aplicará a las descripciones de los ficheros que no pertenecen al análisis actual (al volver a crear la descripción de un fichero o al volver a crear un análisis, por ejemplo, ....).<br><br>Para realizar la modificación automática, el motor HFSQL usará el nombre lógico del archivo de datos. Después de la modificación automática de los archivos de datos, los archivos se convierten en relacionado para el análisis. |
| -PDA | Si se especifica este parámetro, se buscan automáticamente los archivos de datos a modificar en la Pocket PC.<br><br>Si se especifica este parámetro y si no se especifica el parámetro "-asistente", se debe especificar el parámetro "/PRJ=&lt;NombreDeProyecto&gt;" **necesariamente**. |
| -nolink | Si se especifica este parámetro, la modificación automática de los archivos de datos no creará los enlaces de integridad al actualizar la base de datos HFSQL Client/Server.. <br><br>Por defecto, este parámetro no está especificado: la modificación automática de los archivos de datos crea (si es necesario) los enlaces de integridad al actualizar la base de datos HFSQL Client/Server. |
| -no a la reconexión | Si se especifica este parámetro, la modificación automática no utilizará las conexiones definidas en el análisis.<br><br>Por defecto, la modificación automática de los ficheros de datos utilizará las conexiones definidas en la editor de análisis. |
| ... -nobleza | Si se especifica este parámetro, no se realizará ninguna modificación automática en caliente.<br><br>En el modo Cliente/Servidor, este parámetro le permite no solicitar una contraseña cuando los archivos de datos están protegidos con contraseña sin estar cifrados. |
| /WDD=&lt;WDDFile&gt; | Cadena de caracteres que contiene el nombre y la ruta completa del archivo de análisis (archivo".WDD") utilizado para describir la nueva estructura de los archivos de datos.. <br><br>Este parámetro es **obligatorio** excepto si se especifica el parámetro "-asistente". |
| /PWD=&lt;WDDPContraseña&gt;&gt;Contraseña | Cadena de caracteres que contiene la contraseña de tiempo de ejecución del análisis especificado (contraseña definida en la descripción del análisis).<br><br>Este parámetro sólo debe especificarse si el análisis está protegido por contraseña. |
| /DIR=&lt;DataFileDir&gt; | Cadena de caracteres que contiene los directorios donde se buscarán los archivos de datos a actualizar. Sólo se tendrán en cuenta los ficheros de datos que deban recibir una modificación automática.<br><br>Si se especifica este parámetro, no se debe especificar el parámetro "/FILE".<br><br>Si los archivos de datos a actualizar se encuentran en diferentes directorios, WDModFic debe ejecutarse para cada directorio.<br><br>Observación: Si se encuentran archivos ".REP" en este directorio, también se tendrá en cuenta la ubicación de los archivos de datos especificados en estos archivos ".REP". |
| /FILE=&lt;ArchivoDeDatos&gt; | Cadena de caracteres que contiene el nombre y el ruta del archivo de datos completo (archivo "FIC") para actualizar.<br><br>Si se especifica este parámetro, no se debe especificar el parámetro "/DIR".<br><br>Si se deben actualizar varios archivos de datos, se debe ejecutar WDModFic para cada archivo. |
| /FILEPWD=&lt;FilePassword&gt;&gt; Contraseña del archivo | Cadena de caracteres que contiene la contraseña del archivo de datos especificado (contraseña definida por [HPass](../WDLang4/3044108.md), [HCreation](../WDLang4/3044255.md) o [HCreationIfNotFound](../WDLang4/3044254.md), o durante una [modificación automática de datos](../WDLang4/3044195.md) anterior).<br><br>Este parámetro debe especificarse sólo si el archivo de datos especificado está protegido por una contraseña.<br><br>Observación: La contraseña de un archivo de datos sólo puede ser modificada en modo interactivo. |
| /PRJ=&lt;Nombre del proyecto&gt; | Cadena de caracteres que contiene el nombre del proyecto a utilizar (sin su ruta).<br><br>Si se especifica el parámetro "-PDA" y si no se especifica el parámetro "-asistente", este parámetro es **obligatorio**. |
| /US | Si se especifica este parámetro, las pantallas del modo interactivo de WDModFic se muestran en inglés.<br><br>Si no se especifica este parámetro, las pantallas se visualizan en francés. |
| /SERVER=&lt;HFSQLClientServerDatabase | Cadena de caracteres en el siguiente formato: **[&lt;Usuario&gt;[:&lt;contraseña&gt;]@]&lt;servidor&gt;[:&lt;puerto&gt;]/&lt;BaseDeDatos>**<br>En esta cadena:<br><br>- &lt;login&gt; corresponde al login del usuario<br><br>- &lt;contraseña&gt; corresponde a la contraseña del usuario.<br><br>- &lt;servidor&gt; corresponde al nombre del servidor HFSQL. Este parámetro es obligatorio.<br><br>- &lt;port&gt; corresponde al número de puerto del servidor HFSQL. Este parámetro es opcional. Por defecto, el número de puerto utilizado es 4900.<br><br>- &lt;Dataabase&gt; corresponde al nombre de la base de datos HFSQL Client/Server. Este parámetro es obligatorio.<br><br><br>**Ejemplo**: /SERVIDOR=Flo:pass@HFServer/MiBase de datos<br>**Observación**: Se deben utilizar comillas si se encuentran caracteres espaciados en el nombre de la base de datos.. Ejemplo: /SERVER="Flo:pass@HFServer/Mi base de datos" |

**Observación**: La tabla a continuación presenta los diferentes parámetros que pueden ser usados para iniciar WDModFic en modo de línea de comando. Para obtener estos parámetros al iniciar WDModFic, utilice una de las siguientes sintaxis:

```txt
- WDModFic.EXE /help
- WDModFic.EXE /?
```

<a name="NOTE3_2"></a>


### Ejemplos
<a name="ejemplos_ELTPARAGRAPHE000265"></a>

- La siguiente línea de comandos se utiliza para que **aplique los cambios realizados en el análisis** "D:\\MyApplication\\MyAnalysis.WDD" a los archivos de datos que se encuentran en "C:\\MyDataFiles" y en sus subdirectorios (parámetro "-subdir"). Si se produce un error, aparece un mensaje al final de la modificación automática de los archivos de datos (parámetro"-error").. La asistente para la modificación automática de los archivos de datos no se iniciará. Se realizará una copia de seguridad de los archivos de datos modificados.

	- En WINDEV o WEBDEV:
			
		```wl
		ExeRun("C:\MyDirectory\WDModFic.EXE -subdir -error " + ...
			"/WDD=D:\MyApplication\MyAnalysis.WDD " + ...
			"/DIR=C:\MyDataFiles")
		```


	- En WINDEV Mobile:
			
		```wl
		ExeRun("C:\MyDirectory\WDModFic.EXE -subdir -error - PDA " + ...
			"/WDD=\MonApplication\MyAnalysis.WDD " + ...
			"/DIR=\MyDataFiles")
		```





- La siguiente línea de comandos **propaga las modificaciones realizadas en el análisis** "D:\\MiAplicación\\MiAnálisis.WDD" a los archivos de datos "C:\\MiArchivosDeDatos". Al final de la modificación automática de los ficheros de datos (parámetro"-reporte") aparecerá un mensaje de éxito o de error.. La asistente para la modificación automática de los archivos de datos no se iniciará. No se realizará la copia de seguridad de los archivos de datos modificados (parámetro"-nobackup")..
	
	```wl
	ExeRun("C:\MyDirectory\WDModFic.EXE -report -nobackup " + ...
		"/WDD=D:\MyApplication\MyAnalysis.WDD " + ...
		"/FILE=C:\MyDataFile.FIC")
	```


- **Usar nombres largos**: Las comillas deben ser dobladas cuando se usan nombres largos. 
	La siguiente línea de comandos se utiliza para aplicar las modificaciones realizadas en el análisis "D:\\MyWinDevApplication\\MyAnalysis.WDD" en el archivo de datos llamado "C:\\MyDataFile.FIC". Al final de la modificación automática de los ficheros de datos (parámetro"-reporte") aparecerá un mensaje de éxito o de error.. La asistente para la modificación automática de los archivos de datos no se iniciará. No se realizará la copia de seguridad de los archivos de datos modificados (parámetro"-nobackup")..
	
	```wl
	ExeRun("""C:\My Application Directory\WDModFic.EXE -report -nobackup " + ...
		"/WDD=D:\My WINDEV Application\MyAnalysis.WDD " + ...
		"/FILE=C:\MyDataFile.FIC""")
	```


- **Utilizando WDModFic para una base de datos HFSQL Client/Server**
	
	```wl
	// Parameters for the automatic modification of files
	// Directory that contains WDModFic
	sWDModFicDirectory is string = "C:\Program Files\WINDEV 21\Programs\"
	// Full name of WDD with its path (in the same directory)
	sFullWDDName is string = CompleteDir(fExeDir())+"MyAnalysis.wdd"
	// User and password on the HFSQL server
	// (with rights to modify the structure of the files)
	sUser is string = "guest"
	sPassword is string = ""
	// IP address or DNS name of the computer hosting the HFSQL server
	sAddressOrNameHFServer is string = "ComputerName"
	// Port of HFSQL server
	sPortNumHFServer is int = 4900
	// Name of the database where the files to modify are found
	sDatabaseName is string = "MyAnalysis"
	sCommandLine is string
	// Build the command line 
	// Remove /report in order not to get 
	// a dialog box at the end
	sCommandLine = StringBuild([
		"%1WDModFic.exe" /WDD="%2" /SERVER="%3:%4@%5:%6/%7" -report
		], CompleteDir(sWDModFicDirectory), ...
		sFullWDDName, sUser, ...
		sPassword, sAddressOrNameHFServer, ...
		sPortNumHFServer, sDatabaseName)
	
	// For test, you have the ability to display the command line
	// to perform a visual check
	// //Info(sCommandLine)
	// Start the automatic modification while waiting for the end
	IF NOT ExeRun(sCommandLine, exeActive, exeWait) THEN
		// Launch failure, display the error
		Error("Unable to run the automatic data modification: ", ErrorInfo(), ...
			"Command line used: ", sCommandLine)
	ELSE
		// Automatic modification performed
	END
	```


- **Ejemplo que utiliza variables para definir los diferentes caminos.**
	
	```wl
	ModFicDir is string
	AnalysisDir is string
	DataDir is string
	 
	ModFicDir = """C:\WINDEV\Programs\WDModFic.EXE"""
	AnalysisDir = """C:\My Projects\CRM\Exe\CRM.wdd """
	DataDir = """C:\My Projects\CRM\Exe\Data"""
	
	
	ExeRun(ModFicDir + " -subdir -nobackup -" + "/WDD=" + AnalysisDir + ...
		"/DIR=" + DataDir, exeActive, exeWait)
	```





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Uso de WDModFic en modo interactivo
<a name="uso_wdmodfic_modo_interactivo_ELTTEXTE000460"></a>
La asistente de WDModFic se inicia cuando WDModFic se inicia:

- en modo interactivo:

	- en el panel "Análisis", en el grupo "Análisis", expanda "Sincronización " y seleccione "Sincronizar Estructura y Datos Desplegados (SDD, Auto Modif...") (de la editor de análisis en el ordenador de desarrollo solamente).

	- ejecute "WDModFic.EXE" directamente.




- en modo de línea de comandos con el parámetro "-wizard".




**Realizar la modificación automática de los archivos de datos con el asistente**:

1. Seleccione el análisis (archivo".WDD") que describe la nueva estructura de los archivos de datos..
	**Observación**: Si el análisis especificado está protegido por una contraseña en tiempo de ejecución, introduzca esta contraseña.

2. Seleccione los archivos de datos (archivos".FIC") para actualizar.

3. Para guardar los archivos de datos antes de realizar la modificación automática, compruebe "Realizar una copia de seguridad antes de la modificación" y seleccione el directorio de la copia de seguridad.

4. Para especificar o modificar las contraseñas de los diferentes archivos de datos que se han de actualizar, marque "Quiero introducir o cambiar las contraseñas de las nuevas estructuras", seleccione los archivos de datos deseados e introduzca dos veces la contraseña correspondiente.

5. Validar para iniciar la modificación automática.





