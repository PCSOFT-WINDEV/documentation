


## &lt;Fuente&gt;.CreationIfNotFound (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Realiza las siguientes operaciones:

- Si el archivo de datos no existe, crea un archivo de datos vacío (extensión ".FIC") con el archivo de índice y el archivo memo, si es necesario.
	La función equivale a [&lt;Fuente&gt;.Creation](../WDLang4/1000024207.md).

- Si el archivo de datos existe, abre el archivo de datos. 
	En este caso, la función equivale a [&lt;Fuente&gt;.Open](../WDLang4/1000025043.md). 
	Para optimizar la llamada a **&lt;Fuente&gt;.CreationIfNotFound**, el archivo puede abrirse sólo cuando se accede a el archivo de datos por primera vez (utilizando la constante *hDelayedOpening*).




**Observación**: La creación de archivos de datos inexistentes en automatic se puede habilitar en el proyecto description (pestaña "Archivos" del proyecto description, "Crear automáticamente los archivos de datos cuando se abran"). La función **&lt;Fuente&gt;.CreationIfNotFound** se utiliza automáticamente si el archivo de datos no existe al manipularlo por primera vez.
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png) Si el archivo de datos está registrado, puede especificar la ubicación de los archivos de registro.![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Si se han definido restricciones de integridad y están soportadas, el servidor actualiza las relaciones al crear el archivo de datos.
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo

<a name="3044254_Example2"></a>

```wl
// Create the Orders data file (described in the analysis)
Customer.CreationIfNotFound()
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

`<Result> = <Source>.CreationIfNotFound([<Password> [, <Path of the JNL file> [, <Path of the JournalOperation file>]] [, <Option>]])`
---

**`<Result>: (Booleano)`**



- <u><u><u><u>True</u></u></u></u> si se creó o abrió el archivo de datos,

- <u><u><u><u>False</u></u></u></u> si se produce un problema. La función [HError](../WDLang4/3044088.md) permite identificar el error. Si se produce un error fatal, se requiere un proceso específico para continuar el programa y comprobar si se creó el archivo de datos (ver Notas).




**`<Source>: (Tipo de fuente especificada)`**

Nombre del archivo de datos a utilizar. 



**`<Password>: (Cadena de caracteres opcional)`**



- Contraseña asociada al archivo de datos. 

- Cadena vacía ("") si no se utiliza ninguna contraseña.




**`<Path of the JNL file>: (Cadena de caracteres opcional)`**

Accede a ruta al archivo JNL associated con el archivo de datos registrados. Este parámetro sólo se tiene en cuenta si se registra el archivo de datos. En este caso, el archivo &lt;Nombre de archivo&gt;JNL.fic se creará en la ubicación especificada.
![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Este parámetro no debe especificarse. En HFSQL Client/Server, la ruta del archivo JNL es fija y no se puede modificar.![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Este parámetro no se tiene en cuenta.

**`<Path of the JournalOperation file>: (Cadena de caracteres opcional)`**

Accede a ruta al archivo de operación de la revista y al archivo de identificación de la revista associated con el archivo de datos registrados.. El archivo JournalOperation contiene todas las operaciones realizadas en el archivo de datos registrados. Este parámetro sólo se tiene en cuenta si se registra el archivo de datos.
![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Este parámetro no debe especificarse. En HFSQL Client/Server, la ruta del archivo de operaciones es fija y no se puede modificar.![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Este parámetro no se tiene en cuenta.

**`<Option>: (Constante opcional)`**

Optimizar la apertura de los archivos de datos existentes.


|   |   |
| --- | --- |
| *hChangeCharset* | El conjunto de caracteres definido con la función [ChangeCharset](../WDLang1/3054001.md) se tendrá en cuenta en el nuevo archivo de datos. Las ordenaciones, búsquedas u otro tipo de operaciones realizadas sobre claves de cadena (cadenas, caracteres, fecha y hora) utilizarán el nuevo carácter set. |
| *hDelayedOpening* | Si el archivo de datos ya existe, se abrirá solo al acceder a él por primera vez. Si el archivo de datos no existe, se crea y se abre.<br><br>![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png) Esta constante sólo está disponible para HFSQL Classic. |
| *hNoLink* | **Gestión de la integridad**: Las relaciones no se actualizan en el servidor (creación, modificación o eliminación).<br>**Recordatorio**: Al crear un archivo de datos, las relaciones se actualizan en el servidor de forma predeterminada.<br>![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Esta constante sólo está disponible para HFSQL Client/Server. |

![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Este parámetro no se tiene en cuenta.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Características del archivo de datos creado
<a name="caracteristicas_del_archivo_datos_creado_ELTPARAGRAPHE000405"></a>

Las características del archivo de datos creado son las siguientes:

- *Nombre del archivo de datos*:
	Nombre físico definido en la descripción del archivo de datos en el editor de análisis. Este nombre se puede modificar antes de crear el archivo de datos con la función [&lt;Fuente&gt;.ChangeName](../WDLang4/1000024201.md).

- *Directorio del archivo de datos*:
	Directorio definido en la descripción del archivo de datos en el editor de análisis. Este directorio se puede modificar antes de crear el archivo de datos con las funciones [&lt;Fuente&gt;.ChangeDir](../WDLang4/1000024202.md) y [HSubstDir](../WDLang4/3044028.md).
	**Observación**: Si la UAC está activada (Windows Vista y posteriores), la ubicación de los datos es específica: los datos no se encontrarán en el directorio de la aplicación, sino en un directorio específico de Windows. En este caso, debe crear el directorio de datos de la aplicación (puede get el ruta con [fDataDirUser](../WDLang1/3036071.md)).

- El orden de los elementos creados en el archivo físico es el orden físico de los elementos creados en el análisis, y no el orden lógico.

- *Contenido del archivo de datos*:
	El archivo de datos creado está vacío, pero no significa que su tamaño sea nulo (el archivo contiene un encabezado que describe su estructura).


**Observación**: El archivo de datos se abre si ya existe (mismo nombre, mismo directorio). Si se especifica la constante *hDelayedOpening*, el archivo de datos sólo se abrirá la primera vez que se acceda a él (optimiza la velocidad de **&lt;Fuente&gt;.CreationIfNotFound**).
<a name="NOTE0_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Los archivos adicionales creados
<a name="los_archivos_adicionales_creados_ELTPARAGRAPHE000450"></a>

Al crear un archivo de datos, se pueden crear los siguientes archivos además de el archivo de datos:

- **Un archivo de índice** (extensión "NDX") si se han definido una o más claves en el archivo description.

- Archivo de memo **A** (extensión "MMO") si se han definido uno o más elementos de memo en el archivo description.

- **Un fichero de registro** (".JNL" extension). Este archivo se crea sólo si la opción correspondiente fue seleccionada durante el archivo description (véase el siguiente párrafo).
	![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png) Este archivo no se crea.

- **Un archivo &lt;ProjectName&gt;.REP**. Este archivo contiene la lista de archivos de datos que maneja la aplicación. Este fichero se crea (o rellena) si la gestión de .REP está activada ([HSetREP](../WDLang4/3044061.md)). Si se especifica la constante *hDelayedOpening*, el archivo .REP se actualizará durante la apertura del archivo automatic realizada durante el primer acceso a el archivo de datos. Para obtener más información, consulte [Archivo .REP](../WDLang4/3044186.md).
	![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png) Este archivo no se crea.



<a name="NOTE0_3"></a>


### Gestión de contraseñas
<a name="gestion_contrasenas_ELTPARAGRAPHE000479"></a>

La contraseña se puede definir:

- directamente al crear o abrir el archivo de datos con la función **&lt;Fuente&gt;.CreationIfNotFound**.

- antes de crear el archivo de datos con la función [&lt;Fuente&gt;.Password](../WDLang4/1000025044.md).**Atención**: La contraseña es independiente del cifrado de datos. La encriptación de los datos debe ser configurada durante el archivo description en el editor de análisis (pestaña "Detalles").


![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) La contraseña no es associated con un archivo de datos sino con una base de datos. Esta contraseña debe especificarse durante la conexión ([HConnect](../WDLang4/3044263.md)).
<a name="NOTE0_4"></a>


### Manejo de errores fatales en la creación de un archivo de datos
<a name="manejo_errores_fatales_creacion_archivo_datos_ELTPARAGRAPHE000506"></a>Si se produce un error fatal al crear un archivo de datos, puede ser interesante continuar el programa mientras se comprueba si el archivo de datos fue creado o no.. Para ello, le recomendamos que realice la siguiente excepción: Process:

```wl
WHEN EXCEPTION IN
	Parent.CreationIfNotFound()
DO
	Error("HFSQL error: " + HError())
ELSE
	Trace("The file is created")
END
```

<a name="NOTE0_5"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Gestión de conjuntos de caracteres no latinos
<a name="gestion_conjuntos_caracteres_latinos_ELTPARAGRAPHE000524"></a>

Si se especifica la constante *hChangeCharset*, el carácter set utilizado en el archivo de datos será el especificado por [ChangeCharset](../WDLang1/3054001.md). El orden, las búsquedas, ... en claves de tipo String (cadenas, caracteres, fecha y hora) se realizarán de acuerdo con este conjunto de caracteres.

El carácter set utilizado puede ser modificado por [&lt;Fuente&gt;.Index](../WDLang4/1000025060.md).

**Observación**: el tamaño de los elementos de cadena especificados en el análisis se expresa en bytes y no en caracteres. Dependiendo del carácter set utilizado, es posible que tenga que aumentar el tamaño del artículo (si los caracteres utilizados están codificados en 2 bytes, por ejemplo).

Para obtener más información, consulte [Gestionar conjuntos de caracteres específicos en los archivos de datos](../WDLang1/3054017.md).
<a name="NOTE0_6"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) 

### Replicación: Rango de identificadores
<a name="replicacion_rango_identificadores_ELTPARAGRAPHE000553"></a>

Los identificadores de automatic para los archivos de las réplicas de los suscriptores utilizan una gama de identificadores que difiere de la utilizada por el archivo de la réplica maestra y por los otros archivos de las réplicas de los suscriptores.

Este rango de identificadores de automatic está escrito en el encabezado de cada archivo de datos (extensión "FIC").
Este rango se inicializa:

- al crear un archivo de datos (funciones [&lt;Fuente&gt;.Creation](../WDLang4/1000024207.md), **&lt;Fuente&gt;.CreationIfNotFound**).

- mediante [WDReplic](../WDReplic/3520016.md).

- cuando se utiliza [&lt;Fuente&gt;.InitSubscriber](../WDLang4/1000024998.md).


Para más detalles, consulte la página web de [consecuencias de la implementación de la réplica](../WDLang4/3044246.md).
<a name="NOTE0_7"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) 

### Prioridad para definir la ubicación de los archivos de registro
<a name="prioridad_para_definir_ubicacion_los_archivos_registro_ELTPARAGRAPHE000593"></a>

La ubicación de los archivos de registro se define según el siguiente orden de prioridad:

1. Ubicación especificada al crear el archivo de datos de registro (función **&lt;Fuente&gt;.CreationIfNotFound**).

2. Ubicación especificada por [&lt;Fuente&gt;.ChangeLogDir](../WDLang4/1000024203.md).

3. Ubicación especificada en el análisis.

4. Ubicación del archivo de datos registrado.




Si otra aplicación utiliza [&lt;Fuente&gt;.DeclareExternal](../WDLang4/1000024214.md) en un archivo de datos registrado, los cambios realizados por esta aplicación se guardan en los archivos de registro especificados en la cabecera del archivo de datos HFSQL registrado.
![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) La ubicación de los archivos de registro es fija y no se puede modificar.. Para obtener más información, consulte [Archivos de registro en modo Cliente/Servidor](../WDLang4/3044197.md). 
<a name="NOTE0_8"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png) 

### Crear o abrir una tabla existente
<a name="crear_abrir_una_tabla_existente_ELTPARAGRAPHE000630"></a>

Si la tabla ya existe, se abre la tabla.

Si la tabla no existe ya, se crea la tabla. Al crear un tabla, WINDEV y WEBDEV intentan crear los ítems en el tipo OLE DB correspondientes al tipo HFSQL. Si este tipo no es soportado, el motor HFSQL prueba sucesivamente todos los tipos de OLEDB "compatibles" hasta que encuentra un tipo que es soportado por la base de datos OLEDB.
<a name="NOTE0_9"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Gestión de índices
<a name="gestion_indices_ELTPARAGRAPHE000644"></a>

**&lt;Fuente&gt;.CreationIfNotFound** no devuelve ningún mensaje de error si no se puede añadir un índice. El tabla se crea sin el índice que está causando el problema.. En este caso, se pueden encontrar duplicados en un elemento definido como clave única por WINDEV o WEBDEV si la base de datos externa no soporta las claves únicas.
<a name="NOTE0_10"></a>


### Creando el archivo de datos a partir de su description
<a name="creando_archivo_datos_partir_description_ELTPARAGRAPHE000656"></a>

El archivo de datos puede ser creado directamente desde su description en el editor de análisis. Para ello, seleccione "Create el archivo de datos" de el menú contextual del archivo de datos (en el gráfico de análisis) y seleccione el directorio en el que debe crearse el archivo de datos.

<a name="XComponent"></a>

## Componente:
wd280hf.dll
