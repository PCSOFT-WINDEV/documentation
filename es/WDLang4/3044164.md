


## HChangeLogDir (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Modifica la ubicación de los archivos de registro correspondientes a un archivo de datos HFSQL (archivos \* JNL, así como los archivos JournalOperation y JournalIdentification si existen).

**Recordatorio**: Se crean los archivos JournalOperation y JournalIdentification:

- si se solicita la gestión de la replicación para el archivo de datos.

- si la gestión del log seleccionado corresponde a "Write-to-file log and history of accesses".




El fichero \*JNL no se crea si sólo se solicita el log del historial de acceso.

Por Default, se crean los archivos físicos correspondientes a los registros:

- en el directorio especificado en el análisis (pestaña "Análisis description", "Log Process").

<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=HChangeRepJNL%20-%20HC%20N%B0002.gif)


- en el directorio especificado al describir el archivo de datos ("description de archivo de datos" en el menú contextual, pestaña "Varios"). Esta opción sólo está disponible si el directorio de análisis corresponde al "&lt;Default directory of files>".

<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=HChangeRepJNL%20-%20HC%20N%B0003.gif)
![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) **La ubicación de los archivos de registro no se puede modificar. Esta función se ignora**. La ubicación del registro se configura en el [Archivo HFCONF.INI](../WDLang4/3044345.md). ![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) Esta función no tiene ningún efecto y siempre devuelve <u><u><u>True</u></u></u>.
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
// The "Customer" file has a log
HChangeLogDir(Customer, "\\MyServer\Log\JNL", "\\MyServer\Log\Operation")
...
HAdd(Customer)
// -> the "CustomerJNL" file is opened 
// in the "\\MyServer\Log\JNL" directory
//-> the "JournalOperation" and "JournalIdentification" files 
// are opened in the "\\MyServer\Log|Operation" directory
...
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

`<Result> = HChangeLogDir(<Data file> , <JNL file location> [, <LogOperation file location> [, <Backup location>]])`
---

**`<Result>: (booleano)`**



- <u><u><u><u>True</u></u></u></u> si se realizó la operación,

- <u><u><u><u>False</u></u></u></u> si se produce un problema. La función [HErrorInfo](../WDLang4/3044071.md) permite identificar el error.




**`<Data file>: (Cadena de caracteres)`**

Nombre del archivo de datos cuyo registro debe ser movido. Este es el nombre lógico del fichero (definido en la editor de análisis). 
Si este parámetro es igual a "\*", todos los archivos de datos encontrados en el análisis actual tendrán su archivo de registro movido.

**`<JNL file location>: (Cadena de caracteres)`**

Nuevo acceso ruta al archivo JNL associated con el archivo de registros (completo o relativo ruta). 
Si este parámetro corresponde a una cadena vacía ("""), la ubicación del archivo actual no se modifica.

**`<LogOperation file location>: (Cadena de caracteres opcional)`**

Nuevo acceso de ruta al archivo de operación de la revista y al archivo de identificación de la revista associated con el archivo de registros (completo o relativo a ruta). El fichero JournalOperation contiene todas las operaciones realizadas en el fichero con los logs. 
Si este parámetro no se especifica o si corresponde a una cadena vacía ("""), la ubicación del archivo actual no se modifica.

**`<Backup location>: (Cadena de caracteres opcional)`**

Ruta de las copias de seguridad de los archivos de registro. Por Default, este ruta corresponde a: &lt;Directorio de archivos JNL&gt;\\__JNLBackup

Este ruta se utiliza durante la modificación de los archivos de datos del automatic para archivar los registros. [HHistoryModification](../WDLang4/3044344.md) también buscará el historial de cambios en estos archivos.

Si este parámetro corresponde a una cadena vacía ("""), la posición actual no se modifica.

Si este parámetro corresponde a un ruta relativo (y comienza con un punto), el ruta será relativo a los ficheros de datos.  



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Prioridad para definir la ubicación de los archivos de registro
<a name="prioridad_para_definir_ubicacion_los_archivos_registro_ELTPARAGRAPHE000120"></a>

La ubicación de los archivos de registro se define según el siguiente orden de prioridad:

1. Ubicación especificada al crear el archivo de registro ([HCreation](../WDLang4/3044255.md)).

2. Ubicación especificada con la función **HChangeLogDir**.

3. Ubicación especificada en el análisis.

4. Ubicación del archivo registrado.



<a name="NOTE0_2"></a>


### El archivo de registro existe cuando se utiliza HChangeLogDir
<a name="archivo_registro_existe_cuando_utiliza_docparampagetitleshort_ELTPARAGRAPHE000139"></a>

Si el archivo de registro ya existe al llamar a la función **HChangeLogDir**, este archivo de registro no se vuelve a utilizar : se crea un archivo de registro en la ubicación especificada y es associated con el archivo HFSQL.

**Utilización de [HDeclareExternal](../WDLang4/3044204.md) con un archivo con registros**: si una aplicación utiliza [HDeclareExternal](../WDLang4/3044204.md) en un archivo con registro, los cambios realizados por esta aplicación se guardan en los archivos de registro especificados en la cabecera del archivo HFSQL.
<a name="NOTE0_3"></a>


### Varios
<a name="varios_ELTPARAGRAPHE000159"></a>

- Si los archivos se abren mientras se modifica el directorio, los archivos se cierran automáticamente.

- Si la ruta del registro se define varias veces con la función **HChangeLogDir**, solo se utiliza la última ruta. La modificación es efectiva para todas las aplicaciones que utilizan el fichero con los logs.



<a name="NOTE0_4"></a>


### Replicación y registro Process
<a name="replicacion_registro_process_ELTPARAGRAPHE000171"></a>

Si se utiliza la función [HInitSuscriptor](../WDLang4/3044013.md), también es necesario inicializar la ubicación de los registros y tablas de operaciones (función **HChangeLogDir**, propiedad [LogDirectorio](../Proprietes/2512075.md) y [OperaciónLogDirectorio](../Proprietes/2512076.md)).

**Recordatorio**: La replicación se basa en los registros y en las tablas de operación de los archivos de datos.. La replicación falla si la ubicación de los registros y las tablas de operaciones es inválida.

<a name="XComponent"></a>

## Componente:
wd280hf.dll
