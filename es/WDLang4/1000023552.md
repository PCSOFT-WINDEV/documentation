


## redisSubscribe (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Se suscribe a un canal de difusión de Redis. La aplicación será notificada de los mensajes enviados por las aplicaciones conectadas al servidor de Redis que publica mensajes en ese canal.
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
INTERNAL PROCEDURE OnRedis(nType is int, sChannel is string, bufMessage is Buffer)
	SWITCH nType
		CASE redisSubscribe
			Trace("Subscription to " + sChannel) 
		CASE redisUnsubscribe
			Trace("Cancel subscription to " + sChannel) 
		CASE redisDisconnection
			Trace("Disconnection: " + sChannel)		
		CASE redisMessage
			Trace("Message on " + sChannel+": " + UTF8ToString(bufMessage))
		OTHER CASE
			Trace("Unknown")
		END
	END

RedisSubscribe(gRedis, "MyChannel", OnRedis)
```

<a name="XSYNTAX"></a>

## Sintaxis
<a name="SYNTAX1"></a>

`<Result> = RedisSubscribe(<Connection> , <Channel> , <WLanguage procedure>)`
---

**`<Result>: (booleano)`**



- <u><u><u><u>True</u></u></u></u> si se realizó la suscripción,

- <u><u><u><u>False</u></u></u></u> en caso contrario.




**`<Connection>: (Variable de tipo redisConnection)`**

Nombre del [redisConnection](../WDLang4/1000023527.md) Variable que corresponde a la conexión del servidor Redis.

**`<Channel>: (Cadena de caracteres)`**

Nombre del canal de emisión al que hay que suscribirse para recibir mensajes. 

**`<WLanguage procedure>: (Nombre de Procedure)`**

Nombre del lenguaje WLanguage Procedure ("callback") llamado: 

- cuando se recibe un mensaje,

- al suscribirse,

- al darse de baja,

- al desconectar. 


Este Procedure permite gestionar el mensaje actual. Se llamará en un Thread específico. 
Este procedimiento tiene el siguiente formato:

```txt
PROCEDURE <Procedure name>(<Type>, <Subscription channel>, <Message>)
```



-  contiene el tipo de mensaje. Este parámetro corresponde a una de las siguientes constantes: 
	


|   |   |
| --- | --- |
| *redisDisconnection* | Se ha perdido la conexión con el servidor de Redis.<br><br>Si el procedimiento devuelve <u><u><u><u>False</u></u></u></u>, la aplicación pierde la suscripción. De lo contrario, la aplicación intentará volver a conectarse al servidor de Redis. |
| *redisMessage* | La solicitud acaba de recibir un mensaje. En este caso,  contiene el cuerpo del mensaje. |
| *redisSuscripción* | La aplicación acaba de suscribirse a . |
| *redisUnsubscribe* | La aplicación acaba de darse de baja de  |



-  es una cadena de caracteres que contiene el nombre del canal al que se ha suscrito la aplicación.

-  es un búfer que corresponde al contenido del mensaje.





<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Lógica de negocio
## Componente:
wd280big.dll
