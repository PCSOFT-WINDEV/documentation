
## Vista materializada
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000221"></a>


### Definition
<a name="definition_ELTPARAGRAPHE000009"></a>

Una vista materializada es una fuente de datos física definida por una consulta SQL. Esta vista materializada se crea físicamente en el servidor HFSQL. Puede ser utilizado como un archivo de datos HFSQL por las aplicaciones que acceden a la base de datos. 

La aplicación puede utilizar o manipular una vista materializada utilizando las funciones regulares de gestión de ficheros. Los datos utilizados no se actualizan automáticamente: debe solicitar la actualización de los datos. 
<a name="NOTE1_2"></a>


### ¿Cuándo utilizar una vista materializada?
<a name="¿cuando_utilizar_una_vista_materializada_ELTPARAGRAPHE000018"></a>

La utilización de una visión materializada presenta varios beneficios: 

- **Independencia con respecto a la estructura física de los datos**: 
	La vista materializada corresponde a una capa de abstracción entre la estructura de datos y el uso de los datos.. Si la estructura física de los datos evoluciona, el código de la aplicación no cambia.. Sólo la consulta base de la vista debe adaptarse a la nueva estructura.

- Aceleración de **Process**
	El uso de una vista materializada es interesante si la extracción de datos de la vista es una larga Process y si los datos no tienen que ser en tiempo real. Por ejemplo:

	- estadísticas, 

	- informando,

	- la vinculación de los datos,

	- selecciones para las tomas de correo,

	- con el objetivo,

	- crear archivos de datos "planos",

	- ...







<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Creación de una vista materializada
<a name="creacion_una_vista_materializada_ELTTEXTE000251"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000042"></a>

Se pueden utilizar varios métodos para crear una vista materializada: 

- Crear la vista materializada de la editor de análisis. En este caso, para utilizar la vista materializada, los datos deben actualizarse en el servidor.. Esta actualización se puede realizar: 

	- a través de la modificación de datos de automatic (realizada al instalar la aplicación por ejemplo). 

	- mediante [HUpdateView](../WDLang4/1000021520.md). 




- Creación de la vista materializada mediante el código SQL ["CREAR VISTA MATERIALIZADA"](../Editeurs/2034001.md) en la aplicación. 



<a name="NOTE2_2"></a>


### Creación a partir de la editor de análisis
<a name="creacion_partir_editor_analisis_ELTPARAGRAPHE000061"></a>

Para crear una vista materializada de la editor de análisis: 

1. Inicie la creación de la vista asistente: 

	- En la cinta de opciones, en la pestaña "Análisis", en el grupo "Creación", expanda "Nuevo" y seleccione "Ver". 

	- En el panel "Análisis", seleccione la carpeta "Vistas" y luego la opción "Nueva vista" del menú contextual. 




2. En la asistente, seleccione "Crear una vista materializada" y pase a la siguiente pantalla (flecha en la parte inferior de la asistente). 

3. Especifique el nombre de la vista que desea crear y seleccione el modo de edición de la consulta base para la vista.: 

	- Asistente. En este caso, la consulta de la vista se crea a través de la asistente para la creación de la consulta. La consulta se muestra gráficamente. La consulta puede ser modificada en cualquier momento a través de asistente.  

	- Código SQL. En este caso, se introduce directamente el código SQL para seleccionar los elementos seleccionados por la vista. 




4. Se crea la vista materializada. Por defecto, no es associated con una conexión. Para asociar la vista con una conexión definida en la editor de análisis: 

	- En el panel "Análisis", seleccione la vista materializada que acaba de crear. 

	- En el menú contextual (clic con el botón derecho del ratón), seleccione "description de la vista". 

	- En la ventana que se muestra, se puede modificar el nombre de la vista materializada y especificar la conexión associated con la vista materializada. 

	- Validar. 




5. Generar el análisis para utilizar la vista materializada en el código de la aplicación: en la pestaña "Análisis", en el grupo "Análisis", amplíe "Generación" y seleccione "Generación". 




Observaciones: 

- Se creará una clave o una clave compuesta basada en la sentencia "ORDER BY".. 

- Las vistas materializadas no pueden contener parámetros. 



<a name="NOTE2_3"></a>


### Creación mediante el uso del código SQL
<a name="creacion_mediante_uso_del_codigo_sql_ELTPARAGRAPHE000090"></a>Para crear una vista materializada usando código SQL, todo lo que tiene que hacer es usar el comando CREAR VISTA MATERIALIZADA en el código SQL de la consulta. Por ejemplo: 


```wl
Qry_View is Data Source

// Create the materialized view
MyMaterializedViewCode is string
MyMaterializedViewCode = [
	Create materialized view View_Customer
	AS SELECT * FROM Customer
]
HExecuteSQLQuery(Qry_View, HFSQLConnection, MyMaterializedViewCode)
```


**Atención**: El código SQL para la creación de la vista materializada debe referirse únicamente a los elementos y ficheros de datos definidos en el análisis.. Por ejemplo, las referencias a las consultas almacenadas no se pueden utilizar en este código..  

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Uso de una vista materializada
<a name="uso_una_vista_materializada_ELTTEXTE000287"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000103"></a>

Para utilizar una vista materializada, simplemente utilice las funciones HFSQL para acceder a los archivos de datos. El parámetro &lt;Nombre de archivo&gt; corresponderá al nombre de la vista materializada. 

Como un archivo de datos estándar, una vista materializada puede ser: 

- navegado usando las funciones HFSQL (FOR EACH, HRead\*, ....),

- associated con un control (control Tabla, control List Box, ...). 




Observación: Si la vista materializada no se ha creado en el editor de análisis, se debe llamar a [HDeclareExternal](../WDLang4/3044204.md) antes de poder utilizarla. 


### Derechos sobre una visión materializada
<a name="derechos_sobre_una_vision_materializada_ELTPARAGRAPHE000118"></a>

Una vista materializada corresponde a un archivo de datos. La gestión correcta es manipular de la misma manera que para los archivos de datos. Estos derechos pueden ser configurados: 

- a través del Centro HFSQL control. 

- mediante [HModifyViewRights](../WDLang4/1000021368.md). 




Observación: [HInfoViewRights](../WDLang4/1000021475.md) se utiliza para conocer los derechos actuales en la vista materializada. 


### Modificar el contenido de una vista materializada
<a name="modificar_contenido_una_vista_materializada_ELTPARAGRAPHE000139"></a>

Se actualiza el contenido de una vista materializada: 

- mediante la sentencia SQL ["REFRESCAR LA VISTA MATERIALIZADA"](../Editeurs/2034001.md). 

- mediante [HRefreshView](../WDLang4/1000021376.md). 

- mediante una tarea programada de actualización. Esta tarea se define mediante una [hScheduleMaterializedView](../WDLang4/1000021444.md) Variable. A continuación, esta tarea se puede llevar a cabo mediante las siguientes funciones: 


|   |   |
| --- | --- |
| [HAddScheduling](../WDLang4/1000021447.md) | Crea una tarea programada en un servidor HFSQL: <br><br>	- procedimiento almacenado, <br><br>	- reserva, <br><br>	- optimización, <br><br>	- actualización de una vista materializada.<br><br><br> |
| [HDeleteScheduling](../WDLang4/1000021448.md) | Elimina una tarea programada de un servidor HFSQL.: <br><br>	- procedimiento almacenado, <br><br>	- reserva, <br><br>	- optimización, <br><br>	- actualización de una vista materializada.<br><br><br> |
| [HExecuteScheduling](../WDLang4/1000021453.md) | Ejecuta inmediatamente una tarea programada independientemente de su programación: <br><br>	- procedimiento almacenado, <br><br>	- reserva, <br><br>	- optimización, <br><br>	- actualización de una vista materializada.<br><br><br> |
| [HModifyScheduling](../WDLang4/1000021450.md) | Modifica una tarea programada en un servidor HFSQL: <br><br>	- procedimiento almacenado, <br><br>	- reserva, <br><br>	- optimización, <br><br>	- actualización de una vista materializada.<br><br><br> |





### Índice en una vista materializada
<a name="indice_una_vista_materializada_ELTPARAGRAPHE000160"></a>

Para crear un índice en una vista materializada, utilice [CREATE INDEX](../Editeurs/2034001.md). Si se actualiza la vista materializada, los índices se actualizan automáticamente.: no es necesario volver a crear los índices.





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## WLanguage funciones utilizadas para manipular una vista materializada
<a name="wlanguage_funciones_utilizadas_para_manipular_una_vista_materializada_ELTTEXTE000379"></a>
Las siguientes funciones de WLanguage se utilizan para manipular las vistas materializadas: 



|   |   |
| --- | --- |
| [HInfoView](../WDLang4/1000021619.md) | Devuelve información sobre una vista materializada. |
| [HRefreshView](../WDLang4/1000021376.md) | Vuelve a calcular el contenido de una vista materializada. |
| [HUpdateView](../WDLang4/1000021520.md) | Crea o actualiza la descripción de una vista SQL o vista materializada del análisis a un servidor HFSQL. |






