


## &lt;Fuente&gt;.OnError (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Personaliza la gestión de errores HFSQL.

WINDEV, WEBDEV y WINDEV Mobile proponen una gestión de errores automatic. La gestión de errores de automatic puede ser desactivada o activada para uno o más archivos de datos, para uno o más tipos de errores. Solo se debe especificar la función **&lt;Fuente&gt;.OnError** especificando una cadena vacía para el nombre de la ventana, página o procedimiento. Para obtener más información, consulte [Gestión asistida de errores HFSQL](../WDLang4/3044188.md).


![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Procedimientos almacenados](https://doc.pcsoft.fr/ext/images/us/PS.png) La gestión de errores de automatic no está disponible para los procedimientos almacenados. 
![Procedimientos almacenados](https://doc.pcsoft.fr/ext/images/us/PS.png) Se puede utilizar la función **&lt;Fuente&gt;.OnError** para gestionar el error en un procedimiento almacenado.



![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Onlu la pérdida de conexión se puede personalizar. 
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo

![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 
```wl
// Re-enable the automatic management 
// of lock errors on the Customer data file
Customer.OnError(hErrLock)
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

`<Result> = <Source>.OnError(<Type of error> [, <Procedure/window/page>])`
---

**`<Result>: (Booleano)`**



- <u><u><u><u>True</u></u></u></u> si se realizó la operación correctamente,

- <u><u><u><u>False</u></u></u></u> en caso contrario. La función [HError](../WDLang4/3044088.md) permite obtener más detalles sobre el problema.




**`<Source>: (Tipo de fuente especificada)`**

Nombre del archivo de datos utilizado. 

**`<Type of error>: (Constante o combinación de constantes)`**

Tipo de error a configurar.


|   |   |
| --- | --- |
| *hErrAll* | Configurar todos los errores anteriores (excepto *hErrIndex*).<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrConnectionLoss* | Configurar los errores causados por la pérdida de conexión con el servidor HFSQL.<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png) Esta constante no está disponible. |
| *hErrDatabaseAccess* | Configura los errores de acceso a una base de datos HFSQL Client/Server (acceso prohibido por [&lt;Variable Connection&gt;.NoDatabaseAccess](../WDLang4/1000022690.md)).<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrDuplicates* | Configurar los errores de duplicación.<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrIndex* | Configura los errores de indexación (reindexación en curso durante el acceso al archivo).<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrIntegrity* | Configurar los errores de integridad.<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrLock* | Configurar los errores de bloqueo.<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrModify* | Configurar un conflicto de modificación.<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrNeedValue* | Configurar errores causados por un valor requerido que no ha sido especificado (OLE DB y algunos Conectores Nativos).<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *hErrPassword* | Configurar los errores de contraseña (contraseña incorrecta).<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |



**`<Procedure/window/page>: (Cadena de caracteres opcional)`**

Corresponde a: 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) Nombre de la ventana o Procedure a llamar cuando se produce un &lt;Tipo de error&gt; error.

- Nombre de método de un objeto si se llama a la función **&lt;Fuente&gt;.OnError** en un método de este objeto. 

- ![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Nombre de Procedure para llamar cuando ocurra un &lt;Tipo de error&gt; error.

- Parámetro no especificado. Si en el proyecto se marca "Habilitar la ayuda de automatic HFSQL", la ventana o página por defecto para la gestión de errores de automatic se utiliza para el tipo de error especificado y para el archivo de datos especificado.

- Cadena vacía. En este caso, la gestión de errores de automatic será desactivada.
	Observación: Para desactivar la gestión de errores de automatic, también tienes la posibilidad de desmarcar "Habilitar la ayuda de automatic HFSQL" en el proyecto. 




Observación: En algunos casos (pérdida de errores de conexión, por ejemplo), el Procedure/ventana/página se ejecutará durante la siguiente llamada a la función WLanguage después del Event que ha provocado el error.

**Caso especial: utilizar una ventana, página o procedimiento de un componente**: Se debe utilizar la siguiente sintaxis:
Procedure: 

```txt
<Data file>.OnError(<Type>, ...
	"<Component>.<Name of set of procedures>.<Procedure name>")
```

 
cristalera: 

```txt
<Data file>.OnError(<Type>, "<Component>.<Window name>")
```

paje: 

```txt
<Data file>.OnError(<Type>, "<Component>.<Page name>")
```
![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Si se produce una pérdida de conexión, para pedir la reconexión, esta Procedure debe llamar a [HReconnect](../WDLang4/1000017278.md).



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Modo de funcionamiento de los errores personalizados
<a name="modo_funcionamiento_los_errores_personalizados_ELTPARAGRAPHE000405"></a>

La Procedure, ventana o página utilizada para personalizar el error debe devolver una de las siguientes constantes:


|   |   |
| --- | --- |
| *opCancel* | La función que desencadenó el error devuelve un error como si la gestión asistida estuviera deshabilitada.. <br>**Observación**: Para los errores de pérdida de conexión, el error es fatal. |
| *opEndProcess* | La función que disparó el error devuelve un error y la actual Process se detiene. Equivale a la siguiente Line de código:<br><br><pre><code>IF NOT <HFSQL function> THEN SetFocusAndReturnToUserInput()</code></pre><br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *opEndProgram* | La función que disparó el error devuelve un error y el programa se detiene.. Equivale a la siguiente Line de código:<br><br><pre><code>IF NOT <HFSQL function> THEN EndProgram()</code></pre><br> |
| *opRelaunchProgram* | El programa se detiene y la aplicación se reinicia automáticamente.<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| *opRetry* | Se vuelve a ejecutar la función que desencadenó el error. |

![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Si se produce una pérdida de conexión, para solicitar la reconexión, se debe utilizar la función [HReconnect](../WDLang4/1000017278.md) en el procedimiento llamado por la función **&lt;Fuente&gt;.OnError**.
<a name="NOTE0_2"></a>


### Usando un método de clase para personalizar los errores
<a name="usando_metodo_clase_para_personalizar_los_errores_ELTPARAGRAPHE000457"></a>

El parámetro &lt;Nombre de procedimiento o ventana&gt; también puede corresponder al método de un objeto si se llama a la función **&lt;Fuente&gt;.OnError** en un método de este objeto. Todo lo que tiene que hacer es especificar el nombre del método a utilizar (sin usar el nombre del objeto como prefijo).

Se produce un error fatal si el objeto utilizado en la llamada a **&lt;Fuente&gt;.OnError** ya no está asignado cuando el motor HFSQL llama al método
<a name="NOTE0_3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Personalizar las ventanas de error de Default
<a name="personalizar_las_ventanas_error_default_ELTPARAGRAPHE000475"></a>

Las ventanas de error predeterminadas se suministran (así como su código WLanguage) para información en el directorio "\\Programas\\Datos\\Ventanas preestablecidas\\HFSQL - automatic ventanas de ayuda".

Estas ventanas pueden personalizarse, incluirse en sus proyectos y pasarse como parámetros a **&lt;Fuente&gt;.OnError**.

Para obtener más información, consulte [Gestión asistida de errores HFSQL](../WDLang4/3044188.md).
<a name="NOTE0_4"></a>
![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Personalización de las páginas de error de Default
<a name="personalizacion_las_paginas_error_default_ELTPARAGRAPHE000496"></a>

Las páginas de error por defecto se suministran (así como su código WLanguage) para información en el directorio "\\Programas\\Datos\\Páginas preestablecidas\\HFSQL - Páginas de ayuda de automatic".

Estas páginas pueden ser personalizadas, incluidas en sus proyectos, y pasadas como parámetros a **&lt;Fuente&gt;.OnError**.

Para obtener más información, consulte [Gestión asistida de errores HFSQL](../WDLang4/3044188.md).

<a name="XComponent"></a>

## Componente:
wd280hf.dll
