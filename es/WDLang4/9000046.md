


## Replicación universal asistida por automatic
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000273"></a>
La réplica asistida del automatic se utiliza para implementar fácilmente una réplica en una aplicación existente. Se requieren muy pocas modificaciones a nivel de aplicación, y las herramientas de replicación estándar permiten a los usuarios finales iniciar su propia replicación de datos.

La réplica asistida de automatic le permite usar todos los modos de réplica disponibles:

- replicación directa,

- replicación por servidor con réplica inmediata o periódica.






Observación: La replicación asistida por automatic está disponible para la replicación de datos móviles (Android o iOS). Para obtener más información, consulte [Replicación de datos móviles (Android o iOS)](../WDLang4/1000021071.md). 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## El principio de automatic ayudó a la replicación universal
<a name="principio_automatic_ayudo_replicacion_universal_ELTTEXTE000303"></a>
Independientemente del tipo de aplicación utilizada, una base de datos local es aliada de automatic al implementar la replicación universal asistida de automatic. Esta base de datos local (o base de datos de suscriptores) contiene los datos necesarios para que la aplicación funcione.. A continuación, los datos de la base de datos local se reproducen con los datos de la base de datos maestra (base de datos que se encuentra en la aplicación) según el modo de reproducción seleccionado.

La sincronización es realizada directamente por los usuarios con ReplicAdmin y ReplicSynchro. Estas herramientas se instalan y configuran automáticamente en el ordenador del usuario final por el programa instalación de la aplicación.
<a name="NOTE2_2"></a>


### Los pasos para implementar una réplica universal asistida por el automatic son los siguientes:
<a name="los_pasos_para_implementar_una_replica_universal_asistida_por_automatic_son_los_siguientes_ELTPARAGRAPHE000039"></a>

1. Adaptación de la aplicación si es necesario.

2. Preparación de los archivos requeridos por la replicación:

	- Descripción de la replicación con ReplicEdit. Esta description puede ser realizada por el creador de la aplicación (recomendado) o por el usuario final. La replicación se describe en un archivo ".WER".

	- Crear el programa de instalación.

	- Instalando la aplicación.




3. Usando la replicación.




Observación: Algunas características no están disponibles en esta versión. Para más detalles, consulte la página web de [Limitaciones relativas a la reproducción universal asistida](../WDLang4/9000048.md).

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Adaptación de la aplicación (si es necesario)
<a name="adaptacion_aplicacion_necesario_ELTTEXTE000333"></a>
La replicación universal asistida puede implementarse en aplicaciones que utilizan archivos de datos HFSQL Classic, HFSQL Client/Server y OLE DB, así como en archivos de datos manejados por Conectores Nativos (también llamados accesos nativos).

**Los archivos de datos del análisis están en formato HFSQL Classic**: no se debe realizar ninguna modificación. Los archivos maestros se pueden configurar:

- al definir la replicación con ReplicEdit,

- al crear la instalación,

- al instalar la aplicación.




**TLos archivos de datos del análisis utilizan una conexión** (archivos HFSQL Client/Server, Conectores Nativos, OLE DB, etc.): usted debe ***definir la conexión con el servidor maestro en el análisis y asociar los archivos con esta conexión***.

El servidor maestro utilizado por la conexión puede corresponder a:

- el servidor operativo (si ya se conoce cuando se crea la aplicación). Este es el caso, por ejemplo, de las aplicaciones desarrolladas en la misma empresa que las utiliza.

- el servidor de pruebas local. En este caso, se puede configurar el servidor maestro operativo:

	- al definir la replicación con ReplicEdit,

	- al crear la instalación,

	- al instalar la aplicación.







**Atención: Independientemente del formato de los ficheros de datos, para utilizar la replicación universal asistida por automatic**, la información de acceso a los ficheros NO DEBE SER modificada mediante programación. NO DEBES USAR:

- las funciones para modificar las conexiones ([HChangeConnection](../WDLang4/3044150.md) por ejemplo)

- las propiedades para modificar las conexiones ([Conexión](../Proprietes/2512019.md) por ejemplo)

- las funciones de cambio de directorio o de nombre ([HChangeDir](../WDLang4/3044168.md), [HSubstDir](../WDLang4/3044028.md), [HChangeName](../WDLang4/3044141.md), ...).




De hecho, el mecanismo de réplica asistida automatic automatic ally gestiona un modo Online/Offline y automatic ally realiza los cambios necesarios para acceder a la base de datos local o a la base de datos central.
<a name="NOTE3_2"></a>


### Usando bases de datos no HFSQL
<a name="usando_bases_datos_hfsql_ELTPARAGRAPHE000104"></a>

Para implementar la replicación universal en bases de datos externas (Oracle, etc.), se debe crear un campo de tipo ***DateTime*** en cada archivo que tiene en cuenta la replicación. Este elemento deberá ser actualizado por la aplicación cuando se modifique o añada un Record.

Si las bases de datos utilizan zonas horarias diferentes, le recomendamos que utilice un formato universal (por ejemplo, fecha y hora GMT).

**Ejemplo: Gestionar un elemento específico para la réplica entre una base de datos HFSQL y una base de datos MySQL**:

Se implementa un trigger para rellenar automáticamente el ítem "Itm_DateTime" que se encuentra en la base de datos MySQL:

- Código del trigger
	
	```wl
	TriggerResult is boolean
	TriggerResult = HDescribeTrigger("*", "HADD,HMODIFY,HDELETE,HCROSS,HWRITE", ...
		"AddDateTime", hTriggerBefore)
	IF TriggerResult = False THEN Error(HErrorInfo())
	```


- Procedure llamada por el gatillo
	
	```wl
	PROCEDURE AddDateTime()
	TestReplic.Itm_DateTime = DateSys()+TimeSys()
	```





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Preparación de los archivos requeridos por la replicación universal asistida
<a name="preparacion_los_archivos_requeridos_por_replicacion_universal_asistida_ELTTEXTE000363"></a>
Los archivos requeridos por la réplica universal asistida por el automatic se preparan en la computadora de desarrollo:<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Preparation_replic.gif)
 El archivo de replicación (archivo .WER) se crea con [ReplicEdit](../ReplicEdit/3526500.md).

Cuando se crea el programa instalación, se tiene la capacidad de configurar:

- Replicación directa o replicación por servidor,

- Usando el modo online o el modo offline.




Recordatorio: Para crear el programa de instalación, en la pestaña "Proyecto", en el grupo "Generación", despliegue "Procedimiento de instalación" y seleccione "Crear procedimiento de instalación". 

Para obtener más información, consulte [opciones que ofrece la creación de instalación asistente](../Editeurs/2028095.md).

Esta información puede ser modificada durante la instalación de la aplicación.

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Uso de la réplica
<a name="uso_replica_ELTTEXTE000387"></a>


### Replicación universal asistida directamente
<a name="replicacion_universal_asistida_directamente_ELTPARAGRAPHE000166"></a>

El principio para la replicación asistida directa es el siguiente:
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=replication_directe.gif)


Durante una réplica directa, la aplicación es instalada en el ordenador local por el programa instalación (el instalación puede ser un instalación autónomo o un instalación con actualización de automatic).

Durante esta instalación, se crea automáticamente una base de datos local (en formato HFSQL Classic). Esta base de datos es idéntica a la base de datos maestra.

Si el usuario no puede acceder a la base de datos maestra, la aplicación funciona en modo offline con la base de datos local (por ejemplo, un vendedor que utiliza un ordenador portátil).

Para sincronizar, el usuario inicia ReplicSynchro y realiza la sincronización de datos. En nuestro ejemplo, el vendedor puede realizar una sincronización cada noche.

Si el ordenador local puede acceder directamente a la base de datos maestra (en nuestro ejemplo, el vendedor está visitando la oficina y puede acceder a la red), la base de datos maestra se puede utilizar directamente.. Este cambio de modo es realizado por ReplicAdmin.

Observación: el principio descrito aquí es idéntico para una aplicación que utiliza una instalación con actualización de automatic.
<a name="NOTE5_2"></a>


### Replicación universal asistida por servidor de replicación
<a name="replicacion_universal_asistida_por_servidor_replicacion_ELTPARAGRAPHE000187"></a>
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=replication_serveur.gif)


Durante una replicación por servidor, la aplicación es instalada en el ordenador local por el programa instalación (el instalación puede ser un instalación autónomo o un instalación con actualización de automatic).

Durante esta instalación, se crea automáticamente una base de datos local (en formato HFSQL Classic). Esta base de datos es idéntica a la base de datos maestra. El servidor de replicación también se puede instalar cuando la aplicación está instalada.

Si el usuario no puede acceder a la base de datos maestra, la aplicación funciona en modo offline con la base de datos local (por ejemplo, un vendedor que utiliza un ordenador portátil).

Para sincronizar, el usuario inicia ReplicSynchro y realiza la sincronización de datos. En nuestro ejemplo, el vendedor puede realizar una sincronización cada noche.

Si el ordenador local puede acceder directamente a la base de datos maestra (en nuestro ejemplo, el vendedor está visitando la oficina y puede acceder a la red), la base de datos maestra se puede utilizar directamente.. Este cambio de modo es realizado por ReplicAdmin.

Observación: el principio descrito aquí es idéntico para una aplicación que utiliza una instalación con actualización de automatic.
<a name="NOTE5_3"></a>


### Modo offline/Modo online
<a name="modo_offlinemodo_online_ELTPARAGRAPHE000206"></a>

ReplicAdmin le permite cambiar del modo offline (usando la base de datos local) al modo online (usando la base de datos maestra), y viceversa.

**Cuando la aplicación está en modo offline configurado por ReplicAdmin**la aplicación siempre está utilizando los archivos de datos locales. No se aplica ningún mecanismo de automatic. Para utilizar la base de datos maestra, se debe realizar una sincronización y utilizar ReplicAdmin para pasar al modo online.

**Cuando la aplicación está en modo online configurada por ReplicAdmin**, se implementa un mecanismo automatic control. Este mecanismo es el siguiente:

- Si la conexión con la base de datos maestra se establece con éxito cuando se inicie la aplicación, ésta se encontrará en modo en línea y utilizará los datos de la base de datos maestra.

- Si la conexión a la base de datos maestra falla al iniciar la aplicación, un mensaje propone cambiar automáticamente al modo offline y utilizar los datos locales.




Observación: Para tener los datos locales más actualizados cuando se pasa al modo offline, se puede activar una sincronización inmediata de los datos locales cuando se cierra la aplicación (opción en el programa instalación de la aplicación).

**Cuando la aplicación pasa automáticamente al modo local**durante el próximo inicio de la aplicación:

- Si la conexión a la base de datos maestra se establece correctamente al iniciar la aplicación, un mensaje propone sincronizar los datos locales y volver al modo online para utilizar los datos de la red.

- Si la conexión a la base de datos maestra falla, la aplicación permanece en modo offline y continúa utilizando la base de datos local.




**Observación**: este mecanismo se puede utilizar para los ejecutables de 32 y 64 bits de Windows.




