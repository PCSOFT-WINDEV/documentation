


## HReadSeek (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Establece la posición en el primer registro que tenga un elemento específico con un valor mayor o igual al valor buscado (búsqueda genérica). Se lee la Record y se actualizan las variables HFSQL correspondientes.

En la mayoría de los casos, **HReadSeek** establece la posición en el archivo de datos para recorrer los registros que coinciden con una condición. [HReadNext](../WDLang4/3044037.md) se utiliza para leer el siguiente Record correspondiente a la condición.Después de llamar a la función **HReadSeek**, se pueden producir los siguientes casos:

- se encontró un registro que corresponde a la condición, se bloqueó (si es necesario) y se cargó en la memoria: [HFound](../WDLang4/3044104.md) devuelve <u><u><u>True</u></u></u>.
	![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: La gestión de las cerraduras no está disponible para las bases de datos a las que accede el JDBC.

- el archivo de datos está vacía o no hay Record correspondiente a la condición: no se realiza ninguna lectura y la función [HOut](../WDLang4/3044094.md) devuelve <u><u><u>True</u></u></u>.




Esta función se puede utilizar con archivos de datos, vistas HFSQL o consultas.

**Observaciones**:

- Por Default, [HReadSeekFirst](../WDLang4/3044036.md) y [HReadSeekLast](../WDLang4/3044034.md) se utilizan para realizar búsquedas de coincidencia exacta.

- Por Default, **HReadSeek** se utiliza para realizar una búsqueda genérica en cadenas. Esta búsqueda no es genérica en enteros, reales, fechas, monedas, etc.





<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo
<a class="notetitle" target="_blank" href="$DOC$=1000003044050&name=hreadseek_funcion&product=WD">Ver ejemplos adicionales</a>

```wl
// Find the first record 
// for which the CUSTOMER name is MOORE
HReadSeek(CUSTOMER, NAME, "MOORE")
IF HFound() THEN
	Trace("Customer MOORE found")
ELSE
	Trace("Customer MOORE not found")
END
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

`<Result> = HReadSeek(<Data file> , <Item> , <Sought value> [, <Options>])`
---

**`<Result>: (Booleano (opcional))`**

Corresponde a: 

- <u><u><u><u>True</u></u></u></u> si se encontró y leyó el registro buscado. El buffer de archivos está cargado con los datos de la Record encontrada. En este caso, el valor de la función [HError](../WDLang4/3044088.md) es 0 y el de la función [HFound](../WDLang4/3044104.md) es <u><u><u><u>True</u></u></u></u>. 

- <u><u><u><u>False</u></u></u></u> en los siguientes casos: 

	- error al acceder al archivo (no se puede leer, por ejemplo). [HError](../WDLang4/3044088.md) devuelve un código de error. [HErrorInfo](../WDLang4/3044071.md) devuelve más detalles sobre el error. En este caso, no se puede utilizar [HFound](../WDLang4/3044104.md). 

	- el acceso al archivo se realizó pero no se encontró ningún Record. En este caso, el valor de la función [HError](../WDLang4/3044088.md) es 0 y el de la función [HFound](../WDLang4/3044104.md) es <u><u><u><u>False</u></u></u></u>. 


 Atención: En este caso, no se puede utilizar el búfer del archivo. 




**`<Data file>: (Cadena de caracteres)`**

Nombre del archivo de datos, vista HFSQL o consulta utilizada.

**`<Item>: (Cadena de caracteres)`**

Nombre del artículo sobre el que se realizará la búsqueda. 
Para una búsqueda por coincidencia exacta, este parámetro puede corresponder a un elemento no clave.
![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) Para realizar búsquedas genéricas en una clave compuesta, todos los componentes de la clave compuesta deben ser componentes de texto. De lo contrario, se realiza una búsqueda por coincidencia exacta.

**`<Sought value>: (Tipo de valor)`**

Valor del artículo buscado.

**`<Options>: (Constante o combinación de constantes opcional)`**

Permite configurar:

- el modo de bloqueo aplicado al buscado Record.

- el tipo de búsqueda realizada.





|   |   |
| --- | --- |
| *hIdentical* | Búsqueda por coincidencia exacta (ver las Notas)<br>Una búsqueda genérica es realizada por Default (constante no especificada).<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Esta constante no está disponible. |
| *hKeepFilter* | El filtro set de [HFilter](../WDLang4/3044100.md) se tendrá en cuenta, aunque la clave de búsqueda no esté optimizada para el filtro. Recordatorio: la función [HFilter](../WDLang4/3044100.md) devuelve la clave de búsqueda optimizada para el filtro.<br>**Atención**: en este caso, pueden surgir problemas de rendimiento en archivos de datos demasiado grandes.<br>![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) Este Variable no puede ser usado. |
| *hLimitParsing* | ![ODBC](https://doc.pcsoft.fr/ext/images/us/ODBC.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) La iteración se detendrá cuando se encuentre el último valor buscado. El actual Record corresponderá a este último Record encontrado.<br>El valor de la función [HFound](../WDLang4/3044104.md) será <u><u><u><u>False</u></u></u></u> y el de la función [HOut](../WDLang4/3044094.md) será <u><u><u><u>True</u></u></u></u>..<br>Esta constante se utiliza para optimizar la velocidad de búsqueda en el modo Cliente/Servidor..<br>Esta constante se recomienda cuando se realiza una búsqueda simple (sin recorrer los elementos encontrados).<br>![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png) Esta constante no está disponible. |
| *hLockNo* | Sin bloqeuo: el Record puede ser leído o modificado por otra aplicación durante la lectura.<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Esta constante no está disponible. |
| *hLockReadWrite* | Bloqueo de lectura y escritura: el Record que se lee actualmente no puede ser leído o modificado por otra aplicación.<br>El bloqueo de teclas se ignora si se utiliza una consulta.<br>![ODBC](https://doc.pcsoft.fr/ext/images/us/ODBC.png) Bloqueo de solo escritura. Equivale a la constante *hLockWrite*.![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Esta constante no está disponible. |
| *hLockWrite* | Bloqueo de escritura: el registro leído actualmente puede ser leído por otra aplicación, pero no se puede modificar.<br>El bloqueo de teclas se ignora si se utiliza una consulta.<br><br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Esta constante no está disponible. |
| *hNoRefresh* | ![ODBC](https://doc.pcsoft.fr/ext/images/us/ODBC.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) La función **HReadSeek** no actualiza el contenido de la tabla o consulta. Si es posible, la consulta no se vuelve a ejecutar. Se guardan todas las posiciones guardadas. |

![ODBC](https://doc.pcsoft.fr/ext/images/us/ODBC.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) Las opciones de bloqueo no tendrán efecto si el proveedor OLE DB o el Conector Nativo no soporta los bloqueos.![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Acceso con JDBC: Los bloqueos no se pueden gestionar en bases de datos a las que se accede mediante JDBC. 



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Búsqueda genérica/búsqueda por coincidencia de datos de salida
<a name="busqueda_genericabusqueda_por_coincidencia_datos_salida_ELTPARAGRAPHE000297"></a>

Una búsqueda genérica o una búsqueda por coincidencia exacta se realizará de acuerdo con &lt;Valor buscado&gt;.

- **Búsqueda genérica**: buscar todos los registros que comienzan con el valor especificado
	Para realizar una búsqueda genérica, se debe especificar el valor deseado en el parámetro &lt;Valor buscado&gt;. 
	Observación: Para la compatibilidad con WINDEV 5.5, la búsqueda genérica de una cadena vacía ("") es equivalente al uso de la función [HReadFirst](../WDLang4/3044051.md).  

- **Búsqueda exacta**: buscar todos los registros que correspondan exactamente al valor especificado.
	Para realizar una búsqueda por coincidencia exacta, el tamaño del argumento de búsqueda debe ser exactamente el mismo que el tamaño de la clave.. Para realizar una búsqueda exacta, también se puede utilizar la función *hIdentical*. 
	Para realizar una búsqueda de coincidencia exacta, también tiene la posibilidad de utilizar [HReadSeekFirst](../WDLang4/3044036.md).




**Atención**: Si utiliza archivos de Hyper File 5.5 o archivos en formato Hyper File 5.5 migrados a HFSQL Classic, la implementación de búsquedas genéricas y búsquedas de coincidencia exacta puede cambiar. Para más detalles, consulte la página web de [Hyper File 5.5 y HFSQL Classic: ¿Cómo gestionar los caracteres de espacio en las búsquedas?](../WDLang4/3044190.md) tabla
<a name="NOTE0_3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Búsqueda por coincidencia exacta en Access
<a name="busqueda_por_coincidencia_exacta_access_ELTPARAGRAPHE000330"></a>

Para realizar una búsqueda de coincidencia exacta en una base de datos ACCESS, se recomienda utilizar [NoSpace](../WDLang1/3024034.md) si hay caracteres de espacio al final del valor buscado.
<a name="NOTE0_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Realizar una búsqueda en una clave compuesta
<a name="realizar_una_busqueda_una_clave_compuesta_ELTPARAGRAPHE000344"></a>

Se pueden utilizar varios métodos para realizar una búsqueda en una clave compuesta:

- Usando una lista de valores,

- Uso de [HBuildKeyValue](../WDLang4/3044258.md),




**1. Utilizando una lista de valores**.

La siguiente sintaxis se utiliza para realizar una búsqueda en una clave compuesta:


```txt
HReadSeek(<File name>, <Name of composite key>,
	[<Search value of first element of composite key>, 
		<Search value of first element of composite key>, ...])
```
Ejemplo:

```wl
// Find the record
HReadSeek(CUSTOMER, LASTNAME_FIRSTNAME, ["MOORE","Vince"])

WHILE HFound(CUSTOMER)
	// Process
	HReadNext(CUSTOMER, LASTNAME_FIRSTNAME)
END
```

**2. Uso de la función [HBuildKeyValue](../WDLang4/3044258.md)**

Si el elemento buscado es una clave compuesta, el valor a encontrar puede ser construido por [HBuildKeyValue](../WDLang4/3044258.md).

![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) Para realizar búsquedas genéricas en una clave compuesta, todos los componentes de la clave compuesta deben ser componentes de texto. De lo contrario, se realiza una búsqueda por coincidencia exacta.
<a name="NOTE0_5"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Buscar en un artículo de array
<a name="buscar_articulo_array_ELTPARAGRAPHE000388"></a>

La búsqueda se realiza en el primer elemento array (elemento con índice 1). Para realizar una búsqueda en los otros elementos de array, utilice los filtros o consultas.
<a name="NOTE0_6"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Buscar y filtrar
<a name="buscar_filtrar_ELTPARAGRAPHE000399"></a>

Si se activa un filtro ([HFilter](../WDLang4/3044100.md)), la búsqueda tendrá en cuenta el filtro sólo si la clave utilizada es idéntica.
<a name="NOTE0_7"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Recorrer en bucle los registros que coinciden con una condición
<a name="recorrer_bucle_los_registros_que_coinciden_con_una_condicion_ELTPARAGRAPHE000413"></a>

En la mayoría de los casos, **HReadSeek** establece la posición en el archivo de datos para recorrer los registros que coinciden con una condición. [HReadNext](../WDLang4/3044037.md) y [HReadPrevious](../WDLang4/3044048.md) se utilizan para leer los registros coincidentes siguientes y anteriores.

Para ignorar la búsqueda mientras se va a la siguiente o anterior Record, utilice una de las siguientes funciones:

- [HCancelSeek](../WDLang4/3044157.md)

- [HReadLast](../WDLang4/3044140.md)

- [HReadFirst](../WDLang4/3044051.md)



<a name="NOTE0_9"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![HFSQL Client/Server](https://doc.pcsoft.fr/ext/images/us/HFCS.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png)![OLE DB](https://doc.pcsoft.fr/ext/images/us/OLEDB.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) 

### Optimización de las iteraciones
<a name="optimizacion_las_iteraciones_ELTPARAGRAPHE000441"></a>

Para optimizar las primeras iteraciones en un archivo de datos, utilice [HOptimize](../WDLang4/3044005.md) en este archivo de datos.
<a name="NOTE0_10"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) 

### Versiones anteriores
<a name="versiones_anteriores_ELTPARAGRAPHE000453"></a>

Esta función sustituye a **HReadSeekLock** y **HReadSeekNoLock**, que se mantuvieron por compatibilidad con WINDEV 5.5.

<a name="XComponent"></a>

## Componente:
wd280hf.dll
