
## HCreateSubscriberReplica( Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Crea el archivo description de una réplica de un suscriptor. La extensión del archivo correspondiente a la réplica del suscriptor es.RPL.

Esta función se puede utilizar con la réplica registrada y/o con la réplica universal.

**Atención**: Al crear una réplica de suscriptor, debe hacerlo:

- han creado la réplica maestra ([HCreateMasterReplica](../WDLang4/3044175.md)).

- tienen acceso a la réplica maestra.


![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/us/UNIVERSALAPP.png) Solo está disponible la replicación universal. 

Observación: La replicación no está disponible al acceder a una base de datos mediante un .




<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo

![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) 
```wl
// Create the master replica file in the C:\RPL\France directory
// while specifying a file name
HCreateMasterReplica("C:\RPL\France\ReplicaFrance.RPM")
// Create the subscriber replica
HCreateSubscriberReplica("C:\RPL\France\", "C:\RPL\USA", 1)
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

### Replicación universal

`<Result> = HCreateSubscriberReplica(<Directory of master replica> , <Directory of subscriber replica> , <Identifier> , <Size of range of identifiers> , <List of tables to replicate> [, <Automatic modification>])`
---

**`<Result>: (Integro)`**



- Identificador de la réplica del suscriptor que se creó,

- 0 si no se ha creado ninguna réplica de suscriptor.




**`<Directory of master replica>: (Cadena de caracteres)`**

Directorio en el que se creó el archivo de descripción de la Réplica Maestro (archivo RPM) (función [HCreateMasterReplica](../WDLang4/3044175.md)). Este directorio puede ser un directorio de red o una ruta UNC. 
Si este parámetro corresponde a una cadena vacía (""), el archivo description se buscará en el directorio actual de los archivos de datos HFSQL (definidos en la editor de análisis o mediante programación). 
**Atención**: Este directorio debe ser accesible cuando se ejecute **HCreateSubscriberReplica**.

**`<Directory of subscriber replica>: (Cadena de caracteres)`**

Directorio en el que se debe crear el archivo de descripción de la Réplica Esclavo. El nombre del archivo es **Replica_&lt;Identificador&gt;.RPL**. 
Si este parámetro corresponde a una cadena vacía (""), el archivo description se creará en el directorio actual de archivos de datos HFSQL (definido en el editor de análisis o por programación).

**`<Identifier>: (Entero o cadena de caracteres)`**

Identificador de la réplica del suscriptor. Este identificador puede ser utilizado por la función [HCreateMoveableReplica](../WDLang4/3044209.md). 
Si el identificador especificado ya existe, se produce un error WLanguage .

**`<Size of range of identifiers>: (Integro)`**

Este parámetro no se tiene en cuenta.

**`<List of tables to replicate>: (Cadena de caracteres)`**

Esta lista tiene el siguiente formato: 

```txt
<TableName>[+TAB+<NameDateItem>][+<CR>+<TableName>[+TAB+<NameDateItem>]]...
```


**Atención**: El orden de las tablas es importante. El orden de las tablas es el orden de las dependencias para las tablas. 
Si los Record s del expediente 1 son relacionado a los Record s del expediente 2 y si el Record debe encontrarse en el expediente 2 para que la adición en el expediente 1 cumpla con las reglas de integridad, entonces el expediente 1 debe posicionarse primero en la lista. 
Por ejemplo, para los archivos "Cliente", "Pedidos" y "Pedido Line" (que son relacionado por enlaces cuyas cardinalidades son (0,n) - (1,1)), el archivo "Cliente" debe posicionarse en primer lugar (debe existir un cliente para añadir un pedido), luego el archivo "Pedidos" (debe existir un pedido para añadir un pedido Line) y finalmente el archivo "Pedido Line".

El nombre del elemento Date es obligatorio para las bases de datos que no estén en formato HFSQL.. Este artículo debe corresponder a un artículo del archivo de datos actualizado durante una adición o durante una modificación. Esta operación debe ser realizada por la aplicación.  

**`<Automatic modification>: (booleano)`**



- <u><u><u><u>True</u></u></u></u> para tener en cuenta la modificación de datos de automatic. En ese caso: 

	- Los cambios en la estructura de la base de datos principal se trasladarán a la base de datos de suscriptores.

	- Los nuevos elementos serán tenidos en cuenta por la réplica. 




- <u><u><u><u>False</u></u></u></u> (valor predeterminado). La modificación de datos de automatic realizada en la base de datos maestra no se transfiere a la base de datos de suscriptores. 


Atención:

- En el caso de las réplicas existentes, es necesario recrear una réplica (así como los suscriptores) para poner en práctica este mecanismo.

- Este mecanismo no funciona si se añade o se elimina una clave única. 

- Este parámetro sólo está disponible para la replicación entre bases de datos HFSQL (Clásico o Cliente/Servidor). 





<a name="SYNTAX2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png) 
### Replicación registrada (entre bases de datos HFSQL)

`<Result> = HCreateSubscriberReplica(<Directory of master replica> , <Directory of subscriber replica> [, <Identifier> [, <Size of range of identifiers>]])`
---

**`<Result>: (Integro)`**



- Identificador de la réplica del suscriptor que se creó,

- 0 si no se ha creado ninguna réplica de suscriptor.




**`<Directory of master replica>: (Cadena de caracteres)`**

Directorio en el que se creó el archivo de descripción de la Réplica Maestro (archivo RPM) (función [HCreateMasterReplica](../WDLang4/3044175.md)). Este directorio puede ser un directorio de red o una ruta UNC. 
Si este parámetro corresponde a una cadena vacía (""), el archivo description se buscará en el directorio actual de los archivos de datos HFSQL (definidos en la editor de análisis o mediante programación). 
**Atención**: este directorio debe ser accesible cuando se ejecute **HCreateSubscriberReplica**.

**`<Directory of subscriber replica>: (Cadena de caracteres)`**

Directorio en el que se debe crear el archivo de descripción de la Réplica Esclavo. El nombre del archivo es **Replica_&lt;Identificador&gt;.RPL**. 
Si este parámetro corresponde a una cadena vacía (""), el archivo description se creará en el directorio actual de archivos de datos HFSQL (definido en el editor de análisis o por programación).

**`<Identifier>: (Entero o cadena de caracteres opcionales)`**

Identificador de la réplica del suscriptor. Este identificador puede ser utilizado por la función [HCreateMoveableReplica](../WDLang4/3044209.md). 
Si este parámetro corresponde a una cadena vacía ("""), la función devuelve automáticamente un identificador.. Si el identificador especificado ya existe, se produce un error WLanguage .

**`<Size of range of identifiers>: (Entero opcional)`**

El tamaño del rango de números reservados para los identificadores de automatic para esta réplica. Estos identificadores se utilizarán para todos los nuevos registros creados por esta réplica.. 

- Si no se especifica este parámetro, el tamaño del rango de identificadores reservados es de set a 1.000 millones. 

- Si este parámetro se establece en 0, no se reserva ningún rango para los identificadores de automatic.  






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/us/HF.png)![Hyper File 5.5](https://doc.pcsoft.fr/ext/images/us/HF55.png) 

### Replicación basada en registros: Directorio para crear los archivos requeridos por la réplica y por el registro Process
<a name="replicacion_basada_registros_directorio_para_crear_los_archivos_requeridos_por_replica_por_registro_process_ELTPARAGRAPHE000180"></a>

La replicación basada en el registro es muy parecida a la relacionado del registro Process. El registro Process se habilita automáticamente cuando se implementa la replicación en una aplicación.

Para todos los ficheros utilizados (ficheros de datos, ficheros log o ficheros de replicación), las rutas de los ficheros físicos correspondientes se pueden definir en editor de análisis o por programación.

Por Default, la estructura de árbol de los archivos de datos es la siguiente (ejemplo para la aplicación SalesMgt):
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Replic_repertoire.gif)


El siguiente tabla presenta el valor de Default para estos diferentes directorios y su modo de configuración en el editor de análisis o mediante programación.

|   | Valor predeterminado | ¿Dónde configurarlo en la editor de análisis? | ¿Cómo cambiar el valor de Default mediante la programación? |
| --- | --- | --- | --- |
| **Directorio de archivos de datos** | Directorio del ejecutable. | <br><br>- Para todos los ficheros de datos de la aplicación: Pestaña "Detalles" del análisis description<br><br>- Para cada archivo de datos: La pestaña "Info" de la description del archivo de datos.<br><br><br> | Para modificar el directorio Default para los archivos de datos de la aplicación, utilice [HSubstDir](../WDLang4/3044028.md).<br>Al crear los archivos para la bitácora Process y para la réplica, los directorios creados serán relativos a este nuevo directorio.<br>Observación: Para modificar el directorio de uno de los archivos de datos solamente, utilice [HChangeDir](../WDLang4/3044168.md). |
| **Directorio de los archivos para replicación** | Subdirectorio RPL del directorio Default de los archivos de datos. | "Log\\Replica" del análisis description. | Especifique el directorio deseado en [HCreateMasterReplica](../WDLang4/3044175.md) y [HCreateSubscriberReplica](../WDLang4/3044253.md). |
| **Directorio de archivos para el registro Process** | Subdirectorio JNL del directorio Default de archivos de datos. | <br><br>- Para todos los ficheros de datos de la aplicación: "Log\\Replica" del análisis description.<br><br>- Para cada archivo de datos: "Notas adicionales" ficha de la descripción del archivo de datos.<br><br><br> | Para modificar el directorio de archivos de registro, utilice [HChangeLogDir](../WDLang4/3044164.md).<br> Esta función permite:<br><br>- modificar el directorio del fichero Log (fichero JNL)<br><br>- cambiar el directorio del archivo JNL y el directorio de los archivos para el registro Process (archivos de JournalIdentification y JournalOpération).<br><br><br> |


**Atención**: Para gestionar la réplica registrada en una aplicación, el tabla de las operaciones de registro (archivo JournalOpération.fic) debe ser idéntico para todos los archivos de datos en replicación en el mismo análisis.

<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Lógica de negocio
## Componente:
wd280rpl.dll
