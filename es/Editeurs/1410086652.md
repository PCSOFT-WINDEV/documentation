


## Tienda privada para aplicaciones móviles
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000379"></a>
Existen dos métodos para implementar aplicaciones:

- utilizar una tienda pública como App Store o Google Play. 

- distribuir directamente las aplicaciones.


La distribución de aplicaciones profesionales a través de una tienda pública suele ser compleja. Y la distribución de aplicaciones mediante un método directo no es viable a gran escala porque todo tiene que hacerse de forma manual: copias a cada dispositivo, actualizaciones, autorizaciones, etc.

A partir de la versión 26, WINDEV Mobile proporciona una solución ideal para distribuir aplicaciones profesionales: WINDEV Mobile incluye una tienda privada que puede ser utilizada inmediatamente.

Es muy fácil de implementar y utilizar: 

1. Instale todos los requisitos previos para usar la tienda privada. 

2. En el proyecto, active la opción "Tienda privada" y compile las aplicaciones (iOS y/o Android). 

3. Suba las aplicaciones al servidor de la tienda privada. 

4. Defina los usuarios autorizados. 

5. Comparta la URL o el código QR (generado automáticamente) con los usuarios. 

6. Los usuarios descargan la aplicación, se conectan y empiezan a utilizarla.

7. Después, puede publicar nuevas actualizaciones: los usuarios recibirán una notificación, y podrán aceptar y descargar automáticamente la actualización.




**Atención: En iOS, tendrá que inscribirse como [Organization](../Editeurs/1000019864.md).**

Observación: Esta página de ayuda presenta cómo implementar la "Tienda privada". Para implantar el Groupware Usuario, consulte [Groupware Usuario Mobile (Android y iOS)](../Editeurs/1410086648.md).

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Implementar la Tienda privada para una aplicación móvil
<a name="implementar_tienda_privada_para_una_aplicacion_movil_ELTTEXTE000403"></a>
Para implementar la tienda privada para una aplicación móvil: 

1. [Etapa 1: Configure el servidor](#NOTE2_2). 

2. [Etapa 2: Active la tienda privada en el proyecto](#NOTE2_3). 

3. Etapa 3: Genere y suba la aplicación a la tienda privada: 

	- [Aplicación Android](#NOTE2_4). 

	- [Aplicación iOS](#NOTE2_5).






<a name="NOTE2_2"></a>


### Etapa 1: Configuración del servidor
<a name="etapa_1_configuracion_del_servidor_ELTPARAGRAPHE000065"></a>

Pueden presentarse dos casos: 

- **Si utiliza una plataforma PCSCloud**: los elementos necesarios se instalan de forma predeterminada en su plataforma. 
	Recordatorio: PCSCloud es una solución paga lista para usar. Para obtener más información, consulte [PCSCloud](https://pcscloud.net/UK/cloud_development.awp).

- **Si no utiliza una plataforma PCSCloud**: instale los siguientes elementos: 

	- un servidor HFSQL,

	- el servidor reservado, incluidos los módulos para el Groupware Usuario de dispositivos móviles (WDBaaS).


 Para obtener más información, consulte [Configuración de un servidor BaaS (Groupware Usuario y Tienda privada)](../Editeurs/1000021311.md).



<a name="NOTE2_3"></a>


### Etapa 2: Active la tienda privada en el proyecto
<a name="etapa_2_active_tienda_privada_proyecto_ELTPARAGRAPHE000087"></a>

Para activar la tienda privada en un proyecto WINDEV Mobile: 

1. Abra el proyecto en WINDEV Mobile. 

2. En la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "GPU / Tienda privada". 

3. La ventana de descripción de la configuración de proyecto actual se abre. 

4. En "Implementación en una tienda privada", haga clic en "Cambiar". 

5. La ventana de configuración de la tienda privada se abre. 

6. Seleccione la pestaña "General": 

	- Active los servicios MBaaS: haga clic en "Activo". 

	- Seleccione la funcionalidad deseada: "Tienda privada: Gestión de versiones y actualizaciones de la aplicación".

	- En "Servidor de aplicaciones del GPU y de la tienda privada (webservice y sitio de administración)", especifique el servidor que desea utilizar. En el caso de un nuevo servidor, seleccione el tipo de servidor a utilizar: 

		- **Plataforma PCSCloud**. En este caso, indique las características de la plataforma PCSCloud. 
						Recordatorio: Esta opción permite utilizar un servidor web, un servidor dedicado y un motor HFSQL Client/Server ya instalados y configurados. 

		- **Servidor de red o de Internet** con el protocolo utilizado. Introduzca la información proporcionada durante la instalación del servidor reservado para el Groupware Usuario y la Tienda privada: 

			- nombre del servidor, usuario y contraseña. 

			- nombre del servidor y token. 




- Las URL de los sitios de administración se completan automáticamente con la información especificada previamente. 
			ATENCIÓN: Las URL especificadas solo funcionarán cuando se valide la ventana de configuración. Al validar la ventana, los módulos instalados con el servidor de aplicaciones reservado se configuran automáticamente.  

7. En la pestaña "Tienda privada", especifique: 

	- Cómo se descargarán las actualizaciones (solo para Android): 

		- Solo a través de Wi-Fi: los usuarios solo podrán descargar las actualizaciones si tienen acceso a Wi-Fi. 

		- A través de Wi-Fi y datos móviles: los usuarios podrán descargar las actualizaciones en cuanto haya una conexión disponible. 


 En iOS, estos ajustes deben definirse en la consola de la aplicación. 

- Cómo notificar al usuario sobre las actualizaciones opcionales. Puede notificar al usuario sobre una actualización opcional utilizando uno de los siguientes métodos: 

	- Mostrar una ventana en la aplicación: en este caso, se mostrará automáticamente una ventana con el aviso de la actualización. 

	- Enviar una notificación: en este caso, el usuario recibirá una notificación sobre la actualización disponible (las notificaciones deben estar activadas para la aplicación). 

8. En la pestaña "Opciones", especifique: 

	- Las opciones de personalización de correos electrónicos: 

		- Validación de registro: Si es necesario, personalice los mensajes que se envían a los nuevos usuarios registrados. 

		- ¿Olvidó su contraseña?: Si es necesario, personalice los mensajes que se envían a los usuarios cuando olvidan la contraseña.

		- Instalación de la aplicación (Tienda privada): Personalice el mensaje que se envía a los usuarios que desean descargar la aplicación.




- El idioma de los archivos: De forma predeterminada, los archivos de datos específicos de la tienda privada están en inglés, pero se pueden utilizar en francés.

9. Valide la ventana de configuración de la tienda privada. 




**Atención: Cuando se valida la ventana de configuración de la tienda privada, se realizan las siguientes acciones:** 

- Declaración de la aplicación actual en el servidor de aplicaciones reservado para la tienda privada. 

- Activación de sitios de gestión de usuarios y permisos. 

- Actualización del archivo XML que contiene la descripción de las ventanas de la aplicación en el servidor. 

- Definición de un usuario predeterminado: 

	- Definición de una tienda privada, hasta la versión 28: de forma predeterminada, se utiliza "supervisor" como nombre de usuario y contraseña.

	- Definición de una tienda privada a partir de la versión 28 Update 1 (280066): de forma predeterminada, se utiliza "admin" como nombre de usuario y contraseña. 
			Observación: La primera vez que inicie sesión en la tienda privada, se le pedirá que cambie la contraseña del administrador.






<a name="NOTE2_4"></a>


### Etapa 3: Genere y suba la aplicación a la tienda privada (Android)
<a name="etapa_3_genere_suba_aplicacion_tienda_privada_android_ELTPARAGRAPHE000176"></a>

**Para generar la aplicación Android**: 

1. En la pestaña "Proyecto", en el grupo "Generación", haga clic en "Generar". 

2. En el asistente de generación, en la etapa "Modo de generación", seleccione "Generar para una implementación libre (flota corporativa, tienda privada etc.)". 

3. Valide las diferentes etapas del asistente con las opciones deseadas. 

4. El archivo apk de la aplicación se genera en el subdirectorio "Exe" del directorio del proyecto. 
	Para abrir esta carpeta en el explorador de archivos, vaya a la pestaña "Inicio", grupo "General", despliegue ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Rep_Projet.gif) y seleccione "Examinar directorio de generación". 






**Para subir la aplicación**: 

1. Abra un sitio de administración a través de uno de los enlaces de la pestaña "General" de la ventana de gestión del Groupware Usuario/Tienda privada: 

	- la URL que corresponde a la aplicación implementada. Los usuarios y contraseñas definidos se utilizarán al implementar la aplicación. 

	- la URL que corresponde al modo de prueba. Los usuarios y contraseñas definidos se utilizarán al realizar una prueba en el teléfono ("Go").  




2. Inicie sesión en el sitio de administración. 

	- Definición de una tienda privada, hasta la versión 28: Introduzca "supervisor" como nombre de usuario y contraseña. 

	- Definición de una tienda privada a partir de la versión 28 Update 1 (280066): Introduzca "admin" como nombre de usuario y contraseña.




3. Para aplicaciones Android, el sitio de administración de la tienda privada permite subir versiones de la aplicación a través de un archivo APK. Se puede generar un código de barras para facilitar la instalación en dispositivos Android.

	- Haga clic en el botón "+" ubicado a la derecha de "Aplicaciones". 

	- En la ventana que aparece, especifique: el nombre, la descripción y el ícono de la aplicación. 

	- La aplicación aparece en la tienda privada. Puede: 

		- Definir los permisos de descarga. 

		- Subir la primera versión de la aplicación (botón "Subir la primera versión"). En la ventana que aparece, especifique el archivo apk que se debe descargar. Si es necesario, introduzca los comentarios necesarios. 






<a name="NOTE2_5"></a>


### Etapa 3: Genere y suba la aplicación a la tienda privada (iOS)
<a name="etapa_3_genere_suba_aplicacion_tienda_privada_ios_ELTPARAGRAPHE000229"></a>

Antes de generar una aplicación iOS, asegúrese de tener un certificado que le permita realizar una implementación "interna" (consulte [Implementación interna](../Editeurs/1000019926.md)).. 

**Para generar una aplicación iOS**: 

1. En la pestaña "Proyecto", en el grupo "Generación", haga clic en "Generar".

2. En el asistente de generación, en la etapa "Firma", importe los archivos "Provisioning Profile" requeridos. 

3. Valide las diferentes etapas del asistente con las opciones deseadas. 

4. El archivo xxx.xcode.gen de la aplicación se genera en el subdirectorio "Exe" del directorio del proyecto. 

5. Abra esta carpeta en el explorador de archivos: en la pestaña "Inicio", en el grupo "General", despliegue ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Rep_Projet.gif) y seleccione "Examinar directorio de generación". 

6. Copie el directorio "&lt;Project name&gt;.xcode.gen" generado en el directorio EXE a un medio externo (memoria USB, disco duro externo o directorio compartido con Mac en la red).

7. Pegue la carpeta en el MAC que va a compilar la aplicación.

8. Abra la carpeta en el Mac y abra el archivo "Nombre_del_archivo.xcodeproj".

9. El proyecto se abre en Xcode. 




**En Xcode** (atención: las operaciones descritas a continuación son válidas en la fecha de redacción de este documento y pueden estar sujetas a cambios): 

1. En la pestaña "Signing & capabilities", compruebe que dispone de un certificado de firma válido. 

2. Seleccione las opciones de compilación en la lista desplegable de la esquina superior izquierda. Seleccione el esquema "Any iOS device". 
	Atención: el archivo "info.plist" debe estar en formato XML y no en formato binario.

3. Para iniciar la compilación, seleccione las opciones "Product .. Archive". 

4. Una vez completado el proceso, una ventana muestra el archivo IPA. Haga clic en "Distribute App". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=MDM_IOS_01.gif)
El asistente se abre.

5. En el asistente: 

	- Seleccione "Enterprise". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=MDM_IOS_02.gif)


	- Haga clic en "Next" dos veces.

- El asistente solicita las URL con los datos de la aplicación. Utilice URLs de tipo "https" (simplemente escriba "https" en los campos). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=MDM_IOS_04.gif)




**Para subir la aplicación**: 

1. Abra un sitio de administración a través de uno de los enlaces de la pestaña "General" de la ventana de gestión del Groupware Usuario/Tienda privada: 

	- la URL que corresponde a la aplicación implementada. Los usuarios y contraseñas definidos se utilizarán al implementar la aplicación. 

	- la URL que corresponde al modo de prueba. Los usuarios y contraseñas definidos se utilizarán al realizar una prueba en el teléfono ("Go").  




2. Inicie sesión en el sitio de administración. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=MDM_IOS_08.gif&type=thumb)


	- Hasta la versión 28: Introduzca "supervisor" como nombre de usuario y contraseña. 

- a partir de la versión 28 Update 1 (280066): Introduzca "admin" como nombre de usuario y contraseña.

3. El sitio WDBaaS permite subir versiones de la aplicación a través de sus archivos (".ipa" y ".manifest"). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=MDM_IOS_09.gif)


4. Cuando se sube la aplicación, se genera un código de barras para instalarla fácilmente en dispositivos iOS. Simplemente comparta el código de barras con los usuarios para que puedan escanearlo con sus dispositivos. Estos usuarios se deben haber descrito y activo desde el administrador de la tienda privada para la base de datos de producción. 




**Caso especial: 1.ª instalación en un dispositivo iOS mediante el código de barras**

- Cuando los usuarios escanean el código de barras de la aplicación, primero deben aceptar el certificado del desarrollador de la aplicación. Esto debe hacerse solo una vez. 

- iOS descarga la aplicación mediante HTTPS. Si el certificado del servidor Web que aloja el sitio WDBaaS no fue emitido por una autoridad de confianza reconocida por iOS, tendrá que agregar el certificado a iOS. El procedimiento es el siguiente (válido en la fecha de redacción de este documento):

	- en el dispositivo iOS, haga clic en el archivo .cer (recibido por correo electrónico, etc.),

	- seleccione el dispositivo,

	- un mensaje indica que se descargó el perfil ("Profile Downloaded"): haga clic en "Cerrar". 

	- vaya a "Ajustes",

	- seleccione "General",

	- seleccione "Gestión de perfiles y dispositivos",

	- seleccione el perfil que acaba de instalar,

	- haga clic en "instalar" y confirme.

	- vuelva al menú "General",

	- seleccione "Información",

	- seleccione "Ajustes de certif. de confianza",

	- seleccione el certificado añadido previamente al perfil,

	- active el certificado,

	- acepte la confirmación de adición a los certificados raíz.







**Caso especial: Actualización de la aplicación en dispositivos iOS**
Si hay cambios en la aplicación, los usuarios deben poder actualizarse. El procedimiento en Xcode sigue siendo el mismo, hay que crear un nuevo archivo. Se debe subir la nueva versión (archivos .ipa y manifest.plist).
La nueva versión estará disponible en el administrador de la tienda privada. La próxima vez que se inicie la aplicación, el aviso de actualización aparecerá automáticamente.

Observaciones: 

- Solo el "Supervisor" puede acceder al sitio de administración de la aplicación. 

- Un banner específico permite saber si el sitio de administración de las aplicaciones se utiliza en modo de prueba. 





