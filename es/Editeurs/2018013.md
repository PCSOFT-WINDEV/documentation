
## Groupware de usuario y LDAP
			

<DIV class="specObsolete">
	<IMG style="float:left;margin-right:10px;" src="https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=warning_big.png"><B>Advertencia</B><BR>
	A partir de la versión <B>18</B>, el groupware de usuario evoluciona. Esta página de ayuda corresponde al groupware de usuario guardado para compatibilidad con versiones anteriores.. A get esta página de ayuda para la nueva versión del groupware de usuario, ver [Groupware de usuario y LDAP](../Editeurs/1000021178.md). 
</DIV><a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000175"></a>
El protocolo LDAP es cada vez más utilizado por las empresas. El protocolo LDAP se utiliza para consultar y modificar los servicios de directorio. Por ejemplo, Active Directory de Microsoft proporciona acceso LDAP a sus datos.

En una empresa, el gestor "IT" asigna una cuenta y una contraseña a los usuarios.

Esta cuenta y esta contraseña pueden ser utilizadas directamente por el groupware de usuarios de WINDEV y WEBDEV, con capacidad para definir derechos específicos.

**Observación**: El groupware de usuario funciona con Active Directory. No funciona con openLDAP.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Cómo proceder?
<a name="¿como_proceder_ELTTEXTE000199"></a>


### Bifurcación del groupware de usuario en un directorio LDP sin gestión de derechos
<a name="bifurcacion_del_groupware_usuario_directorio_ldp_sin_gestion_derechos_ELTPARAGRAPHE000030"></a>

Derivar el groupware de usuario a un directorio LDAP sin gestión de derechos:

1. Configure el groupware de usuario ("Workshop .. Configure el groupware de usuario").

2. En la pestaña "General", marque las opciones:

	- Utilizar un directorio LDAP para autenticar a los usuarios.

	- Sin gestión de derechos







En este caso, el groupware de usuario no creará ningún archivo de datos. Un supervisor no podrá definir los derechos para las ventanas y las páginas.

Cuando se inicia la aplicación, la ventana o página de inicio de sesión le pide al usuario que se identifique.. Si el usuario está guardado en el directorio LDAP, la aplicación se iniciará; de lo contrario, se cerrará.
<a name="NOTE2_2"></a>


### Bifurcación del groupware de usuario en un directorio LDP con gestión de derechos
<a name="bifurcacion_del_groupware_usuario_directorio_ldp_con_gestion_derechos_ELTPARAGRAPHE000047"></a>

Derivar el groupware de usuario a un directorio LDAP con gestión de derechos:

1. Configure el groupware de usuario ("Workshop .. Configure el groupware de usuario").

2. En la pestaña "General", marque "Utilizar un directorio LDAP para autenticar a los usuarios".




En este caso, el groupware de usuario crea los archivos de datos para la gestión de los usuarios y los derechos.. Un supervisor puede definir los derechos para las ventanas y las páginas.

**Caso 1: La base de datos del groupware de usuario está vacía. La base de datos LDAP existe**

**Se debe realizar una configuración adicional al implementar la aplicación.**.

1. Conectarse a la aplicación como Supervisor (Login: "Supervisor", Contraseña: "Supervisor").

2. Seleccione "Configurar el software de trabajo en grupo".

3. Seleccione "Importar usuarios del directorio LDAP".. Una ventana le permite importar todos los usuarios.
	Observación: Si no está autenticado en el servidor LDAP (1er uso por ejemplo), se le pedirá un nombre de usuario y contraseña de un usuario LDAP.. El usuario LDAP seleccionado debe tener los derechos para listar los usuarios del directorio LDAP.

4. Haga clic en el botón "Importar. La importación se realiza, todos los usuarios LDAP se muestran en la lista de usuarios.
	Observación: Le aconsejamos que conceda derechos de supervisor a un usuario específico y que elimine el usuario "Supervisor" de Default.

5. Tiene la posibilidad de asignar derechos a los usuarios importados.




**Caso 2: La base de datos del groupware de usuario ya existe. La aplicación se conecta a una base de datos LDAP**

Sólo los usuarios que se encuentren en la base de datos de groupware de usuarios y en la base de datos LDAP podrán conectarse a la aplicación (los mismos inicios de sesión para los usuarios).. La contraseña a utilizar es la contraseña LDAP. Los usuarios que no se encuentren en la base de datos LDAP no podrán iniciar la aplicación.

Los derechos pueden ser administrados por los usuarios que se encuentran tanto en la base de datos del groupware como en la base de datos LDAP.

**Nota: El uso de un directorio LDAP con gestión de derechos permite pasar fácilmente del modo LDAP al modo sin LDAP.. Todo lo que tienes que hacer es marcar "Usar un directorio LDAP"..**
<a name="NOTE2_3"></a>


### Inicio de la aplicación
<a name="inicio_aplicacion_ELTPARAGRAPHE000081"></a>

**In automatic ejecuta el modo de funcionamiento:**
Las características del servidor LDAP deben introducirse en la pestaña "LDAP" de la ventana de configuración del groupware de usuario.

Para conocer el nombre del usuario, sólo tiene que llamar a [gpwGetUserInfo](../WDLang6/3041004.md):


```wl
Info("Hello "+ gpwGetUserInfo(gpwInfoLogin))
```


**En modo de arranque manual:**
Para utilizar el directorio LDAP, [gpwOpenLDAPSession](../WDLang6/1000017055.md) debe iniciar una sesión LDAP antes de la llamada a [gpwOpen](../WDLang6/3041002.md):


```wl
gpwOpenLDAPSession("xx.mycompany.com", 389, 3, False)
gpwOpen()
```


Para identificar a un usuario sin abrir la ventana de inicio de sesión, utilice el siguiente código:


```wl
gpwOpenLDAPSession("xx.mycompany.com", 389, 3, False)
IF gpwLogin("FP", "Password")<>gpwOk THEN
	Error("Invalid user or password")
	EndProgram()
END
```

<a name="NOTE2_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png) 

### Instalando la aplicación que está usando un directorio LDAP
<a name="instalando_aplicacion_que_esta_usando_directorio_ldap_ELTPARAGRAPHE000115"></a>

Los parámetros del directorio LDAP pueden ser introducidos por el usuario durante la instalación de la aplicación.

Para ello, al crear el programa de instalación de la aplicación que utiliza el groupware de usuario, ("Workshop .. Create the setup Procedure"), marque "Customize the ruta of the groupware files during setup"; en la pantalla "Parameters of databases".

En este caso, se mostrará una pantalla específica para el groupware de usuario cuando se instale la aplicación.. Esta pantalla permite a la persona que instala la aplicación:

- configurar la ubicación de los archivos de datos específicos del groupware de usuario. Consulte el [Archivos de datos del groupware de usuario](../Editeurs/2018002.md) para obtener más detalles.

- activar historial de conexiones.

- permitir la autenticación de los usuarios a través de un directorio LDAP. En este caso, tendrás que introducir la Address del servidor, el número de puerto y la versión LDAP utilizada.





