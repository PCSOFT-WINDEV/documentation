


## Gestor de pruebas automatizadas
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000292"></a>
El director de la prueba está acostumbrado:

- mostrar en el editor la lista de pruebas (o escenarios) adjuntos a un elemento.

- configurar las diferentes pruebas.




El estado reporte de la ejecución de la prueba se muestra en el panel ["Resultados de las pruebas"](../Editeurs/2027037.md). 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Mostrando el gestor de pruebas
<a name="mostrando_gestor_pruebas_ELTTEXTE000316"></a>
La lista de pruebas automatizadas existentes puede verse en la carpeta "Tests" del panel "Project explorer".. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Gestionnaire%20de%20tests%201%20-%20HC%20N%B0001.gif)


Los diferentes escenarios se agrupan según el elemento cuya prueba se ejecuta (o según el elemento que inició la prueba automatizada). Por ejemplo, "TEST_WIN_addressinput" agrupa todos los escenarios de prueba ejecutados desde la ventana "WIN_addressinput".

**To muestra el administrador de pruebas para un elemento específico**, utilice uno de los siguientes métodos:

- haga doble clic en el nombre del grupo de pruebas (en el panel "Explorador del proyecto").

- mostrar el elemento (ventana, clase, ...) en el editor. En la pestaña "Pruebas automatizadas", en el grupo "Pruebas", haga clic en "Ver pruebas asociadas".




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Características del gestor de pruebas
<a name="caracteristicas_del_gestor_pruebas_ELTTEXTE000340"></a>


### Ventana de gestión de pruebas
<a name="ventana_gestion_pruebas_ELTPARAGRAPHE000053"></a>A continuación se muestra la ventana de gestión de las pruebas automatizadas de un elemento:<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Gestionnaire%20de%20tests%201%20-%20HC%20N%B0001%201.gif)
Esta ventana permite: 

- Ver el resumen de todos los escenarios associated con el elemento actual. En la sección izquierda de la ventana. Las pruebas se clasifican en diferentes categorías: 

	- Pruebas independientes: pruebas independientes. Por ejemplo, para una prueba independiente en una ventana, la ventana se cierra al final de la prueba. 

	- Pruebas encadenadas: las pruebas se realizan una tras otra. Por ejemplo, para las pruebas secuenciales en una ventana, la ventana permanece abierta al final de la primera prueba para ejecutar la siguiente prueba en la misma ventana. 

	- Subpruebas: las pruebas no se realizan directamente, sino a través de [EmularVentana](../WDLang1/1000009009.md). 




- Visualizar el código de un escenario: todo lo que tienes que hacer es seleccionar un escenario en la estructura de árbol que se muestra a la izquierda. El código de WLanguage correspondiente se muestra en la sección derecha del editor. 




Desde esta ventana, puedes hacerlo:

- Iniciar un escenario: simplemente seleccione el escenario deseado en la estructura de árbol de la izquierda y seleccione "Iniciar" en el menú contextual.

- Mostrar la description de un escenario: basta con seleccionar un escenario en la estructura de árbol de la izquierda, y seleccionar "description" en el menú contextual.

- Renombrar o borrar un escenario: Basta con seleccionar un escenario en la estructura de árbol de la izquierda y seleccionar "Renombrar" o "Eliminar" en el menú contextual.

- Crear un nuevo escenario ("Nuevo escenario" en el menú contextual): el escenario creado está vacío y se puede escribir el código de idioma WLanguage correspondiente. 

- Crear un grupo de pruebas ("Nuevo grupo de pruebas" en el menú contextual): los diferentes escenarios se pueden agrupar en un grupo de pruebas mediante un "arrastrar y soltar" de escenario. 




Diferentes iconos permiten conocer el estado de la prueba: 

- ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Gestionnaire%20de%20tests%203%20-%20HC%20N%B0001.gif): prueba aprobada sin error. 

- ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Gestionnaire%20de%20tests%203%20-%20HC%20N%B0002.gif): prueba modificada. 

- ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Gestionnaire%20de%20tests%203%20-%20HC%20N%B0003.gif): prueba en error. 




El estado reporte de la ejecución de la prueba se muestra en el panel ["Resultados de las pruebas"](../Editeurs/2027037.md). 


### Opciones de cinta
<a name="opciones_cinta_ELTPARAGRAPHE000092"></a>

Algunas funciones del editor de pruebas están agrupadas en la pestaña "Pruebas automatizadas" de la cinta de opciones. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Gestionnaire%20de%20tests%201%20-%20HC%20N%B0001%202.gif)
 Las diferentes opciones son: 

- "Opciones del grupo "Pruebas: 

	- nuevo: Crea un nuevo script. Es posible: 

		- Record un nuevo escenario: 

		- Nuevo escenario en blanco: Crear un escenario en blanco. 

		- Importar un escenario grabado en la aplicación: Importa un caso de prueba (archivo wsct) creado por el usuario en el proyecto actual. Para obtener más información, consulte [Prueba automatizada creada por el usuario](../Editeurs/2019031.md).  




- Iniciar prueba: Ejecuta la prueba actual en el editor de pruebas. 

- Ejecutar todo: 

	- Ejecutar todas las pruebas del proyecto: Ejecuta todos los escenarios en todos los elementos del proyecto. 

	- Ejecutar todas las pruebas no ejecutadas: Ejecuta todos los escenarios que aún no se han ejecutado. 
						Observación: Un escenario modificado que no se ha iniciado se considera "no ejecutado". 

	- Ejecutar todas las pruebas que han detectado errores: Ejecuta sólo los escenarios en los que se encontraron errores. 

	- Ejecutar pruebas automatizadas en modo lento: Si se selecciona esta opción, la ejecución del escenario tardará más tiempo. 

	- Habilitar la auditoría dinámica durante las pruebas automatizadas: Si se selecciona esta opción, la auditoría dinámica se inicia automáticamente junto con los escenarios y la auditoría reporte se muestra después de la ejecución de cada escenario. 

	- Activar el modo estricto durante las pruebas automatizadas: Si se selecciona esta opción, cuando la prueba encuentra un Error( TestCheck devuelve False, errores, aserciones, etc.), la prueba se detiene automáticamente en el depurador en la iteración actual.

- "Opciones del grupo "Prueba automatizada: 

	- Generar biblioteca: Genera la biblioteca de pruebas necesaria para realizar pruebas directamente en el ejecutable. Para obtener más información, consulte [Pruebas automatizadas en un ejecutable](../Editeurs/2019029.md). 

	- Iniciar prueba auto.: Permite seleccionar las pruebas automatizadas deseadas y ejecutarlas en el ejecutable. Para obtener más información, consulte [Pruebas automatizadas en un ejecutable](../Editeurs/2019029.md). 




- Opciones del grupo "Cobertura del código": Permite configurar los datos que se muestran en las estadísticas del código de cobertura. Para obtener más información, consulte [Cobertura de código](../Editeurs/2019034.md). 




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Describiendo un escenario
<a name="describiendo_escenario_ELTTEXTE000370"></a>
Para mostrar la description de un escenario de prueba: 

1. Seleccione el escenario en la estructura de árbol del gestor de pruebas. 

2. Seleccione "description" en el menú contextual de reporte.




La description de un escenario de prueba se utiliza para introducir información en las diferentes pestañas:

- "General": Se utiliza para especificar el nombre de la prueba, así como una leyenda.

- "Detalles": Se utiliza para especificar (para una ventana): <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Gestionnaire%20de%20tests%202%20-%20HC%20N%B0002.gif&type=thumb)


	- Si la prueba debe provocar un error si la ventana no puede cerrarse al final de la prueba. Cuando se realizan pruebas de unidad en una ventana, esta opción se utiliza para comprobar si la ventana está cerrada. Si se selecciona esta opción, la prueba es una prueba independiente. 

- Si la prueba debe mantener la ventana abierta al final de su ejecución para que otras pruebas puedan ser ejecutadas en esta ventana. Esta opción le permite vincular varias pruebas de ventana juntas. Esta opción se marca automáticamente si se abre otra ventana durante una prueba de ventana. Si esta opción está marcada, la prueba es una prueba secuencial. 

- Si el resultado de la prueba depende de una secuencia de pruebas. En este caso, la prueba no puede realizarse por sí sola. Si esta opción está marcada, la prueba es una subprueba. 




<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Código del escenario
<a name="codigo_del_escenario_ELTTEXTE000394"></a>
El código del escenario de prueba puede ser modificado. De hecho, el código del escenario está escrito en WLanguage y puede ser fácilmente modificado. Para acceder al código de escenario, todo lo que tienes que hacer es seleccionar un escenario en la estructura de árbol que se muestra a la izquierda. El código de WLanguage correspondiente se muestra en la sección derecha del editor.

Se muestran tres secciones de código:

- la Event ["Antes de la prueba"](#NOTE6_2). Este Event se ejecuta antes de la prueba.  

- la Event ["Escenario de prueba"](#NOTE6_3). Esta Event corresponde a la ejecución del código para probar el elemento deseado. 

- la Event ["Después de la prueba"](#NOTE6_4). Esta Event se utiliza para comprobar los resultados de la prueba (según los datos encontrados en un archivo de reference por ejemplo). Generalmente, este Event permite cerrar y liberar todos los elementos abiertos y asignados en el Event "Antes de la prueba".



<a name="NOTE6_2"></a>


### "Antes de la prueba"
<a name="antes_prueba_ELTPARAGRAPHE000186"></a>

El Event "Antes de la prueba" se utiliza para: 

- localizar los datos que se utilizarán para la prueba,

- pasar los parámetros necesarios para la prueba,

- definir variables y definir un conjunto de datos de prueba (mediante la función [TestAddIteration](../WDLang1/1000017015.md)). 




Ejemplo: 


```wl
// -- Event "Before the test" of a test on a procedure
// Two parameters have been defined in the event "Test scenario"
// Adds the test data
TestAddIteration("test@test.fr", True)
TestAddIteration("not valid", False)
TestAddIteration("", False)
TestAddIteration("test.test.test@test.fr", True)
TestAddIteration("test@test@test.fr", False)
TestAddIteration("test.fr", False)
TestAddIteration("http://www.test.fr", False)
```

<a name="NOTE6_3"></a>


### Event "Escenario de prueba"
<a name="event_escenario_prueba_ELTPARAGRAPHE000204"></a>

El "escenario de prueba" de Event corresponde al código ejecutado por la prueba. 

Tienes la capacidad de modificar el código del escenario, de añadir operaciones en la prueba. Tiene la posibilidad de utilizar el [funciones específicas de las pruebas automatizadas](../WDLang1/1000013002.md) o el [Emular las funciones](../WDLang1/1000009002.md). 

También tiene la capacidad de reemplazar los valores por parámetros (para usar una set de datos de prueba). En este caso, tiene la capacidad de declarar una Procedure en este código, para especificar los parámetros esperados. 

**Ejemplo 1: Guión que utiliza un conjunto de datos de prueba y una controller**

En este código, la variable controller 1 es una variable definida como controller (a través del atributo de extensión &lt;controller&gt;). Esta variable controller puede utilizarse en el código de prueba, por ejemplo, para comprobar el resultado de un Procedure. En nuestro ejemplo, la Line del código: 

```wl
Controller1 = bCheckEmail(psEmail)
```
 ejecuta el bCheckEmail Procedure pasando el parámetro "psEmail" y compara el resultado con el valor definido para el "Controller1" Variable. 


```wl
// Define two parameters to create a set of test data 
// The value of these parameters is defined in the event "Before the test"
PROCEDURE MyScenario(psEmail, Controller1 is boolean<controller>)
Controller1 = bCheckEmail(psEmail)
```


**Ejemplo 2: Script que utiliza un conjunto de datos de prueba y la función TestVerify**

En este código, la Procedure correspondiente a la prueba espera dos parámetros. La prueba del conjunto de datos se ejecuta con la función [TestCheck](../WDLang1/1000017023.md).  


```wl
// Define two parameters to create a set of test data
// The value of these parameters is defined in the event "Before the test" 
PROCEDURE MyScenario(psEmail, Controller1 is boolean)
TestVerify(Controller1 = bCheckEmail(psEmail), "Test error for " + psEmail)
```

<a name="NOTE6_4"></a>


### Event "Después de la prueba"
<a name="event_despues_prueba_ELTPARAGRAPHE000239"></a>

El Event "Después de la prueba" se utiliza para comprobar los resultados de la prueba (según los datos encontrados en un archivo reference, por ejemplo). Generalmente, este Event permite cerrar y liberar todos los elementos abiertos y asignados en el Event "Antes de la prueba".

Ejemplo: Borrar los datos creados durante la prueba: este código se utiliza para comprobar si la prueba Address fue creada y se utiliza para borrarla si es necesario. 


```wl
// Check whether the address was saved 
HReadSeekFirst(ADDRESS, NAME, "TEST")
IF HFound(ADDRESS) = False THEN
	// The test is not ok
	TestWriteResult(twrError, "The database was not successfully updated")
ELSE
	// Test ok, we can delete
	TestWriteResult(twrInfo, "The database was updated")
	// Delete the test address
	HDelete(ADDRESS)
	TestWriteResult(twrInfo, "The test address was deleted")
END
```



