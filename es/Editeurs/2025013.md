


## Creación de un ejecutable: Gestión de manifiestos
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000208"></a>
Cuando se ejecuta un ejecutable, Windows Vista (y más tarde) realiza varias comprobaciones sobre los derechos del usuario actual a través del mecanismo UAC (Cuenta de Usuario Control).

**El mecanismo de la UAC** se utiliza para asegurarse de que una aplicación no explota los privilegios de un usuario sin su conocimiento.: cada solicitud se inicia con los derechos menos necesarios. Cuando se ejecuta un ejecutable, el sistema intenta evaluar los derechos requeridos por la aplicación. Por ejemplo, el sistema detecta que la aplicación requiere derechos de Administrador si el nombre ejecutable contiene "setup" o "install".

**Si el sistema establece que la solicitud requiere derechos específicos**El UAC se activa cuando se requiere ser administrador:

- Si el usuario es administrador, Windows Vista (y posterior) solicita una confirmación.

- Si el usuario no es administrador, Windows Vista (y posterior) le pedirá la contraseña de administrador.




Esta validación se solicita cada vez que se ejecuta el ejecutable.

**Si una aplicación está destinada a ser utilizada en Vista (y posteriormente)**debe verificar las operaciones realizadas por la aplicación para definir el nivel de derechos solicitado.. Para especificar el nivel de derechos solicitado, todo lo que tiene que hacer es **incluir un manifiesto en su ejecutable**. El manifiesto se utiliza para ejecutar el ejecutable con el nivel de derechos solicitado.

Usted también tiene la capacidad de **firmar el ejecutable**. En este caso, la ventana mostrada por el mecanismo de la UAC cambia a Color.

Recordatorio: Si el ejecutable debe ser firmado, especifique el Certificate a utilizar. Este Certificate debe ser encontrado en la tienda de Windows (más precisamente en la tienda del usuario y no en la tienda de la computadora). La firma estándar usada es PKCS7.
Esta firma se utiliza para: 

- asegúrese de que el ejecutable no ha sido modificado desde su generación.

- mostrar el nombre del editor en la ventana de descarga de Windows.




Vea [Mecanismo UAC](../Editeurs/2025014.md) para más detalles.

**Observación**: La creación del ejecutable se realiza expandiendo el ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_generation_exe.gif) Icon y seleccionando "Generar el ejecutable de Windows de 32 bits (.exe)" o "Generar el ejecutable de Windows de 64 bits (.exe)".

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Elección de un manifiesto
<a name="eleccion_manifiesto_ELTTEXTE000232"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000047"></a>

Se pueden incluir diferentes tipos de manifiestos en un ejecutable. Cada tipo de manifiesto permite un modo de uso específico de la aplicación.

Los siguientes párrafos presentan los detalles sobre cada tipo de manifiesto y cuándo deben utilizarse.

Los diferentes tipos de usuarios son los siguientes:

- drogadicta: Usuario de Windows, sin derechos específicos

- Usuario avanzado: Usuario de Windows con derechos específicos o que pertenece a un grupo con derechos específicos

- Administrador: Usuario con derechos de gestión (administrador de dominio, administrador local, ....).




El tabla a continuación presenta los elementos solicitados por Windows Vista según el usuario y el tipo de manifiesto utilizado:

|   | drogadicta | Usuario avanzado | Administrador |
| --- | --- | --- | --- |
| **Manifiesto sin privilegios específicos** | No hay confirmación | No hay confirmación | No hay confirmación |
| **Manifiesto con el máximo de privilegios disponibles** | No hay confirmación | ***Pedir confirmación (1)*** | ***Pedir confirmación (2)*** |
| **Manifiesto con privilegios de administrador** | ***Solicitar login de administrador*** | ***Solicitar login de administrador*** | ***Pedir confirmación (3)*** |

(1), (2), (3): Si la aplicación se inicia desde otra aplicación para la que ya se ha validado el UAC, es posible que no se muestre la ventana de confirmación.
<a name="NOTE2_2"></a>


### Manifiesto sin privilegios específicos
<a name="manifiesto_sin_privilegios_especificos_ELTPARAGRAPHE000097"></a>

**Beneficio**: El usuario podrá iniciar la aplicación en Windows Vista (y más tarde) incluso si el nombre o la description contiene algunas palabras clave específicas detectadas por Windows Vista ("Instalar" o "Configuración", por ejemplo) que requieren los derechos de administrador.

No se solicita confirmación al iniciar la aplicación.

**Inconveniente**: Si la aplicación realiza operaciones que requieren privilegios específicos (escribir en el registro, escribir en los directorios del sistema, ...), estas operaciones fallarán y no se mostrará ningún mensaje de error si la aplicación no realiza un Process del error específico. La presencia del manifiesto cancela el sistema de redireccionamiento de la UAC.
<a name="NOTE2_3"></a>


### Manifiesto con el máximo de privilegios disponibles
<a name="manifiesto_con_maximo_privilegios_disponibles_ELTPARAGRAPHE000108"></a>

La opción "Manifiesto que indica que la aplicación requiere los máximos privilegios disponibles" se utiliza para iniciar la aplicación en Windows Vista (y posterior).. El ejecutable se ejecutará con todos los privilegios associated con la cuenta de usuario que lo ejecuta.

Si el usuario es un administrador, se mostrará una ventana de confirmación al ejecutar el ejecutable.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=UAC_install.gif)
 Si el usuario pertenece al grupo "Power user", al grupo "Replicator" o a cualquier otro grupo especial, se mostrará la ventana para introducir la contraseña de administrador.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=UAC_mdp.gif)

<a name="NOTE2_4"></a>


### Manifiesto con privilegios de administrador
<a name="manifiesto_con_privilegios_administrador_ELTPARAGRAPHE000122"></a>

La opción "Manifiesto que indica que la aplicación requiere privilegios de administrador" se utiliza para iniciar la aplicación en Windows Vista (y posterior).. El ejecutable se ejecutará con todos los privilegios de administrador.

Si el usuario es un administrador, se mostrará una ventana de confirmación al ejecutar el ejecutable.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=UAC_install.gif)
 Si el usuario no es un administrador, se mostrará una ventana para introducir la contraseña de administrador.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=UAC_mdp.gif)

<a name="NOTE2_5"></a>


### Manifiesto personalizado
<a name="manifiesto_personalizado_ELTPARAGRAPHE000136"></a>

La opción "Custom manifest" le permite incluir un archivo ".manifest" de su elección en el ejecutable.

**Observación**: Un archivo ".manifest" tiene una estructura específica. Ejemplo de archivo:


```xml
<?xml version="1.0" encoding="UTF-8" standalone="Yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
	<assemblyIdentity version="1.0.0.0" processorArchitecture="X86" name="MyApp" type="win32">
	</assemblyIdentity>
	<description>Test application</description>
	<trustInfo xmlns="urn:schemas-microsoft-com:asm.v3">
		<security xmlns:ms_asmv3="urn:schemas-microsoft-com:asm.v3"> 
			<requestedPrivileges> 
			<requestedExecutionLevel level="requireAdministrator"> 
			</requestedExecutionLevel> 
			</requestedPrivileges> 
		</security>
	</trustInfo>
</assembly>
```


**Atención**: El manifiesto de Default contiene información como la forma de mostrar los datos de las herramientas y cómo utilizar ciertas opciones de menú. Para encontrar estas características, el manifiesto personalizado debe contener la siguiente información: 

```txt
<dependency>
	    <dependentAssembly>
	        <assemblyIdentity
	            type="win32"
	            name="Microsoft.Windows.Common-Controls"
	            version="6.0.0.0"
	            processorArchitecture="X86"
	            publicKeyToken="6595b64144ccf1df"
	            language="*"
	        />
	    </dependentAssembly>
	</dependency>
```


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Firmar un ejecutable
<a name="firmar_ejecutable_ELTTEXTE000280"></a>
Si el UAC está habilitado en Windows Vista (y posterior), la firma de una aplicación WINDEV desencadena la visualización de una ventana de confirmación azul (en lugar de ventanas naranjas).

Para firmar una solicitud de WINDEV, debe Contact una empresa para la firma de código. Algunos ejemplos: Verisign, Thawte, ....

Estas empresas le ayudarán a instalar los certificados en dispositivos móviles o Smartphone.

**Observación**: El asistente para la creación de ejecutables se utiliza para firmar los ejecutables de WINDEV y Mobile.. Simplemente seleccione el Certificate solicitado. 


