
## Utilizar código Java
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000216"></a>
Puede utilizar código Java: 

- en aplicaciones Java generadas con WINDEV. 

- en aplicaciones Android generadas con WINDEV Mobile. 




Esto permite crear procedimientos globales en Java.

Estos procedimientos Java pueden llamar directamente a los procedimientos WLanguage del proyecto. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Cómo crear un procedimiento en Java?
<a name="¿como_crear_procedimiento_java_ELTTEXTE000240"></a>


### Escribir un procedimiento global en Java
<a name="escribir_procedimiento_global_java_ELTPARAGRAPHE000027"></a>

Para escribir un procedimiento global en Java: 

1. Cree un nuevo procedimiento global (a través de la opción "Nuevo procedimiento global" del menú contextual de los conjuntos de procedimientos en el panel "Explorador de proyectos"). Especifique el nombre del procedimiento.

2. El procedimiento se crea en el editor de código. 

3. En el encabezado del procedimiento, haga clic en el ícono "WL" para cambiar el tipo de código. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=android_java_natif_avant.gif&type=thumb)


4. En la lista que se abre, seleccione "Java". 

5. El encabezado se muestra en color morado y "Java" aparece a la izquierda del nombre del procedimiento. El código existente está en forma de comentario. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=android_java_natif_apres.gif)


6. Escriba el código Java directamente en el editor de código de WINDEV y/o WINDEV Mobile.




**Observación**: Para volver al código WLanguage, haga clic en "Java" en el encabezado del procedimiento y seleccione "WLanguage".
<a name="NOTE2_2"></a>


### Notas importantes
<a name="notas_importantes_ELTPARAGRAPHE000045"></a>

- En los procedimientos Java, los parámetros se pasan automáticamente por valor.

- Los parámetros de los procedimientos escritos en Java deben ser tipos de datos primitivos (integer, real, string, etc.). 
	Atención: No se admite el tipo float, puede reemplazarse por el tipo double.

- Los valores de retorno de los métodos deben ser de un tipo primitivo (integer, real, string, etc.). 
	Atención: No se admite el tipo float, puede reemplazarse por el tipo double.

- Atención: es necesario importar las clases utilizadas en el código Java nativo con la palabra clave "Import". Se recomienda importar estos elementos antes de declarar el método.

- Solo se tienen en cuenta los comentarios y los elementos importados en las líneas de código que se encuentran antes del prototipo de la función Java. Cualquier otro código será ignorado y puede provocar un error (especialmente si faltan paréntesis). 

- Java distingue entre mayúsculas y minúsculas: asegúrese de utilizar siempre los mismos caracteres en minúsculas y mayúsculas en los nombres de las funciones.





<a name="NOTE2_3"></a>


### Generar la aplicación
<a name="generar_aplicacion_ELTPARAGRAPHE000078"></a>

- ![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Las clases Java utilizadas en el código Java nativo deben especificarse en el asistente de generación de la aplicación Java (etapa "Otros archivos del archivo comprimido"). 
	Observación: Estas clases no se pueden probar mediante la opción GO. Es necesario generar la aplicación, y luego ejecutarla. 

- **Tener en cuenta las clases externas automáticamente**: Para tener en cuenta automáticamente las clases Java externas al generar la aplicación: 

	- Agregue los archivos a la carpeta "Otros" del panel "Explorador de proyectos" (mediante la opción "Agregar elementos" del menú contextual).
			Atención: Los archivos Java deben estar codificados en UTF-8. 

	- Si la clase Java pertenece a un paquete, el paquete debe declararse en la primera línea del archivo. Si no se especifica el paquete, el archivo se ubicará en &lt;Package_AppName&gt;.wdgen con los demás archivos ".java" generados.







<a name="NOTE3"></a>
<a name="NOTE3_1"></a>




## ¿Cómo ejecutar un procedimiento WLanguage?
<a name="¿como_ejecutar_procedimiento_wlanguage_ELTTEXTE000276"></a>


### Ejecutar un procedimiento WLanguage desde el código Java
<a name="ejecutar_procedimiento_wlanguage_desde_codigo_java_ELTPARAGRAPHE000110"></a>

Para ejecutar un procedimiento WLanguage desde el código Java, llame a uno de los siguientes métodos en función del tipo de valor devuelto por el procedimiento:

| Nombre del método | Tipo Java devuelto |
| --- | --- |
| callWLProcedure | void (ningún valor de retorno) |
| callWLProcedure_String | String |
| callWLProcedure_int | int |
| callWLProcedure_double | double |
| callWLProcedure_long | long |
| callWLProcedure_boolean | boolean |



En la llamada al método seleccionado: 

- el primer parámetro que se pasa al método es el nombre del procedimiento WLanguage a ejecutar. 

- los otros parámetros corresponden a los parámetros esperados por el procedimiento WLanguage (si es necesario). Puede utilizar parámetros de cualquier tipo simple de Java (string, int, double, long, boolean, etc.). Si el parámetro especificado no corresponde a un tipo simple de Java, se convertirá automáticamente a "string" llamando al método "toString()". 




**Ejemplo**: 

Código del procedimiento WLanguage: 


```wl
GLOBAL PROCEDURE MyProcedure(n is int, b is boolean, s is string)
... 

RESULT s
```


Para llamar al procedimiento MyProcedure desde el código Java: 


```txt
callWLProcedure_String("MyProcedure",5,false,"test")
```

<a name="NOTE3_2"></a>


### Notas importantes
<a name="notas_importantes_ELTPARAGRAPHE000163"></a>

- Si el procedimiento a ejecutar es un procedimiento local, le recomendamos indicar su nombre completo y especificar el nombre del elemento al que pertenece el procedimiento. Ejemplo: "WIN_Window1.MyProcedure". 

- El nombre del procedimiento a ejecutar solo debe contener caracteres alfanuméricos sin acentos.

- Si el procedimiento a ejecutar devuelve un valor, este valor se convertirá automáticamente al tipo primitivo Java que corresponde al método utilizado para llamar al procedimiento. Si no se puede realizar la conversión, se produce un error fatal.

- Los parámetros del procedimiento se pasan por valor.







