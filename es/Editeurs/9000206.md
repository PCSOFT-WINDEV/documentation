
## Mensajes multilingües: Convertir al nuevo formato (versión 27 y posteriores)
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000177"></a>
WINDEV, WEBDEV y WINDEV Mobile han incluido soporte para proyectos multilingües en muchas versiones anteriores.

**Hasta la versión 26** , el editor de código manejaba estos mensajes multilingües en función de un "identificador de MessTranslate".. En versiones anteriores, este identificador podía utilizarse con la función WLanguage MessTranslate. Esta función se mantiene ahora sólo por compatibilidad y no debería utilizarse más.

El mecanismo "MessTranslate identifier" tenía algunas limitaciones técnicas para operaciones como:

- fusionar las ramas a través del sistema SCM,

- manejo de los mensajes de las plantillas,

- tratamiento de los mensajes multilingües "relacionado" que podían provocar errores en las aplicaciones...


Para superar estas limitaciones, **se introdujo un nuevo modo en la versión 27**. En los proyectos desarrollados con una versión anterior, una asistente específica le ayudará a cambiar a este nuevo modo. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Asistente de migración de mensajes multilingües
<a name="asistente_migracion_mensajes_multilingues_ELTTEXTE000201"></a>


### Condición previa
<a name="condicion_previa_ELTPARAGRAPHE000026"></a>

Antes de iniciar la migración de mensajes multilingües asistente: 

- Reintegrar todas las traducciones "en curso". Tras la migración, los archivos de traducción dejarán de ser compatibles.

- Comprobar en todos los elementos compartidos a través de la SCM (recomendado). 

- Habilitar los errores de los mensajes compartidos a nivel de proyecto: 

	1. Abra la ventana de descripción del proyecto: en la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "Descripción"

	2. En la pestaña "Compilación", marque "Señalar mensajes multilingües compartidos".: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Traduction_messages_hc1_a.gif)
 esta opción le permite identificar rápidamente los mensajes multilingües compartidos, lanzando un error de compilación. 

	3. Valide la ventana de descripción del proyecto. Confirmar la recompilación del proyecto. 







Observación: En el caso de proyectos con múltiples configuraciones, deberá ejecutar el asistente para cada configuración.




### Migración asistente
<a name="migracion_asistente_ELTPARAGRAPHE000056"></a>

**Atención**: **La conversión asistente realiza las operaciones necesarias en cada paso**. Si se cancela la migración antes de que se complete la asistente, sólo una parte de los mensajes se convertirá al nuevo formato (lo que puede provocar incoherencias). 

**Para iniciar la migración de mensajes multilingües asistente**:

1. En la pestaña "Código", en el grupo "Idiomas", despliegue "Traducir cadenas" y seleccione "Migrar mensajes multilingües al nuevo formato".. El asistente se abre. 

2. En el primer paso, el asistente migra todas las llamadas a [MessTranslate](../WDLang1/3054015.md) (función incompatible con el nuevo formato). Las llamadas a esta función deben convertirse en mensajes multilingües independientes. La asistente enumera las diferentes llamadas a esta función y las convierte automáticamente cuando se pasa al siguiente paso. 

3. A continuación, asistente comprueba si el mismo mensaje multilingüe se utiliza varias veces en el proyecto. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Traduction_messages_hc1_b.gif&type=thumb)
 En este caso, el botón "Suprimir enlaces" permite transformar los mensajes relacionado en varios mensajes únicos. El siguiente paso de asistente es convertir estos mensajes al nuevo formato.  

4. asistente también comprueba los mensajes multilingües compartidos entre varios proyectos. La asistente enumera los archivos compartidos que tienen al menos un mensaje multilingüe. El siguiente paso consiste en convertir estos mensajes al nuevo formato, tanto en el proyecto local como en el proyecto ubicado en el repositorio SCM. 
	Atención: sólo los mensajes de los elementos compartidos se convierten al nuevo formato. Asimismo, se recomienda convertir los mensajes de los proyectos que comparten recursos, para evitar incoherencias. 

5. El último paso de asistente Process convierte todos los mensajes multilingües restantes (los que no causan problemas) al nuevo formato. 

6. Una vez finalizada la conversión, se le pedirá que inicie otra asistente para eliminar los mensajes no utilizados. El resultado será un proyecto que contiene sólo los mensajes necesarios para el nuevo formato. 




Después de ejecutar el asistente, todos los mensajes multilingües tendrán un GUID para garantizar su unicidad, independientemente de futuros cambios.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mensajes utilizados varias veces
<a name="mensajes_utilizados_varias_veces_ELTTEXTE000231"></a>
Con el formato anterior, era posible "compartir" un mensaje multilingüe (duplicando el código, por ejemplo): un mensaje de la ventana de edición de mensajes podría ser utilizado por dos cadenas diferentes de dos bloques de código distintos.

Esto ya no es posible con el nuevo formato. Así se evitan varios problemas: 

- Modificar un mensaje en un lugar determinado, pero sin saberlo en otro,

- Borrar el mensaje original, dejando un texto en blanco en otro lugar,

- Utilizar una traducción que no sirve para todos los casos. Una misma frase en inglés puede tener diferentes traducciones según el contexto en otro idioma. 




Todavía es posible utilizar el mismo mensaje en diferentes procesos: basta con declarar una [Constante](../Motscles/1514012.md) en el proyecto. 

1. Declarar y set el valor de la constante. 
	Por ejemplo: 
	
	```wl
	CONSTANT
		ClosingSentence = "You are about to exit the application."
	END
	```
En este código, la constante contiene la cadena multilingüe que se va a compartir. 

2. Utilizar la constante en diferentes partes del código, donde se va a utilizar el mensaje.  

3. Utilice [Nación](../WDLang1/3054014.md) para cambiar dinámicamente el idioma de la aplicación. El valor de la constante se adaptará automáticamente al idioma especificado con [Nación](../WDLang1/3054014.md). 




Recordatorio: Puede utilizar [Nación](../WDLang1/3054014.md) para cambiar el idioma de toda la aplicación (UI, código, valores de las constantes, etc.).

**Atención**: El uso de constantes para reutilizar mensajes multilingües no siempre es recomendable. Por ejemplo, si utiliza WDTRAD para traducir sus aplicaciones, puede utilizar la función de traducción de automatic para propagar las traducciones cuando se encuentren cadenas idénticas. Esto significa que el texto tiene que ser traducido sólo una vez.


