


## Dividir lógica de negocio / UI
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000218"></a>
Durante el ciclo de desarrollo de una aplicación, el código propio de la interfaz (UI) y el código propio de la lógica de negocio (acceso a las bases de datos, etc.) suelen estar "mezclados". ¿Quién no ha usado el botón Process en un botón para guardar datos en un archivo de datos y a actualización una ventana?

WINDEV, WEBDEV y WINDEV Mobile te ayudan a separar tu código para separar la lógica de negocio del código de UI. 

Esta división tiene varias ventajas: 

- estructurar tu código,

- facilitar la reutilización y el uso compartido del código,

- simplifique la webificación de su aplicación,

- ...




Dividir su código también le permitirá utilizar un método de desarrollo de MV o MVP.. 

WINDEV, WEBDEV y WINDEV Mobile proponen dividir el código gradualmente: puedes empezar dividiendo tu código en nuevas ventanas solamente, luego en todo el proyecto, ventana por ventana.. 

También puede realizar esta operación para estructurar el código de su aplicación, o para elegir y generar las clases (o conjuntos de procedimientos) necesarias para reutilizar y compartir su código.. 

WINDEV, WEBDEV y WINDEV Mobile le proporcionan las herramientas y usted decide cómo utilizarlas.. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Cómo proceder?
<a name="¿como_proceder_ELTTEXTE000242"></a>


### Dividir el código existente
<a name="dividir_codigo_existente_ELTPARAGRAPHE000035"></a>

Para dividir el código de UI de Business Logic en un código existente, sigue estos pasos: 

1. Abrir el proyecto en el producto deseado. 

2. Abrir el editor de código (Presione F2 en un botón, por ejemplo). 

3. Habilitar el resaltado de la lógica empresarial/UI: en el editor de código, en la pestaña "Refactorización", en el grupo "Negocio/UI", despliegue "Mostrar Lógica de Negocio/UI" y seleccione el modo de coloración deseado: 

	- Ningún color

	- Color del fondo de la línea: en este caso, la coloración se aplica en toda la Line de código. 

	- Colorear en la Border: en este caso, la coloración se aplica sólo en la Border de las líneas de código. 


 Observaciones: 

- La coloración se aplica a todos los proyectos. 

- La coloración se aplica de acuerdo a las siguientes reglas (tema de luz): 

	- Las líneas de código relacionadas con la UI en una UI Process están coloreadas en verde. 

	- Las líneas de código relacionadas con la lógica de negocios en una UI Process están coloreadas en naranja.

	- Las líneas de código relacionadas con la UI en una lógica de negocios Process están coloreadas en naranja.

	- Las líneas de código relacionadas con la lógica de negocios en un Process de lógica de negocios están coloreadas en azul. 

4. Activar errores de Negocio/UI: en el editor de código, en la pestaña "Refactorización", en el grupo "Negocio/UI", haga clic en "Activar errores de Negocio/UI". Este botón activa los errores de la lógica de negocio/UI sólo para el elemento actual (ventana, página, etc.). 
	Los errores de lógica empresarial/UI se muestran en el panel "Errores de compilación", en los errores estándar de programación (![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Compilation_Norme%20-%20HC%20N%B0002.gif)). 

5. Divida su código para evitar este tipo de error. 

	- Si es necesario, cree procedimientos locales (o globales) para separar su lógica de negocios del código de UI.

	- Si es necesario, utilice los atributos &lt;UI&gt; y &lt;Business logic&gt;. En un código o proceso que contenga tanto código UI como lógica de negocio, estos atributos se utilizan para indicar el uso de la variable o Procedure. 
			Ejemplo: El Procedure **DisplayTrip** se considera un Procedure que se ocupa de la interfaz de usuario (atributo &lt;UI&gt;) aunque llame al **RetrieveTrip**, un Procedure de lógica de negocio . <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Decoupage%20code%20ihm%20-%20HC%20N%B0002.gif&type=thumb)
Observación: Las llamadas a los procedimientos de lógica de negocio en una Process de interfaz de usuario están encerradas por un Border azul. 








### Extraer lógica de negocio
<a name="extraer_logica_negocio_ELTPARAGRAPHE000104"></a>

Cuando se corrigen todos los errores de mezcla de códigos en el proyecto, es posible crear automáticamente clases o procedimientos globales que agrupen todos los procedimientos locales creados para separar el código UI de la lógica de negocio. 

Esta operación es useful y se recomienda: 

- Si su proyecto es compartido,

- Si su proyecto debe ser webificado,

- ...




Para extraer la lógica de negocio: 

1. En el editor de código, en la pestaña "Refactorización", en el grupo "Negocio/UI", haga clic en "Extraer Lógica de negocio". 

2. En la ventana que aparece: 

	- Seleccione la clase de partición deseada: Clase o set de procedimientos. 

	- Especifique el nombre de la clase o set de procedimientos. 




3. Validar. 

4. El elemento especificado se crea automáticamente y el código se modifica para utilizar la set de procedimientos o la clase. 




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Opciones relacionadas con la lógica de negocios / división del código UI
<a name="opciones_relacionadas_con_logica_negocios_division_del_codigo_ELTTEXTE000272"></a>


### Descripción del proyecto
<a name="descripcion_del_proyecto_ELTPARAGRAPHE000141"></a>

La opción "Señalar mezclas de código lógica de negocio y código UI" en la ventana del proyecto description (pestaña "Compilación") permite habilitar o deshabilitar los errores de Business logic/UI en todos los elementos del proyecto. 

Observación: Se recomienda utilizar esta opción en elementos individuales antes de utilizarla en todo el proyecto.. 


### Ventana description
<a name="ventana_description_ELTPARAGRAPHE000152"></a>

En la descripción de una ventana, la pestaña "Detalles" permite definir el estándar de programación haciendo clic en el botón "Estándar de programación". 

En la interfaz para la definición de la norma de programación, puede activar los errores de Business logic/UI para la ventana actual.  


### Describir una página
<a name="describir_una_pagina_ELTPARAGRAPHE000163"></a>

En la  ventana de descripción de una página, la pestaña "Detalles" permite definir el estándar de programación haciendo clic en el botón "Estándar de programación". 

En la interfaz de definición de la norma de programación, puede habilitar los errores de Business logic/UI para la página actual.  


