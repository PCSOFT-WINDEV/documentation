


## Creación de las ventanas de relaciones de un patrón WINDEV Mobile RAD
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Los pasos para crear un patrón RAD
<a name="los_pasos_para_crear_patron_rad_ELTTEXTE000556"></a>
Los pasos para crear un patrón WINDEV Mobile RAD son los siguientes:

1. [Creación del proyecto "RAD Pattern](../Editeurs/2031021.md).

2. Creación de las diferentes ventanas de patrones.

	- [Ventana de forma](../Editeurs/2031036.md)(con opciones de enlace si es necesario).

	- [Ventana de la mesa](../Editeurs/2031037.md)(con opciones de enlace si es necesario).

	- **Ventana de relaciones** (con opciones de enlace si es necesario).

	- [Botones y ventana Vision Plus](../Editeurs/2031040.md).

	- [Menú principal](../Editeurs/2031041.md).




3. [Generación del patrón RAD](../Editeurs/2031023.md).

4. [Usando el patrón RAD](../Editeurs/2031024.md).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Creación de las diferentes ventanas de patrones
<a name="creacion_las_diferentes_ventanas_patrones_ELTTEXTE000580"></a>


### Los ficheros a crear
<a name="los_ficheros_crear_ELTPARAGRAPHE000043"></a>

Recordatorio : Para construir un patrón RAD utilizado para crear un proyecto completo, se requieren los siguientes archivos:

- Un formulario para RADFileA.

- Un formulario para RADFileB. Un botón Vision Plus (o un cuadro combinado emergente) debe permitirle seleccionar un elemento de RADFileA.

- Un formulario para RADFileC. Un botón Vision Plus (o un cuadro combinado emergente) debe permitirle seleccionar un elemento de RADFileB.

- Una tabla para RADFileA.

- Una tabla para RADFileB.

- Un tabla para RADFileC.

- Una ventana de relación RADFileB/RADFileD.




Estos diferentes elementos deben contener botones de enlace. También tiene la posibilidad de proporcionar el menú principal de la aplicación.
<a name="NOTE2_2"></a>


### Diferencia entre Móvil y Smartphone
<a name="diferencia_entre_movil_smartphone_ELTPARAGRAPHE000060"></a>

Crear una aplicación para Móvil y una aplicación para Smartphone son dos cosas diferentes. En un Smartphone, la pantalla es más pequeña y un menú desplegable le permite validar (o no) las pantallas.

Esta diferencia también se aplica a los patrones RAD. Esta página de ayuda explica cómo crear una ventana de formulario para Móvil y para Smartphone.
<a name="NOTE2_3"></a>


### Estándar a seguir
<a name="estandar_seguir_ELTPARAGRAPHE000069"></a>

Esta página de ayuda presenta las diferentes reglas que deben aplicarse al crear las páginas y ventanas del patrón RAD. Estas reglas han sido utilizadas para crear los diferentes patrones suministrados con WINDEV Mobile 16.

Estas reglas son recomendaciones. Puede implementar y utilizar su propio estándar.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Las ventanas de relación en el móvil
<a name="las_ventanas_relacion_movil_ELTTEXTE000616"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000080"></a>

Las ventanas de relación se utilizan para mostrar simultáneamente la información procedente de varios archivos. En un ejemplo sencillo, este tipo de ventana se utilizaría para mostrar las órdenes y las líneas de órdenes correspondientes.. Este tipo de ventana puede ser una ventana Formulario + Tabla.

Una ventana Formulario + Tabla agrupa los elementos de los formularios y los elementos de las tablas.

Esta ventana contiene una pestaña : esta pestaña incluye dos paneles : un panel que muestra el formulario en RADFileB, un panel que muestra el tabla en RADFileD.

El formulario incluye los siguientes elementos:

- A supercontrol : Este supercontrol contiene los controles del formulario a mostrar. Este supercontrol es relacionado al archivo a mostrar.

- Un cuadro combinado y un botón Vision Plus.

- Botones (si es necesario) utilizados para realizar las acciones principales.




La tabla incluye los siguientes elementos:

- Una tabla : Este tabla es un tabla de navegación, con archivo cargado en memoria.

- Botones utilizados para realizar las acciones principales : Añada, Modifique, Elimine e Imprima si es necesario.

- Opciones de enlace utilizadas para visualizar los formularios correspondientes, por ejemplo.  




Se debe crear una ventana de relación única en el patrón RAD : enlaza RADFileB con RADFileD.

**Ejemplo** : Ventana de relaciones en el patrón RAD simple : <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Pattern_RAD_WMRelation.gif)

<a name="NOTE3_2"></a>


### Creación de una ventana de relación para un patrón móvil
<a name="creacion_una_ventana_relacion_para_patron_movil_ELTPARAGRAPHE000108"></a>

Para crear una ventana de relación para un patrón móvil : 

1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_nouveau.gif) en los botones de acceso rápido. 

	- Aparece la ventana de creación : haga clic en "Ventana", y luego en "Ventana". El asistente de creación de ventanas se abre.

	- Seleccione "Wizard" (Asistente). 

	- Especifique que la ventana maximizada debe incluir fichas.




2. En la ventana de description, introduzca la siguiente información:

	- El nombre de la ventana. Este nombre debe contener necesariamente el nombre del fichero visualizado en el formulario (algunos ejemplos : WIN_Relation_RADFileD, WIN_Rel_RADFileD, ....).

	- El título de la ventana. Si el título debe mostrar el nombre del archivo, utilice el nombre del archivo "RADArchivoXX" (por ejemplo, "RADArchivoD" : Relación").




3. Grabe la ventana.

4. La pestaña que se encuentra en la ventana debe mostrar los dos elementos siguientes:

	- una sección de formulario : las características del formulario en RADFileB se mostrarán en esta sección.

	- a Tabla de la sección : las características de la tabla en RADFileD se mostrarán en esta sección. Los botones se utilizan para gestionar los registros que se encuentran en la tabla.




5. Visualizar las características de la ficha:

	- Esta pestaña se llama "RADTab".

	- Esta pestaña incluye dos paneles, uno cuya leyenda es "RADFileB form" y otro cuya leyenda es "RADFileD tabla", por ejemplo.







**Creación de la sección Formulario**:

1. Crear un supercontrol en la pestaña que contiene el formulario : en la pestaña "Creación", en el grupo "Contenedores", haga clic en "Supercontrol". 
	Este supercontrol mostrará los controles que se encuentran en el formulario. Posicione esta control en la ventana y defina su tamaño. Las barras de desplazamiento se mostrarán automáticamente si algunos de los controles no caben en el tamaño especificado.

2. En la ventana del supercontrol description, especifique el nombre del supercontrol. Este nombre debe ser SC_RADFileB (SC_ es el prefijo definido en el estilo de código : no es necesario si no se utiliza un estilo de código).

3. En la pestaña "Contenido" de la ventana del supercontrol description, especifique:

	- el archivo navegado : RADFileB.

	- el artículo consultado : IDRADFileB.







**Crear la sección Tabla** : 

1. Cree un control Tabla en la pestaña que contiene el tabla : en la pestaña "Creación", en el grupo "Datos", despliegue "Tabla y List Box" y seleccione "Tabla (Vertical)".

2. En la creación de tabla asistente, especifique las siguientes características:

	- Seleccione la opción "Mostrar datos de un archivo o una consulta existente".

	- Seleccione el fichero base de la tabla : RADFileD.

	- Conserve los artículos propuestos. La clave de búsqueda es IDLinkedRADFileB.

	- Especifique la fuente para el proceso de llenado : "Archivo cargado en memoria".

	- Validar el nombre de la tabla.




3. Posicionar la control Tabla en la ventana y definir su tamaño. Las columnas correspondientes a los identificadores pueden ser Invisible si es necesario.

4. Crear y posicionar los botones utilizados para gestionar los registros mostrados en el tabla. Estos botones pueden tener cualquier nombre. 
	Le aconsejamos que incluya:

	- un pulsador de validación (en la sección de formulario, por ejemplo),

	- un botón de borrado (en la sección tabla por ejemplo),

	- un botón de inserción (por ejemplo, en la sección tabla),

	- una opción de menú utilizada para acceder al formulario de RADFileC.
			Atención : si el usuario puede aplicar un plantilla a las ventanas creadas por RAD, debe definir el tipo de botón que se debe utilizar en el plantilla. Esta información se puede definir en el modificador (categoría"Plantilla").




5. Caso de la ***botón de validación*** (Botón Validar por ejemplo).
	Este botón sirve para validar y cerrar la ventana. Para simplificar las cosas, usted tiene la capacidad de usar una acción preestablecida. Le recomendamos que utilice la acción "Cerrar la ventana y devolver un valor", con "Valor devuelto : el valor especificado en el código por ..ReturnedValue".
	El código de este botón es, por ejemplo:
	
	```wl
	// Check controls
	IF TABLE_RADFileD..Count = 0 THEN
		Error("RADFileD must be typed")
		RETURN
	END
	// Update the HFSQL context
	ScreenToFile()
	// Add or modify RADFileB
	IF RADFileB..NewRecord = True THEN
		HAdd(RADFileB, hIgnoreIntegrity)
	ELSE
		HModify(RADFileB)
	END
	// RADFileB was added
	// Add the corresponding RADFileD
	FOR EACH ROW OF TABLE_RADFileD
	 // Assign the identifier of RADFileB 
	 // to the columns of the table of RADFileD 
		TABLE_RADFileD.COL_IDRADFileBRel = RADFileB.IDRADFileB 
		// Save the table
		TableSave(TABLE_RADFileD) 
	END
	// Return value
	MyWindow..ReturnedValue = True
	```


6. ***Botón de eliminación*** (botón Eliminar por ejemplo).
	Este botón puede ser usado para borrar un Record seleccionado del tabla por ejemplo. 
	El código del botón Borrar puede ser:
	
	```wl
	// Delete the current record 
	TableDelete(TABLE_RADFileD)
	```

	En el código del botón de borrado, le aconsejamos que active la gestión de errores de automatic ("Si el error : ", con el automatic Process "Mostrar el error y volver a editar").

7. Caso de ***botón de inserción*** (Botón Insertar por ejemplo).
	Este botón se utiliza para insertar un Line Above el Line actual por ejemplo. El código del botón Insertar puede ser:
	
	```wl
	// Insert a row 
	TableInsertLine(TABLE_RADFileD, -1)
	```

	En el código del botón de inserción, le aconsejamos que habilite la gestión de errores de automatic ("Si el error : ", con el automatic Process "Mostrar el error y volver a editar").

8. En el caso de la opción de menú "RADFileC form.
	Agregar (si es necesario) un menú en su ventana : en la pestaña "Ventana", en el grupo "Barras y menús", despliegue "Menú principal" y seleccione "Agregar menú principal".
	El nombre de este menú debe ser "MAINMENU_OPTIONS" y su título debe ser "Options"..
	En este menú, añada una opción para mostrar el formulario en RADFileC. El nombre de esta opción es "MENULIA_RADFileC" y su título es "RADFileC form"..
	Esta opción se utiliza para ver en una forma un Record seleccionado en el tabla. El código de esta opción puede ser:
	
	```wl
	// Find RADFileC for the current RADFileD
	HReadSeekFirst(RADFileC, IDRADFileC, RADFileD.IDRADFileCRel)
	// If RADFileC does not exist
	IF HFound(RADFileC) = False THEN
		// Message indicating that there is no RADFileC record
		// linked to the current RADFileD record
		Info("No RADFileC record linked to the current record.")
		RETURN
	END
	// Open the form window of RADFileC
	Open(WIN_Form_RADFileC)
	```


9. Código de inicialización de la ventana:
	
	```wl
	// Display the records
	FileToScreen()
	// Filter for the table of FileD
	HFilter(RADFileD, RADFileBRelID, RADFileB.RADFileBID)
	```


10. Código de cierre de la ventana. Este código se utiliza para desactivar el filtro : 
	
	```wl
	// Disables the filter
	HDeactivateFilter(RADFileD)
	```





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Las ventanas de relación en Smartphone
<a name="las_ventanas_relacion_smartphone_ELTTEXTE000648"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000251"></a>

Las ventanas de relación se utilizan para mostrar simultáneamente la información procedente de varios archivos. En un ejemplo sencillo, este tipo de ventana se utilizaría para mostrar las órdenes y las líneas de órdenes correspondientes.. Este tipo de ventana puede ser una ventana Formulario + Tabla.

Una ventana Formulario + Tabla agrupa los elementos de los formularios y los elementos de las tablas.

Esta ventana contiene una pestaña : esta pestaña incluye dos paneles : un panel que muestra el formulario en RADFileB, un panel que muestra el tabla en RADFileD.

El formulario contiene un supercontrol : Este supercontrol contiene los controles del formulario a mostrar. Este supercontrol es relacionado al archivo a mostrar.

El tabla es un tabla de navegación, con fichero de acceso directo.

La ventana también contiene un menú para gestionar el tabla, el formulario y para acceder al formulario RADFileC.

Se debe crear una ventana de relación única en el patrón RAD : enlaza RADFileB con RADFileD. También debe crear una ventana de formulario utilizada para ver los registros del archivo RADFileD en formato de formulario.

**Ejemplo** : Ventana de relaciones en el patrón RAD simple : <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Pattern_RAD_WMRelation.gif)

<a name="NOTE4_2"></a>


### Creación de una ventana de relación para un patrón de Smartphone
<a name="creacion_una_ventana_relacion_para_patron_smartphone_ELTPARAGRAPHE000273"></a>

Para crear una ventana de relación para un patrón de Smartphone : 

1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_nouveau.gif) en los botones de acceso rápido. 

	- Aparece la ventana de creación : haga clic en "Ventana", y luego en "Ventana". El asistente de creación de ventanas se abre.

	- Seleccione "Wizard" (Asistente). Conserve las opciones predeterminadas.




2. En la ventana de description, introduzca la siguiente información:

	- El nombre de la ventana. Este nombre debe contener necesariamente el nombre del fichero visualizado en el formulario (algunos ejemplos : WIN_Relation_RADFileD, WIN_Rel_RADFileD, ....).

	- El título de la ventana. Si el título debe mostrar el nombre del archivo, utilice el nombre del archivo "RADArchivoXX" (por ejemplo, "RADArchivoD" : Relación").




3. Grabe la ventana.

4. Crear un control Pestaña : en la pestaña "Creación", en el grupo "Contenedores", despliegue "Pestaña y asociados" y haga clic en "Pestaña".

5. Esta pestaña debe mostrar los dos elementos siguientes:

	- una sección de formulario : las características del formulario en RADFileB se mostrarán en esta sección.

	- a Tabla de la sección : las características de la tabla en RADFileD se mostrarán en esta sección. Los botones se utilizan para gestionar los registros que se encuentran en la tabla.




6. Visualizar las características de la ficha:

	- Esta pestaña se llama "RADTab".

	- Esta pestaña incluye dos paneles, uno cuya leyenda es "RADFileB" y otro cuya leyenda es "RADFileD", por ejemplo.







**Creación de la sección Formulario**

1. Crear un supercontrol en la pestaña que contiene el formulario : en la pestaña "Creación", en el grupo "Contenedores", haga clic en "Supercontrol".
	Este supercontrol mostrará los controles que se encuentran en el formulario. Posicione esta control en la ventana y defina su tamaño. Las barras de desplazamiento se mostrarán automáticamente si algunos de los controles no caben en el tamaño especificado.

2. En la ventana del supercontrol description, especifique el nombre del supercontrol. Este nombre debe ser SC_RADFileB (SC_ es el prefijo definido en el estilo de código : no es necesario si no se utiliza un estilo de código).

3. Visualizar las características del supercontrol en el modificador. En la categoría "Análisis", especifique:

	- el archivo navegado : RADFileB.

	- el artículo consultado : IDRADFileB.







**Crear la sección Tabla**

1. Cree un control Tabla en la pestaña que contiene el tabla : en la pestaña "Creación", en el grupo "Datos", despliegue "Tabla y List Box" y seleccione "Tabla (Vertical)".

2. En la creación de tabla asistente, especifique las siguientes características:

	- Seleccione la opción "Mostrar datos de un archivo o una consulta existente".

	- Seleccione el fichero base de la tabla : RADFileD.

	- Conserve los artículos propuestos. La clave de búsqueda es IDLinkedRADFileB.

	- Especifique la fuente para el proceso de llenado : "Archivo con acceso directo".

	- Validar el nombre de la tabla.




3. Posicionar la control Tabla en la ventana y definir su tamaño. Las columnas correspondientes a los identificadores pueden ser Invisible si es necesario.




**Creación de los menús y de las opciones de menú**

1. Modificar el menú que se encuentra en la ventana:

	- deben permitirle añadir, modificar o borrar un fila.

	- una opción de menú debe permitirle acceder al archivo RADFileC.

	- una opción de menú debe permitirle borrar la actual Record del tabla.

	- una opción de menú debe permitirle cerrar la ventana. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Pattern_RAD_WMRelation_Smar.gif)





2. Opciones "Nueva fila", "Modificar fila" y "Eliminar fila".
	La opción "Nuevo fila" se utiliza para introducir un nuevo Record para el archivo RADFileD. El código de "New fila" puede ser:
	
	```wl
	// Create a new record
	HReset(RADFileD)
	// Open the form of RADFileD file in creation mode
	Open(WIN_Form_RADFileD)
	// Refresh the table
	TableDisplay(TABLE_RADFileD, taCurrentFirst)
	```

	La opción "Modify fila" permite modificar el fila seleccionado:
	
	```wl
	// Is a row selected?
	IF TableSelect(TABLE_RADFileD) = -1 THEN RETURN
	// Open the form of RADFileD file in modification mode
	Open(WIN_Form_RADFileD)
	// Refresh the table
	TableDisplay(TABLE_RADFileD, taCurrentSelection)
	```

	La opción "Delete fila" se utiliza para borrar el fila actual:
	
	```wl
	// Asks to confirm the deletion
	SWITCH YesNo("Do you want to delete the record?")
		CASE Yes
			// Delete the RADFileD record from the table
			TableDelete(TABLE_RADFileD)
			// Position on the current record
			TableDisplay(TABLE_RADFileD, taCurrentFirst)
		CASE No
			// No action 
	END
	```


3. Caso de la opción utilizada para acceder a RADFileC
	Esta opción es una opción de enlace. El código associated con esta opción es el siguiente:
	
	```wl
	// Find RADFileC for the current RADFileD
	HReadSeekFirst(RADFileC, IDRADFileC, RADFileD.IDRADFileCRel)
	
	// If RADFileC does not exist
	IF HFound(RADFileC) = False THEN 
		// Message indicating that there is no RADFileC record 
		// linked to the current RADFileD record
		Info("No RADFileC record linked to the current record.") 
		RETURN 
	END
	// Open the form window of RADFileC
	Open(WIN_Form_RADFileC)
	```


4. Código de la opción de menú para el cierre:
	
	```wl
	// Close the window
	Close()
	```


5. Código de inicialización de la ventana:
	
	```wl
	// Display the records
	FileToScreen()
	// Default return value
	MyWindow..ReturnedValue = False
	```




<a name="NOTE4_3"></a>


### Creación de la ventana del formulario en RADFileD
<a name="creacion_ventana_del_formulario_radfiled_ELTPARAGRAPHE000394"></a>
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=pattern_RAD_WMFichierD.gif)


1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ico_nouveau.gif) en los botones de acceso rápido. 

	- Aparece la ventana de creación : haga clic en "Ventana", y luego en "Ventana". El asistente de creación de ventanas se abre.

	- Seleccione "Wizard" (Asistente). 

	- Conserve las opciones predeterminadas.




2. En la ventana de description, introduzca la siguiente información:

	- El nombre de la ventana. Este nombre debe contener necesariamente el nombre del fichero visualizado en el formulario (algunos ejemplos : WIN_Form_RADFileD, WIN_Frm_RADFileD, ....).

	- El título de la ventana. Si el título debe mostrar el nombre del archivo, utilice el nombre del archivo "RADArchivoXX" (por ejemplo, "RADArchivoD" : Forma").




3. Grabe la ventana.

4. Crear un supercontrol en la ventana : en la pestaña "Creación", en el grupo "Contenedores", haga clic en "Supercontrol".
	Este supercontrol mostrará los controles que se encuentran en el formulario. Posicione esta control en la ventana y defina su tamaño. Las barras de desplazamiento se mostrarán automáticamente si algunos de los controles no caben en el tamaño especificado.. 

5. En la ventana del supercontrol description, especifique el nombre del supercontrol. Este nombre debe ser necesariamente SC_Form (SC_ es el prefijo definido en el código de estilo : no es necesario si no se utiliza un estilo de código).

6. Visualizar las características del supercontrol en el modificador. En la categoría "Análisis", especifique:

	- el archivo navegado : RADFileD.

	- el artículo consultado : IDRADFileD.




7. Modificar el menú que se encuentra en la ventana:

	- una opción de menú debe permitirle validar la ventana.  
			
		```wl
		// Read the information entered
		ScreenToFile()
		// If it's a new record
		IF RADFileD..NewRecord = True THEN
			// Add it
			HAdd(RADFileD)
		ELSE
			// Modify it
			HModify(RADFileD)
		END
		// Return value of the window
		MyWindow..ReturnedValue = True
		// Close the window
		Close()
		```


	- una opción de menú debe permitirle cerrar la ventana.
			
		```wl
		// Return value of the window
		MyWindow..ReturnedValue = False
		// Close the window
		Close()
		```





8. Creación de los cuadros combinados y de un botón Visión para introducir los registros relacionado:

	- Cuadro combinado en el archivo RADFileB

	- Botón de visión en RADFileB

	- Cuadro combinado en el archivo RADFileC







**8.1.** Combo box en RADFileB
En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Combo Box".
En el cuadro combinado de creación de asistente, seleccione las siguientes opciones:

- "Quiero introducir una lista de valores o rellenar el cuadro combinado mediante programación".

- el cuadro combinado es relacionado a la clave de relación IDRADFileBRel

- la control expandida es una lista.

- el nombre del control es "COMBO_IDRADArchivoB" (COMBO_ es el prefijo definido en el estilo de código : no es necesario si no se utiliza un estilo de código).




**8.2.** Botón de visión en RADFileB
En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Botón". En la ventana de control de description, especifique el nombre del botón. Esta control se denomina "BTN_VISION_RADFileB" (BTN_ es el prefijo definido en el estilo de código : no es necesario si no se utiliza un estilo de código).

El código de clic del botón es el siguiente:


```wl
// Open the vision window of RADFileB
IF Open(WIN_Vision_RADFileB) = True THEN
	// Refreshes the content of the IDRADFileB combo box
	ListDisplay(COMBO_IDRADFileB, taCurrentFirst)
END
```
**8.3.** Cuadro combinado en RADFileC
En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en "Combo Box".
En el cuadro combinado de creación de asistente, seleccione las siguientes opciones:

- "Quiero introducir una lista de valores o rellenar el cuadro combinado mediante programación". 

- el cuadro combinado es relacionado a la clave de relación IDRADFileCRel

- la control expandida es una lista.

- el nombre del control es "COMBO_IDRADArchivoC" (COMBO_ es el prefijo definido en el estilo de código : no es necesario si no se utiliza un estilo de código).




**9.** Código de inicialización de la ventana:


```wl
// Display the records
FileToScreen()
// Display the linked information
SC_Form.COMBO_IDRADFileC = RADFileC.IDRADFileC
SC_Form.COMBO_IDRADFileC..State = Grayed
// Default return value
MyWindow..ReturnedValue = False
```



