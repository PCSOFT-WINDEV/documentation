


## Groupware de usuario y LDAP
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000196"></a>
El protocolo LDAP es cada vez más utilizado por las empresas. El protocolo LDAP se utiliza para consultar y modificar los servicios de directorio. Por ejemplo, Active Directory de Microsoft proporciona acceso LDAP a sus datos.

En una empresa, el gestor "IT" asigna una cuenta y una contraseña a los usuarios.

Esta cuenta y esta contraseña pueden ser utilizadas directamente por el User Groupware de WINDEV y WEBDEV, con capacidad para definir derechos específicos.

**Observación**: El programa de grupo de usuarios funciona con el directorio Active. No funciona con openLDAP.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Cómo proceder?
<a name="¿como_proceder_ELTTEXTE000220"></a>


### Bifurcación de la Agrupación de Usuarios en un directorio LDP sin gestión de derechos
<a name="bifurcacion_agrupacion_usuarios_directorio_ldp_sin_gestion_derechos_ELTPARAGRAPHE000024"></a>

Para bifurcar el User Groupware en un directorio LDAP sin gestión de derechos:

1. En la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "Groupware Usuario". 

2. Habilitar el programa de grupo de usuarios. 

3. En la pestaña "Archivos": 

	- Seleccione "Autenticación desde un directorio LDAP o un directorio Active". Seleccione "Haga clic aquí para introducir los parámetros del servidor" y especifique las características del directorio LDAP. 

	- Marque "Sólo ventana de inicio de sesión (sin gestión de derechos)". En este caso, el User Groupware no creará ningún archivo de datos. Un supervisor no podrá definir los derechos para las ventanas y las páginas.







Cuando se inicia la aplicación, la ventana o página de inicio de sesión pide al usuario que se autentique. Si el usuario está guardado en el directorio LDAP, la aplicación se iniciará; de lo contrario, se cerrará.
<a name="NOTE2_2"></a>


### Bifurcación de la Agrupación de Usuarios en un directorio LDP con gestión de derechos
<a name="bifurcacion_agrupacion_usuarios_directorio_ldp_con_gestion_derechos_ELTPARAGRAPHE000052"></a>

Para bifurcar el User Groupware en un directorio LDAP con gestión de derechos:

1. En la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "Groupware Usuario". 

2. Habilitar el programa de grupo de usuarios. 

3. En la pestaña "Archivos":

	- Seleccione "Autenticación desde un directorio LDAP o un directorio Active". Seleccione "Haga clic aquí para introducir los parámetros del servidor" y especifique las características del directorio LDAP. 

	- Si es necesario, desmarque la opción "Sólo ventana de inicio de sesión (sin gestión de derechos)". En este caso, el User Groupware crea los archivos de datos para gestionar los usuarios y los derechos. Un supervisor puede definir los derechos para las ventanas y las páginas.







**Caso 1: La base de datos de la Agrupación de Usuarios está vacía. La base de datos LDAP existe**
Se debe realizar una configuración adicional al implementar la aplicación:

1. Conéctese a la aplicación como Supervisor.

2. Seleccione "Configurar el software de trabajo en grupo".

3. En la ventana de gestión del groupware, en la pestaña "Usuarios y grupos", haga clic en el botón "Importar LDAP".. Este botón se encuentra debajo de la lista de usuarios. 

4. Se muestra una ventana que permite importar todos los usuarios.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=gpu_ldap.gif)
 Si no está autenticado en el servidor LDAP (1er uso, por ejemplo), se solicitará el login y la contraseña de un usuario LDAP. El usuario LDAP seleccionado debe tener los derechos para listar los usuarios del directorio LDAP.
	**Atención**: dependiendo de las políticas LDAP definidas en el Directorio Active, la importación puede estar limitada a 1.000 usuarios. En este caso, para eliminar esta limitación, es necesario modificar el parámetro LDAP MaxPageSize. Para obtener más información, consulte [https://support.microsoft.com/kb/315071](https://support.microsoft.com/kb/315071). 

5. Haga clic en el botón "Importar. La importación se realiza, todos los usuarios LDAP se muestran en la lista de usuarios.
	Observación: Le aconsejamos que conceda derechos de supervisor a un usuario específico y que elimine el usuario "Supervisor" de Default.

6. Tiene la posibilidad de asignar derechos a los usuarios importados.




**Caso 2: La base de datos de la Agrupación de Usuarios ya existe. La aplicación se conecta a una base de datos LDAP**
Sólo los usuarios que se encuentren en la base de datos de groupware usuario y en la base de datos LDAP podrán conectarse a la aplicación (los mismos inicios de sesión para los usuarios). La contraseña a utilizar es la contraseña LDAP. Los usuarios que no se encuentren en la base de datos LDAP no podrán iniciar la aplicación.

Los derechos pueden ser administrados por los usuarios que se encuentran tanto en la base de datos del groupware como en la base de datos LDAP.

**Nota: El uso de un directorio LDAP con gestión de derechos permite pasar fácilmente del modo LDAP al modo sin LDAP.. Sólo tiene que marcar "Utilizar un directorio LDAP "**.
<a name="NOTE2_3"></a>


### Inicio de la aplicación
<a name="inicio_aplicacion_ELTPARAGRAPHE000106"></a>

**En el modo de inicio de automatic**: 
Indique las características del servidor LDAP en la pestaña "Archivos" de la ventana de configuración de User Groupware.

Para get el nombre del usuario, basta con llamar a [gpwGetUserInfo](../WDLang6/3041004.md):


```wl
Info("Hello " + gpwGetUserInfo(gpwInfoLogin))
```


**En modo de arranque manual**: 
Para utilizar el directorio LDAP, debe iniciarse una sesión LDAP con [gpwOpenLDAPSession](../WDLang6/1000017055.md) antes de llamar a [gpwOpen](../WDLang6/3041002.md):


```wl
gpwOpenLDAPSession("xx.mycompany.com", 389, 3, False)
gpwOpen()
```
Para identificar a un usuario sin abrir la ventana de inicio de sesión, utilice el siguiente código:


```wl
gpwOpenLDAPSession("xx.mycompany.com", 389, 3, False)
IF gpwLogin("FP", "Password") <> gpwOk THEN
	Error("Invalid user or password")
	EndProgram()
END
```

<a name="NOTE2_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/us/WINDOWS.png) 

### Instalar la aplicación que utiliza un directorio LDAP
<a name="instalar_aplicacion_que_utiliza_directorio_ldap_ELTPARAGRAPHE000139"></a>

Los parámetros del directorio LDAP pueden ser introducidos por el usuario durante la instalación de la aplicación.

**Al crear el instalación de la aplicación** que utiliza el Groupware de usuario, marque "Establecer el ruta de los archivos de groupware durante el instalación" en "Parámetros de la base de datos".

**Al instalar la aplicación**, se mostrará una pantalla específica para el Grupo de Usuarios. Esta pantalla permite a la persona que instala la aplicación:

- configurar la ubicación de los archivos de datos específicos del User Groupware

- activar historial de conexiones.

- habilitar la autenticación de usuarios a través de un directorio LDAP. En este caso, tendrás que introducir la Address del servidor, el número de puerto y la versión LDAP utilizada.





