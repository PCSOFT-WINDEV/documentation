


## Características específicas de aplicaciones para Android
			



<a name="NOTE0_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000680"></a>
El desarrollo de las aplicaciones Android y WINDEV Mobile se diferencia en los siguientes campos

- [Elementos de proyecto disponibles](#NOTE1_1).

- [Controles disponibles](#NOTE1_2). 

- [Bases de datos](#NOTE2_1).

- [Menús de las aplicaciones](#NOTE3_1).

- [Ventanas modales](#NOTE4_1).

- [Gestión de los botones "Atrás" e "Inicio](#NOTE5_1).

- [Notification sobre la inactividad de las aplicaciones](#NOTE6_1).

- [Modo de funcionamiento de enfoque y selección](#NOTE7_1).

- [Las barras de desplazamiento de automatic en las ventanas](#NOTE9_1).

- [Utilización del código nativo Java en una aplicación Android](../Editeurs/9000011.md).

- [Utilización del código nativo Kotlin en una aplicación Android](../Editeurs/9000209.md).

- [Gestión de directorios](#NOTE12_1).

- [Cambio de la orientación de la pantalla](#NOTE13_1).

- [Varios](#NOTE14_1). 

- [Hilos](#NOTE15_1).

- [Operadores indirectos](#NOTE16_1).

- [Uso de fuentes nativas de Android](#NOTE17_1). 

- [Gestión de los registros del BAsD](#NOTE18_1). 

- [Trabajos de impresión en PDF](#NOTE19_1).

- [Nivel de API (TargetSdkVersion)](#NOTE20_1).

- [Android 10: Nuevo comportamiento](../Editeurs/9000195.md). 

- [Android 11: Nuevo comportamiento](../Editeurs/9000201.md). 






## Elementos de proyecto disponibles
<a name="elementos_proyecto_disponibles_ELTTEXTE000704"></a>
<a name="NOTE1_1"></a>
Los siguientes elementos del proyecto están disponibles para el desarrollo de Android:

- Ventanas.

- Consultas.
	**Observación**: en una consulta con parámetros, todos los parámetros son obligatorios.

- Clases.

- Conjuntos de procedimientos.

- Modelos de ventanas.




Los siguientes elementos no están disponibles para el desarrollo de Android:

- Componentes externos. 
	 **Observación**: Los componentes internos están disponibles para el desarrollo de Android. Sin embargo, si el Component interno incluye un análisis, éste será ignorado durante la ejecución.

- Informes y plantillas reporte.



<a name="NOTE1_2"></a>


### Controles disponibles
<a name="controles_disponibles_ELTPARAGRAPHE000105"></a>

Los siguientes controles están disponibles para el desarrollo de Android:

- [Control Botón](../WDChamp/1013076.md)

- [Control Combo Box](../WDChamp/1013023.md)
	**Observación**: No se puede asignar un valor negativo o nulo a un control Combo Box. Si el control no está vacío, debe haber un elemento seleccionado. Se producirá un error si se asigna un valor negativo o nulo a un control Combo Box.

- [control Imagen](../WDChamp/1013218.md)

- [Control Casilla de verificación](../WDChamp/1013151.md)

- [Control Estático](../WDChamp/1013179.md)

- [Control List Box](../WDChamp/1013185.md)

- [Control Pestaña](../WDChamp/1013194.md)

- [Editar control](../WDChamp/1013145.md)

- [Control Botón de opción](../WDChamp/1013228.md)

- [Control Looper](../WDChamp/1013099.md)




- [Control Barra de progreso](../WDChamp/1013156.md)

- [control Estático con máscara de visualización](../WDChamp/1013179.md)

- [Control Modelo de controles](../WDChamp/9000095.md)

- [Control Ventana interna](../WDChamp/1013255.md)

- [Supercontrol](../WDChamp/1013091.md)

- [HTML control](../WDChamp/1013105.md)

- [Control Cámara](../WDChamp/1013188.md)




- [Control Calendario](../WDChamp/1016300.md)

- [Control Zona multilínea](../WDChamp/1000024001.md)




- [Control deslizante](../WDChamp/1013241.md)

- [Control Valoración](../WDChamp/1000019736.md)




- [control Tabla](../WDChamp/1013224.md)




- [Control Planificador](../WDChamp/1000019498.md)




- [Control Kanban](../WDChamp/1410087203.md).

- [Control Editor de imágenes](../WDChamp/1410087209.md).


**Observaciones**: 

- Algunas propiedades de estilo (pestaña "Estilo" de las ventanas de control description), aunque están disponibles en modo edición, no son compatibles con las aplicaciones Android.

- Puede utilizar un degradado para el fondo color de los bordes control.




<a name="NOTE2_1"></a>


## Bases de datos
<a name="bases_datos_ELTTEXTE000734"></a>
Las bases de datos disponibles para las aplicaciones de Android son: 

- HFSQL (Clásico y Cliente/Servidor), 

- SQLite. 
	WINDEV Mobile incluye un Conector Nativo para SLQLite para Android. Los principales comandos de Hxxx están disponibles. 




Observaciones: 

- Memos con HFSQL: El modo utilizado para las cadenas en tiempo de ejecución (UNICODE o ANSI) definido en el [configuración del proyecto](../Editeurs/9000030.md) determina el carácter set utilizado para almacenar las cadenas. Mediante Default, las cadenas ANSI asignadas a los elementos de memo HFSQL se codifican en UTF-8. [ChangeCharset](../WDLang1/3054001.md) puede utilizarse para cambiar el carácter encoding

- Base de datos SQLite: Si su proyecto Android comparte su análisis con otro proyecto (no Android), se puede utilizar [HChangeConnection](../WDLang4/3044150.md) para asociar los archivos de datos de la aplicación con una conexión SQLite. Para obtener más información, consulte [Aplicación Android: Uso e intercambio de datos](../Editeurs/9000123.md). 

- Memos con SQLite: Se recomienda almacenar información en formato memo para datos cuyo tamaño es inferior a 1 MB. Los datos en formato de archivo externo deben guardarse en la memoria interna o externa del teléfono y la ruta de acceso a estos datos debe almacenarse en la base de datos.  

- También tiene la posibilidad de acceder a una base de datos externa (Oracle, SQL Server,...) a través de un Webservice. Para obtener más información, consulte [Acceso a una base de datos a través de un servicio web](../WDLang4/1000021063.md).




<a name="NOTE3_1"></a>


## Menús de las aplicaciones
<a name="menus_las_aplicaciones_ELTTEXTE000758"></a>
En una aplicación Android, se pueden proponer las opciones de aplicación: 

- a través de la [Action Bar](../WDChamp/1000025001.md) control. Esta solución se recomienda. 

- en formato de menú (no recomendado). 




Notas sobre los menús:

- En la edición, los menús de las ventanas de Android se presentan como simples menús desplegables. 

- En tiempo de ejecución, estos menús se mostrarán de forma diferente según el número de opciones:

	- Si el menú contiene menos de 6 opciones, se muestra como botones grandes en la parte inferior de la pantalla.

	- Si el menú contiene más de 6 opciones, las 5 primeras se muestran como botones grandes y un sexto botón automatic ("Más") permite al usuario ver el resto del menú como un desplegable.




- Los menús de las aplicaciones Android admiten un único nivel de submenús. Más allá de este límite, se produce un error fatal al ejecutar la aplicación.



<a name="NOTE3_2"></a>


### Menús contextuales
<a name="menus_contextuales_ELTPARAGRAPHE000242"></a>

Los menús contextuales son compatibles con WINDEV Mobile para las aplicaciones de Android.

- En el modo de edición, se presentan como los menús desplegables de Windows, pero adoptan la apariencia de los menús Android en tiempo de ejecución.

- También se limitan a un solo nivel de submenú.

- En los dispositivos sin "clic derecho" (teléfonos, por ejemplo), los menús emergentes aparecen tras una "pulsación larga" en el mando al que se associated.




<a name="NOTE4_1"></a>


## Ventanas modales
<a name="ventanas_modales_ELTTEXTE000788"></a>
Las viudas modales no son compatibles con el sistema operativo Android. [entablar](../WDLang1/3038035.md) no está permitida.
Las ventanas se pueden abrir: 

- por la función [OpenChild](../WDLang1/3038021.md), 

- por la función [OpenSister](../WDLang1/3038045.md), 

- por la función [OpenMobileWindow](../WDLang1/1000021018.md). 




Para pasar un valor de retorno: 

- Cuando se cierra, una ventana de niño o hermano puede llamar a una Procedure local de la ventana que la abrió para pasarle un valor de retorno. Un valor de retorno también puede ser devuelto a través de un Variable global.

- Puede especificar el valor de retorno a través de la propiedad [ReturnedValue](../Proprietes/2510134.md) de la ventana hija y recuperar este valor a través de la propiedad "Cerrar una ventana hija de la ventana" Event de la ventana padre. 




<a name="NOTE5_1"></a>


## Gestión de los botones "Atrás" e "Inicio
<a name="gestion_los_botones_atras_inicio_ELTTEXTE000812"></a>


### Botón Atrás
<a name="boton_atras_ELTPARAGRAPHE000290"></a>

Todos los dispositivos que ejecutan Android incluyen una tecla especial "Atrás" (normalmente una pequeña flecha apuntando hacia la izquierda). En una aplicación WINDEV Mobile, esta tecla cierra la ventana actual y ejecuta el comando "Cerrar" Event. Si es la primera ventana de la aplicación, se ejecutará el código de cierre de la aplicación y se cerrará la aplicación.

Es necesario desarrollar una aplicación para que se comporte correctamente si alguna de sus ventanas se cierra mediante la tecla "Atrás".. En la mayoría de los casos, cada control de ventana debe inicializarse con un valor por defecto y el botón "Atrás" debe considerarse como un botón "Cancel".

Observación: Tienes la capacidad de cambiar este comportamiento y de ejecutar un Process personalizado (para pedir confirmación al usuario por ejemplo y evitar cerrar la ventana, especialmente si es la primera ventana de la aplicación). Para ello, la ventana debe disponer de un botón con un acceso directo "'Atrás'" (pestaña "UI" de la ventana de control description).


### Botón Inicio
<a name="boton_inicio_ELTPARAGRAPHE000299"></a>

Al pulsar el botón "Inicio" no se cierra la aplicación actual: la aplicación se traslada a la Background. La Event "Cerrar" no se ejecuta. 
**Observación**: Incluso si la ventana tiene un control Botón con el método abreviado de teclado "Botón Inicio" (definido en la pestaña "UI"), no se ejecutará el código del botón. A diferencia del botón Atrás, el comportamiento de Default no se puede cambiar.

Una pulsación larga de la tecla "Inicio" permite visualizar la lista de aplicaciones en ejecución. Entonces, el usuario puede seleccionar su aplicación cuando quiera moverla al primer plano. 
**Observación**:  El sistema Android no permite proponer esta opción mediante programación.

<a name="NOTE6_1"></a>


## Notification sobre la inactividad de las aplicaciones
<a name="notification_sobre_inactividad_las_aplicaciones_ELTTEXTE000842"></a>
El sistema operativo Android no permite que una aplicación permanezca en un Process (sin devolver control al sistema operativo) durante más de unos segundos. Si se da este caso, Android muestra un cuadro de diálogo que permite al usuario cerrar la aplicación o esperar a que finalice el Process:
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=android_anr.gif)
 Para evitar que se active este mecanismo, los pasos de cálculo no deben incluirse en el Thread principal de la aplicación. Para ello, utilice los procedimientos iniciados en los hilos secundarios (para más detalles, véase [ThreadExecute](../WDLang1/3077024.md)). 

**Observación**: Se recomienda encarecidamente no manipular los elementos de interfaz de usuario de una aplicación desde una Thread secundaria.

Los diseñadores de Android recomiendan que una acción del usuario desencadene una reacción de la aplicación en menos de 200 milisegundos para dar una buena impresión de reactividad.

<a name="NOTE7_1"></a>


## Modo de funcionamiento de enfoque y selección
<a name="modo_funcionamiento_enfoque_seleccion_ELTTEXTE000866"></a>
Para gestionar el tacto / lápiz óptico controlado UI y teclado / bola de seguimiento controlado UI , Android ofrece un sistema para la gestión de enfoque y selección diferente de otros sistemas operativos:

- El enfoque sólo se puede mover con un ratón, un trackball o un dispositivo similar.

- Cuando se mueve el foco, se ejecuta la entrada y salida de Event de los controles.

- Los controles en los que se puede hacer clic pero que no se pueden editar (botones, list boxes, etc.) se comportan como los controles en interrupción.. No se enfocan cuando reciben un clic.

- Los controles "Seleccionar un fila" Event en List Box y Looper sólo se ejecutan cuando se selecciona el fila con un clic.

- La "Selección de un fila" Event en los controles List Box y Looper no se ejecuta cuando cambia el fila (con el foco).




**Atención**: En un List Box o control Looper, la barra no representa la selección sino sólo el foco.

<a name="NOTE9_1"></a>


## Las barras de desplazamiento de automatic en las ventanas
<a name="las_barras_desplazamiento_automatic_las_ventanas_ELTTEXTE000890"></a>
Si el tamaño de una ventana excede el tamaño de la pantalla y si la opción "Barras de desplazamiento automáticas" está seleccionada en la descripción de la ventana, una barra de desplazamiento se añade de forma automática a la derecha de la ventana. Su presencia debe tenerse en cuenta al diseñar la ventana para que esta barra de desplazamiento no se superponga a los controles.

<a name="NOTE12_1"></a>


## Gestión de directorios
<a name="gestion_directorios_ELTTEXTE000914"></a>
La gestión de directorios en Android presenta las siguientes características específicas:

- En Default, el directorio actual de una aplicación corresponde al subdirectorio "ficheros" que se crea automáticamente en la raíz del directorio instalación de la aplicación. 

- Las rutas relativas manejadas por la aplicación son relativas a este directorio. 

- La ruta completa del directorio actual es devuelta por [fCurrentDir](../WDLang1/3036022.md). Por Default, tienes la capacidad de leer y escribir en este directorio. 

- El directorio actual puede ser modificado por [fCurrentDir](../WDLang1/3036022.md). 

- El directorio de ejecución (devuelto por [fExeDir](../WDLang1/3036049.md)) corresponde al directorio de instalación de la aplicación. De forma predeterminada, las aplicaciones siempre se instalan en el directorio /data/data/&lt;nombre del paquete&gt;.&lt;nombre de la aplicación&gt;.

- En Android, el sistema de archivos es de solo lectura tanto en el dispositivo y como en el emulador. Una aplicación sólo puede escribir en su directorio de instalación o en uno de sus subdirectorios, así como en la memoria externa (SDCard). 

- El directorio "databases" también se crea automáticamente en la raíz del directorio de instalación de la aplicación para almacenar las bases de datos SQLite manejadas por la aplicación (a menos que se haya especificado una ruta concreta durante la conexión). La ruta del directorio "bases de datos" es devuelta por [fDataDir](../WDLang1/3036001.md). 

- Para tener una ubicación de almacenamiento común a varias aplicaciones, utilice la memoria externa (por ejemplo, SDCard).. La ruta de un directorio para almacenar archivos en el espacio de almacenamiento externo es devuelta por [SysDirExternalStorage](../WDLang1/1000021793.md).

- Cuando se conecta un dispositivo al PC utilizando el modo "almacenamiento masivo" o "disco Drive", la tarjeta SD se desmonta automáticamente del dispositivo y deja de ser accesible desde él.. Todas las aplicaciones en ejecución instaladas en la tarjeta SD son eliminadas. Mientras la tarjeta SD esté desmontada, no podrá: 

	- iniciar las aplicaciones instaladas en la tarjeta SD.

	- acceder a la tarjeta SDCard desde las aplicaciones que se ejecutan en el Phone. 





Para obtener más información, consulte: 

- [Tabla de resumen: Gestión de directorios según la plataforma](../WDLang1/1000020167.md). 

- [Almacenamiento de archivos en Android](../WDLang1/1000021925.md). 




<a name="NOTE13_1"></a>


## Cambio de la orientación de la pantalla
<a name="cambio_orientacion_pantalla_ELTTEXTE000938"></a>
Para detectar si la orientación de la pantalla ha cambiado, utilice la Event "Cambiar la orientación" en las ventanas. 

También puede utilizar [Funciones de SensorXXXX](../WDLang1/1000019370.md) para detectar los movimientos de Phone. 

Observación: Puede usar [Funciones GPS](../WDLang3/1000019192.md) para administrar las funcionalidades de geolocalización de Phone. 

<a name="NOTE14_1"></a>


## Varios
<a name="varios_ELTTEXTE000962"></a>


- En Android, por razones de seguridad, las teclas "Inicio" y "Fin de llamada" no pueden utilizarse como atajos.

- Para utilizar el tema "Material Design", en la pestaña "General" de la descripción de la configuración de Android, marque "Aplicar tema Material Design a los controles nativos y ventanas Info/Error/Diálogo".

- Gestión de imágenes según el DPI: Las imágenes pueden ser mapas de bits o borrosas de acuerdo con el DPI del dispositivo.. Puede utilizar la gestión de automatic DPI. Para obtener más información, consulte [Android/iOS: Proporcionar un Image por DPI](../WDChamp/9500137.md).

- Los estilos CSS en imágenes SVG no son compatibles con Android. 




<a name="NOTE15_1"></a>


## Gestión de Thread
<a name="gestion_thread_ELTTEXTE000986"></a>
En Android, la función [ThreadStop](../WDLang1/3077019.md) no está disponible.

Sólo el hilo puede detenerse al salir del procedimiento WLanguage llamado por [ThreadExecute](../WDLang1/3077024.md).

Ejemplo: 


```txt
ThreadExecute("th", threadNormal, ProcThread)
```

```txt
PROCEDURE ProcThread

bThreadAlive is boolean = True
WHILE bThreadAlive

	// ... Process

	// Checks the end condition of the thread
	IF <THREAD END CONDITION> THEN
		bThreadAlive = False
	END
END
```


<a name="NOTE16_1"></a>


## Operadores indirectos
<a name="operadores_indirectos_ELTTEXTE001010"></a>
Los [indirecciones](../Motscles/1512005.md) sólo son compatibles con las variables globales.
Una indirección sobre una variable local de una Process provocará un error "elemento desconocido".

<a name="NOTE17_1"></a>


## Utilización de fuentes nativas de Android
<a name="utilizacion_fuentes_nativas_android_ELTTEXTE001034"></a>
Se pueden utilizar las siguientes fuentes:

- Droid Sans,

- Droid Sans Mono,

- El droide Serif,

- Roboto, 

- Roboto Condensado, 

- Roboto Light,

- Roboto Thin.




Si el dispositivo no soporta la fuente especificada en tiempo de ejecución, se utilizará una fuente de sustitución (Roboto).

Para obtener más información, consulte [Gestión de fuentes en un proyecto iOS o Android](../Editeurs/9500238.md). 

<a name="NOTE18_1"></a>


## Administración de registros ADB
<a name="administracion_registros_adb_ELTTEXTE001058"></a>


### Depuración de aplicaciones desplegadas a través de los registros de ADB
<a name="depuracion_aplicaciones_desplegadas_traves_los_registros_adb_ELTPARAGRAPHE000488"></a>

Cuando se despliega una aplicación, los posibles errores de aplicación que se producen en los ordenadores de los usuarios se ponen a disposición del desarrollador de la aplicación en el "ADB log" .

Esto le permite recuperar los errores, así como Aseveraciones y trazas de todos los dispositivos que ejecutan la aplicación.. Los siguientes mensajes se escriben en el registro del ADB: 

- Mensajes de [rastro](../WDLang1/3013050.md) (nivel "Info"). 

- Mensajes de [dbgStandardOutput](../WDLang1/3014020.md) (nivel "Debug"). 

- Mensajes de aserción ([dbgAssert](../WDLang1/3014022.md), dbgCheckxxx, [dbgError](../WDLang1/1000020526.md)) (nivel "Assert"). 

- Mensajes de errores fatales y no fatales (nivel "Error"). 




El "ADB log" es accesible: 

- en [Centro de Control Android](../CCAndroid/1410086630.md) (pestaña "Logcat"): en la pestaña "Herramientas", en el grupo "Herramientas móviles", haga clic en "CCAndroid").

- en cada Phone. Se utiliza un software específico para Process y ver el contenido de este archivo. 

- a través de la herramienta "Monitor" disponible en el SDK de Android. En este caso, tiene la posibilidad de ver (en la pestaña "Log cat") los registros ADB de todas las aplicaciones que se encuentran en el dispositivo conectado al PC (el modo "depuración USB" debe estar activado en el dispositivo. Para obtener más información, consulte [Preparar teléfono para probar una aplicación Android](../Editeurs/9000117.md)). 




<a name="NOTE19_1"></a>


## Imprimir en PDF
<a name="imprimir_pdf_ELTTEXTE001082"></a>
Las impresiones PDF sólo son compatibles con las fuentes estándar de Adobe (sin formato Unicode).: Courrier, Helvetica, Times, Symbol y ZapFDingbats. 
<a name="NOTE20_1"></a>


## Nivel de API
<a name="nivel_api_ELTTEXTE001106"></a>
Cuando se genera una aplicación para Android, el APK o AAB resultante contiene un nivel de API objetivo (o TargetSdkVersion) del SDK de Android.

Este nivel objetivo de API es crítico para la implementación y la ejecución de la aplicación.: 

- Google puede permitir o rechazar una aplicación en el Play Store dependiendo de su nivel de API,

- el sistema Android instalado en los dispositivos, determina las funcionalidades disponibles para la aplicación y las reglas de seguridad que se le deben aplicar según su nivel API.




Por lo tanto, es necesario generar la aplicación con una versión de WINDEV Mobile que se adapte a la versión de Android en los dispositivos de destino y al modo implementación de la aplicación.

Resumen del nivel de API (TargetSdkVersion) especificado en el manifiesto de la aplicación Android según la versión de WINDEV Mobile: 


|   |   |
| --- | --- |
| WINDEV Versiones móviles | Nivel API (TargetSdkVersion) / Versión Android soportada |
| WINDEV Mobile 22 -> WINDEV Mobile 23 "Actualización 2" | 24 / Android 7 |
| WINDEV Mobile 23 "Actualización 3" -> WINDEV Mobile 24 "Actualización 3" | 26 / Android 8 |
| WINDEV Mobile 24 "Actualización 4" -> WINDEV Mobile 25 "Actualización 3" | 28 / Android 9 |
| WINDEV Mobile 25 "Actualización 4" -> WINDEV Mobile 26 "Actualización 2" | 29 / Android 10 |
| A partir de WINDEV Mobile 26 "Actualización 3 -> WINDEV Mobile 27 "Actualización 3" | 30 / Android 11 |
| WINDEV Mobile 27 "Actualización 4 | 31 / Android 12 |
| A partir de WINDEV Mobile 28 -> WINDEV Mobile 28 "Actualización 1" | 31 / Android 13 |
| A partir de WINDEV Mobile 28 "Actualización 2" | 33 / Android 13 |





