


## Auditoría dinámica
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000349"></a>
La auditoría dinámica de una aplicación analiza su rendimiento en tiempo de ejecución. Una auditoría dinámica puede realizarse en un entorno de pruebas o en una aplicación real. La auditoría detecta problemas como:

- Consumo excesivo de la memoria.

- Lentitud de los algoritmos utilizados.

- Errores "ocultos" en tiempo de ejecución.

- ...




Se puede realizar una auditoría dinámica: 

- [del entorno de desarrollo](#NOTE2_1).

- [en la aplicación desplegada](#NOTE3_1). 




El estado reporte de la auditoría dinámica puede ser entonces [visto y analizado](#NOTE4_1) en el editor de proyectos. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Realización de una auditoría dinámica desde el entorno de desarrollo
<a name="realizacion_una_auditoria_dinamica_desde_entorno_desarrollo_ELTTEXTE000373"></a>
La auditoría dinámica puede iniciarse: 

- [durante la prueba del proyecto](#NOTE2_2). 

- [durante las pruebas automatizadas](#NOTE2_3).



<a name="NOTE2_2"></a>


### Inicio de una auditoría dinámica durante la prueba del proyecto
<a name="inicio_una_auditoria_dinamica_durante_prueba_del_proyecto_ELTPARAGRAPHE000051"></a>

**1. automatic dynamic audit** 
Durante cada ventana o proyecto GO, se realiza una auditoría dinámica en la tarea de Background, sin ralentizar la ejecución. Al finalizar la prueba, el número de problemas que se han producido se muestra en el widget "Auditoría dinámica" de [Proyecto cuadro de mando](../Editeurs/9500221.md). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=TDB_Wid_audit_dyn.gif)
 Para ver el estado detallado de reporte, simplemente haga clic en el widget.

Para desactivar esta auditoría dinámica de automatic: 

1. Haz clic en la flecha del widget. 

2. Desmarcar "Auditoría dinámica habilitada".. 


En este caso, no se realizará ninguna auditoría durante una prueba a través de un simple GO: la auditoría dinámica deberá iniciarse explícitamente durante la prueba del proyecto.

**2. Auditoría dinámica iniciada explícitamente**
Para iniciar explícitamente una auditoría dinámica durante la prueba del proyecto: 

1. Abra el proyecto a analizar.

2. Utilice uno de los siguientes métodos: 

	- En la pestaña "Proyecto", en el grupo "Modo de prueba", despliegue "Modo de prueba" y seleccione "Depurar proyecto con la auditoría activada". 
			

	- En el proyecto cuadro de mando, despliegue la flecha del widget "Auditoría dinámica" y seleccione "Prueba en profundidad del proyecto (Ir)". 

	- En el acceso rápido Icon s, expanda el Icon "GO" y seleccione la opción "Depurar proyecto mientras la auditoría está activada".. 
			




3. Comienza el proyecto.

4. Manejar el proyecto para utilizar las funcionalidades que deben ser auditadas.

5. Cierre la aplicación.

6. El editor abre la ventana de auditoría dinámica reporte. 



<a name="NOTE2_3"></a>


### Iniciar una auditoría dinámica durante las pruebas automatizadas
<a name="iniciar_una_auditoria_dinamica_durante_las_pruebas_automatizadas_ELTPARAGRAPHE000111"></a>

Para iniciar una auditoría dinámica durante las pruebas automatizadas:

1. Abra el proyecto a analizar.

2. En la pestaña "Pruebas automatizadas", en el grupo "Pruebas", despliegue "Ejecutar todo" y seleccione "Activar auditoría dinámica durante las pruebas automatizadas".


La auditoría dinámica se realizará cuando se ejecute una prueba automatizada. La ventana reporte de la auditoría dinámica se muestra al final de la prueba.. El estado reporte de la auditoría dinámica también se muestra en el panel "Rastreo del depurador. 

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Realización de una auditoría dinámica en la aplicación implementada
<a name="realizacion_una_auditoria_dinamica_aplicacion_implementada_ELTTEXTE000409"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000137"></a>

La auditoría dinámica puede iniciarse: 

- mediante programación.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) a través del archivo WX.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) mediante una combinación de teclas. 





### Iniciar una auditoría dinámica mediante programación
<a name="iniciar_una_auditoria_dinamica_mediante_programacion_ELTPARAGRAPHE000150"></a>

Para iniciar mediante programación una auditoría dinámica, basta con llamar a [dbgEnableAudit](../WDLang1/1000018835.md).

La auditoría genera un archivo ".waudit. Este archivo debe cargarse en el entorno de desarrollo para poder analizar el resultado.

**Observación**: Para analizar el resultado de la auditoría de la aplicación, el proyecto de esta aplicación debe abrirse en WINDEV, WINDEV Mobile o WEBDEV.

![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta funcionalidad no está disponible.
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) 

### Iniciar una auditoría dinámica utilizando el archivo ".WX
<a name="iniciar_una_auditoria_dinamica_utilizando_archivo_ELTPARAGRAPHE000168"></a>

También puede iniciar una auditoría de una aplicación en su entorno de producción **sin modificar el ejecutable**: simplemente crear un archivo en el mismo directorio y con el mismo nombre que el ejecutable, pero con un ".WX" extension.

Este archivo tendrá el siguiente formato:


```txt
[AUDIT]
ENABLED = 1 (or 0 to disable the audit)
FILE = <path of the .waudit file to be generated>
OPTION = <combination of the options of dbgEnableAudit>
```


En este archivo, la tecla OPTION puede tomar los siguientes valores: 

- "CA": Los comentarios de auditoría se escriben en la auditoría dinámica.

- "WA": Los avisos de ejecución relativos a las anomalías detectadas se escriben en la auditoría dinámica.

- "WP": Las advertencias de ejecución relativas al rendimiento se registran en la auditoría dinámica.

- "EA": Las afirmaciones están escritas en la auditoría dinámica.

- "HE": Los errores no fatales no procesados se escriben en la auditoría dinámica.

- "EX": Los errores fatales, procesados por WHEN EXCEPTION o no procesados, se escriben en la auditoría dinámica.


Estas opciones deben ir precedidas de un signo "+" para especificar que deben tenerse en cuenta. Ejemplo: OPTION=+CA+WA+WP

La auditoría genera un archivo ".waudit", que debe cargarse en el entorno de desarrollo para analizar el resultado.

**Observación**: Para analizar el resultado de una auditoría de aplicación, el proyecto correspondiente a esta aplicación debe abrirse en WINDEV o WEBDEV.
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) 

### Inicio de una auditoría dinámica en una aplicación actualmente en ejecución
<a name="inicio_una_auditoria_dinamica_una_aplicacion_actualmente_ejecucion_ELTPARAGRAPHE000194"></a>

Para iniciar la grabación de una auditoría de tiempo de ejecución, presione Ctrl + Alt + A. Este acceso directo realiza la misma acción que la llamada a [dbgEnableAudit](../WDLang1/1000018835.md).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Examen de una auditoría dinámica
<a name="examen_una_auditoria_dinamica_ELTTEXTE000451"></a>


### Apertura del estado reporte de la auditoría dinámica
<a name="apertura_del_estado_reporte_auditoria_dinamica_ELTPARAGRAPHE000206"></a>

El estado reporte de la auditoría dinámica es un fichero cuya extensión es ".waudit".. 

Para abrir este archivo, puede: 

- Abrir el archivo directamente en el editor: en la pestaña "Inicio", en el grupo "General", haga clic en "Abrir" y seleccione el archivo de auditoría. 

- Utilice el widget "Auditoría dinámica" de [proyecto cuadro de mando](../Editeurs/9500221.md): haga clic en la flecha del widget y seleccione "Abrir una auditoría".. A continuación, seleccione el archivo de auditoría. 





### Ventana de análisis de una auditoría dinámica
<a name="ventana_analisis_una_auditoria_dinamica_ELTPARAGRAPHE000233"></a>

Al cargar una auditoría dinámica, aparece la siguiente ventana:<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=audit_dyn_fen.gif)


- 1: Nombre del archivo de auditoría actualmente analizado.

- 2: Período de tiempo durante el cual se realizó la auditoría.

- 3: Selección del período de tiempo para ver. Si la auditoría abarca un largo período de tiempo, puede leer una parte específica de la misma utilizando un deslizador de rango. El control deslizante de rango cubre toda la duración de la auditoría. La sección Active del control (modificable con las teclas de flecha) se muestra a continuación. Se puede hacer clic en esta área y selecciona automáticamente el Event más cercano al momento en que se hizo clic (en la lista de Event s).

- 4: Modo de visualización de los eventos de auditoría. Los eventos de auditoría se pueden mostrar en orden cronológico en la lista de eventos o se pueden agrupar por familia de eventos.

- 5: Botón de filtrado utilizado para elegir los tipos de eventos que se mostrarán.

- 6: Lista de eventos que muestran todos los elementos recogidos por la auditoría. En cada tabla fila: 

	- un botón "..." se utiliza para acceder a los detalles de Event. 

	- si el Event es relacionado a un código fila particular, el botón "Código" permite abrir el editor de códigos directamente en el lugar correspondiente.

	- el botón "-" se utiliza para desactivar el error. ATENCIÓN: El error ya no se mostrará si está desactivado.. No se puede volver a habilitar.








### Tipos de eventos recogidos por la auditoría dinámica
<a name="tipos_eventos_recogidos_por_auditoria_dinamica_ELTPARAGRAPHE000252"></a>

Los diferentes tipos de eventos recogidos por la auditoría dinámica son:

- **Las excepciones**: una excepción es un error fatal de la aplicación (a menos que sea interceptada en un bloque WHEN EXCEPTION). Una excepción puede ser generada voluntariamente por [ExceptionThrow](../WDLang1/3034005.md). 
	Todas las excepciones son reportadas por la auditoría dinámica (excepciones procesadas a través de la programación o excepciones que han detenido la aplicación). En la mayoría de los casos, una excepción es el resultado de un error de programación.

- **Los errores**: una función WLanguage puede provocar un error para señalar el fallo de una operación (por ejemplo, fDelete devuelve un error si el borrado del archivo solicitado ha fallado). Los errores también pueden ser provocados por el desarrollador a través de [ErrorThrow](../WDLang1/3034011.md). 
	En la mayoría de los casos, un error es causado por una acción inválida del usuario de la aplicación o por un fallo en el entorno de la aplicación.

- **Las advertencias de tiempo de ejecución**: estas advertencias son reportadas por algunas funciones de WLanguage para señalar un comportamiento potencialmente problemático pero que no causa ningún error. Por ejemplo, si WLanguage detecta un problema de rendimiento en el código de la aplicación. 
	Ejemplos de advertencia de tiempo de ejecución: 

	- Utilizar [zipExtractFile](../WDLang3/3082019.md) en un bucle para extraer un número importante de ficheros de un archivo Zip o 7z no es muy eficiente. Se recomienda utilizar la función [zipExtractFileList](../WDLang3/1000017234.md).

	- Posibles mejoras en los controles de los gráficos: activación del anti-aliasing, uso de etiquetas dentro de las secciones de la tarta, ... 

	- No se recomienda el acceso a los controles desde los hilos secundarios.

	- Baja tasa de envío de cliente a servidor. Este aviso indica un problema de rendimiento de la red. Aparece al abrir una conexión con un servidor en modo HFSQL Client/Server si:

		- la latencia es superior a 50 milisegundos,

		- una pequeña trama de red tarda mucho tiempo en ir y venir entre el cliente y el servidor (más de un segundo para 256 kB).




- &lt;Aserciones**:  la auditoría en tiempo de ejecución informa de todas las llamadas a [dbgAssert](../WDLang1/3014022.md) en las que la condición resultó ser False.

- **Los eventos de depuración**: estos eventos se desencadenan por la llamada a la [funciones de depuración](../WDLang1/3014025.md) ([dbgSaveMemoryDump](../WDLang1/1000018852.md) por ejemplo).





