
## JSONXMLConverter (Tipo de variable)

*** ***
				



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
El tipo **JSONXMLConverter** permite definir las características avanzadas de la conversión de un objeto XML a JSON (o a la inversa) mediante las funciones [XMLToJSON](../WDLang5/1410087331.md) y [JSONToXML](../WDLang5/1410087330.md)). Las características de esta conversión se pueden definir y cambiar mediante diferentes propiedades WLanguage. 

**Observación**: Para obtener más información sobre la declaración de este tipo de variable y el uso de propiedades WLanguage, consulte [Declarar una variable](../Motscles/1514032.md).
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
let json = StringToJSON("
{"name": "TestName"
  ,"id": 2
  ,"true": true
  ,"list": [5,5,6,2,47]
}
")

let converter is JSONXMLConverter
converter.ArrayConversionWithRoot = False
converter.FullConversion = True
let xml = JSONToXML(json, converter)
Trace(xml..XMLSource)

// The result will be 
// <document>
//   <name>TestName</name>
//   <id>2</id>
//   <true>true</true>
//   <list>5</list>
//   <list>5</list>
//   <list>6</list>
//   <list>2</list>
//   <list>47</list>
// </document>

Trace(XMLToJSON(xml, converter))

// the result will be: 
// { "name":"TestName", "id":2, "true":true, "list":[ 5, 5, 6, 2, 47 ] }
```





<a name="NOTE0"></a>

## Observaciones
<a name="NOTE0_1"></a>


### Propiedades específicas de la descripción de variables de tipo JSONXMLConverter
<a name="propiedades_especificas_descripcion_variables_tipo_jsonxmlconverter_ELTPARAGRAPHE000035"></a>

Las siguientes propiedades pueden utilizarse para manipular un convertidor:

| Nombre de la propiedad | Tipo utilizado | Efecto |
| --- | --- | --- |
| ArrayConversionWithRoot  | Boolean | <br><br>- <u><u><u><u>True</u></u></u></u> (valor predeterminado) para convertir arrays JSON a XML utilizando el nombre del elemento JSON como nombre de raíz,<br><br>- <u><u><u><u>False</u></u></u></u> en caso contrario. <br><br><br> |
| ElementName  | Character string | Nombres de elementos para arrays con raíz. |
| EmptyTagRepresentation  | Boolean | <br><br>- <u><u><u><u>True</u></u></u></u> (valor predeterminado) si la etiqueta vacía está representada por NULL,<br><br>- <u><u><u><u>False</u></u></u></u> en caso contrario. <br><br><br> |
| FullConversion  | Boolean | <br><br>- <u><u><u><u>True</u></u></u></u> (predeterminado) si la conversión debe incluir atributos y espacios de nombres,<br><br>- <u><u><u><u>False</u></u></u></u> para realizar una conversión simple (ignorando atributos y espacios de nombres). <br><br><br> |
| JSONTyping  | Boolean | <br><br>- <u><u><u><u>True</u></u></u></u> (valor predeterminado) si se deducen los tipos durante la conversión a JSON, <br><br>- <u><u><u><u>False</u></u></u></u> en caso contrario. <br><br><br> |
| PrefixAttribute  | Character string | Prefijo de los atributos XML en JSON. De forma predeterminada, esta propiedad se establece en "@". |
| PrefixCDATA  | Character string | Clave de secciones de escape XML. De forma predeterminada, esta propiedad se establece en "CDATA". |
| PrefixNamespaceDeclared  | Character string | Prefijo para los espacios de nombres declarados. De forma predeterminada, esta propiedad se establece en "%". |
| PrefixNamespaceNode  | Character string | Prefijo para el espacio de nombres del nodo. De forma predeterminada, esta propiedad se establece en "$". |
| PrefixText  | Character string | Prefijo del texto de los nodos de texto XML en JSON. De forma predeterminada, esta propiedad se establece en "#text". |
| XMLRootName  | Character string | Nombre de la raíz XML. De forma predeterminada, esta propiedad se establece en "root". |









<a name="NOTE1"></a>

## Observaciones
<a name="NOTE1_1"></a>


### Estándar de conversión de JSON a XML y de XML a JSON
<a name="estandar_conversion_json_xml_xml_json_ELTPARAGRAPHE000148"></a>

No hay estándares específicos para ninguno de los dos tipos de conversión. Sin embargo, existen dos métodos para definir las operaciones de conversión:

- Forzar un estándar durante la conversión (utilizando los valores predeterminados de la variable **JSONXMLConverter**).

- Utilizar un estándar de conversión personalizado con una variable de tipo **JSONXMLConverter** para describir las reglas de conversión.



<a name="NOTE1_2"></a>


### Estándar de conversión predeterminado
<a name="estandar_conversion_predeterminado_ELTPARAGRAPHE000162"></a>

<u><u><u><u>XML a JSON</u></u></u></u>

- Etiqueta XML: "" + nombre de la etiqueta seguido de un objeto JSON.

- Etiqueta vacía: valor JSON nulo.

- Atributo XML: "@" + nombre del atributo como miembro JSON del objeto que representa la etiqueta.

- Nodo de texto: pares clave/valor simple si no hay atributos, "#text" si el nodo es un objeto JSON.

- Secciones de escape: "CDATA" con la cadena como valor JSON.




<u><u><u><u>JSON a XML</u></u></u></u>

- Objeto vacío: etiqueta vacía si el objeto tiene nombre.

- Lista vacía: etiqueta vacía si el array tiene nombre.

- Valor: nodo de texto.



<a name="NOTE1_3"></a>


### Casos especiales de conversión
<a name="casos_especiales_conversion_ELTPARAGRAPHE000185"></a>

La conversión JSON - XML no es una conversión común y sin pérdidas, ya que los dos lenguajes tienen sintaxis y datos diferentes. Cualquier conversión requerirá múltiples adaptaciones para mantener los datos y limitar las pérdidas del documento original.

A continuación, encontrará una lista de los distintos puntos de conflictos y ambigüedades que pueden producirse durante una conversión, así como las soluciones sugeridas que permiten una conversión inversa (si es posible) sin comprometer los datos del objeto.

<u><u><u><u>XML a JSON</u></u></u></u>

- **Atributo XML**: La sintaxis JSON no tiene atributos para los pares clave-valor. Para mantener la noción de atributos, una solución consiste en anteponerlos en el contenido JSON y colocarlos como miembros del objeto.

- **Namespace**: La sintaxis JSON no tiene espacios de nombres para las claves. Una solución sencilla es interpretarlos como nombres y atributos estándar.

- **Etiqueta vacía**: La sintaxis JSON no permite claves sin valor. Hay dos posibilidades: representarlas con el valor Null o un objeto vacío (en el caso de una etiqueta vacía con atributos, la única representación posible es el objeto pseudo-vacío, que solo contiene los atributos de la etiqueta).

- **Nodo de texto**: Los nodos de texto pueden representarse como un par clave-valor, pero si hay atributos, pueden transformarse en un objeto con el valor de la clave que representa el nodo. Para mantener una referencia al valor textual del nodo, una solución consiste en crear un par interno que contenga el texto del nodo.

- **Lista de nodos**: Las listas XML se transponen fácilmente a JSON, pero como no es posible duplicar las claves JSON, el orden de los nodos hijos puede perderse en algunos casos.

- **Secciones de escape**: En JSON no hay "secciones de escape", pero es posible almacenarlas como campos especiales en el contenido JSON de destino, de forma similar a los nodos de texto.

- **Comentarios**: En JSON, no hay comentarios. La solución consiste en no copiarlos en el contenido JSON de destino, ya que son opcionales.




<u><u><u><u>JSON a XML</u></u></u></u>

- **Tipos de valores**: Los documentos XML no tienen tipos de datos. Estos tipos se perderán; de lo contrario, los tipos originales deben almacenarse en el documento XML generado.

- **Lista vacía**: Técnicamente hablando, XML no tiene listas vacías. Considerarlas como etiquetas vacías implica un riesgo de conflicto con objetos vacíos y/o nulos.

- **Objeto vacío/nulo**: Se puede utilizar una etiqueta XML vacía para representar estos conceptos JSON, pero para permitir la conversión inversa, es necesario elegir una de las dos representaciones.



<a name="NOTE1_4"></a>


### Funciones WLanguage que utilizan el tipo JSONXMLConverter
<a name="funciones_wlanguage_que_utilizan_tipo_docparampagetitleshort_ELTPARAGRAPHE000214"></a>




|   |   |
| --- | --- |
| [JSONToXML](../WDLang5/1410087330.md) | Convierte una cadena JSON en XML. |
| [XMLToJSON](../WDLang5/1410087331.md) | Convierte una cadena XML en JSON. |






