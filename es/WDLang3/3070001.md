
## Socket: Creación de un servidor de sockets simplificado
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000154"></a>
WINDEV le ofrece la posibilidad de crear un servidor de sockets simplificado. **Este servidor establece la comunicación con un solo equipo cliente a la vez**. Este tipo de aplicación es muy útil cuando se debe establecer una comunicación entre dos aplicaciones remotas.

![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) **Observación**: WINDEV también le permite crear un servidor de socket más complejo (socket server estándar), utilizado para gestionar la conexión de varios ordenadores cliente simultáneamente.. Para obtener más información, consulte [Servidor de socket estándar](../WDLang3/3070003.md).

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## El servidor simplificado
<a name="servidor_simplificado_ELTTEXTE000178"></a>


### Etapa 1: Creación del socket
<a name="etapa_1_creacion_del_socket_ELTPARAGRAPHE000025"></a>

Para crear el socket, el servidor utiliza la función [SocketCreate](../WDLang3/3070011.md). Un socket está enlazado a un puerto específico. Para utilizar sockets fácilmente mediante programación en el servidor, especifique el nombre del socket.

La máquina cliente se conectará al socket para intercambiar datos. La conexión se establecerá realmente cuando las dos máquinas intercambien datos por primera vez (es decir, cuando el servidor lea la información por primera vez).

La conexión se establece la primera vez que la función [SocketRead](../WDLang3/3070014.md) lee la información en el servidor.
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Serveur_simple_1.gif)

<a name="NOTE2_2"></a>


### Etapa 2: Intercambio de datos
<a name="etapa_2_intercambio_datos_ELTPARAGRAPHE000044"></a>

Cuando dos máquinas utilizan el mismo socket, se establece un flujo de comunicación entre ellas. Estas dos máquinas pueden leer y escribir cadenas de caracteres en el socket.

Observación: Para evitar el bloqueo de las aplicaciones, la gestión de los mensajes entrantes suele ser realizada por una Thread específica (para más detalles, véase [Gestión de los hilos de discusión](../WDLang1/3077026.md)).

Para leer y escribir datos en el socket, la aplicación servidor de WINDEV debe utilizar las funciones [SocketRead](../WDLang3/3070014.md) y [SocketWrite](../WDLang3/3070002.md).
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Serveur_simple_2.gif)


**Atención**: Para iniciar una operación de lectura, debe haberse realizado previamente una operación de escritura. Por ejemplo:

1. La máquina cliente escribe en el socket: envía una solicitud al servidor.

2. El servidor lee los datos del socket en un hilo. Cuando se recibe un mensaje, el servidor lo procesa.

3. Si se requiere una respuesta al mensaje, el servidor identifica el ordenador cliente ([SocketClientInfo](../WDLang3/3070009.md)) y envía una respuesta.



<a name="NOTE2_3"></a>


### Etapa 3: Cierre del socket
<a name="etapa_3_cierre_del_socket_ELTPARAGRAPHE000075"></a>

Para finalizar la comunicación, el servidor puede cerrar el socket con la función [SocketClose](../WDLang3/3070015.md).
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Serveur_simple_3.gif)


Observación: la máquina cliente también puede cerrar el socket.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Modo de transmisión de la información
<a name="modo_transmision_informacion_ELTTEXTE000214"></a>
El modo de transmisión del mensaje define el modo utilizado para especificar la longitud del mensaje.

Se pueden utilizar varios métodos para definir la longitud del mensaje durante la comunicación entre sockets.

**Método 1: Modo WINDEV**: Por Default, el número de caracteres en el mensaje se especifica al principio del mensaje. Este modo de transmisión se recomienda cuando los sockets se utilizan para comunicarse entre dos aplicaciones WINDEV.

El mensaje tiene el siguiente formato: "11\\r\\nHelloWorld"

**Método 2: modo estándar**: El final del mensaje se señala con un carácter específico, definido de antemano. Este modo de transmisión se recomienda cuando los sockets se utilizan para comunicarse entre una aplicación WINDEV y otra aplicación.. En este caso, se debe incluir un carácter específico en el mensaje para indicar que el mensaje ha terminado.

El mensaje tiene el siguiente formato: "Hola Mundo&lt;EOF&gt;"

**Método 3: modo estándar con buffer:** Corresponde al modo estándar optimizado para los protocolos más utilizados en INTERNET.

[SocketChangeTransmissionMode](../WDLang3/3070005.md) permite modificar el modo de transmisión utilizado.


