
## Creando una Certificate SSL que puede ser usada con SocketCreateSSL
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000190"></a>
Para crear un servidor SSL con [SocketCreateSSL](../WDLang3/1000017041.md), debes utilizar un Certificate firmado que contenga una clave privada.

Se pueden implementar varias soluciones:

- **obtener un SSL Certificate** de una organización de certificación acreditada (thawte o verisign por ejemplo). Le recomendamos que Contact estas entidades para saber cómo proceder. Este Certificate puede ser usado con una aplicación desplegada por ejemplo.

- **Crear un Certificate** autofirmado. Esta Certificate puede ser usada para pruebas y/o para una aplicación desplegada. Para ello, debe utilizar la biblioteca de código abierto OpenSSL.




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Creando un Certificate autofirmado
<a name="creando_certificate_autofirmado_ELTTEXTE000214"></a>


### 1. Descarga e instalación de la biblioteca OpenSSL compilada para Windows
<a name="1_descarga_instalacion_biblioteca_openssl_compilada_para_windows_ELTPARAGRAPHE000026"></a>

Para más detalles, véase la página siguiente: [https://www.openssl.org/community/binaries.html](https://www.openssl.org/community/binaries.html)

En el resto de este Document, asumiremos que:

- OpenSSL se instala en el directorio &lt;DirInstallOpenSSL&gt;.

- se instala un motor de PERL en el equipo (los motores de PERL gratuitos se pueden descargar de INTERNET).



<a name="NOTE2_2"></a>


### 2. Configuración de OpenSSL
<a name="2_configuracion_openssl_ELTPARAGRAPHE000040"></a>

- Editar el archivo &lt;DirInstallOpenSSL&gt;/bin/CA.pl

- Reemplace la línea:
	
	```txt
	$CATOP="/.demoCA":
	```
por:
	
	```txt
	$CATOP="./<MYAUTHORITY>";
	```


- Editar el archivo OpenSSL.cfg

- Reemplace la línea:
	
	```txt
	[CA_default]
	dir = ./demoCA       # Where everything is kept
	```

	por: 
	
	```txt
	[CA_default]
	dir = ./<MYAUTHORITY>       # Where everything is kept
	```




<a name="NOTE2_3"></a>


### 3. Creación de una autoridad de certificación
<a name="3_creacion_una_autoridad_certificacion_ELTPARAGRAPHE000061"></a>

Una autoridad de Certificate es una entidad que tiene el poder de firmar Certificate s. El cliente debe instalar la autoridad de Certificate en todas las empresas "de confianza" para que los Certificate firmados por esta autoridad y no corrompidos sean aceptados.

- Abre un comando Line (ejecuta cmd).

- Posición en el directorio &lt;DirInstallOpenSSL&gt;/bin

- Entra en: 
	
	```txt
	CA.pl -newca
	```


- Pulse Intro para crear una nueva CA.

- Escriba la contraseña de la clave privada (dos veces). Esta contraseña es obligatoria. 

- Introduzca la información sobre la autoridad de certificación creada actualmente.

	- El Country

	- El estado o la región

	- La ciudad

	- La empresa

	- El servicio

	- El nombre de la autoridad de certificación

	- Una dirección de correo electrónico

	- Una contraseña que debe ser suministrada durante la solicitud de Certificate: como es un Certificate autofirmado, no se requiere contraseña. Validar sin introducir nada. 

	- El nombre de una empresa


A continuación, debe volver a introducir la contraseña que se introdujo previamente.

- Al final de la secuencia de comandos, se creó el subdirectorio &lt;MYAUTHORITY&gt; en el directorio ./bin de OpenSSL. Usted encontrará en este directorio:
	
	```txt
	./cacert.pem (the public part of the certificate that will be used to sign the other ones).<br>
	./private/cakey.pem (the private key).
	```


- copy el archivo "./cacert.pem" y renombrarlo a cacert.crt. Este archivo debe ser instalado en todos los ordenadores que utilizan sockets conectando con los servidores cuyo Certificate ha sido firmado por esta autoridad.



<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Certif_socketSSL.gif)

<a name="NOTE2_4"></a>


### 4. Creando un servidor Certificate que puede ser usado con la función SocketCreateSSL
<a name="4_creando_servidor_certificate_que_puede_ser_usado_con_funcion_socketcreatessl_ELTPARAGRAPHE000094"></a>

El servidor Certificate es un Certificate que contiene una clave privada y una clave pública, ambas firmadas por una autoridad Certificate reconocida (creada en el paso anterior).

- Crear una solicitud de Certificate. En el comando Line, escriba:
	
	```txt
	CA.pl -newreq
	```

	Pulse Intro y especifique la siguiente información:

	- Una contraseña para la Certificate (note: Esta contraseña tendrá que ser especificada para importar el Certificate en Windows).
			Esta contraseña es obligatoria, debe contener entre 4 y 500 caracteres.

	- El Country.

	- El estado o la región. 

	- La ciudad.

	- La empresa.

	- El servicio.

	- El nombre completo del servidor en el que se instalará el Certificate.

	- Una dirección de correo electrónico.

	- Una contraseña que debe ser suministrada durante la solicitud de Certificate: como es un Certificate autofirmado, no se requiere contraseña. Validar sin introducir nada. 

	- El nombre de una empresa. 


 Se crean dos archivos en el directorio &lt;DirInstallOpenSSL&gt;/bin: newreq.pem y newreq.key.

- Firme la solicitud con la autoridad creada en el comando Line:
	
	```txt
	CA.pl -sign
	```

	Se solicita la contraseña de la autoridad de certificación. Compruebe la firma y la grabación respondiendo "y" a las dos preguntas siguientes.
	Se crea el archivo &lt;DirInstallOpenSSL&gt;/bin/newcert.pem.

- Crear el Certificate completo:

	- En el comando Line, escriba:
			
		```txt
		CA.pl -pkcs12 "use name"
		```


	- Luego, responda a las preguntas especificando:

		- La contraseña de la autoridad de certificación. 

		- Una contraseña de exportación: esta contraseña será solicitada cuando se exporte el Certificate de la tienda Certificate. 


 El archivo newcert.p12 se crea en el directorio &lt;RepInstallOpenSSL&gt;/bin. Este archivo debe estar instalado en el servidor. Para ello: 

1. Copiar la Certificate a la el equipo. 

2. Haga doble clic en el archivo. El Certificate será visible en el gestor de Certificate (certmgr.msc). 
						Atención: El Certificate debe ser instalado con la cuenta de usuario de la aplicación o servicio que lo va a utilizar.




Durante la instalación, no marque la casilla "Activar el nivel de seguridad alto".: si esta opción está marcada, se solicitará la contraseña de la clave privada cada vez que se llame a [SocketCreate](../WDLang3/3070011.md).


