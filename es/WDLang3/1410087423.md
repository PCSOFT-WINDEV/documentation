
## PermissionRequest( Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Pide al usuario que conceda una aplicación Permission. Esta función permite mostrar un mensaje informativo al usuario antes de la solicitud de Permission.  
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
// Requests permission to access precise device location 
// before calling GPSGetPosition
Perm is Permission = PermissionList("android.permission.ACCESS_FINE_LOCATION")
// If the permission has not been granted yet
IF NOT Perm.Granted THEN
	// Information message
	// Shows the user a message to explain 
	// why the application requires this permission
	Info("xxxx requires this permission")
	// Requests the permission
	PermissionRequest(Perm, ProcRequestPermission)
	INTERNAL PROCEDURE ProcRequestPermission(Perm is Permission)
		IF Perm.Granted THEN
			MyPosition is geoPosition = GPSGetPosition()
			...
		END
	END
END
```

<a name="XSYNTAX"></a>

## Sintaxis
<a name="SYNTAX1"></a>

### Solicitar una Permission

`PermissionRequest(<Permission> , <WLanguage procedure>)`
---

**`<Permission>: (Cadena de caracteres o Permission Variable)`**

Nombre de la Permission a solicitar. Este parámetro puede corresponder a: 

- una cadena de caracteres con el siguiente formato: android.Permission.&lt;NAME&gt;. La lista de permisos del SDK de Android se encuentra en: [https://developer.android.com/reference/android/Manifest.Permission](https://developer.android.com/reference/android/Manifest.permission).

- una variable de tipo [Permission](../WDLang3/1410087419.md).

- una de las siguientes constantes: 
	


|   |   |
| --- | --- |
| *permBackgroundLocation* | Permission para acceder a la ubicación del dispositivo cuando la aplicación se ejecuta en el Background.<br><br>Atención: Esta Permission debe solicitarse individualmente y después de que se concedan las *permLocation* o *permFineLocation* Permission s. |
| *permCamera* | Permission para acceder a la(s) cámara(s) del dispositivo. |
| *permFineLocation* | Permission para acceder a la ubicación precisa del dispositivo. |
| *permLocation* | Permission para acceder a la localización del dispositivo. |
| *permManageExternalStorage* | Permission para gestionar el almacenamiento externo. Si se solicita esta Permission, una ventana del sistema solicitará al usuario que permita a la aplicación acceder a los archivos del almacenamiento externo sin restricciones. |
| *permReadContact* | Permission para leer los contactos. |
| *permReadPhoneState* | Permission para acceder a la información de Phone. |
| *permRecordAudio* | Permiso para los flujos de audio de Record. |
| *permSendSMS* | Permission para el envío de SMS. |
| *permWriteContact* | Permission para modificar los contactos. |
| *permWriteExternalStorage* | Permission para escribir en la memoria externa. |






**`<WLanguage procedure>: (Nombre de Procedure)`**

Nombre del procedimiento WLanguage ("callback") al que se llama cuando se aprueba la solicitud de Permission. Este procedimiento tiene el siguiente formato: 

```txt
PROCEDURE <Procedure name>(<Result>)
```
donde &lt;Resultado&gt; es un [Permission](../WDLang3/1410087419.md) Variable. El resultado de la solicitud Permission se asigna al **Concedido** Property.


<a name="SYNTAX2"></a>

### Solicitar varios permisos simultáneamente

`PermissionRequest(<Permissions> , <WLanguage procedure>)`
---

**`<Permissions>: (Array)`**

Permisos solicitados. Este parámetro puede corresponder a: 

- una array de cadenas con el siguiente formato: android.Permission.&lt;NAME&gt;

- una array de variables [Permission](../WDLang3/1410087419.md).




**`<WLanguage procedure>: (Nombre de Procedure)`**

Nombre del procedimiento WLanguage ("callback") al que se llama cuando se aprueba la solicitud de Permission. Este procedimiento tiene el siguiente formato: 

```txt
PROCEDURE <Procedure name>(<Result>)
```
donde &lt;Resultado&gt; es una array de variables [Permission](../WDLang3/1410087419.md). Para cada Permission, el resultado de la petición Permission se asigna al **Concedido** Property.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


- El permiso *permLocationBackground* o "android.permission.ACCESS_BACKGROUND_LOCATION" debe solicitarse individualmente y después de conceder los permisos que corresponden a las constantes *permLocation* o *permFineLocation*.

- La Permission debe haber sido declarada en el manifiesto de solicitud. De lo contrario, se producirá un error fatal.

- No es necesario llamar a **PermissionRequest** para los permisos "Normal" (a diferencia de los permisos "peligrosos") porque se conceden automáticamente cuando se instala la aplicación, si se han declarado en el manifiesto de la aplicación.

- En el caso de los Permission s "peligrosos" (acceso a la ubicación del dispositivo, cámara, micrófono, etc.), el Android framework solicita automáticamente el Permission cuando se utiliza una función relevante. Sin embargo, **PermissionRequest** puede utilizarse cuando, por ejemplo, se desea mostrar un mensaje informativo al usuario antes de solicitar un Permission. 

- Si la Permission ya ha sido concedida, no se mostrará ninguna ventana.

- ATENCIÓN: Dado que **PermissionRequest** puede mostrar una ventana para que el usuario apruebe la solicitud Permission, esta función debe ser llamada desde la aplicación principal thread.

- Para get la lista de permisos declarados por la aplicación, utilice [PermissionList](../WDLang3/1410087429.md).




<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Código neutro
## Componente:
wd280android.aar
