
## NFCWriteTag( Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Inicia la escritura de datos en una etiqueta NFC.

**Observación**: Las funciones NFC no se pueden utilizar en el simulador ni en el emulador.


<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
// Write URL to NFC tag (blocking mode)
tag is nfcTag
url is nfcData
url.Type = nfcURI
url.Content = "http://www.pcsoft.com"
Add(tag.Data, url)
NFCWriteTag(tag)
IF ErrorOccurred THEN
	Error("Unable to write NFC tag.", ErrorInfo())
END
```
<a name="Example2"></a>

```wl
// Write URL to NFC tag (non-blocking mode)
tag is nfcTag
url is nfcData
url.Type = nfcURI
url.Content = "http://www.pcsoft.com"
Add(tag.Data, url)
IF NOT NFCWriteTag(tag, WriteNFCTag) THEN
	Error("Unable to write NFC tag.", ErrorInfo())
END


INTERNAL PROCEDURE WriteNFCTag(nNFCResult is int)
	IF nNFCresult <> nfcOK THEN
		Trace("A problem occurred")
	END
END
```

<a name="XSYNTAX"></a>

## Sintaxis
<a name="SYNTAX1"></a>

### Escribir una etiqueta en modo de bloqueo

`<Result> = NFCWriteTag(<Tag>)`
---

**`<Result>: (Integro)`**



- 1 si la escritura fue exitosa,

- en caso contrario, una de las siguientes constantes: 
	


|   |   |
| --- | --- |
| *nfcErrDetection* | La etiqueta NFC ha salido del control de detección durante la escritura de Process. |
| *nfcErrDisabled* | NFC no está activado en el dispositivo. |
| *nfcErrEmulator* | Función llamada desde el emulador. |
| *nfcErrFormat* | El formato de los datos a escribir no es válido. |
| *nfcErrMaxSize* | El tamaño de los datos a escribir excede el tamaño máximo de los datos que pueden almacenarse en la etiqueta NFC. |
| *nfcErrNDEF* | La etiqueta NFC no puede formatearse con el formato NDEF (NFC Data Exchange Format). |
| *nfcErrProtection* | La etiqueta NFC no puede protegerse en modo escritura (modo no soportado por la etiqueta). |
| *nfcErrReadOnly* | La etiqueta NFC está protegida en modo escritura. |
| *nfcErrUnknown* | Error desconocido. |


	Si se produce un error, la variable [ErrorOccurred](../WDLang1/3087001.md) se pone en <u><u><u><u>True</u></u></u></u>. Para obtener más información sobre el error, utilice la función [ErrorInfo](../WDLang1/3013008.md).




**`<Tag>: (nfcTag Variable)`**

Nombre de la [nfcTag](../WDLang3/1000020411.md) Variable que describe los datos a escribir.


<a name="SYNTAX2"></a>

### Escribir una etiqueta en modo no bloqueante

`<Result> = NFCWriteTag(<Tag> , <WLanguage procedure>)`
---

**`<Result>: (booleano)`**



- <u><u><u><u>True</u></u></u></u> si se inició la escritura, 

- <u><u><u><u>False</u></u></u></u> en caso contrario. 




**`<Tag>: (nfcTag Variable)`**

Nombre de la [nfcTag](../WDLang3/1000020411.md) Variable que describe los datos a escribir.

**`<WLanguage procedure>: (Nombre de Procedure)`**

Nombre del lenguaje WL Procedure ("callback") llamado al escribir datos en la etiqueta. Esta Procedure se utiliza para determinar si los datos se pueden escribir en la etiqueta o no. Este procedimiento tiene el siguiente formato : 


```txt
PROCEDURE <Procedure name>(<Result>)
```
donde &lt;Resultado&gt; es el resultado de la operación de escritura: 

- 1 si los datos se han escrito con éxito en la etiqueta,

- en caso contrario, una de las siguientes constantes: 
	


|   |   |
| --- | --- |
| *nfcErrCancellation* | La acción fue cancelada por el usuario. |
| *nfcErrDetection* | La etiqueta NFC ha salido del control de detección durante la escritura de Process. |
| *nfcErrDisabled* | NFC no está activado en el dispositivo. |
| *nfcErrEmulator* | Función llamada desde el emulador. |
| *nfcErrFormat* | El formato de los datos a escribir no es válido. |
| *nfcErrMaxSize* | El tamaño de los datos a escribir excede el tamaño máximo de los datos que pueden almacenarse en la etiqueta NFC. |
| *nfcErrNDEF* | La etiqueta NFC no puede formatearse con el formato NDEF (NFC Data Exchange Format). |
| *nfcErrProtection* | La etiqueta NFC no puede protegerse en modo escritura (modo no soportado por la etiqueta). |
| *nfcErrReadOnly* | La etiqueta NFC está protegida en modo escritura. |
| *nfcErrUnavailable* | El sensor NFC no existe o no está disponible. |
| *nfcErrUnknown* | Error desconocido. |
| *nfcOK* | La operación se ha completado. |








<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Modo de funcionamiento
<a name="modo_funcionamiento_ELTPARAGRAPHE000186"></a>

La llamada a **NFCWriteTag** abre automáticamente una ventana para pedir a los usuarios que acerquen sus dispositivos a la etiqueta NFC en la que quieren escribir. 

Esta ventana se cerrará automáticamente: 

- al final de la operación de escritura,

- si el usuario cancela la operación pulsando la tecla Atrás del dispositivo. 




Observación: Para personalizar el mensaje que se muestra en la ventana, utilice la función [NextTitle](../WDLang1/3038043.md) antes de llamar a la función **NFCWriteTag**. 

Una vibración se activa cuando el dispositivo detecta la etiqueta NFC. El dispositivo debe estar ubicado cerca de la etiqueta NFC durante toda la visualización de la ventana de captura, de lo contrario se interrumpirá la escritura Process.
<a name="NOTE0_2"></a>


### Permisos necesarios
<a name="permisos_necesarios_ELTPARAGRAPHE000209"></a>

La llamada a esta función modifica los permisos requeridos por la aplicación. 

Permisos necesarios:  

- NFC: Permite a las aplicaciones realizar operaciones de entrada/salida a través de la tecnología NFC.

- VIBRATOS: Se utiliza para acceder a la función del sensor.



<a name="NOTE0_5"></a>





<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Lógica de negocio
## Componente:
wd280android.aar
