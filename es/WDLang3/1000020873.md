


## inAppPurchaseProduct( Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
envíos: 

- una solicitud de compra de un producto "In-App" associated con la solicitud.

- una solicitud de compra de una suscripción.




Observación: La solicitud de compra es asincrónica. Se ejecuta una "Callback" Procedure cuando se recibe la respuesta a la solicitud de compra. 
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
MyProduct is inAppProduct = arrProduct[nIndex]
inAppPurchaseProduct(MyProduct, ValidateProductPurchase)
```

```wl
PROCEDURE ValidateProductPurchase(bSuccess is boolean, Product is inAppProduct, Receipt)

IF NOT bSuccess THEN
	ToastDisplay(ErrorInfo())
	RETURN
ELSE
	// Android case
	IF InAndroidMode() THEN
		// Consume the product (optional)
		inAppConsumeProduct(Product, Receipt, ConsumeProduct)
	END
	// iOS case
	IF IniOSMode() THEN
		// Activate the product in the application
		EnableProduct(Product)
		// Save the purchase in the application preferences
		SaveParameter(Product..Identifier, 1)
	END
END
```

<a name="XSYNTAX"></a>

## Sintaxis
<a name="SYNTAX1"></a>
<a name="SYNTAX2"></a>

<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Características del procedimiento WLanguage
<a name="caracteristicas_del_procedimiento_wlanguage_ELTPARAGRAPHE000110"></a>

El &lt;Procedimiento WLanguage&gt; debe tener el siguiente formato:

```txt
PROCEDURE <Procedure name>(<Success> is boolean, <Product> is inAppProduct, 
		<Receipt>, <Quantity> is int)
```


donde: 

- &lt;El éxito es booleano: 

	- <u><u><u><u>True STRIMEULB</u></u></u></u> si la compra ha sido validada, 

	- <u><u><u><u>False</u></u></u></u> en caso contrario. Para get más detalles sobre el error, utilice [ErrorInfo](../WDLang1/3013008.md) antes de cualquier otra llamada a una función WLanguage (esto reiniciaría el error). [ErrorInfo](../WDLang1/3013008.md) asociada a la constante *errCode* devuelve uno de los siguientes códigos de error: 
			


|   |   |
| --- | --- |
| *inAppCancellation* | Compra cancelada por el usuario.<br><br> |
| *inAppInvalidResponse* | Respuesta no válida. |
| *inAppSignatureError* | Error en la comprobación de la firma de datos recibida para la validación de la compra (problema de seguridad). |
| *inAppUnknownError* | Error desconocido. |

- &lt;Producto&gt; es un [inAppProduct](../WDLang3/1000020868.md) Variable correspondiente al producto o suscripción que se compró.

- &lt;Receipt&gt; &lt;Receipt : 




- &lt;Cantidad&gt; es un número entero correspondiente a la cantidad de productos comprados.. 






<a name="NOTE0_2"></a>


### Casos especiales
<a name="casos_especiales_ELTPARAGRAPHE000192"></a>

- Si la compra es válida, la aplicación debe proporcionar el contenido de la compra al usuario.

- Si la función **inAppPurchaseProduct** se utiliza para adquirir una suscripción que ya está activa para el usuario, esta suscripción se extiende automáticamente por el período correspondiente.



<a name="NOTE0_3"></a>

<a name="XComponent"></a>

## Componente:
wd280android.aar
