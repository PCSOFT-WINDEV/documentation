


## Gestión de MQTTT
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000134"></a>
MQTTT es un protocolo de mensajería "publish-subscribe" basado en el protocolo TCP/IP.. A partir de la versión 3.1.1, MQTT es un estándar OASIS. 

En MQTTT se encuentran dos elementos : 

- el cliente, quién publica los mensajes y quién puede suscribirse a ellos.  

- el corredor ("servidor") que recibe las publicaciones de los clientes, las procesa y las envía a los clientes suscritos. 




Varios brokers MQTT están disponibles (ActiveMQ, JoramMQ, OW2 JORAM, Mosquitto, RabbitMQ) así como servidores iOT compatibles con MQTT (Amazon iOT, Azure iOT, etc.).

WINDEV, WEBDEV y WINDEV Mobile le permiten administrar un cliente MQTT: tiene la posibilidad de editar publicaciones y suscribirse a ellas.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Implementación
<a name="implementacion_ELTTEXTE000158"></a>


### ¿Cómo proceder?
<a name="¿como_proceder_ELTPARAGRAPHE000039"></a>

Implementar una gestión de cliente MQTT: 

1. Definir un [mqttSession](../WDLang3/1000023023.md) Variable correspondiente a la información necesaria para conectarse al broker MQTT.

2. Conectar con el corredor ([MQTTConnect](../WDLang3/1000023021.md)).  

3. Es posible: 

	- Publicar un mensaje ([MQTTPublish](../WDLang3/1000023060.md)). En este caso, debe definir: 

		- el tema,

		- la calidad del servicio (véase más adelante),

		- el mensaje (no superior a 256 MB),

		- si el mensaje debe ser almacenado (o no) en el servidor. 




- Suscribirse a un mensaje ([MQTTSubscribe](../WDLang3/1000023073.md)). 

- Cancelar la suscripción ([MQTTUnsubscribe](../WDLang3/1000023074.md), [MQTTUnsubscribeAll](../WDLang3/1000023080.md))

4. Desconexión ([MQTTDisconnect](../WDLang3/1000023022.md)). 





### Calidad de servicio (QoS)
<a name="calidad_servicio_qos_ELTPARAGRAPHE000081"></a>

Al publicar un mensaje, el cliente define la calidad solicitada: 

- Mensaje del nivel de calidad de servicio 0 "A lo sumo una vez": El mensaje será entregado una vez como máximo. El mensaje no se almacena. Se envía sin garantía de recepción. El MQTTT (broker) no informa al remitente de que el mensaje ha sido recibido.. El mensaje puede perderse si el cliente se desconecta o si el servidor se detiene.

- Mensaje del nivel de calidad de servicio 1 "Al menos una vez":  El mensaje se entregará al menos una vez. El cliente transmitirá el mensaje varias veces si es necesario hasta que el servidor (broker) confirme que el mensaje fue transmitido en la red.

- Mensaje de QoS nivel 2 "Exactamente una vez":  El mensaje será necesariamente guardado por el emisor. Se transmitirá mientras el receptor no confirme su envío a la red.. El emisor está utilizando un sofisticado reconocimiento con el servidor (broker) para evitar la duplicación de mensajes.. Este modo es más lento pero es más secure.





