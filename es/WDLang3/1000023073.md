


## MQTTTSubscribe (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Se utiliza para suscribirse a un MQTT Notification. 

Observación: Esta suscripción puede ser detenida por [MQTTUnsubscribe](../WDLang3/1000023074.md) y [MQTTUnsubscribeAll](../WDLang3/1000023080.md). 


<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
gMqttSession is mqttSession
...
lbResult is boolean
lbResult = MQTTSubscribe(gMqttSession, "sensors/sensor1/temperature1", mqttQualityAtLeastOnce, ...
	Proc_MQTTSubscribe)

// The procedure specified in MQTTSubscribe must be a project global procedure 
PROCEDURE Proc_MQTTSubscribe(pMqttSession is mqttSession, ...
	Topic is string, abuffer is Buffer)
		Trace("Subscription")
END
```

<a name="XSYNTAX"></a>

## Sintaxis
<a name="SYNTAX1"></a>

`<Result> = MQTTSubscribe(<MQTT session> , <Topic> , <Quality> , <Procedure>)`
---

**`<Result>: (booleano)`**



- <u><u><u><u>True</u></u></u></u> si se realizó la suscripción,

- <u><u><u><u>False</u></u></u></u> en caso contrario. 




**`<MQTT session>: (mqttSession variable)`**

Nombre de la [mqttSession](../WDLang3/1000023023.md) Variable correspondiente a la sesión MQTT que se va a utilizar. 

**`<Topic>: (Cadena de caracteres)`**

Tema para el que se solicita la suscripción. 

**`<Quality>: (Constante de tipo Integer)`**

Calidad requerida:


|   |   |
| --- | --- |
| *mqttQualityAtLeastOnce* | El mensaje se entregará al menos una vez. El cliente transmitirá el mensaje varias veces si es necesario hasta que el servidor (broker) confirme que el mensaje fue transmitido en la red. |
| *mqttQualityAtMostOnce* | El mensaje será entregado una vez como máximo. El mensaje no se almacena. Se envía sin garantía de recepción. El MQTTT (broker) no informa al remitente de que el mensaje ha sido recibido.. El mensaje puede perderse si el cliente se desconecta o si el servidor se detiene.. |
| *mqttQualityExactlyOnce* | El mensaje será necesariamente guardado por el emisor. Se transmitirá mientras el receptor no confirme su envío a la red.. El emisor está utilizando un sofisticado reconocimiento con el servidor (broker) para evitar la duplicación de mensajes.. Este modo es más lento pero es más secure. |



**`<Procedure>: (Nombre de la lengua Procedure)`**

Nombre del procedimiento WLanguage ("callback") que se ejecuta cada vez que se recibe una nueva Notification. 
**Debe ser un Procedure global del proyecto**: no se permite el uso de un Procedure interno. Este procedimiento tiene el siguiente formato:

```txt
PROCEDURE <Procedure name>(<Connection> is mqttSession, 
<Topic> is string, <Message> is Buffer)
```
donde: 

- &lt;Conexión&gt; corresponde a una [mqttSession](../WDLang3/1000023023.md) Variable que contiene las características de la sesión MQTT. 

- &lt;Tema&gt; corresponde al tema del mensaje. 

- &lt;Mensaje&gt; corresponde al contenido del mensaje. 






<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Lógica de negocio
## Componente:
wd280com.dll
