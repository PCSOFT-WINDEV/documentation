


## Tema oscuro en dispositivos móviles
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000188"></a>
Las últimas versiones de los sistemas operativos móviles permiten cambiar las aplicaciones a un tema oscuro para reducir el consumo de la batería o para facilitar el uso del dispositivo en un entorno con poca luz

WINDEV Mobile permite utilizar el tema oscuro en sus aplicaciones móviles. Es posible: 

- adaptarse automáticamente a la configuración del tema del dispositivo móvil. El tema oscuro se utilizará automáticamente.  

- forzar el tema oscuro o claro mediante programación. 




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Implementación
<a name="implementacion_ELTTEXTE000212"></a>


### Gestión del tema oscuro
<a name="gestion_del_tema_oscuro_ELTPARAGRAPHE000023"></a>

**Para gestionar el tema oscuro en una de sus aplicaciones móviles**: 

1. Abra la ventana de descripción del proyecto: en la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "Descripción".

2. En la pestaña "Estilo", seleccione la opción "Permitir cambiar al tema oscuro (automáticamente o manualmente con la función ChangeTheme)". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Theme_sombre%20-%20HC%20N%B0001.gif&type=thumb)


3. Valide. 


Atención: Después de usar esta opción, se debe probar la aplicación para verificar si funciona correctamente y si no hay errores de UI. 

**Observaciones**: 

- El proyecto está asociado a una sola plantilla. Esta plantilla corresponde al tema claro. Las ventanas siempre se editan en tema claro. La plantilla utilizada para el tema oscuro es **BlackStellar**. 

- Consejo: Si es posible, utilice los estilos de las plantillas. Si los colores o imágenes se definen mediante programación, utilice el evento "Aplicación del tema claro/oscuro" para usar un color específico según el tema definido. 





### Probar una aplicación que utiliza el tema oscuro en el simulador
<a name="probar_una_aplicacion_que_utiliza_tema_oscuro_simulador_ELTPARAGRAPHE000056"></a>

Cuando se activa el tema oscuro en un proyecto WINDEV Mobile, el simulador propone una opción adicional (![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Theme_sombre%20-%20HC%20N%B0002%201.gif)) que permite cambiar la aplicación de un tema a otro. 

Ejemplo: 

1. Inicie la prueba de la aplicación: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Theme_sombre%20-%20HC%20N%B0002.gif)

	 El tema claro se utiliza de forma predeterminada. 

2. Haga clic en el ícono para cambiar al modo oscuro: ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Theme_sombre%20-%20HC%20N%B0002%201.gif). 

3. La ventana se muestra con el tema oscuro durante la prueba. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Theme_sombre%20-%20HC%20N%B0003.gif)






### Caso especial: No utilizar el tema oscuro en una ventana
<a name="caso_especial_utilizar_tema_oscuro_una_ventana_ELTPARAGRAPHE000075"></a>

Para no aplicar el tema oscuro en una de las ventanas de la aplicación: 

1. Abra la descripción de la ventana (opción "Descripción" del menú contextual). 

2. En la pestaña "Estilo", seleccione la opción "No aplicar el tema oscuro". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Theme_sombre%20-%20HC%20N%B0004.gif&type=thumb)


3. Valide la ventana de descripción.  




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Programación en WLanguage
<a name="programacion_wlanguage_ELTTEXTE000248"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000093"></a>

Después de habilitar la gestión del modo oscuro, WINDEV Mobile propone: 

- un nuevo evento "Aplicación del tema claro/oscuro" para personalizar el cambio al modo oscuro. 

- Funciones WLanguage para conocer, modificar y obtener el tema utilizado. 





### Eventos específicos
<a name="eventos_especificos_ELTPARAGRAPHE000101"></a>

Al activar la gestión del tema oscuro, se habilita el evento "Aplicación del tema claro/oscuro" para el proyecto, las ventanas y las ventanas internas. 

**El evento "Aplicación del tema claro/oscuro" del proyecto** se ejecuta en los siguientes casos: 

- Al iniciar la aplicación (después del evento "Inicialización" del proyecto).

- Al cambiar el tema en el código con la función [ChangeTheme](../WDLang3/1000025266.md) solo si se especificó la constante *withCodeExecution*.

- Cuando el sistema cambia automáticamente el tema: modificación de los ajustes del sistema, cambio de hora día/noche, activación/desactivación del ahorrador de batería, etc.




**El evento "Aplicación del tema claro/oscuro" de las ventanas** es un evento opcional. Este evento se ejecuta en los siguientes casos: 

- Al abrir la ventana, después del evento "Declaraciones globales" y antes de los eventos de inicialización de los controles de la ventana. 

- Si la ventana está abierta al cambiar el tema con la función [ChangeTheme](../WDLang3/1000025266.md), solo si se especificó la constante *withCodeExecution*.

- Si la ventana está abierta cuando el sistema cambia automáticamente el tema: modificación de los ajustes del sistema, cambio de hora día/noche, activación/desactivación del ahorrador de batería, etc.




**El evento "Aplicación del tema claro/oscuro" de las ventanas internas** es un evento opcional. Este evento se ejecuta en los siguientes casos: 

- Al cargar la ventana, después del evento "Declaraciones globales" y antes de los eventos de inicialización de los controles de la ventana interna. 

- Si la ventana interna ya ha sido cargada al cambiar el tema mediante programación con la función [ChangeTheme](../WDLang3/1000025266.md), solo si se especificó la constante *withCodeExecution*.

- Si la ventana interna ya ha sido cargada cuando el sistema cambia automáticamente el tema: modificación de los ajustes del sistema, cambio de hora día/noche, activación/desactivación del ahorrador de batería, etc.




Observación: Estos eventos no se ejecutan: 

- si la aplicación no soporta el tema oscuro. 

- si la aplicación ignora el tema oscuro. 





### Funciones WLanguage
<a name="funciones_wlanguage_ELTPARAGRAPHE000138"></a>Las siguientes funciones WLanguage permiten gestionar el tema oscuro: 



|   |   |
| --- | --- |
| [ChangeTheme](../WDLang3/1000025266.md) | Permite cambiar mediante programación el tema (oscuro o claro) utilizado por la aplicación móvil. |
| [GetTheme](../WDLang3/1000025320.md) | Permite conocer el tema actual de una aplicación móvil. |
| [SysTheme](../WDLang1/1000019646.md) | Devuelve el tema actual utilizado en el dispositivo móvil. |






