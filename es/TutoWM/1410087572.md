
## Lección 4.2. Desarrollar una aplicación


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE001157"></a>


- Crear una ventana con un Looper. 

- Controles específicos: control Looper, Zona multilínea, Mapa, etc. 

- Manipular una base de datos.

- Funcionalidades específicas del dispositivo utilizado (GPS, cámara, etc.). 





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 30 min |



| [Lección anterior](../TutoWM/1410087571.md) | [Tabla de contenido](../TutoWM/1410087586.md) | [Siguiente lección](../TutoWM/1410087573.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Análisis del proyecto
<a name="analisis_del_proyecto_ELTTEXTE001204"></a>
Veamos nuestro proyecto inicial. 



- Si es necesario, abra el proyecto "WM Product Management": 

	1. Vaya a la página de inicio de WINDEV Mobile (Ctrl + &lt;).  

	2. En la página de inicio, haga clic en "Tutorial", luego en "Part 4 - Development of an Android/iOS application", haga doble clic en "Android/iOS product management - Exercise".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=exemple-WM.png) | Corregido | Hay un proyecto completado disponible. Este proyecto contiene las ventanas que crearemos en esta lección. Para abrir el proyecto completado, vaya a la página de inicio y haga clic en "Tutorial", luego en "Part 4 - Development of an Android/iOS application", haga doble clic en "Android/iOS product management - Answers". |











Este proyecto no contiene ninguna ventana. Solo contiene el análisis que describe los archivos de datos HFSQL Classic que se van a utilizar. Los archivos de datos correspondientes contienen los datos necesarios para realizar las diferentes pruebas.



Antes de continuar, **recordemos rápidamente los términos** utilizados en el análisis: 

- **Archivo de datos**: El análisis permite describir la estructura de los archivos de la base de datos. Un "Archivo de datos" corresponde a una "tabla" en algunas bases de datos.
	En WINDEV Mobile, el término "***Tabla***" representa un objeto gráfico que permite mostrar el contenido de un archivo de datos en una tabla e introducir filas. Un tabla permite introducir los detalles de un pedido, por ejemplo.

- **Registro**: Un registro también es conocido como fila. Un registro de un archivo de datos corresponde a todos los campos definidos para el archivo de datos.

- **Campo**: En el análisis, un campo representa una sección de un archivo de datos. Los campos de un archivo de datos permiten definir la estructura de un registro.

- **Clave/Índice**: En WINDEV Mobile y HFSQL, el concepto de índice está relacionado con el concepto de clave. La noción de "clave" hace parte de las características de un campo. Las claves permiten acceder a los datos mucho más rápido y simplificar la navegación por los archivos de datos. En WINDEV Mobile, si un archivo de datos HFSQL contiene varios campos clave, se creará un solo archivo de índice en tiempo de ejecución.






- Para ver el análisis asociado al proyecto:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Analyse_WM_GAF.jpg) en los botones de acceso rápido del menú de WINDEV Mobile.

	2. El editor de análisis se abre.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Analyse%20-%20HC%20N%B0001.jpg)


	3. Este análisis contiene 3 archivos de datos:

	- Un archivo de datos "Product", que contiene la descripción del producto: nombre, precio, cantidad, etc.

	- Un archivo de datos "Characteristic", que contiene las diferentes características del producto. Por ejemplo, si el producto es una camiseta, las características serán la talla, el color, etc. El archivo de datos "Characteristic" está relacionado con al archivo de datos "Product".

	- Un archivo de datos "Store", que contiene las coordenadas GPS de cada tienda.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mostrar la lista de productos
<a name="mostrar_lista_productos_ELTTEXTE001246"></a>
Vamos a crear una ventana para mostrar una lista de los diferentes productos. Estos productos se mostrarán en un control "Looper".

Vamos a crear la ventana mediante el asistente de creación de ventanas. |   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El asistente de creación de ventanas contiene varias ventanas predefinidas. Estas ventanas tienen una interfaz moderna para sus aplicaciones.<br><br>La mayoría de estas ventanas se pueden generar directamente a partir de los datos, agregando el código WLanguage necesario para que funcionen correctamente. Se pueden utilizar inmediatamente. |






### Crear una ventana
<a name="crear_una_ventana_ELTPARAGRAPHE000083"></a>

- Para crear la ventana en la que se mostrará la lista de productos:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Nv_WM_GAF.jpg) en los botones de acceso rápido. La ventana de creación de nuevos elementos se abre: haga clic en "Ventana", y luego en "Ventana".

	2. En el asistente, seleccione la pestaña "Estándar". En la sección "Teléfono", seleccione "Looper" y valide.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Si está utilizando una configuración de iOS, la ventana para crear una nueva ventana contiene opciones adicionales, específicas de iOS. <br><br>Se puede crear una ventana de tipo "Looper" tanto para iOS como para Android.<br><br>Recordatorio: Las imágenes de la parte 4 de este tutorial utilizan una configuración de Android. Puede que se observen ligeras diferencias al utilizar una configuración de iOS. |





	3. El asistente de creación de ventanas se abre.

	4. Como nuestro proyecto contiene varias plataformas (iOS y Android), el asistente le pide que seleccione la plataforma que se utilizará para crear la ventana. Le recomendamos que seleccione la plataforma con la menor resolución (en este caso, "iPhone Genérico"). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Liste_produit_RAD%20-%20HC%20N%B0002.jpg&type=thumb)
Pase a la etapa siguiente del asistente.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Si su proyecto contiene ambas plataformas (Android e iOS), al elegir "iPhone genérico" se generará automáticamente la ventana para esta plataforma. La plataforma "iOS" se convierte automáticamente en la plataforma actual del proyecto. |





	5. El asistente le pide que elija la fuente de datos de la ventana. En nuestro caso, vamos a elegir el archivo de datos "Product":

		- La opción "Archivos de datos" está seleccionada de forma predeterminada.

		- Seleccione el archivo de datos Product.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Liste_produit_RAD%20-%20HC%20N%B0004.jpg&type=thumb)







- Si su proyecto utiliza ambas configuraciones (Android e iOS), puede utilizar la misma ventana para la configuración de Android: 

	1. Despliegue la opción "Configuraciones (Aplicación iOS)" en la parte superior del panel "Explorador de proyectos". 

	2. Haga doble clic en el nombre de la configuración "Aplicación Android". 

	3. La configuración de Android se selecciona automáticamente y la ventana que creamos aparece en esta configuración.  









- Vamos a realizar una primera prueba en el simulador Android para ver el resultado. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Fen_WM_GAF.jpg) en los botones de acceso rápido (o pulse F9).<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Liste_produit_RAD_Go%20-%20HC%20N%B0001.jpg&type=thumb)





- Cierre el simulador para volver al editor de ventanas.


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Cuando un proyecto está asociado a varias plataformas, la ventana actual se prueba con la plataforma actual. El emulador móvil utilizado para el simulador también se adapta a la plataforma actual.<br><br>Para ejecutar la prueba en otra plataforma (iOS, por ejemplo), haga doble clic en el nombre de la plataforma en el panel "Explorador de proyectos". <br><br>Observación: En esta lección, las imágenes de las pruebas corresponden a un emulador de Android. |





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Crear una ventana Ficha de producto
<a name="crear_una_ventana_ficha_producto_ELTTEXTE001366"></a>
Vamos a crear una nueva ventana para mostrar la ficha del producto. Esta ventana se abrirá desde la lista de productos y mostrará los detalles del producto seleccionado.


### Crear una ventana
<a name="crear_una_ventana_ELTPARAGRAPHE000187"></a>

- Para crear la ventana Ficha de producto:

	1. Cree una nueva ventana en blanco.

		- Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Nv_WM_GAF.jpg) en los botones de acceso rápido.

		- La ventana de creación de nuevos elementos se abre: haga clic en "Ventana", y luego en "Ventana".

		- En el asistente, seleccione la pestaña "Estándar", elija "En blanco" y valide.




2. La ventana para guardar el elemento se abre. Introduzca el título de la ventana: "Product form". El nombre se define automáticamente: "WIN_Product_form". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Fiche%20produit%20Enregistrement%20-%20HC%20N%B0001.jpg)
Valide. 

3. La ventana se agrega al proyecto, para todas las configuraciones. 


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | **Cuando se definen varias plataformas en el proyecto**, de forma predeterminada la ventana asocia el nuevo elemento a todas las plataformas.<br><br>Para asociar el elemento a una sola plataforma, simplemente despliegue "Configuraciones" en la ventana para guardar el nuevo elemento y elija la plataforma deseada:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Fiche%20produit%20Enregistrement%20-%20HC%20N%B0002.jpg)<br> |






### Crear controles
<a name="crear_controles_ELTPARAGRAPHE000210"></a>

- Para crear los controles Campo de entrada en los que se mostrará la información sobre el producto:

	1. Abra el panel "Análisis" si es necesario: en la pestaña "Inicio", en el grupo "Entorno", despliegue "Paneles", seleccione "Paneles" y, a continuación, haga clic en "Análisis". Los diferentes archivos de datos definidos en el análisis de "WM Product Management" aparecen en el panel.

	2. Seleccione los campos del archivo de datos "Product" que se muestran en el panel (excepto "ProductID").

	3. Arrastre los campos y suéltelos en la ventana que acaba de crear.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Fiche%20produit%202%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Cambie el tamaño de los controles ("Caption", "Descr.", "Bar cod." y "Reorder.") para que se muestren en la ventana.

5. Reorganice los controles en la ventana. Siga el siguiente orden: "Photo", "Caption", "Descr.", "Price", "Ref", "Bar cod.", "Quantity", "Reorder.".<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Fiche%20produit%20-%20HC%20N%B0001.jpg&type=thumb)




- Pruebe la ventana "WIN_Product_form" (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Fen_WM_GAF.jpg) en los botones de acceso rápido). 

	1. La ventana se muestra con los controles vacíos.

	2. Cierre el simulador.







- Para ver los datos del producto:

	1. Abra los eventos WLanguage de la ventana:

		- Haga clic derecho al lado de la ventana.

		- Seleccione "Código" en el menú contextual que aparece.

		- El editor de código se abre.




2. Introduzca el siguiente código WLanguage en el evento "Fin de inicialización de WIN_Product_form":
			
		```wl
		Product.ToWindow()
		```

			La función [&lt;Archivo de datos&gt;.ToWindow](../WDLang4/1000021397.md) obtiene los datos del registro actual en el archivo de datos y los muestra en los controles de la ventana. En este caso, el registro actual es el registro seleccionado en el control Looper de la ventana "WIN_List_of_products". El control Looper está relacionado con el archivo de datos Product. 

3. Cierre la ventana de código.

4. Guarde la ventana.





### Abrir la ficha de producto desde la lista de productos
<a name="abrir_ficha_producto_desde_lista_productos_ELTPARAGRAPHE000267"></a>

Ahora, veamos cómo abrir la ficha del producto seleccionado en la lista de productos.



- Realice las siguientes operaciones:

	1. Seleccione la ventana "List of products": haga clic en "WIN_List_of_products" en las pestañas de documentos abiertos (debajo de la cinta de opciones de WINDEV Mobile):  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Fiche%20produit%20-%20HC%20N%B0001%201.jpg)


	2. Seleccione el control Looper. 
			Atención: asegúrese de seleccionar el control Looper y no uno de sus controles. 

3. Haga clic derecho para abrir el menú contextual del control Looper y seleccione "Código".

4. En el editor de código, escriba el siguiente código WLanguage en el evento "Selección de una fila de LOOP_Product":
			
		```wl
		WIN_Product_form.OpenMobileWindow()
		```

			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La entrada predictiva lo guiará para escribir el código: una lista desplegable con los nombres de los diferentes elementos del proyecto aparece al escribir el nombre de la ventana. Seleccione el nombre de la ventana deseada. Así mismo, las diferentes funciones y propiedades que se pueden utilizar en la ventana aparecen cuando se inserta un '.' (punto) después del nombre de la ventana.  <br><br>Observación: Si el nombre de la ventana no aparece en la lista, significa que esta aún no se ha guardado. |





5. Guarde los cambios haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WM_GAF.jpg) en los botones de acceso rápido.

6. Cierre la ventana de código (haga clic en la "X" de la esquina superior derecha del editor de código).




- Pruebe de nuevo la ventana "WIN_List_of_products" en el simulador (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Fen_WM_GAF.jpg) en los botones de acceso rápido).

	- En la lista de productos, haga clic en uno de ellos.

	- La ventana de detalles del producto se abre.







- Cierre el simulador.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Crear y modificar un producto
<a name="crear_modificar_producto_ELTTEXTE001444"></a>
Vamos a hacer algunos cambios en las dos ventanas para crear y modificar un producto.
<a name="NOTE5_2"></a>


### Modificar la ficha del producto
<a name="modificar_ficha_del_producto_ELTPARAGRAPHE000314"></a>Al crear la ventana de la ficha, se creó automáticamente un Action Bar. El Action Bar contiene un botón a la izquierda para cancelar la entrada actual y volver a la ventana anterior. En nuestro caso, este botón nos permitirá volver a la lista de productos.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Cr%E9ation%20modif%20produit%20-%20HC%20N%B0001.jpg)
No necesitamos hacer ningún cambio. 

Vamos a agregar un botón de validación al Action Bar de la ventana "WIN_Product_form" para confirmar los cambios.

- Primero, abra la ventana "WIN_Product_form": haga clic en la pestaña correspondiente en las pestañas de documentos abiertos.




- Para agregar una opción de validación al Action Bar:

	1. Seleccione el Action Bar (en la parte superior de la ventana). 

	2. Abra la ventana de descripción del Action Bar: haga clic derecho y seleccione la opción "Descripción" en el menú contextual.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Cr%E9ation%20modif%20produit%20-%20HC%20N%B0002.jpg&type=thumb)

			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La ventana de descripción del Action Bar se adapta a las plataformas utilizadas en el proyecto. El Action Bar de una aplicación Android es diferente del Action Bar de una aplicación iOS.<br><br>**Nuestro proyecto utiliza la configuración de Android y la de iOS**: la ventana muestra una vista previa del Action Bar para ambas plataformas.<br>Si su proyecto solo utiliza una configuración Android (o iOS), las opciones del Action Bar se mostrarán en función de la plataforma. <br><br>Los números le permiten acceder a las opciones a configurar.<br><br>En esta sección, solo vamos a ver las opciones necesarias para este ejemplo.<br>Para obtener más información, consulte [Descripción del control Action Bar](../WDChamp/1000025005.md). |





	3. Haga clic en el número 2 (cualquier número 2 en la ventana). Una nueva UI permite introducir una opción en el Action Bar. 

	4. Haga clic en el botón "+" (debajo del área "Arriba a la derecha") para agregar una opción. Una nueva opción se crea en la parte superior derecha. 

	5. Cambie las características de la opción: 

		- En la sección "Título de la opción", escriba "Done".  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Cr%E9ation%20modif%20produit%20-%20HC%20N%B0003.jpg&type=thumb)

						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Al ejecutar la aplicación, el texto de la opción se muestra en el Action Bar:<br><br>			- Si no hay ninguna imagen asociada a la opción.<br><br>			- Si la opción se mueve al menú inferior.<br><br><br> |





		- En la sección "Imagen predefinida", despliegue la lista y seleccione "Validar".  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Cr%E9ation%20modif%20produit%20-%20HC%20N%B0005.jpg&type=thumb)


		- Valide la ventana de descripción.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Para volver a la descripción general del Action Bar, haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Nv_Produit%20-%20HC%20N%B0002%201.jpg). |





6. El código WLanguage de esta opción permitirá guardar los cambios en la ventana "WIN_Product_form". Para escribir este código:

	- Seleccione el control Action Bar. 

	- Haga clic en "OK". 

	- Enseguida, se despliega un menú con la opción "Done".  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Cr%E9ation%20modif%20produit%20-%20HC%20N%B0006.jpg)

						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Este menú desplegable solo se muestra en modo de edición para introducir el código WLanguage asociado a la opción. El menú desplegable no se muestra en tiempo de ejecución. |





	- Haga clic derecho en la opción.

	- Seleccione "Código" en el menú contextual que aparece.

	- Escriba el siguiente código WLanguage en el evento "Selección del menú":
						
			```wl
			Product.FromWindow()
			Product.Save()
			Close()
			```

						Analicemos estas líneas de código:

		- La función [&lt;Archivo de datos&gt;.FromWindow](../WDLang4/1000021403.md) actualiza los campos del registro actual con los datos de los controles enlazados en la ventana.

		- La función [&lt;Archivo de datos&gt;.Save](../WDLang4/1000024606.md) actualiza el registro actual en el archivo de datos.




- Al cerrar la ficha del producto, la lista de productos de la ventana "WIN_List_of_products" debe actualizarse para que se tengan en cuenta los cambios realizados en la ficha del producto. Para ello, vaya al evento "Cierre de una ventana hija" de la ventana "WIN_List_of_products".

	1. Haga clic en "WIN_List_of_products" en las pestañas de documentos abiertos:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Fiche%20produit%20-%20HC%20N%B0001%201.jpg)


	2. Haga clic derecho en el fondo de la ventana y seleccione "Código" en el menú contextual. El siguiente código WLanguage se muestra automáticamente en el evento "Cierre de una ventana hija":
			
		```wl
		LooperDisplay(LOOP_Product,taCurrentSelection)
		```

			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El código generado no utiliza la sintaxis con prefijo, sino la sintaxis "estándar" de WLanguage. En la sintaxis con prefijo, el código es el siguiente: <br><br><br><pre><code>LOOP_Product.Display(taCurrentSelection)</code></pre><br> |





3. Analicemos este código WLanguage:

	- El evento "Cierre de una ventana hija" se ejecuta cada vez que se cierra una ventana hija de la ventana actual. En nuestro caso, se ejecuta cuando se cierra la ventana "WIN_Product_form".

	- La función [&lt;Looper&gt;.Display](../WDLang2/1000023451.md) (o [LooperDisplay](../WDLang2/3083001.md)) actualiza los datos del control Looper de la ventana "WIN_List_of_products". La constante **taCurrentSelection** actualiza los datos a partir de la banda de selección.
						Este código WLanguage se generó automáticamente cuando se creó la ventana en el asistente.




- Pruebe la ventana "WIN_List_of_products" en el simulador (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Fen_WM_GAF.jpg) en los botones de acceso rápido).

	- En la lista de productos, haga clic en uno de ellos: por ejemplo, en el producto "Polo Hibiscus, Blue".

	- La ventana de detalles del producto se abre. Cambie el nombre a "Polo Hibiscus, Light blue" y haga clic en "OK".

	- Al volver a la lista de productos, notará que el nombre del artículo se actualizó.







- Cierre el simulador. El editor de WINDEV Mobile aparece de nuevo.



<a name="NOTE5_3"></a>


### Crear un nuevo producto
<a name="crear_nuevo_producto_ELTPARAGRAPHE000442"></a>

El principio para crear un producto es el siguiente:

- Agregaremos una opción al Action Bar de la ventana de la lista de productos para abrir la ventana "Product form".

- A continuación, editaremos el código WLanguage de la ventana "Product form" para agregar datos al archivo de datos Product.




- Para agregar una opción al Action Bar:

	1. Abra la ventana "WIN_List_of_products" en el editor: haga clic en la pestaña correspondiente en las pestañas de documentos abiertos.

	2. Seleccione el Action Bar (en la parte superior de la ventana).

	3. Abra la ventana de descripción del Action Bar: haga clic derecho y seleccione la opción "Descripción" en el menú contextual.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Nv_Produit%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Haga clic en el número 2 (cualquier número 2 en la ventana). Enseguida, aparece una pantalla para introducir una opción en la barra de herramientas. 

5. Haga clic en el botón "+" (debajo del área "Arriba a la derecha") para agregar una opción. Una nueva opción se crea en la parte superior derecha. Cambie las características de la opción: 

	- En la sección "Título de la opción", escriba "New product".  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Nv_Produit%20-%20HC%20N%B0002.jpg&type=thumb)




- Comprobemos cómo agregar registros en la ventana de la ficha del producto.

	1. Abra la ventana "WIN_Product_form": haga clic en la pestaña correspondiente en las pestañas de documentos abiertos.

	2. Abra el código de la opción "OK" en el Action Bar:

		- Seleccione el Action Bar.

		- Haga clic en "OK". 

		- Enseguida, se despliega un menú con la opción "Done". 

		- Haga clic con derecho en la opción "Done" y seleccione "Código" en el menú contextual.

		- El código WLanguage del evento "Clic" no cambia:
						
			```wl
			Product.FromWindow()
			Product.Save()
			Close()
			```

						Veamos este código de nuevo:

			- De forma predeterminada, la función [&lt;Archivo de datos&gt;.Save](../WDLang4/1000024606.md) equivale a [&lt;Archivo de datos&gt;.Modify](../WDLang4/1000025038.md): el registro actual en el archivo de datos se modifica. 

			- Si se llamó a la función [&lt;Archivo de datos&gt;.Reset](../WDLang4/1000025052.md) antes de [&lt;Archivo de datos&gt;.Save](../WDLang4/1000024606.md) (por ejemplo, cuando se agrega un nuevo producto), [&lt;Archivo de datos&gt;.Save](../WDLang4/1000024606.md) agrega un nuevo registro al archivo de datos (en este caso equivale a la función [&lt;Archivo de datos&gt;.Add](../WDLang4/1000024187.md)). 




3. Cierre la ventana de código (haga clic en la "X" de la esquina superior derecha del editor de código).




- Abra la ventana "WIN_List_of_products" en el editor de ventanas y ejecute la prueba en el simulador (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Fen_WM_GAF.jpg) en los botones de acceso rápido).

	- Haga clic en el botón "+" en el Action Bar. 

	- Introduzca un nuevo producto.

	- Valide. El nuevo producto aparece en la lista de productos.

	- Cierre el simulador.





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El proyecto utiliza varias plataformas: le recomendamos que pruebe el proyecto a través del botón "GO" en cada plataforma. Así, podrá ver las diferencias de visualización y funcionamiento en el simulador. |





<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Uso de la cámara y visualización de una imagen
<a name="uso_camara_visualizacion_una_imagen_ELTTEXTE001588"></a>
|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=avertissement.png) | ¡Atención! | Este párrafo requiere un dispositivo con cámara. <br><br>De lo contrario, vaya directamente al siguiente párrafo.<br><br>Además, este párrafo requiere que la aplicación se instale en el dispositivo porque utiliza recursos físicos a los que no se puede acceder en modo de simulación. |






### Presentación
<a name="presentacion_ELTPARAGRAPHE000552"></a>

Vamos a agregar la foto del producto utilizando la cámara del dispositivo.

Para ello, vamos a realizar las siguientes acciones:

- crear un control Botón para abrir la cámara. La foto se guardará como una imagen en la memoria y se mostrará en el control Imagen del producto.

- crear un control Botón para seleccionar una foto del álbum del dispositivo.





### Crear un botón para tomar fotos
<a name="crear_boton_para_tomar_fotos_ELTPARAGRAPHE000562"></a>

- Para crear el control Botón que permitirá tomar fotos:

	1. Abra la ventana "WIN_Product_form".

	2. Agregue un control Botón a la ventana:

		- En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Bouton_WM_GAF.jpg): la forma del control aparece debajo del cursor.

		- Haga clic en la parte superior derecha del control Imagen para crear el control Botón.







- Vamos a modificar el control Botón para asociarlo a una imagen que represente una cámara:

	1. Haga clic derecho para abrir el menú contextual del control.

	2. Seleccione "Descripción". La ventana de descripción del control se abre automáticamente.

	3. En la pestaña "General", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Menu_Image_Editeur%20-%20HC%20N%B0001.gif) a la derecha de "Imagen". Seleccione "Catálogo" en el menú contextual que aparece. 

	4. Enseguida, se abre el catálogo de imágenes de WINDEV Mobile. Este catálogo contiene cientos de imágenes en diferentes campos, formatos y tamaños.

	5. Introduzca "photo" en la barra de búsqueda y valide. Se muestran varias imágenes:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Appareil%20photo%20-%20HC%20N%B0001.jpg&type=thumb)


	6. Haga doble clic en la imagen <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Appareil%20photo%20-%20HC%20N%B0001%201.jpg)
 para seleccionarla.

7. En la ventana que aparece, puede seleccionar el tamaño, el color, la orientación, el formato y el nombre de la imagen.

8. Conserve las opciones predeterminadas y asigne el nombre "Camera" a la imagen.

9. Valide la ventana.

10. La ruta de la imagen se muestra en la descripción del control Botón.

11. Asigne el siguiente nombre al control: "BTN_Camera".

12. Borre el título del control.

13. Valide la ventana de descripción.

14. En el editor, reduzca el tamaño del control.




- El control Botón utiliza el estilo predeterminado de la plantilla "Phoenix" del proyecto: el fondo del control es azul. En nuestro caso, el fondo azul no es necesario. Vamos a cambiar el estilo del control: 

	1. Seleccione el control Botón que acaba de crear. 

	2. Abra el menú contextual y haga clic en la opción "Seleccionar un estilo". 

	3. La ventana que aparece muestra todos los estilos disponibles para los controles Botón que utilizan la plantilla Phoenix.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20S%E9lection%20du%20style%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Haga clic en la lupa e introduzca "BTN_Blank". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20S%E9lection%20du%20style%20-%20HC%20N%B0002.jpg)
Este nombre corresponde a un estilo sin color de fondo. Este es el estilo que vamos a usar. 

5. Valide la ventana de selección de estilos. 

6. El estilo elegido se aplica automáticamente al control Botón.  





### Tomar fotos
<a name="tomar_fotos_ELTPARAGRAPHE000617"></a>

Vamos a introducir el código WLanguage que nos permitirá tomar una foto y mostrarla en el control Imagen de la ficha del producto.



- Para tomar fotos:

	1. Haga clic derecho en el control Botón y seleccione "Código" en el menú contextual.

	2. Introduzca el siguiente código WLanguage en el evento "Clic en":
			
		```wl
		// Local variable
		ProductImage is string 
		// Start the camera
		ProductImage = VideoStartApp(viPictureCapture)
		IF ProductImage <> "" THEN
			IMG_Photo = ProductImage
		END
		```
En este código WLanguage, la función [VideoStartApp](../WDLang1/1000019368.md) abre la cámara del dispositivo para grabar un video o tomar una foto.

	3. Guarde los cambios haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WM_GAF.jpg) en los botones de acceso rápido.

	4. Cierre la ventana de código (haga clic en la "X" de la esquina superior derecha del editor de código).








### Seleccionar una foto en el álbum de fotos
<a name="seleccionar_una_foto_album_fotos_ELTPARAGRAPHE000639"></a>

Vamos a agregar un control Botón para seleccionar una foto del álbum del dispositivo y asociarla al producto.



- Para crear el control Botón que permite seleccionar la foto, vamos a "Copiar y pegar" el control Botón que acabamos de crear:

	1. Seleccione el control "BTN_Camera".

	2. Presione Ctrl + C: el control Botón se copia en el portapapeles. 

	3. Presione Ctrl + V: el cursor cambia y la sombra de control aparece debajo del cursor.

	4. Haga clic en la ventana al lado del control "BTN_Camera": el nuevo control Botón se crea automáticamente.

	5. Haga doble clic en el control para abrir la ventana de descripción:

		- Asigne el siguiente nombre al control: "BTN_Photo_Album".

		- Seleccione una imagen en el catálogo de imágenes.
						Observación: No olvide cambiar el nombre predeterminado de la imagen. 




6. Valide la ventana de descripción. 


Observación: Dado que este control Botón es una copia del botón que permite tomar fotos, las características de estilo son las mismas. ¡No necesita modificarlas! 



- El código WLanguage del control Botón abre el álbum de fotos del dispositivo y selecciona una imagen para que se muestre en el control Imagen de la ficha del producto.

	1. Haga clic derecho en el botón y seleccione "Código" en el menú contextual.

	2. Reemplace el código WLanguage del evento "Clic en" por el siguiente código:
			
		```wl
		// Local variable
		ProductImage is string 
		// Start the selection
		ProductImage = AlbumPicker(albumImage)
		IF ProductImage <> "" THEN
			IMG_Photo = ProductImage
		END
		```
En este código WLanguage, la función [AlbumPicker](../WDLang3/1000020186.md) permite recuperar la foto seleccionada en el álbum de fotos.

	3. Guarde los cambios haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WM_GAF.jpg) en los botones de acceso rápido.

	4. Cierre la ventana de código (haga clic en la "X" de la esquina superior derecha del editor de código).







<a name="NOTE7"></a>
<a name="NOTE7_1"></a>


## Código de barras del producto
<a name="codigo_barras_del_producto_ELTTEXTE001654"></a>
|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=avertissement.png) | ¡Atención! | Este párrafo requiere un dispositivo con cámara.<br><br>De lo contrario, no podrá realizar las pruebas necesarias.<br><br>Además, este párrafo requiere que la aplicación se instale en el dispositivo porque utiliza recursos físicos a los que no se puede acceder en modo de simulación. |






### Presentación
<a name="presentacion_ELTPARAGRAPHE000691"></a>

El archivo de datos "Product" contiene el campo "Bar_Code". Este campo permite almacenar el valor de un código de barras. Algunos dispositivos (con cámara) pueden escanear un código de barras para obtener su valor.

El código de barras se podrá escanear con la cámara del dispositivo y manipular utilizando una función específica de WLanguage.


### Implementación
<a name="implementacion_ELTPARAGRAPHE000698"></a>

- Para crear un control Botón que permita escanear los códigos de barras:

	1. Abra la ventana "WIN_Product_form" en el editor.

	2. Agregue un control Botón a la ventana:

		- En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Bouton_WM_GAF.jpg).

		- La forma del control aparece debajo del cursor.

		- Cree el control al lado del control "Bar cod." (redimensione el control Campo de entrada si es necesario).




3. Abra la ventana de descripción del control Botón (haga doble clic en el control):

	- Asigne el siguiente nombre al control: "BTN_Bar_Code".

	- Borre el título del control.

	- Seleccione una imagen para el código de barras en el catálogo de imágenes (por ejemplo, escriba "Code" en la barra de búsqueda).




- Vamos a cambiar el estilo de este control, tal como hicimos con el botón para tomar una foto: 

	1. Seleccione el control Botón que acaba de crear. 

	2. Abra el menú contextual y haga clic en la opción "Seleccionar un estilo". 

	3. En la ventana que muestra los estilos disponibles, haga clic en la lupa y escriba "BTN_Blank".  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20S%E9lection%20du%20style%20-%20HC%20N%B0002.jpg)


	4. El estilo "BTN_Blank" se selecciona automáticamente. 

5. Valide la ventana de selección de estilos. 

6. El estilo elegido se aplica automáticamente al control Botón. 




- El código WLanguage de este control Botón permitirá escanear el código de barras.

	1. Haga doble clic en el control y seleccione "Código" en el menú contextual.

	2. Introduzca el siguiente código WLanguage en el evento "Clic en":
			
		```wl
		// Local variable
		bc is BarCode 
		// Start the scan
		bc = BCCapture()
		IF bc.Content <> "" THEN
			EDT_Bar_code = bc.Content
		END
		```
En este código WLanguage, [BCCapture](../WDLang5/1000019456.md) descifra la información almacenada en el código de barras utilizando la cámara del dispositivo.

	3. Guarde los cambios haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WM_GAF.jpg) en los botones de acceso rápido.

	4. Cierre la ventana de código (haga clic en la "X" en la pestaña del editor de código).







<a name="NOTE8"></a>
<a name="NOTE8_1"></a>


## Definir los anclajes en la ficha de producto
<a name="definir_los_anclajes_ficha_producto_ELTTEXTE001708"></a>
<a name="Block_Managing_Anchors"></a>
Hemos agregado todos los controles a la ficha de producto. La resolución vertical y horizontal puede variar según los dispositivos. 

Los anclajes permiten adaptar el tamaño de los controles a la resolución y evitar espacios "vacíos" en la ventana (especialmente en la parte inferior derecha).

Si se especifica el dispositivo de destino al crear el proyecto, el tamaño de las ventanas se ajustará al dispositivo de destino. No se requieren anclajes. 

Si no se especifica el dispositivo de destino o se utilizan varios dispositivos, se debe elegir la resolución común más pequeña al crear el proyecto. En este caso, es necesario definir los anclajes. 



- Para definir el anclaje de los controles de la ventana:

	1. Seleccione los siguientes controles manteniendo presionada la tecla Ctrl:

		- el control Imagen que muestra la imagen del producto,

		- el control Botón que permite tomar fotos,

		- el control Botón que permite seleccionar una foto del álbum.




2. Haga clic derecho para abrir el menú contextual de la selección y seleccione "Anclaje".

3. Seleccione "Centrado horizontalmente" (![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Ancrage%20fiche%20-%20HC%20N%B0002%203.jpg)).  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Ancrage%20fiche%20-%20HC%20N%B0004.jpg)




- Para definir el anclaje de los controles Campos de entrada:

	1. Seleccione los siguientes controles Campo de entrada manteniendo presionada la tecla Ctrl:

		- Caption

		- Description

		- Bar code

		- Reorder date

		- Reference




2. Haga clic derecho para abrir el menú contextual de la selección y seleccione "Anclaje". 

3. Seleccione "Ancho" (![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Ancrage%20fiche%20-%20HC%20N%B0004%202.jpg)).

4. Valide. 




- Repita esta acción para los controles "Bar code" y "Reference".. En este caso, seleccione "Derecha" (![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Ancrage%20fiche%20-%20HC%20N%B0004%203.jpg)).




- Se han definido todos los anclajes en la ventana. Las flechas rojas que indican la orientación de los anclajes aparecen en la ventana:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Ancrage%20fiche%20-%20HC%20N%B0001.jpg&type=thumb)





<a name="NOTE9"></a>
<a name="NOTE9_1"></a>


## Utilizar un control Mapa
<a name="utilizar_control_mapa_ELTTEXTE001732"></a>
A continuación, vamos a ver como utilizar el control Mapa y las funciones GPS de WLanguage.

Nuestra base de datos contiene un archivo de datos "Store". Este archivo de datos contiene las direcciones de las tiendas que se ubicarán en un mapa utilizando las funciones geográficas.


### Crear una ventana
<a name="crear_una_ventana_ELTPARAGRAPHE000813"></a>

Vamos a crear una nueva ventana y agregar un control Mapa.



- Para crear la ventana:

	1. Cree una nueva ventana en blanco. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Nv_WM_GAF.jpg) en los botones de acceso rápido. La ventana para crear un nuevo elemento aparece: haga clic en "Ventana", y luego en "Ventana". En el asistente, elija "En blanco" y valide.

	2. La ventana para guardar el elemento se abre. Introduzca el título de la ventana: "Map of stores". El nombre se define automáticamente: "WIN_Map_of_stores". Valide.








### Crear un control Mapa
<a name="crear_control_mapa_ELTPARAGRAPHE000827"></a>

- Para crear el control Mapa:

	1. En la pestaña "Creación", en el grupo "Controles gráficos", haga clic en "Mapa". La forma del control aparece debajo del cursor.

	2. Haga clic en la ventana para crear el control. El control Mapa aparece en el editor de ventanas.

	3. Haga doble clic en el control Mapa para abrir la ventana de descripción.

	4. En la ventana de descripción del control, especifique el nombre del control ("MAP_STORE") y valide.

	5. Guarde los cambios haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WM_GAF.jpg) en los botones de acceso rápido.








### Mostrar tiendas en el control Mapa
<a name="mostrar_tiendas_control_mapa_ELTPARAGRAPHE000852"></a>

Vamos a agregar el código que permite mostrar las tiendas del archivo de datos "Store" en un mapa.

Para ello, recorreremos el archivo de datos "Store" con un bucle FOR EACH. A continuación, vamos a utilizar variables de tipo Marker. Las variables de tipo Marker permiten definir los marcadores que aparecerán en el mapa.

Un marcador contiene diferente información. Utilizaremos la siguiente información:

- Nombre,

- Latitud,

- Longitud.


La función [&lt;Mapa&gt;.AddMarker](../WDLang3/1000022422.md) permite agregar marcadores en un control Mapa. Luego, solo se debe ajustar el zoom para ver todos los marcadores en el mapa. Si el zoom no está ajustado correctamente, es posible que no se muestren algunos marcadores o que se superpongan en el control.

**Implementación**

- Para introducir el código WLanguage que permite mostrar las tiendas:

	1. Haga clic derecho fuera de la ventana. Seleccione "Código" en el menú contextual que aparece. Los eventos WLanguage de la ventana se muestran en el editor de código.

	2. Introduzca el siguiente código WLanguage en el evento "Declaraciones globales de...".
			
		```wl
		// Global variables
		StoreMarker is Marker
		// Load the stores
		FOR EACH Store 
			// Marker coordinates
			StoreMarker.Position.Latitude = Store.Latitude
			StoreMarker.Position.Longitude = Store.Longitude
			// Marker name
			StoreMarker.Name = Store.Name
			// Add the marker
			MAP_STORE.AddMarker(StoreMarker)
		END
		// Best zoom to view all markers on the map
		MAP_STORE.Zoom = zoomAdaptSize
		```


	3. Guarde los cambios haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WM_GAF.jpg) en los botones de acceso rápido.

	4. Cierre la ventana de código (haga clic en la "X" en la pestaña del editor de código).







- Pruebe la ventana "WIN_Map_of_stores" en el simulador (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Fen_WM_GAF.jpg) en los botones de acceso rápido). Luego, cierre el simulador.




<a name="NOTE10"></a>
<a name="NOTE10_1"></a>


## Utilizar un control Zona multilínea
<a name="utilizar_control_zona_multilinea_ELTTEXTE001774"></a>
El control Zona multilínea se utiliza frecuentemente en plataformas móviles. Este control permite agrupar varios controles:

- opciones de una categoría,

- información sobre un contacto, etc.


Este control puede contener:

- filas definidas en el editor (filas estáticas),

- filas definidas en tiempo de ejecución, mediante programación (filas dinámicas).




Un control Zona multilínea nos permitirá crear el menú principal de la aplicación. Vamos a crear una nueva ventana e insertar un control Zona multilínea.

Crearemos la siguiente ventana:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Menu%20ZML%20-%20HC%20N%B0001%201.jpg)



### Crear una ventana
<a name="crear_una_ventana_ELTPARAGRAPHE000907"></a>

Vamos a crear una ventana y agregar un control Zona multilínea.



- Para crear la ventana:

	1. Cree una nueva ventana en blanco:

		- Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Nv_WM_GAF.jpg) en los botones de acceso rápido.

		- La ventana de creación de nuevos elementos se abre: haga clic en "Ventana", y luego en "Ventana". En el asistente, elija "En blanco" y valide.




2. La ventana para guardar el elemento se abre. Introduzca el título de la ventana: "Menu". El nombre se define automáticamente: "WIN_Menu". Valide.





### Crear un control Zona multilínea
<a name="crear_control_zona_multilinea_ELTPARAGRAPHE000924"></a>

- Para crear un control Zona multilínea:

	1. En la pestaña "Creación", en el grupo "Datos", haga clic en "Zona multilínea". La forma del control aparece debajo del cursor.

	2. Haga clic en la ventana para crear el control.

	3. Haga doble clic en el control para abrir la ventana de descripción.

	4. En la ventana de descripción, especifique el nombre del control ("MZ_MENU") y valide.







El control Zona multilínea contiene una fila vacía. Vamos a agregar las filas que necesitemos para las opciones de menú.

Nuestro menú incluirá 3 opciones:

- List of products.

- Map of stores.

- Exit application.





### Modificar el control Zona multilínea
<a name="modificar_control_zona_multilinea_ELTPARAGRAPHE000954"></a>

- Para modificar el control Zona multilínea:

	1. Haga doble clic en el control para abrir la ventana de descripción.

	2. Haga clic en "Nueva fila". Enseguida, se abre una ventana: esta ventana contiene modelos de filas predefinidas.

	3. Seleccione "Fila simple con ícono". Repita esta operación dos veces.
			Ahora, el control Zona multilínea contiene:

		- una fila "en blanco",

		- 3 "filas simples con ícono".  <br>![Control Zona multilínea](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Menu%20ZML%20-%20HC%20N%B0002.jpg&type=thumb)







Cada fila incluye un control Imagen, un control Estático y una flecha. Vamos a cambiar la imagen y el texto de cada fila para representar las acciones del menú.



**Modificar la 1.ª fila: acceder a la lista de productos**

- Para cambiar la imagen de la primera fila del control Zona multilínea:

	1. Haga clic en el control Imagen de la primera fila.

	2. Haga doble clic en la imagen para abrir la ventana de descripción.

	3. En la ventana de descripción:

		- Asigne un nombre a la imagen (por ejemplo, "IMG_ListOfProducts").

		- Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Menu_Image_Editeur%20-%20HC%20N%B0001.gif). Seleccione "Catálogo" en el menú contextual que aparece para seleccionar una imagen que represente la acción.

		- En la ventana del catálogo de imágenes, escriba "List" en la barra de búsqueda y presione la tecla Entrar.

		- Haga doble clic en la imagen que desea seleccionar.

		- En la ventana de configuración que aparece, defina el tamaño de la imagen (por ejemplo, A (Ancho) = 80 y A (Alto) = 80). Enseguida, asigne un nombre a la imagen (por ejemplo, "ListOfProducts") y valide.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | De forma predeterminada, la imagen de un control Zona multilínea está en modo "Homotético expandido centrado". La imagen se redimensionará automáticamente. |








4. Valide la ventana de descripción.




- Para cambiar el texto de la primera fila del control Zona multilínea:

	1. Haga clic en el control Estático de la primera fila.

	2. Haga doble clic en el control para abrir la ventana de descripción.

	3. En la pestaña "General" de la ventana de descripción:

		- Asigne un nombre al control (por ejemplo, "STC_ListOfProducts").

		- Cambie el título (por ejemplo, "List of products").




4. Valide la ventana de descripción.<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_MP%20-%20Menu%20ZML%20-%20HC%20N%B0003.jpg)




**Modificar la 2.ª fila: acceder al mapa de tiendas**

- Para cambiar la imagen de la segunda fila del control Zona multilínea:

	1. Haga clic en el control Imagen de la segunda fila.

	2. Haga doble clic en la imagen para abrir la ventana de descripción.

	3. En la ventana de descripción:

		- Asigne un nombre a la imagen (por ejemplo, "IMG_MapOfStores").

		- Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Menu_Image_Editeur%20-%20HC%20N%B0001.gif). Seleccione "Catálogo" en el menú contextual que aparece para seleccionar una imagen que represente la acción. 

		- En la ventana del catálogo de imágenes, escriba "Map" en la barra de búsqueda y presione la tecla Entrar.

		- Haga doble clic en la imagen que desea seleccionar.

		- Defina el tamaño de la imagen en la ventana de configuración que aparece (por ejemplo, A (Ancho) = 80 y A (Alto) = 80). Enseguida, asigne un nombre a la imagen (por ejemplo, "MapOfStores") y valide.




4. Valide la ventana de descripción.




- Para cambiar el texto de la segunda fila del control Zona multilínea:

	1. Haga clic en el control Estático de la segunda fila.

	2. Haga doble clic en el control para abrir la ventana de descripción.

	3. En la pestaña "General" de la ventana de descripción:

		- Asigne un nombre al control (por ejemplo, "STC_MapOfStores").

		- Cambie el título (por ejemplo, "Map of stores").




4. Valide la ventana de descripción.




**Modificar la 3.ª fila: Salir de la aplicación**

- Para cambiar la imagen de la tercera fila del control Zona multilínea:

	1. Haga clic en el control Imagen de la tercera fila.

	2. Haga doble clic en la imagen para abrir la ventana de descripción.

	3. En la ventana de descripción:

		- Asigne un nombre a la imagen (por ejemplo, "IMG_Exit").

		- Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Menu_Image_Editeur%20-%20HC%20N%B0001.gif). Seleccione "Catálogo" en el menú contextual que aparece para seleccionar una imagen que represente la acción. 

		- En la ventana del catálogo de imágenes, escriba "Close" en la barra de búsqueda y presione la tecla Entrar.

		- Haga doble clic en la imagen que desea seleccionar.

		- Defina el tamaño de la imagen en la ventana de configuración que aparece (por ejemplo, A (Ancho) = 80 y A (Alto) = 80). Enseguida, asigne un nombre a la imagen (por ejemplo, "Close") y valide.




4. Valide la ventana de descripción.




- Para cambiar el texto de la tercera fila del control Zona multilínea:

	1. Haga clic en el control Estático de la tercera fila.

	2. Haga doble clic en el control para abrir la ventana de descripción.

	3. En la pestaña "General" de la ventana de descripción:

		- Asigne un nombre al control (por ejemplo, "STC_Exit").

		- Cambie el título (por ejemplo, "Exit from the application").




4. Valide la ventana de descripción.




- Vamos a cambiar el estilo del texto para que se muestre en negro:

	1. Haga clic en el control Estático de la primera fila. 

	2. Abra la ventana de descripción (Alt + Entrar). 

	3. En la pestaña "Estilo", seleccione el elemento "Texto", despliegue "Color fuente" y seleccione el color negro. 

	4. Valide la ventana de descripción. 

	5. El color del texto cambia automáticamente. 







- Para repetir esta acción en los otros controles Estático: 

	1. Haga clic en el control Estático de la segunda fila. 

	2. Presione F4. Esta tecla repite la última acción. En este caso, el texto se vuelve negro. 

	3. Seleccione el control Estático de la tercera fila y pulse de nuevo F4. 








### Programar el menú
<a name="programar_menu_ELTPARAGRAPHE001087"></a>

- Finalmente, vamos a escribir el código WLanguage de cada acción del menú:

	1. Haga clic derecho en el control Zona multilínea y seleccione "Código". 
			**Atención**: asegúrese de seleccionar el control Zona multilínea y no uno de los controles dentro de este.

	2. En el editor de código, escriba el siguiente código WLanguage en el evento "Selección (clic) de una fila en...":
			
		```wl
		SWITCH MZ_MENU
			CASE 1 // List of products
				WIN_List_of_products.OpenMobileWindow() 
			CASE 2 // Map of stores
				WIN_Map_of_stores.OpenMobileWindow() 
			CASE 3 // Exit application
				Close()	
		END
		```


	3. Guarde los cambios haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Sauver_WM_GAF.jpg) en los botones de acceso rápido.

	4. Cierre la ventana de código (haga clic en la "X" de la esquina superior derecha del editor de código).







<a name="NOTE11"></a>
<a name="NOTE11_1"></a>


## Prueba de la aplicación
<a name="prueba_aplicacion_ELTTEXTE001840"></a>
El último paso consiste en especificar que la ventana de menú es la primera ventana de la aplicación. Para ello, probaremos todo el proyecto y definiremos la primera ventana de la aplicación.



- Para definir la primera ventana del proyecto:

	1. Seleccione la ventana "WIN_Menu" en el panel "Explorador de proyectos".

	2. Abra el menú contextual.

	3. Seleccione "Primera ventana del proyecto". Un ícono específico (con un 1 pequeño) aparece a la izquierda del nombre de la ventana, en el panel "Explorador de proyectos".







Hasta ahora, hemos probado las ventanas individualmente haciendo clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Fen_WM_GAF.jpg) en los botones de acceso rápido. Ahora vamos a probar todo el proyecto. 

- Para iniciar la prueba del proyecto en el simulador:

	1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_simu_PRJ_WM_GAF.jpg) en los botones de acceso rápido.

	2. El proyecto inicia con la ventana de menú. Haga clic en una opción de menú para comprobar si los enlaces son correctos.







| [Lección anterior](../TutoWM/1410087571.md) | [Tabla de contenido](../TutoWM/1410087586.md) | [Siguiente lección](../TutoWM/1410087573.md) |
| --- | --- | --- |




