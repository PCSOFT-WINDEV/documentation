


## 5. Groupware Usuario en la práctica
			



| [Página anterior](../Concepts_WD/1410087066.md) | [Tabla de contenido](../Concepts_WD/1410087098.md) | [Página siguiente](../Concepts_WD/1410087068.md) |
| --- | --- | --- |



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000578"></a>
En una aplicación se debe definir la función de los diferentes colaboradores. Se pueden establecer varios niveles de acceso según el usuario.

Todos los usuarios tienen diferentes responsabilidades y requisitos. Por lo tanto, suele ser necesario limitar sus campos de acción.

Veamos un ejemplo simple: una aplicación de gestión de ventas que propone las siguientes funcionalidades:

- Ver precios,

- Modificar precios,

- Agregar pedidos,

- Agregar clientes.




El acceso puede variar según el usuario. Por ejemplo:

- el personal de secretaría puede ver la lista de precios y crear pedidos.

- los vendedores pueden ver la lista de precios, hacer pedidos y crear nuevos clientes.

- los directores de ventas tienen acceso a todas las opciones.




Para gestionar estos niveles de acceso en una aplicación WINDEV, simplemente integre el Groupware Usuario. Con unos pocos clics, una aplicación estándar puede transformarse en una aplicación que gestiona varios niveles de acceso. Esta funcionalidad puede implementarse fácilmente.

Al ejecutar la aplicación, el administrador podrá crear usuarios (identificados con un nombre de usuario y contraseña) y darles acceso a algunas funcionalidades de la aplicación.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## ¿Cómo funciona el Groupware Usuario?
<a name="¿como_funciona_groupware_usuario_ELTTEXTE000602"></a>
Una aplicación que utiliza el Groupware Usuario tiene dos niveles:

- nivel de usuario.

- nivel de supervisor.



<a name="NOTE2_2"></a>


### Nivel de usuario
<a name="nivel_usuario_ELTPARAGRAPHE000050"></a>

El usuario inicia sesión en la aplicación y accede a las funcionalidades disponibles.

Observación: También puede iniciar sesión mediante un directorio LDAP.
<a name="NOTE2_3"></a>


### Nivel de supervisor
<a name="nivel_supervisor_ELTPARAGRAPHE000061"></a>

El supervisor inicia sesión en la aplicación y accede a un menú avanzado que le permite configurar usuarios y permisos o iniciar la aplicación.

La ventana de configuración permite al supervisor:

- iniciar la aplicación.

- configurar el groupware.


La configuración del groupware consiste en crear y asociar usuarios y grupos, y administrar los permisos otorgados a cada usuario (o grupo) en cada ventana de la aplicación. Los permisos se pueden definir para las opciones de menú, grupos de controles y controles. El supervisor puede inhabilitar, desactivar o hacer invisibles estos elementos. Estas configuraciones tienen prioridad sobre cualquier configuración definida en el programa.

Para más información sobre la configuración del groupware definida por el supervisor, consulte [Configurar la aplicación que utiliza el Groupware Usuario](#NOTE4_1).

**Observación**: La información relativa a los usuarios y permisos se almacena en archivos de datos en formato HFSQL (Classic o Client/Server).

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Implementar el Groupware Usuario
<a name="implementar_groupware_usuario_ELTTEXTE000638"></a>


### Agregar el Groupware Usuario a una aplicación
<a name="agregar_groupware_usuario_una_aplicacion_ELTPARAGRAPHE000086"></a>

Para implementar el Groupware Usuario en una aplicación WINDEV: 

1. En la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "Groupware Usuario". 

2. En la ventana de descripción de la configuración del proyecto actual, en la sección "Groupware Usuario: Desactivado", haga clic en "Cambiar". 

3. La ventana de configuración del Groupware Usuario permite activar el Groupware Usuario y definir: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0001.gif&type=thumb)





- El tipo y modo de inicio del Groupware Usuario. 

- El tipo de personalización. 

- El tipo de base de datos y la ubicación de los archivos de datos del Groupware Usuario (Groupware Usuario estándar). 

- El modo de autenticación del usuario (Groupware Usuario estándar). 

- El uso de un servicio de conexión específico (Groupware Usuario estándar). 

- La configuración del modo BaaS. 




**Tipo de Groupware Usuario**

Existen varios tipos de groupware: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0001%202.gif&type=thumb)


- **Groupware Usuario estándar**: El Groupware Usuario se integrará en su versión "estándar": el Groupware Usuario se asociará únicamente a su aplicación, y los permisos podrán definirse desde la aplicación. 
	Si se selecciona esta opción, aparecen dos pestañas específicas: 

	- la pestaña "Archivos", que permite especificar el tipo de base de datos y de autenticación. 

	- la pestaña "OAuth", que permite especificar los servicios de conexión disponibles para los usuarios. 




- **Groupware Usuario BaaS**: Esta opción permite integrar un Groupware Usuario BaaS (Backend as a Service) y gestionar los permisos mediante un servidor. 
	Si se selecciona esta opción, aparecen dos pestañas específicas: 

	- la pestaña "BaaS", que permite especificar las características del servidor BaaS, las cuentas de usuario y las URL de los sitios de administración. 

	- la pestaña "Correo", que permite personalizar los mensajes que se envían a los usuarios (correos de validación del registro o de restablecimiento de la contraseña). 







**Groupware Usuario BaaS: Configuración necesaria**: 
Pueden presentarse dos casos: 

- **Si utiliza una plataforma PCSCloud**: los elementos necesarios se instalan de forma predeterminada en su plataforma. 
	Recordatorio: PCSCloud es una solución paga lista para usar. Para obtener más información, consulte [PCSCloud](https://pcscloud.net/UK/cloud_development.awp).

- **Si no utiliza una plataforma PCSCloud**: instale los siguientes elementos: 

	- un servidor HFSQL,

	- el servidor reservado, incluidos los módulos para el Groupware Usuario de dispositivos móviles (WDBaaS).


 Para obtener más información, consulte [Configuración de un servidor BaaS (Groupware Usuario y Tienda privada)](../Editeurs/1000021311.md).




**Inicio del Groupware Usuario**

Existen varios modos de inicio:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0001%201.gif&type=thumb)


- La opción "Inicio automático" indica que el Groupware Usuario se inicia al mismo tiempo que la aplicación.
	La ventana de inicio de sesión del Groupware Usuario se abre antes que cualquier otra ventana de la aplicación. El código de inicialización del proyecto se ejecuta después de abrir y validar la ventana de inicio de sesión.

- La opción "Inicio manual (mediante programación)" permite definir el momento en el que se debe iniciar el Groupware Usuario.
	La ventana de inicio de sesión solo se abrirá si se utiliza la función [gpwOpen](../WDLang6/3041002.md) (o [gpwLogin](../WDLang6/3041001.md)). Esta opción permite ejecutar el código de inicialización del proyecto antes de abrir la ventana de inicio de sesión. Esta opción es útil para una aplicación multilingüe, por ejemplo: puede que se muestre una ventana para solicitar el idioma de ejecución de la aplicación.







### Opciones del Groupware Usuario (modo estándar y BaaS)
<a name="opciones_del_groupware_usuario_modo_estandar_baas_ELTPARAGRAPHE000172"></a>

Existen varios modos de personalización del Groupware Usuario: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0002.gif&type=thumb)


- **Sin personalización**: 
	WINDEV se encarga de todo. Basta con iniciar la aplicación para configurar el acceso de los usuarios. 
	Las ventanas del Groupware Usuario pueden utilizar automáticamente la plantilla de la aplicación. Simplemente seleccione la opción "Aplicar plantilla del proyecto a las ventanas no personalizadas durante la ejecución".
	Para que todas las ventanas de la aplicación tengan la misma apariencia, se recomienda marcar siempre esta opción si se utiliza el Groupware Usuario en modo no personalizado.

- **Personalizar UI de conexión**: 
	La ventana de acceso/registro se integra automáticamente en su aplicación. El componente interno **WDGPU** se incluye en el proyecto. Este componente contiene la ventana de inicio de sesión y el procedimiento asociado. Así, podrá personalizar la conexión al Groupware Usuario.

- **Personalización completa (modo experto)** - Solo Groupware Usuario estándar: 
	La programación del Groupware Usuario se incluye automáticamente en su aplicación. El componente interno **WDGPU** se incluye en el proyecto. Este componente contiene un análisis, así como todas las ventanas, consultas, clases y procedimientos necesarios para gestionar el Groupware Usuario. Esto permite personalizar todas las ventanas utilizadas por el Groupware Usuario.




La opción "Aplicar plantilla del proyecto a las ventanas no personalizadas durante la ejecución" permite aplicar la plantilla del proyecto a las ventanas específicas del Groupware Usuario, si aún no se han personalizado. 

Las opciones de seguridad son las siguientes: 

- **Permitir la apertura de ventanas y reportes de forma predeterminada**: Esta opción permite que todos los usuarios abran ventanas y reportes de forma predeterminada. En este caso, al configurar los permisos, basta con especificar los elementos a los que no se podrá acceder. 

- **Permitir la edición de reportes y consultas en "Reports and Queries"**: Si se selecciona esta opción, la aplicación podrá utilizar "Reports and Queries" para todos los reportes y consultas. 
	Observación: Esta opción es idéntica a "Habilitar 'Reports and Queries'", en la pestaña "Avanzado" de la descripción del proyecto.   




La opción "**Inicio de sesión automático para el modo de prueba**" permite especificar el nombre de usuario y la contraseña que se utilizarán en modo "Prueba automatizada". Esta información se utilizará si se ejecuta una prueba automatizada en la aplicación.

De forma predeterminada: 

- los archivos de datos están en inglés. Para utilizar los datos en francés, simplemente seleccione la opción "Archivos de datos en francés". 

- los archivos de datos del Groupware Usuario tienen una contraseña específica. Esta contraseña es: "PCSGPW2001".
	Para cambiar la contraseña, introduzca la nueva contraseña en la pestaña "Opciones" de la ventana de descripción del Groupware Usuario. Los caracteres se muestran como puntos.
	Observación: Esta contraseña se utiliza, por ejemplo, cuando se reindexan o abren archivos de datos con WDMAP.




Para más información, consulte la ayuda en línea.


### Opciones específicas del Groupware Usuario estándar
<a name="opciones_especificas_del_groupware_usuario_estandar_ELTPARAGRAPHE000220"></a>

Si utiliza el Groupware Usuario estándar, la pestaña "Archivos" le permite configurar: 

- el tipo de base de datos utilizada (estas opciones solo están disponibles en el modo "Inicio automático"). 

- el tipo de autenticación: 

	- Autenticación gestionada por el Groupware Usuario de WINDEV.

	- Autenticación a partir de un directorio LDAP.

	- Autenticación de Windows.







**Tipo de base de datos**

En modo "Groupware Usuario estándar", el Groupware Usuario utiliza varios archivos de datos específicos. Estos archivos de datos se utilizan principalmente para administrar usuarios, grupos, permisos y elementos de la aplicación. El Groupware Usuario estándar se puede utilizar:

- con archivos de datos HFSQL Classic. En este caso, puede especificar la ubicación de los archivos de datos a través del enlace "Directorio predeterminado".

- con archivos de datos HFSQL Client/Server. En este caso, puede definir los parámetros de acceso a la base de datos HFSQL Client/Server, así como el directorio de los archivos, seleccionando el enlace "Haga clic aquí para introducir los parámetros del servidor".




**Tipo de autenticación**

El Groupware Usuario estándar propone varios modos de autenticación del usuario:

- **Autenticación totalmente gestionada por el Groupware Usuario**: 
	El nombre de usuario y la contraseña se guardan en los archivos de datos del Groupware Usuario.

- **Autenticación a partir de un directorio LDAP o Active Directory**: 
	Si la empresa de su cliente utiliza un directorio LDAP, puede activar el Groupware Usuario en este directorio. Simplemente haga clic en el enlace "Haga clic aquí para introducir los parámetros del servidor" para especificar las características del directorio LDAP (servidor, puerto, DN base, etc.). Así, la cuenta y la contraseña en el directorio LDAP se solicitarán automáticamente al usuario. Para más información, consulte la ayuda en línea.

- **Autenticación Windows**:
	En este caso, el nombre de usuario y la contraseña corresponden a los definidos para Windows.
	Observación: También es posible utilizar una autenticación única. En este caso, el nombre de usuario y la contraseña se solicitarán solo una vez por sesión.




Dependiendo de la opción seleccionada, puede haber opciones adicionales: 

- **Ventana de inicio de sesión únicamente (sin gestión de permisos)**: Esta opción solo está disponible para la autenticación LDAP y Windows. Si esta opción está seleccionada, no se creará ningún archivo de datos del groupware. Si la aplicación se inicia en modo automático, el usuario deberá iniciar sesión. Si el usuario está guardado en el directorio LDAP, la aplicación se iniciará; de lo contrario, se cerrará. El supervisor no puede configurar los permisos de las ventanas. Si esta opción no está seleccionada, solo los usuarios del directorio LDAP podrán iniciar sesión. Se pueden establecer permisos en las ventanas.

- **Autenticación única (SSO)**: Esta opción permite introducir la contraseña solo una vez por sesión de Windows. 




La pestaña "OAuth" permite autorizar el uso de un servicio de conexión específico. Una vez seleccionado el servicio, se deben especificar los identificadores correspondientes (proporcionados al registrar la aplicación en el servicio).
<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0004.gif&type=thumb)



### Opciones específicas del Groupware Usuario BaaS
<a name="opciones_especificas_del_groupware_usuario_baas_ELTPARAGRAPHE000266"></a>

Al utilizar un Groupware Usuario BaaS, se pueden definir opciones específicas en las pestañas "BaaS" y "Correo". 

La pestaña "BaaS" permite definir:  

- la ubicación del servidor de aplicaciones del Groupware Usuario. Es posible seleccionar una plataforma PCSCloud o un servidor de red o de Internet,

- el modo de gestión de cuentas de usuario,

- las URL de los sitios de administración. 




La pestaña "Correo" permite escribir los mensajes de confirmación del registro o de recuperación de la contraseña. 
<a name="NOTE3_2"></a>


### Probar la aplicación (Groupware Usuario estándar)
<a name="probar_aplicacion_groupware_usuario_estandar_ELTPARAGRAPHE000283"></a>

Al probar una aplicación que utiliza el Groupware Usuario estándar, la primera ventana que aparece es la de inicio de sesión (independientemente de la primera ventana definida en la aplicación).

De forma predeterminada se crea un solo usuario: el supervisor. Para iniciar sesión como supervisor, simplemente introduzca la siguiente información en la ventana de inicio de sesión:

- Nombre: SUPERVISOR

- Contraseña: SUPERVISOR


Puede probar la aplicación, o configurar el Groupware Usuario.

**Observaciones**:

- Para establecer una primera ventana distinta a la de inicio de sesión en la aplicación, seleccione "Inicio manual (mediante programación)" en la pestaña "General" de las opciones del Groupware Usuario. Utilice la función [gpwOpen](../WDLang6/3041002.md) para abrir la ventana de inicio de sesión.

- Las ventanas de gestión del Groupware Usuario se ejecutan antes del código de inicialización del proyecto.

- La primera ventana de la aplicación definida en el proyecto se abrirá después de la ventana de inicio de sesión (si el usuario no es el supervisor).

- En la pestaña "Opciones" de la ventana de configuración del Groupware Usuario, puede definir el nombre de usuario y la contraseña que se utilizarán para el modo de prueba. No se pedirá la contraseña al hacer clic en GO para probar la ventana o proyecto. 



<a name="NOTE3_3"></a>


### Crear el ejecutable WINDEV
<a name="crear_ejecutable_windev_ELTPARAGRAPHE000309"></a>

Al crear un ejecutable que utiliza el Groupware Usuario estándar (opción "Generar", en la pestaña "Proyecto"), el asistente muestra una pantalla específica del Groupware Usuario.

Podrá definir la ubicación de los archivos de datos del Groupware Usuario.
<a name="NOTE3_4"></a>


### Instalar una aplicación que utiliza el Groupware Usuario estándar
<a name="instalar_una_aplicacion_que_utiliza_groupware_usuario_estandar_ELTPARAGRAPHE000324"></a>

Una aplicación que utiliza el Groupware Usuario se instala como cualquier otra aplicación: en la pestaña "Proyecto", en el grupo "Generación", haga clic en "Procedimiento de instalación".

El asistente propone una etapa específica del Groupware Usuario estándar para establecer la ubicación de los archivos de datos del Groupware Usuario.

**Observaciones**:

- Si se han configurado archivos de datos del Groupware Usuario para un cliente, deben seleccionarse al preparar la instalación. Por lo tanto, es necesario personalizar la lista de archivos de la instalación.

- Si no se han configurado los archivos de datos del groupware, el Supervisor será el único usuario en la aplicación la primera vez que se inicie.




**Consejo**: Si no configura los diferentes niveles de uso del Groupware Usuario para sus clientes, le recomendamos proporcionarles un documento con todos los controles de las ventanas para obtener una configuración optimizada.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Configurar la aplicación que utiliza el Groupware Usuario estándar
<a name="configurar_aplicacion_que_utiliza_groupware_usuario_estandar_ELTTEXTE000698"></a>
Al implementar la aplicación, el supervisor configura el Groupware Usuario estándar.

Esta configuración consiste en crear usuarios y grupos de usuarios, y otorgarles permisos específicos para cada control en cada ventana de la aplicación. Estos permisos permiten deshabilitar controles, grupos de controles u opciones de menú, y hacerlos visibles o invisibles.

**Para configurar el Groupware Usuario, simplemente**:

1. Inicie la aplicación (ejecutable o prueba desde WINDEV) y entre como supervisor:

	- Nombre: supervisor

	- Contraseña: supervisor <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0007.gif&type=thumb)





2. Seleccione la opción "Configurar groupware". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0008.gif&type=thumb)


3. Enseguida, se abre la ventana de gestión del Groupware Usuario. Esta ventana permite:

	- administrar usuarios y grupos, 

	- administrar permisos, 

	- ver estadísticas, 

	- migrar datos procedentes de la versión 17 o anterior del Groupware Usuario.






<a name="NOTE4_2"></a>


### Administrar usuarios
<a name="administrar_usuarios_ELTPARAGRAPHE000381"></a>

La administración de usuarios consiste en:

- crear usuarios,

- crear grupos,

- asociar usuarios y grupos. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9grer%20le%20GPU2%20-%20HC%20N%B0009.gif&type=thumb)



Para crear un nuevo usuario, debe especificar:

- el apellido del usuario.

- el nombre del usuario.

- el nombre de usuario (obligatorio). El nombre de usuario es el identificador utilizado para iniciar sesión en la aplicación.

- la contraseña del usuario. La contraseña es opcional y puede ser introducida por el usuario la primera vez que inicie sesión (seleccione la opción correspondiente).




Puede definir el usuario como supervisor de la aplicación.

También puede modificar o eliminar usuarios. Cuando se elimina un usuario, se puede eliminar todo el usuario o solo los permisos otorgados.

**Los usuarios se pueden agrupar**.

Para asociar un usuario a un grupo, simplemente arrástrelo y suéltelo en el grupo seleccionado.

Un usuario puede estar asociado a varios grupos.

**Observaciones**:

- Se recomienda cambiar la contraseña del supervisor la primera vez que utilice la aplicación.

- Si utiliza un directorio LDAP, puede importar los usuarios desde el directorio para administrar los permisos.



<a name="NOTE4_3"></a>


### Administrar permisos
<a name="administrar_permisos_ELTPARAGRAPHE000417"></a>

El supervisor puede administrar los permisos concedidos a cada usuario (o grupo de usuarios) sobre los elementos de las ventanas del proyecto.

Se puede definir un estado específico para todos los elementos de una ventana asociada a un usuario.

Los elementos de las ventanas, ventanas internas y modelos de ventanas son los siguientes:

- controles.

- grupos de controles.

- opciones de menú.




Los siguientes estados están disponibles para cada elemento:

- ***Predeterminado***: el comportamiento del elemento corresponde al comportamiento predeterminado, definido en la aplicación.

- ***Inactivo***: el elemento se muestra pero no se puede realizar ninguna entrada.

- ***En gris***: el elemento se muestra en gris. No se puede realizar ninguna entrada.

- ***Invisible***: el elemento no se muestra.



<a name="NOTE4_4"></a>


### Mostrar estadísticas
<a name="mostrar_estadisticas_ELTPARAGRAPHE000441"></a>

Puede obtener las estadísticas de uso de la aplicación por usuario durante un período específico.
<a name="NOTE4_5"></a>


### Migrar datos
<a name="migrar_datos_ELTPARAGRAPHE000450"></a>

Desde la versión 18, se ha optimizado el Groupware Usuario. Los archivos de datos utilizados por el groupware han cambiado.

El administrador del Groupware Usuario puede migrar los datos al nuevo formato y así recuperar automáticamente los datos utilizados en las versiones anteriores. Esta migración puede realizarse independientemente del formato de los datos: HFSQL Classic, HFSQL Client/Server o Conector Nativo.

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Consejos para una aplicación que utiliza el Groupware Usuario
<a name="consejos_para_una_aplicacion_que_utiliza_groupware_usuario_ELTTEXTE000746"></a>


### Grupos de controles
<a name="grupos_controles_ELTPARAGRAPHE000463"></a>

Para simplificar la gestión de los grupos de usuarios según los usuarios, se recomienda utilizar grupos de controles.

Puede crear grupos de controles en las ventanas en función de los controles que deben mostrarse a un usuario específico.

La posibilidad de asociar un control a varios grupos de controles aumenta el número de combinaciones posibles.

Estos grupos de controles se pueden crear en la aplicación solo para administrar el groupware, no se requiere ninguna programación específica.
<a name="NOTE5_2"></a>


### Visibilidad de los controles
<a name="visibilidad_los_controles_ELTPARAGRAPHE000478"></a>

Al desarrollar una aplicación, puede definir las opciones de visibilidad de los elementos de las ventanas:

- en la descripción del elemento (ventana de 7 pestañas).

- mediante programación (propiedades [State](../Proprietes/2510039.md) o [Visible](../Proprietes/2510138.md)).


Al configurar el Groupware Usuario, el supervisor puede definir diferentes opciones de visibilidad. Las opciones definidas por el supervisor tienen prioridad.

Por ejemplo, se creó un botón que permite activar un control. Sin embargo, el supervisor deshabilitó dicho control. Esto significa que su código no se tendrá en cuenta y que el control no se activará.
<a name="NOTE5_3"></a>


### Definición de permisos
<a name="definicion_permisos_ELTPARAGRAPHE000500"></a>

Para definir los permisos de las funcionalidades de la aplicación, le recomendamos:

- establecer los permisos según los requisitos del usuario de la aplicación antes de crear el procedimiento de instalación. Simplemente agregue los archivos de datos del groupware al crear la instalación de la aplicación.

- proporcionar una documentación técnica que incluya los nombres de los controles, grupos de controles y opciones que deben configurarse según el nivel de uso definido para la aplicación.




| [Página anterior](../Concepts_WD/1410087066.md) | [Tabla de contenido](../Concepts_WD/1410087098.md) | [Página siguiente](../Concepts_WD/1410087068.md) |
| --- | --- | --- |




