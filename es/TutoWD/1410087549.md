
## Lección 7.2. Gestión automática de errores
<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE000161"></a>


- ¿Qué es la gestión automática de errores?

- Configuración de la gestión automática de errores.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 10 min |

| [Lección anterior](../TutoWD/1410087548.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087550.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000208"></a>
WINDEV gestiona los errores automáticamente. Esta funcionalidad permite reducir el número de líneas de código y centralizar el manejo de errores.

El uso de esta funcionalidad también hace que el código sea más fácil de leer.
<a name="NOTE2_2"></a>


### Modo de funcionamiento
<a name="modo_funcionamiento_ELTPARAGRAPHE000030"></a>

Cuando una función WLanguage detecta un error, se realizan dos operaciones:

- la función devuelve un valor de error (por ejemplo, la función [fOpen](../WDLang1/3036036.md) devuelve "-1" si no se pudo abrir el archivo especificado).

- WLanguage detecta el error (la variable ***ErrorOccurred*** se establece en <u><u><u><u>True</u></u></u></u>), y se puede obtener la información sobre el error con la función [ErrorInfo](../WDLang1/3013008.md).




Esta segunda operación puede ser gestionada automáticamente por el sistema de gestión de errores de WINDEV.
<a name="NOTE2_3"></a>


### Implementación
<a name="implementacion_ELTPARAGRAPHE000052"></a>

La gestión automática de errores puede configurarse:

- en el editor de código: haga clic en el enlace "En caso de error: por programa" en el editor de código: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P7_Gestion%20automatique%20des%20erreurs%20-%20HC%20N%B0004.jpg)


- mediante programación con la función [ErrorChangeParameter](../WDLang1/3034009.md).



<a name="NOTE2_4"></a>


### Tipos de errores
<a name="tipos_errores_ELTPARAGRAPHE000066"></a>

Pueden ocurrir dos tipos de errores en WLanguage:

- errores "no fatales" (también llamados errores de ejecución): en la mayoría de los casos, estos errores se gestionan en el código y no detienen la aplicación. Por ejemplo, abrir un archivo al que no se puede acceder o un archivo que no existe.

- errores "fatales" (también llamados errores de programación): en la mayoría de los casos, estos errores están relacionados con un problema de desarrollo (acceso a un archivo no declarado, uso de controles no existentes, etc.). También puede producirse un error "fatal" después de un error "no fatal" que no se procesó correctamente. En este caso, la aplicación se detendrá.




El mecanismo de gestión de errores gestiona estos dos tipos de errores utilizando métodos diferentes para establecer comportamientos adaptados a los errores encontrados.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Gestión automática de errores: ejemplo didáctico
<a name="gestion_automatica_errores_ejemplo_didactico_ELTTEXTE000250"></a>


- Para entender los diferentes casos de error, utilizaremos un ejemplo didáctico proporcionado con WINDEV.

	1. Vaya a la página de inicio de WINDEV (Ctrl + &lt;). 

	2. En la página de inicio, haga clic en "Abrir un ejemplo". La lista de ejemplos completos, didácticos y unitarios proporcionados con WINDEV aparece.

	3. Escriba "Error" en la barra de búsqueda. Solo se muestran los ejemplos que contienen esta palabra. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P7_Acc%E8s%20exemples%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Haga doble clic en "WD Auto Error Management". El proyecto se carga.




- Este proyecto muestra cómo manejar:

	- de un error no fatal (apertura de un archivo que no existe).

	- de un error fatal (división por 0).

	- de un error en varios niveles.







- Pruebe el proyecto (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Go_Projet_WB_GAF.jpg) en los botones de acceso rápido).

	1. Haga clic en "Handle non-fatal errors".

	2. La siguiente ventana se abre. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P7_Gestion%20automatique%20des%20erreurs%20-%20HC%20N%B0001.jpg&type=thumb)


	3. Haga clic en "Test error handling".

4. Cuando se ejecuta la línea de código que provoca el error, se muestra un mensaje de error que permite al usuario reintentar la operación, cancelar la operación o detener la aplicación. La opción "Debug" (depurar) debe utilizarse: 

	- en modo de prueba, para depurar directamente la aplicación. 

	- en modo ejecutable, para depurar un ejecutable directamente desde WINDEV.




- Haga clic en "Handle fatal errors".

	1. La siguiente ventana se abre. Esta ventana comprueba el error cuando un número entero se divide por 0. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P7_Gestion%20automatique%20des%20erreurs%20-%20HC%20N%B0002.jpg&type=thumb)


	2. Haga clic en "Test error handling".

3. Cuando se ejecuta la línea de código que provoca el error, se llama automáticamente a un procedimiento. Este procedimiento muestra el mensaje de error y detiene el proceso actual.

4. Haga clic en "Aceptar" y cierre la ventana.




- Haga clic en "Handle errors on several levels".

	1. La siguiente ventana se abre. Esta ventana comprueba un error en varios niveles (por ejemplo, un proceso que llama a un procedimiento que abre un archivo que no existe). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P7_Gestion%20automatique%20des%20erreurs%20-%20HC%20N%B0003.jpg&type=thumb)


	2. Haga clic en "Test error handling".

3. Al ejecutar la línea de código que provoca el error:

	- el procedimiento devuelve "False" al proceso de llamada.

	- el proceso de llamada muestra un mensaje de error y detiene el proceso.




- Detenga la prueba de la aplicación.


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=exemple-WD.png) | Ejemplo | WINDEV también ofrece una gestión automática de errores HFSQL. Para obtener más información, consulte el ejemplo didáctico "WD Detecting HFSQL Errors" (proporcionado con WINDEV). Puede acceder a este ejemplo desde la página principal de WINDEV. |





| [Lección anterior](../TutoWD/1410087548.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087550.md) |
| --- | --- | --- |




