
## Lección 4.11. Consumir un Webservice
<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE000186"></a>


- Presentación.

- Importar y consumir un Webservice.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 10 min |



| [Lección anterior](../TutoWD/1410087525.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087527.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000233"></a>
En la mayoría de los casos, un Webservice es una aplicación a la que se puede acceder a través de protocolos estándar de Internet. Los servicios Web permiten que varios equipos conectados a través de Internet interactúen entre sí.

A través de los servicios Web, se pueden ejecutar procedimientos y procesos en un servidor Web remoto (.NET, SOAP o J2EE) desde un equipo cliente.

Con WINDEV, los servicios Web se pueden utilizar como cliente, a través del protocolo SOAP en HTTP (protocolo estándar de Internet para la transferencia de páginas HTML), utilizando las funciones SOAPxx, DotNetxx y J2EExx.

Independientemente de la plataforma del servidor Web (.NET, J2EE, etc.), se puede acceder a un servicio Web mediante el protocolo SOAP.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Con WINDEV, no necesita ser un experto para conocer estos conceptos. ¡Un asistente se encarga de "casi" todo! |




<a name="NOTE2_2"></a>


### Ejemplo práctico
<a name="ejemplo_practico_ELTPARAGRAPHE000038"></a>

Un Webservice específico de este tutorial le permitirá probar las diferentes operaciones que se pueden realizar en un Webservice.

En el proyecto "WD Full Application", el Webservice permite consultar la base de datos de un proveedor para comprobar las existencias de un producto utilizando su referencia.

Primero, vamos a importar un Webservice al proyecto "WD Full Application", y vamos a utilizarlo en la aplicación para comprobar la disponibilidad de un producto desde una ficha de producto.

- Abra de nuevo el proyecto en el que trabajó en la lección anterior. 

	1. Vaya a la página de inicio de WINDEV (Ctrl + &lt;).

	2. En la página de inicio, haga clic en "Tutorial", luego en "Part 4 - Full application with data" haga doble clic en "Full application - Exercise".

	3. Un cuadro de diálogo le pide que abra el proyecto en el que trabajó en la lección anterior. Puede abrir la copia local o el proyecto original. Seleccione "Abrir la copia local".





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=exemple-WD.png) | Corregido | **Hay un proyecto completado disponible.** Este proyecto contiene todos los elementos creados o importados en esta lección. Para abrir el proyecto completado, vaya a la página de inicio y haga clic en "Tutorial", luego en "Part 4 - Full application with data", haga doble clic en "Full application - Answers". |







- Vaya a la configuración "Ejecutable Windows de 32 bits": en el panel "Explorador de proyectos", en la carpeta "Configuraciones", haga doble clic en "Ejecutable Windows de 32 bits".




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Importar un Webservice
<a name="importar_webservice_ELTTEXTE000299"></a>


- Para importar un Webservice al proyecto:

	1. En la pestaña "Proyecto", en el grupo "Proyecto", despliegue "Importar" y seleccione "Un Webservice".

	2. El asistente de importación se abre automáticamente. Pase a la etapa siguiente.

	3. Especifique la dirección a la que debe importarse la descripción WSDL del Webservice: 
			
		```txt
		https://examples.webdev.info/WSTUTORIALV2_WEB/awws/WSTutorialV2.awws?wsdl
		```

			Recordatorio: El Webservice permite consultar la base de datos de un proveedor para comprobar las existencias de un producto utilizando su referencia.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Consommation%20WS%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Pase a la etapa siguiente. El Webservice se ha importado correctamente.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Consommation%20WS%20-%20HC%20N%B0002.jpg&type=thumb)




Veamos más de cerca los elementos que se muestran en el panel "Explorador de proyectos": <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Consommation%20WS%20-%20HC%20N%B0003.jpg)
La estructura contiene:

- el nombre del Webservice (WSTutorialV2, en este ejemplo),

- el nombre de cada función (ProductInStock, en este ejemplo).




Para ver la sintaxis de llamada del Webservice, haga doble clic en el nombre de la función en el panel "Explorador de proyectos". El editor de código muestra la descripción de la función, con el prototipo para llamar a la función:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Consommation%20WS%20-%20HC%20N%B0004.jpg&type=thumb)


<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Consumir un Webservice
<a name="consumir_webservice_ELTTEXTE000323"></a>
En el ejemplo "WD Full Application", la llamada al Webservice se incluirá en la pestaña en la que se muestra la lista de productos. Un botón "In stock?" permitirá comprobar si el producto mostrado a través del Webservice está disponible.



- Para utilizar el Webservice:

	1. Abra la ventana "WIN_Menu" en el editor (haga doble clic en la ventana en el panel "Explorador de proyectos", por ejemplo).

	2. Agregue un control Botón en la pestaña "List of products":

		- En la pestaña "Creación", en el grupo "Controles frecuentes", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Bouton_GAF.jpg).

		- Haga clic debajo del botón "Modify".

		- El control se crea automáticamente.




3. Modifique las características del control (seleccione "Descripción" en el menú contextual): 

	- Introduzca el nombre "BTN_InStock" para este control. 

	- Introduzca el título "In stock?".  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Consommation%20WS%20-%20HC%20N%B0005.jpg&type=thumb)




- Vamos a probar el Webservice:

	1. Pruebe el proyecto (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Projet_WD_GAF.jpg) en los botones de acceso rápido).

	2. Haga clic en la pestaña "List of products".

	3. Seleccione un producto en el control Tabla y haga clic en el botón "In stock?".  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Consommation%20WS%20-%20HC%20N%B0006.jpg&type=thumb)


	4. Valide la ventana de información y cierre la aplicación. 




| [Lección anterior](../TutoWD/1410087525.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087527.md) |
| --- | --- | --- |




