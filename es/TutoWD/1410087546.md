
## Lección 6.3. Analizador de rendimiento
<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE000222"></a>


- Presentación.

- Iniciar el analizador de rendimiento.

- Analizar el resultado.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 15 min |

| [Lección anterior](../TutoWD/1410087545.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087548.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000269"></a>
El analizador de rendimiento (también llamado Profiler) comprueba y optimiza el tiempo de ejecución de los procesos de su aplicación. 

**El principio es muy sencillo**:

- Pruebe su aplicación.

- Durante la prueba, el analizador de rendimiento realiza un seguimiento de todas las acciones realizadas y guarda los tiempos de ejecución de cada uno de los procesos.




Al final de la prueba, el analizador de rendimiento muestra:

- las 10 operaciones que más tiempo consumen,

- la duración y el número de llamadas de todos los procesos ejecutados.


El proyecto "WD Optimization" tiene una ventana específica que muestra ejemplos de resultados obtenidos con el analizador de rendimiento.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Iniciar el analizador de rendimiento
<a name="iniciar_analizador_rendimiento_ELTTEXTE000293"></a>
El analizador de rendimiento se puede iniciar:

- **desde el editor de WINDEV**:
	En este caso, el proyecto se ejecuta automáticamente en modo de prueba. Puede manipular la aplicación e iniciar los procesos que desee. 
	Para volver al editor de WINDEV, simplemente salga de la aplicación..
	El analizador de rendimiento muestra el resultado del análisis. El resultado se guarda en un archivo WPF.

- **desde uno de los procesos de WLanguage**, con las siguientes funciones:
	


|   |   |
| --- | --- |
| [ProfilerStart](../WDLang1/3013012.md) | Inicia la "recopilación de datos" para el analizador de rendimiento. |
| [ProfilerEnd](../WDLang1/3013002.md) | Detiene la "recopilación de datos" para el analizador de rendimiento. |


	En este caso, solo se analizará el código entre [ProfilerStart](../WDLang1/3013012.md) y [ProfilerEnd](../WDLang1/3013002.md). El resultado se guarda en un archivo WPF.




- En este ejemplo utilizaremos el primer método. Para iniciar el analizador de rendimiento en el proyecto "WD Optimization":

	1. En la pestaña "Proyecto", en el grupo "Auditoría y rendimiento", despliegue "Analizar rendimiento" y seleccione "Analizar rendimiento".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El analizador de rendimiento también puede iniciarse desde el cuadro de mando del proyecto, a través del widget "Rendimiento". Para ello:<br><br>		- active el widget si es necesario (haga clic en el enlace "Haga clic para reactivar").<br><br>		- expanda la flecha desplegable y seleccione "Analizar rendimiento". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P6_Analyseur%20performances%20-%20HC%20N%B0001.jpg)<br><br><br><br> |





	2. La prueba del proyecto inicia.

	3. Haga clic en el botón "Test window of performance profiler".

	4. Haga clic en el botón "Process to analyze".

	5. Valide la ventana de información y detenga la prueba del proyecto. La ventana del reporte del analizador de rendimiento se abre.







<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Analizar el resultado
<a name="analizar_resultado_ELTTEXTE000335"></a>


- Analicemos la ventana del reporte del analizador de rendimiento. Los resultados se muestran en varias pestañas:

	- la pestaña "Resumen" muestra los diez procesos más largos.

	- la pestaña "Mapeo" muestra una gráfica de los principales procesos.

	- la pestaña "Detalles" muestra todos los procesos que se ejecutan durante la prueba de la aplicación (desde el más lento hasta el más rápido).

	- la pestaña "Llamadas" muestra los detalles de las operaciones realizadas en un proceso. 







- Veamos estas diferentes pestañas en nuestro ejemplo.

	- La pestaña "Resumen" muestra los diez procesos más largos. En nuestro ejemplo, podemos ver que el procedimiento local "UpdateProductStock" tarda más de 3 segundos en ejecutarse. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P6_Analyseur%20performances%20-%20HC%20N%B0002.jpg&type=thumb)


	- La pestaña "Mapeo" muestra una gráfica de los elementos que tomaron más tiempo. En nuestro caso, es una llamada a la función [Ping](../WDLang1/3014013.md): <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P6_Analyseur%20performances%20-%20HC%20N%B0003.jpg&type=thumb)




- En nuestro caso, la pestaña "Detalles" indica que la llamada a la función "Ping" es uno de los elementos que más tiempo tarda.

	1. Seleccione esta línea. Vamos a comprobar si esta ralentización se debe a un problema específico.

	2. Haga clic en "Llamadas" para ver los detalles de las llamadas al procedimiento **UpdateProductStock**. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P6_Analyseur%20performances%20-%20HC%20N%B0005.jpg&type=thumb)


	3. Seleccione la línea "Ping" y haga clic en "Código": la línea de código correspondiente aparece en el editor. 

4. Cierre el analizador de rendimiento. 

5. La línea de código que se ejecuta es la siguiente
			
		```wl
		// Checks the accessibility of the supplier server
		Ping("supplier-addr")
		```
La ralentización se debe a que no se puede acceder a la dirección especificada para la función [Ping](../WDLang1/3014013.md). 
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El editor de código muestra un ícono de "Camino equivocado" para indicar que se encontró un error en esta línea de código en tiempo de ejecución. Los detalles del error se muestran al pasar el ratón por encima del ícono. |










- Probemos cómo funciona la aplicación cuando se optimiza el código:

	1. Reemplace la línea de código que contiene la función [Ping](../WDLang1/3014013.md) por la siguiente línea de código:
			
		```wl
		// Checks the accessibility of the supplier server
		Ping(“www.google.com”)
		```


	2. Guarde el código (Ctrl + S).







- Vamos a volver a abrir el analizador de rendimiento:

	1. En la pestaña "Proyecto", en el grupo "Auditoría y rendimiento", despliegue "Analizar rendimiento" y seleccione "Analizar rendimiento".

	2. La prueba del proyecto inicia.

	3. Haga clic en el botón "Test window of performance profiler".

	4. Haga clic en el botón "Process to analyze".

	5. Valide la ventana de información y detenga la prueba del proyecto. La ventana del reporte del analizador de rendimiento se abre.

	6. En la pestaña "Mapeo", la función [Ping](../WDLang1/3014013.md) no aparece con la misma importancia. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P6_Analyseur%20performances%20-%20HC%20N%B0006.jpg&type=thumb)








- Cierre la ventana de reporte del analizador de rendimiento.




| [Lección anterior](../TutoWD/1410087545.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087548.md) |
| --- | --- | --- |




