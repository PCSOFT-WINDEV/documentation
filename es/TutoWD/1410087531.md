
## Lección 4.16. SCM
<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE000643"></a>


- Presentación.

- Administrador de Código Fuente.

- Uso del Administrador de Código Fuente.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 30 min |



|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=vierge.png) | Express | El Administrador de Código Fuente no está disponible en la versión Express. |





| [Lección anterior](../TutoWD/1410087530.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087540.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Introducción
<a name="introduccion_ELTTEXTE000708"></a>
El desarrollo de un gran sistema informático requiere la participación de varios desarrolladores. Los desarrolladores deben trabajar en un único proyecto WINDEV y compartir diferentes recursos (ventanas, clases, etc.).

WINDEV dispone de un Administrador de Código Fuente llamado "SCM" que permite compartir código fuente de diferentes proyectos entre desarrolladores, y obtener el historial completo de los cambios realizados (en el código, interfaz, etc.).

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## SCM (Administrador de Código Fuente)
<a name="scm_administrador_codigo_fuente_ELTTEXTE000732"></a>


### Principio del SCM
<a name="principio_del_scm_ELTPARAGRAPHE000040"></a>

El Administrador de Código Fuente permite para almacenar y compartir proyectos y sus elementos.

El principio es el siguiente:

- Una versión de referencia de cada uno de los proyectos se almacena en un servidor. Este conjunto de versiones se llama "Repositorio".

- Cada desarrollador tiene una copia local de los diferentes proyectos.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=GestionnaireDeSources1.gif)


- Cuando un desarrollador desea hacer cambios en el elemento de un proyecto (ventana, reporte, consulta, etc.), le informa al SCM que será el propietario del elemento de manera temporal. Para ello, el desarrollador debe extraer el elemento del repositorio.

- El desarrollador adquiere permisos exclusivos sobre el elemento: puede realizar los cambios que desea en dicho elemento.

- Los otros desarrolladores siguen trabajando con la copia de la versión de referencia del elemento (que se encuentra en el repositorio).

- Una vez que el desarrollador ha realizado los cambios, reintegra el elemento en el repositorio.

- Los demás desarrolladores reciben una notificación automática cuando se efectúa la reintegración. Así, pueden actualizar su copia local.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=GestionnaireDeSources_synch.gif)



El SCM gestiona el trabajo en equipo y permite obtener el historial de todos los cambios. Además, permite administrar y controlar los elementos compartidos entre varios proyectos.

|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | También se pueden compartir elementos fuente a través de GitHub. <br>El entorno permite guardar proyectos, ventanas, páginas, reportes, clases, conjuntos de procedimientos y código en un repositorio Git. Para obtener más información, consulte [Compartir proyectos a través de Git](../Editeurs/9500230.md). <br>Sin embargo, se recomienda utilizar el SCM. En el SCM, además de comparar texto, se pueden comparar otros objetos (como las propiedades de los controles, por ejemplo). Una interfaz específica del SCM permite fusionar y comparar elementos fácilmente. |




<a name="NOTE3_2"></a>


### Crear un repositorio
<a name="crear_repositorio_ELTPARAGRAPHE000074"></a>

Para compartir un proyecto mediante el Administrador de Código Fuente, se debe crear un repositorio. El repositorio debe crearse una sola vez en el servidor.

El repositorio se puede crear:

- al instalar WINDEV.

- al crear un proyecto que utiliza el SCM.

- al importar un proyecto al SCM.

- en cualquier momento, directamente desde WINDEV o desde el administrador del SCM. 


El repositorio se puede instalar en los siguientes modos:

- HFSQL Classic, 

- HFSQL Client/Server, 

- PCSCloud (solución paga, lista para usar). El modo PCSCloud permite acceder a las fuentes de los proyectos desde cualquier lugar, en cualquier momento. Este modo corresponde a una Nube privada (servidor dedicado) y ofrece numerosas opciones (plataforma específica, Centros de Control, etc.). Para obtener más información, consulte [PCSCloud](https://pcscloud.net/UK/cloud_development.awp).

- SCMDrive (solución paga, lista para usar). El modo SCMDrive permite acceder a las fuentes de los proyectos desde cualquier lugar, en cualquier momento. Esta solución utiliza un servidor compartido. Para obtener más información, consulte [SCMDrive](https://pcscloud-drive.net/UK/SCMDrive/index.awp).




- En este caso, vamos a crear el repositorio al importar el proyecto al SCM, en la etapa siguiente.


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Le recomendamos hacer copias de seguridad del repositorio de forma regular. Para ello: <br><br>- conectarse como administrador a la herramienta de administración del SCM. <br><br>- en la pestaña "Administración", en el grupo "Copias de seguridad", seleccione "Copia de seguridad completa".<br><br><br> |





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Integrar un proyecto en el SCM
<a name="integrar_proyecto_scm_ELTTEXTE000798"></a>


### Agregar proyecto al SCM
<a name="agregar_proyecto_scm_ELTPARAGRAPHE000125"></a>

Para utilizar un proyecto existente con el Administrador de Código Fuente, simplemente agréguelo al repositorio. A continuación, vamos a agregar nuestro proyecto "WD Full Application". 



- Abra de nuevo el proyecto en el que trabajó en la lección anterior. 

	1. Vaya a la página de inicio de WINDEV (Ctrl + &lt;).

	2. En la página de inicio, haga clic en "Tutorial", luego en "Part 4 - Full application with data" haga doble clic en "Full application - Exercise".

	3. Un cuadro de diálogo le pide que abra el proyecto en el que trabajó en la lección anterior. Puede abrir la copia local o el proyecto original. Seleccione "Abrir la copia local". 





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=exemple-WD.png) | Corregido | **Hay un proyecto completado disponible. Este proyecto permite completar los diferentes ejercicios de esta lección.** Para abrir el proyecto completado, vaya a la página de inicio y haga clic en "Tutorial", luego en "Part 4 - Full application with data", haga doble clic en "Full application - Answers". |







- Vamos a agregar el proyecto "WD Full Application.WDP" al repositorio:

	1. En la pestaña "SCM", en el grupo "Agregar proyecto", haga clic en "Agregar proyecto al SCM". El asistente para agregar proyectos al SCM se abre: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0001.jpg&type=thumb)
Anteriormente no habíamos creado un repositorio. Vamos a crear uno.
			Observación: Crearemos un repositorio local HFSQL Classic en el equipo de desarrollo. El funcionamiento es similar para otro tipo de repositorio.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Si el repositorio está en formato HFSQL Client/Server, se puede utilizar de forma remota. |





	2. Haga clic en "Base de datos local". 

	3. La ventana para crear el repositorio se abre.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0002.jpg&type=thumb)


	4. Especifique el directorio del repositorio (por ejemplo, "C:\\Mis Proyectos\\SCM Repositorio local).

5. Valide la creación del repositorio (botón "Crear repositorio").

6. El nuevo repositorio se selecciona automáticamente en el asistente. Vamos a agregar el proyecto al repositorio.

7. Pase a la etapa siguiente.

8. El asistente propone ubicar el proyecto en el subdirectorio "Proyectos WINDEV" del repositorio. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0003.jpg&type=thumb)
Acepte esta ubicación. Pase a la etapa siguiente.

9. Seleccione los elementos del proyecto que se agregarán al repositorio. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0004.jpg&type=thumb)
Agregue todos los elementos del proyecto. Pase a la etapa siguiente.

10. El asistente le pide que seleccione las dependencias del proyecto que se agregarán al repositorio. Las dependencias corresponden a todos los elementos externos necesarios para el proyecto (imágenes, hojas de estilo, etc.).
			Agregue todas las dependencias del proyecto. Pase a la etapa siguiente.

11. Valide la integración del proyecto en el SCM. El proyecto y sus elementos se agregan al repositorio.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | **Compartir elementos del proyecto**<br><br>Al agregar proyectos que comparten los mismos recursos (mismo análisis, mismas ventanas, etc.) al SCM, los elementos se pueden compartir entre varios proyectos. Así, solo se debe agregar el elemento una sola vez al SCM y los cambios realizados en dicho elemento se aplican automáticamente a los demás proyectos. |







<a name="NOTE4_2"></a>


### Abrir un proyecto desde el SCM
<a name="abrir_proyecto_desde_scm_ELTPARAGRAPHE000199"></a>

En nuestro ejemplo, el proyecto se integra en el SCM y puede utilizarse directamente.

**En un caso real, para que otros desarrolladores trabajen en un proyecto que se encuentra en el Administrador de Código Fuente, deben descargar una copia del proyecto en el equipo local.**

En ese caso, siga los siguientes pasos:

1. Abra el proyecto desde el Administrador de Código Fuente: en la pestaña "Inicio", en el grupo "General", despliegue "Abrir" y seleccione "Abrir un proyecto desde el SCM".

2. Especifique la ubicación del repositorio y valide (esta etapa es necesaria solo si el proyecto actual no pertenece al SCM):  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0005.jpg&type=thumb)


3. En la pantalla que aparece, especifique (si es necesario) la conexión y el directorio local:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0006.jpg&type=thumb)



**Observación**: Si ya se ha abierto el proyecto desde el SCM, puede abrir el proyecto normalmente o sobrescribir el contenido (para obtener todo el proyecto). Esta operación debe ser realizada una sola vez por cada desarrollador que utilice el proyecto. El desarrollador que agregó el proyecto al Administrador de Código Fuente (usted en este caso) no tiene que realizar ninguna operación.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La próxima vez, podrá abrir un proyecto del SCM como cualquier otro proyecto: solo debe abrir el proyecto (archivo ".WDP") que corresponde a la copia local. |




<a name="NOTE4_3"></a>


### Configuración del SCM
<a name="configuracion_del_scm_ELTPARAGRAPHE000235"></a>

Antes de empezar a trabajar en los elementos del proyecto que se encuentran en el SCM, debe configurar el modo de extracción de dichos elementos.

Al trabajar con los elementos de un proyecto integrado en el SCM, se debe extraer el elemento del repositorio para poder modificarlo, y una vez realizados los cambios, se puede reintegrar. Así, el elemento modificado vuelve a estar disponible para todos los usuarios del SCM.

**WINDEV propone dos modos de extracción de los elementos del proyecto**:

- **modo estándar**: si abre un elemento del SCM que no ha sido extraído, se abre una ventana que indica que el elemento debe extraerse para poder modificarlo. El elemento se puede extraer inmediatamente (con el botón de extracción de la ventana).

- **modo automático**: si intenta modificar un elemento del SCM que no ha sido extraído, el SCM propone extraerlo automáticamente. Una vez validada la extracción, se puede modificar el elemento.
	**Observación**: este modo no se recomienda cuando se utiliza el SCM con una conexión lenta a Internet.




**En este tutorial, vamos a realizar una extracción automática**.



- Para comprobar que la extracción automática está activada, en la pestaña "Inicio", en el grupo "Entorno", despliegue "Opciones" y seleccione "Opciones generales de WINDEV". En la pestaña "General", en la sección "", seleccione "".




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Manipular el proyecto mediante el SCM
<a name="manipular_proyecto_mediante_scm_ELTTEXTE000906"></a>
Vamos a trabajar con el SCM en condiciones reales y a realizar las siguientes operaciones:

- Modificar una opción del proyecto.

- Modificar una ventana del proyecto.



<a name="NOTE5_2"></a>


### Modificar una opción del proyecto
<a name="modificar_una_opcion_del_proyecto_ELTPARAGRAPHE000291"></a>



- Vamos a modificar el proyecto aplicando la plantilla a las ventanas del sistema:

	1. Abra la descripción del proyecto: en la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "Descripción".

	2. Haga clic en la pestaña "Estilo".

	3. Seleccione "Personalizar ventanas del sistema (Info, YesNo, Confirm, Dialog)".

	4. Valide la ventana de descripción del proyecto.







- Varias ventanas del SCM se abren:

	1. Primero se abre la ventana de extracción automática del proyecto. Para cambiar una característica del proyecto, éste debe extraerse.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0007.jpg&type=thumb)


	2. La opción "Reintegrar proyecto automáticamente al final de la operación" reintegra el proyecto automáticamente una vez que se han realizado todos los cambios. Conserve esta opción. 

3. Valide la ventana.

4. Varias ventanas de integración y extracción se abren par agregar el componente interno "WDFAA.wci" y sus elementos al proyecto del repositorio y extraerlos en el proyecto local. El componente contiene las ventanas del sistema que se van a personalizar. Valide las diferentes ventanas. 

5. La ventana de descripción del proyecto se cierra y el proyecto se reintegra automáticamente en el repositorio. 



<a name="NOTE5_3"></a>


### Modificar una ventana del proyecto
<a name="modificar_una_ventana_del_proyecto_ELTPARAGRAPHE000334"></a>

Vamos a modificar la ventana "WIN_Product_form": deberíamos poder modificar la imagen haciendo clic en ella (como el botón "Modificar").

Un elemento extraído (interfaz de usuario, código, etc.) puede modificarse como cualquier otro elemento de un proyecto que no está incluido en el SCM. 

Sin embargo, los otros desarrolladores no pueden ver los cambios realizados en el elemento. 

Si otros desarrolladores necesitan trabajar en el elemento extraído, utilizarán la versión del repositorio. 

Esto permite que una aplicación evolucione conservando una versión estable en el repositorio.

- Para modificar la ventana "WIN_Product_form":

	1. Seleccione la ventana "WIN_Product_form" en el explorador de proyectos y haga doble clic en el elemento para abrirlo en el editor.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0008.jpg&type=thumb)


	2. La extracción automática se activa al hacer el primer cambio: basta con mover un control para extraer el elemento. También puede hacer clic en el ícono "Extraer" de la cinta de opciones (![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0008%201.jpg)).

3. La ventana de extracción se abre:  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0009.jpg&type=thumb)




- Pruebe los cambios.

	1. Pruebe el proyecto (haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_GO_Projet_WD_GAF.jpg) en los botones de acceso rápido).

	2. Seleccione un producto y haga clic en "Modify".

	3. En la ficha que se muestra, haga clic en la imagen del producto: el selector de archivos se abre para modificar la imagen del producto. Este es el modo de funcionamiento esperado.

	4. Cierre la ventana de prueba.






<a name="NOTE5_4"></a>


### Reintegrar el elemento extraído
<a name="reintegrar_elemento_extraido_ELTPARAGRAPHE000387"></a>

Una vez que se han realizado y probado las modificaciones, se puede reintegrar la ventana en el repositorio. Así, otros desarrolladores podrán acceder a los cambios realizados.



- En la pestaña "SCM", en el grupo "Elemento actual", haga clic en "Reintegrar". La siguiente ventana se abre: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0010.jpg&type=thumb)
Esta ventana permite:

	- ver las los cambios realizados comparando el elemento del repositorio con el elemento extraído (botón "Mis cambios...").
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | **Combinar código**<br><br>Puede comparar un elemento con una de sus versiones anteriores. Esto permite comparar el código para recuperar una sección de código "perdida" o eliminada por error por otro desarrollador. |





	- acceder al historial del elemento en el repositorio (botón "Propiedades...").

	- introducir un comentario sobre los cambios realizados. De forma predeterminada, WINDEV propone el comentario que se introdujo al extraer el elemento.

	- enviar un mensaje a otros desarrolladores.

	- reintegrar los cambios realizados en el elemento y conservar el elemento extraído (opción "Conservar elemento extraído").
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Si utiliza los Centros de Control, puede finalizar la tarea actual al reintegrar el elemento en el Administrador de Código Fuente. Esta funcionalidad es útil para hacer un seguimiento de tareas, corregir errores, etc. |











- Valide la ventana de reintegración. La ventana se muestra en el editor.



<a name="NOTE5_5"></a>


### Sincronizar el proyecto
<a name="sincronizar_proyecto_ELTPARAGRAPHE000443"></a>

Se pueden definir varias opciones para configurar un proyecto integrado en el SCM. Estas opciones están disponibles en la pestaña "SCM" de la descripción del proyecto (haga clic en "Descripción" en la pestaña "Proyecto").  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0011.jpg&type=thumb)


Las opciones son las siguientes:

- **Proponer obtener la última versión de los elementos al abrir el proyecto**.
	Al abrir un proyecto ubicado en el SCM, esta opción propone obtener la última versión de los elementos del proyecto.

- **Proponer la reintegración de los elementos al cerrar el proyecto**.
	Al cerrar el proyecto, esta opción muestra una lista de los elementos extraídos para reintegrar algunos o todos los elementos.
	De forma predeterminada, los elementos extraídos no se reintegran al cerrar el proyecto.

- **Extraer/Reintegrar automáticamente el proyecto**.
	Esta opción permite extraer o reintegrar automáticamente el proyecto al manipular un elemento.
	Esta opción está seleccionada de forma predeterminada.



<a name="NOTE5_6"></a>


### Modo sin conexión
<a name="modo_sin_conexion_ELTPARAGRAPHE000485"></a>

El SCM permite trabajar sin conexión. Este modo permite que un desarrollador que utiliza un equipo portátil, por ejemplo, trabaje sin conexión en un proyecto que se encuentra en el repositorio.

El principio es simple:

- antes de desconectarse, en la pestaña "SCM", en el grupo "Otras acciones", despliegue "Trabajo remoto" y seleccione "Desconectarse para trabajar sin conexión".

- al volverse a conectar, en la pestaña "SCM", en el grupo "Otras acciones", despliegue "Trabajo remoto" y seleccione "Volver a conectarse y sincronizar". Luego, reintegre los elementos modificados.




En el modo sin conexión, existen dos opciones para la extracción de elementos:

- No extraer ningún elemento del SCM. Otros desarrolladores pueden trabajar con los mismos elementos durante la desconexión. Cuando vuelva a conectarse al SCM, los cambios que realizó en el elemento deben fusionarse con los cambios realizados por otros desarrolladores.

- Extraer los elementos en modo exclusivo. Nadie más puede utilizar el elemento mientras trabaja sin conexión.



<a name="NOTE5_7"></a>


### Administrador del SCM
<a name="administrador_del_scm_ELTPARAGRAPHE000528"></a>

El administrador del SCM permite manipular directamente los proyectos agregados al Administrador de Código Fuente.

Es posible:

- administrar repositorios (crear o conectarse a un repositorio).

- administrar archivos y directorios ubicados en un proyecto del repositorio (agregar, eliminar, renombrar archivos y directorios, etc.).

- administrar los archivos del repositorio (extraer, reintegrar, compartir etc.). 

- abrir diferentes herramientas (opciones, mantenimiento, etc.).

- ver el historial de un elemento.

- ver el estado de los elementos.

- hacer copias de seguridad.

- otorgar permisos a los usuarios del SCM.

- ver la lista de proyectos en los que participa para desvincularse de ellos (si es necesario).




- Abra el administrador del SCM: en la pestaña "SCM", en el grupo "Repositorio", haga clic en "Administrar". Todos los elementos del proyecto se muestran en el administrador.  <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P4_Int%E9gration%20dans%20le%20GDS%20-%20HC%20N%B0012.jpg&type=thumb)






<a name="NOTE5_8"></a>


### Desconexión del SCM
<a name="desconexion_del_scm_ELTPARAGRAPHE000574"></a>

En el resto de este tutorial, vamos a volver a manipular el proyecto "WD Full Application". Para simplificar las operaciones, se recomienda desconectarse del SCM:

1. Abra la ventana de descripción del proyecto: en la pestaña "Proyecto", en el grupo "Proyecto", haga clic en "Descripción".

2. En la pestaña "SCM", seleccione la opción "Sin SCM ni administrador externo (GIT)".

3. Valide la ventana de descripción del proyecto.




<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Conclusión
<a name="conclusion_ELTTEXTE001008"></a>
Hemos visto las principales etapas para desarrollar una aplicación.

WINDEV ofrece múltiples herramientas para optimizar las aplicaciones. Para obtener más información, consulte ["Auditorías del proyecto"](../TutoWD/1410087545.md).

| [Lección anterior](../TutoWD/1410087530.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087540.md) |
| --- | --- | --- |




