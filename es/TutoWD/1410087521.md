
## Lección 3.2. Proyecto y análisis
<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Esta lección abarcará los siguientes temas
<a name="esta_leccion_abarcara_los_siguientes_temas_ELTTEXTE000634"></a>


- Crear un proyecto.

- Crear un análisis.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=dur%E9e.png)<br> | <br>Tiempo estimado: 40 min |



| [Lección anterior](../TutoWD/1410087520.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087532.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000681"></a>
Para crear una aplicación con una base de datos, es necesario:

- Crear el proyecto relacionado con la aplicación. Este proyecto agrupará todos los elementos de la aplicación (ventanas, códigos, consultas, reportes, etc.). 

- Crear el análisis relacionado con el proyecto. El análisis permite describir todos los archivos de datos que manipula la aplicación.


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | En esta lección veremos cómo crear una aplicación con una base de datos HFSQL. Como vimos en la lección anterior, WINDEV permite crear aplicaciones que manipulan otras bases de datos.<br><br>La lección ["Anexo 2. Utilizar datos de una base de datos externa"](../TutoWD/1410087558.md) presenta las operaciones que deben realizarse para crear un proyecto y un análisis a partir de una base de datos SQL (a través de OLE DB o de los Conectores Nativos). |





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Crear un proyecto
<a name="crear_proyecto_ELTTEXTE000723"></a>
Primero vamos a crear un proyecto. Ya hemos visto cómo crear un proyecto rápidamente en la lección de WLanguage. En esta lección, veremos cómo crear un proyecto de manera detallada.



- Para crear el proyecto:

	1. Inicie WINDEV. 

	2. Vaya a la página de inicio de WINDEV (Ctrl + &lt;). 

	3. En la página de inicio, haga clic en "Crear un proyecto" y seleccione "Aplicación Windows o Linux". El asistente de creación de proyectos se abre. Las diferentes etapas del asistente le ayudarán a crear el proyecto. La información especificada en el asistente se podrá modificar más adelante.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=astuce.png) | Consejo | También puede crear un proyecto con la siguiente opción:<br><br>		1. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Cr%E9er1_GAF.jpg) en los botones de acceso rápido.<br><br>		2. La ventana de creación de nuevos elementos se abre: haga clic en "Proyecto".<br><br><br> |





	4. La primera etapa del asistente permite seleccionar el sistema operativo para el que está destinado el proyecto. Seleccione "Plataforma Windows" y vaya a la etapa siguiente del asistente (botón "Siguiente").  

	5. En esta lección, vamos a crear un proyecto "En blanco". También es posible crear un proyecto basado en un ejemplo existente, proporcionado con WINDEV. Seleccione "Crear un proyecto en blanco" y vaya a la siguiente etapa del asistente. 

	6. WINDEV le pedirá que introduzca la descripción de la plataforma. Conserve las opciones predeterminadas ("Ejecutable Windows de 64 bits" y "Ejecutable con ventanas"). Pase a la etapa siguiente del asistente.

	7. El asistente le pide que introduzca el nombre, la ubicación y la descripción del proyecto. En este caso, introduzca "WD My First Database" en el nombre del proyecto.  

	8. De forma predeterminada, WINDEV crea el proyecto en la carpeta ".\\My projects\\WD My First Database". Puede conservar la ubicación o cambiarla haciendo clic en el botón [...]. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Cr%E9ation%20-%20HC%20N%B0001.jpg&type=thumb)


	9. Las etapas del asistente se muestran a la izquierda. Puede hacer clic en la etapa que desee. Dado que las demás etapas de la "Descripción" no son estrictamente necesarias, puede hacer clic directamente en "Normas".

10. Esta etapa permite definir el estilo de código. No cambie las opciones sugeridas. Pase a la etapa siguiente. 

11. Esta etapa permite definir el tema gráfico. Seleccione "Phoenix". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Cr%E9ation%20-%20HC%20N%B0002.jpg&type=thumb)
Pase a la etapa siguiente. 
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | El tema gráfico se define a partir de plantillas. Las plantillas permiten crear rápidamente interfaces excepcionales. Una plantilla define el estilo de la ventana así como el estilo de todos los controles de la ventana. Así, la interfaz será coherente y mantendrá un aspecto homogéneo. |





12. Haga clic en la etapa "Base de datos". Vamos a especificar la información relativa a la base de datos.

13. Seleccione "Sí, crear una nueva base de datos" y valide. El asistente de creación de análisis se abre.


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Para comprender mejor las diferentes lecciones de esta parte y optimizar su formación, le recomendamos crear el proyecto "WD My First Database".<br><br>Puede acceder a un ejemplo completado en cualquier momento para verificar la validez de las operaciones realizadas.<br><br>Para abrir el proyecto completado, vaya a la página de inicio de WINDEV (Ctrl + &lt;), haga clic en "Tutorial" y seleccione "My first database - Answers". |





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Crear un análisis
<a name="crear_analisis_ELTTEXTE000801"></a>


- Las etapas para crear el análisis son las siguientes:

	1. Indique el nombre y el directorio del análisis. De forma predeterminada, el nombre del análisis corresponde al nombre del proyecto y el directorio del análisis es un directorio ".ana" en el directorio del proyecto. Conserve los parámetros predeterminados. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Cr%E9ation%20-%20HC%20N%B0003.jpg&type=thumb)
Pase a la etapa siguiente del asistente.

	2. A continuación, puede elegir los tipos de bases de datos que utiliza el proyecto. Seleccione "HFSQL Classic" (base de datos de WINDEV). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Cr%E9ation%20-%20HC%20N%B0004.jpg&type=thumb)
Pase a la etapa siguiente del asistente.

	3. Valide. El asistente de creación de archivos de datos se abre automáticamente.







<a name="NOTE4B"></a>
<a name="NOTE4B_1"></a>


## Vocabulario del análisis
<a name="vocabulario_del_analisis_ELTTEXTE000825"></a>
Antes de empezar a trabajar en el análisis, repasemos rápidamente el vocabulario utilizado en WINDEV. Algunos términos son específicos de WINDEV y pueden tener un significado diferente a los términos utilizados en otros entornos de desarrollo.

Los siguientes términos se utilizan en el **análisis**:

- **Archivo de datos**: El análisis permite describir la estructura de los archivos de la base de datos. Un "Archivo de datos" corresponde a una "tabla" en algunas bases de datos.
	En WINDEV, el término "***Tabla***" representa un objeto gráfico que permite mostrar el contenido de un archivo de datos en una tabla e introducir filas. Un tabla permite introducir los detalles de un pedido, por ejemplo.

- **Registro**: Un registro también es conocido como fila. Un registro de un archivo de datos corresponde a todos los campos definidos para el archivo de datos.

- **Campo**: En el análisis, un campo representa una sección de un archivo de datos. Los campos de un archivo de datos permiten definir la estructura de un registro.

- **Clave/Índice**: En WINDEV y su base de datos HFSQL, el concepto de "índice" está relacionado con el concepto de "clave". La noción de "clave" hace parte de las características de un campo. Las claves permiten acceder a los datos mucho más rápido y simplificar la navegación por los archivos de datos. En WINDEV, si un archivo de datos HFSQL tiene varios campos clave, se creará un solo archivo de índice en tiempo de ejecución.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Crear la descripción de los archivos de datos
<a name="crear_descripcion_los_archivos_datos_ELTTEXTE000849"></a>
Nuestra aplicación de gestión de clientes y pedidos estará asociada al siguiente análisis. 
Este análisis está compuesto por cinco archivos de datos (tablas) diferentes:

- Customer,

- Order,

- PaymentMode,

- OrderLine,

- Product.

<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0010.jpg&type=thumb)
Para crear los archivos de datos de este análisis, usaremos diferentes métodos disponibles en WINDEV.
<a name="NOTE5_2"></a>


### Crear un archivo de datos: utilizar un archivo de datos predefinido
<a name="crear_archivo_datos_utilizar_archivo_datos_predefinido_ELTPARAGRAPHE000143"></a>

- Las etapas del asistente de creación de un archivo de datos son las siguientes:

	1. En el asistente, seleccione la opción "Seleccionar una descripción entre los archivos de datos predefinidos". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Client%20-%20HC%20N%B0001.jpg&type=thumb)
Pase a la etapa siguiente del asistente. 

	2. Enseguida, se muestra la lista de archivos de datos predefinidos. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Client%20-%20HC%20N%B0002.jpg&type=thumb)
Vamos a crear el archivo de datos "Customer". En la lista de archivos de datos, seleccione "Customer". Pase a la etapa siguiente.

	3. El asistente muestra la lista de campos que se incluirán en el archivo de datos Customer. Esta lista le permite administrar varios tipos de archivos de datos Customer. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Client%20-%20HC%20N%B0003.jpg&type=thumb)


	4. Haga clic en "Ninguno" y seleccione solo los siguientes campos: CustomerID, Company, LastName, FirstName, Address, PostalCode, City, StateCounty, Country, Phone, Cell, Email. 

5. Valide el asistente ("Finalizar").

6. El archivo de datos "Customer" se crea automáticamente en el editor de análisis. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premiere%20base%20-%202%20-%20Fichier%20Client%20-%20HC%20N%B0004.jpg&type=thumb)



<a name="NOTE5_3"></a>


### Crear un archivo de datos: crear el archivo de datos y los campos
<a name="crear_archivo_datos_crear_archivo_datos_los_campos_ELTPARAGRAPHE000164"></a>

- Para crear un archivo de datos desde la ventana de creación de elementos:

	1. Haga clic en "Datos" y luego en "Archivo de datos".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | También puede crear un archivo de datos desde el editor de análisis: en la cinta de opciones, en la pestaña "Análisis", en el grupo "Creación", haga clic en "Nuevo archivo". |





	2. El asistente para crear un nuevo archivo de datos se abre.

	3. En el asistente, seleccione la opción "Crear una nueva descripción de archivo de datos". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Fichier%20Commande%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Pase a la etapa siguiente del asistente.

5. Vamos a crear el archivo de datos "Order". Introduzca el nombre "Order" en el asistente. Este nombre se usará: 

	- para manipular el archivo de datos en el código. La variable asociada al archivo de datos será "Order". 

	- para construir el nombre del archivo de datos físico asociado (archivo "Order.fic"). El título y la descripción de los elementos representados por los registros del archivo de datos aparecen automáticamente.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | En el asistente, puede introducir una descripción clara para las relaciones entre archivos de datos en el campo "Un registro representa". Una descripción se crea automáticamente a partir del nombre del archivo de datos.<br><br>En este caso, introduzca el texto "An order". |


<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Fichier%20Commande%20-%20HC%20N%B0002.jpg)


Vamos a crear los campos del archivo de datos "Order". En la ventana de descripción del archivo de datos, ya se ha creado un campo automáticamente: "OrderID". Este campo corresponde al identificador automático del archivos de datos. El campo está compuesto por las letras "ID" y el nombre del archivo de datos.

Vamos a crear los otros campos del archivo de datos.

- Primero, vamos a crear el campo "Date". Este campo contendrá la fecha del pedido.

	1. En la ventana de descripción de los campos, haga doble clic en la columna "Nombre" de la primera fila vacía. La columna pasa automáticamente al modo de edición. Introduzca el texto "Date".

	2. Haga clic en la columna "Título". El nombre del campo se muestra automáticamente. Haga clic en el título del campo para modificarlo: introduzca el texto "Order date". En la columna "Tipo", el tipo "Texto" se muestra automáticamente. Despliegue la lista y seleccione el tipo "Fecha". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Fichier%20Commande%20-%20HC%20N%B0004.jpg)


	3. Este campo será una clave (índice) del archivo de datos: las claves permiten acceder a los datos y ordenarlos más rápidamente.

	- En el caso de una base de datos SQL, el motor optimiza el uso de los índices.

	- Para recorrer un archivo de datos en orden ascendente o descendente, simplemente especifique una clave secuencial.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | La noción de "clave" hace parte de las características de un campo. Al crear un campo, puede especificar si es:<br><br>			- no clave, <br><br>			- clave única: el valor de la clave será único en todo el archivo de datos (es decir, en todos los registros del archivo de datos).<br><br>			- clave con duplicados: el valor de la clave puede estar varias veces en el archivo de datos.<br><br><br> |








- Ahora vamos a crear el campo "Status" para obtener el estado del pedido.

	1. Posicione el cursor en una nueva fila de la tabla. Introduzca:

		- el nombre: Status

		- el título: Status

		- el tipo: Botón de opción, List Box, Combo Box. En la ventana que aparece, puede seleccionar el tipo de control que se creará de forma predeterminada para el campo. En este caso, seleccione Botón de opción. Valide la ventana.




2. En la parte inferior de la pantalla, haga clic en el enlace para ver los parámetros del control enlazado al campo seleccionado. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Fichier%20Commande%20-%20HC%20N%B0005%201.jpg)
La información introducida en la ventana que se muestra se usará de forma automática al crear ventanas relacionadas con el archivo de datos. Esta ventana muestra el tipo de control y el título.
			Vamos a escribir las siguientes opciones en la pestaña "Contenido":

	- Haga clic en la pestaña "Contenido".

	- Haga clic en el botón "+" para agregar la primera opción.

	- La opción 1 corresponde a Pending. Introduzca "Pending" en el primer campo de entrada.

	- Haga clic en el botón "+" para agregar la segunda opción.

	- Introduzca "Validated" en la opción 2.

	- Haga clic de nuevo en el botón "+".

	- Introduzca "Canceled" en la opción 3. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Fichier%20Commande%20-%20HC%20N%B0006.jpg&type=thumb)



<a name="NOTE5_4"></a>


### Importar un archivo CSV
<a name="importar_archivo_csv_ELTPARAGRAPHE000282"></a>

Utilizaremos un método diferente para crear el archivo de datos "PaymentMode", que contiene las características de pago: importaremos un archivo CSV.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Un archivo CSV es un archivo de texto que utiliza un formato específico. Este archivo contiene datos en cada línea. Los datos están separados por un carácter delimitador (una coma, un punto y coma o un tabulador). |



A partir del archivo CSV que contiene los datos, WINDEV creará:

- la descripción del archivo de datos en el análisis,

- el archivo de datos HFSQL con los datos del archivo CSV.




- Para importar un archivo CSV en el análisis:

	1. En la cinta de opciones, en la pestaña "Análisis", en el grupo "Creación", despliegue "Importar" y seleccione "Importar descripciones de archivoa/tablas...".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=astuce.png) | Consejo | Para importar un archivo CSV (o cualquier otro archivo) al análisis, también puede arrastrar el archivo CSV desde el explorador de Windows y soltarlo en el editor de análisis. Esto se presentará en el siguiente párrafo. |





	2. El asistente de importación de archivos se abre automáticamente.

	3. Pase a la etapa siguiente. 

	4. Seleccione el formato de los archivos a importar. En este caso, seleccione "Archivo de texto". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Import%20CSV%20-%20HC%20N%B0001.jpg&type=thumb)
Pase a la etapa siguiente del asistente.

	5. Especifique la ruta del archivo a importar: "\\Tutorial\\WD\\Exercises\\WD My First Database\\PaymentMode.csv" que se encuentra en el directorio de instalación de WINDEV. 

	6. Pase a la etapa siguiente del asistente.

	7. Especifique las siguientes opciones de importación:

		- Los registros están delimitados por: "&lt;Retorno de carro/Salto de línea>".

		- Las columnas están delimitadas por: "&lt;Punto y coma&gt;".

		- Las cadenas están delimitadas por: "&lt;Ninguna&gt;".

		- Separador decimal: "&lt;Automático: punto o coma&gt;" <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Import%20CSV%20-%20HC%20N%B0002.jpg&type=thumb)







- Examinemos la descripción del archivo de datos importado:

	1. Seleccione el archivo de datos "PaymentMode".

	2. Haga clic derecho para abrir el menú contextual y seleccione la opción "Descripción del archivo de datos".

	3. Cambie el título del archivo de datos en la ventana que aparece: elimine "(Importado)".

	4. Valide la ventana de descripción del archivo. 







- Veamos la descripción de los campos del archivo de datos importado:

	1. Seleccione el archivo de datos "PaymentMode".

	2. Haga clic derecho para abrir el menú contextual y seleccione "Descripción de los campos".

	3. El archivo de datos "PaymentMode" no contiene un identificador automático ni una clave única. Vamos a definir el campo "Code" como una clave única:

		- Seleccione el campo Code, si es necesario.

		- En la parte derecha de la pantalla, haga clic en "Clave única". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Import%20CSV%20-%20HC%20N%B0005%201.jpg)






<a name="NOTE5_5"></a>


### Importar archivos de datos existentes directamente
<a name="importar_archivos_datos_existentes_directamente_ELTPARAGRAPHE000376"></a>

El último método para crear archivos de datos consiste en importar los archivos de datos HFSQL existentes. Vamos a utilizar este método para crear el archivo de datos "Product".



- Para importar archivos de datos HFSQL:

	1. En el explorador de archivos de Windows, abra el siguiente subdirectorio de WINDEV: "\\Tutorial\\WD\\Exercises\\WD My First Database".

	2. Seleccione el archivo "Product.fic".

	3. Arrastre el archivo "Product.fic" y suéltelo en el editor de análisis de WINDEV.

	4. El archivo de datos aparece en el editor de análisis.





Todos los archivos de datos necesarios ya están en el editor de análisis.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=avertissement.png) | ¡Atención! | Solo hemos importado la descripción del archivo de datos "Product" en el análisis del proyecto. Los datos del archivo de datos "Product" aún no se han importado al proyecto. |







- Para manipular los datos del archivo que acaba de importar: 

	1. Abra el directorio del proyecto: en la pestaña "Inicio", en el grupo "General", haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=ICO_Rep_Projet_GAF.jpg). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%205%20-%20Import%20FIC%20-%20HC%20N%B0001.jpg)


	2. Abra un nuevo explorador de archivos en el directorio "\\Tutorial\\WD\\Exercises\\WD My First Database".

3. Copie los archivos "Product.fic", "Product.mmo" y "Product.ndx" de "\\Tutorial\\WD\\Exercises\\WD My First Database" al subdirectorio EXE del directorio del proyecto.
			Observación: Se deben copiar tres archivos: 

	- "Product.fic": que contiene los datos,

	- "Product.mmo": que contiene las imágenes del producto,

	- "Product.ndx": que contiene los índices para optimizar las búsquedas en el archivo de datos. 




<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Crear relaciones
<a name="crear_relaciones_ELTTEXTE001023"></a>
Hemos creado todas las descripciones de los archivos de datos que requiere la aplicación de gestión de cuentas. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%205%20-%20Import%20FIC%20-%20HC%20N%B0002.jpg)


Ahora vamos a crear las relaciones entre los archivos de datos. Las relaciones permiten definir las restricciones de integridad (cardinalidades) entre dos archivos de datos.

- Primero, vamos a crear la relación entre los archivos de datos "Customer" y "Order": un cliente puede tener uno o más pedidos y cada pedido está relacionado con un cliente.

	1. En la cinta de opciones, en la pestaña "Análisis", en el grupo "Creación", haga clic en "Nueva relación". El puntero se convierte en un lápiz.

	2. Haga clic en el archivo de datos "Customer" y luego, en el archivo de datos "Order".

	3. El asistente de creación de relaciones se abre automáticamente.

	4. Responda a las preguntas del asistente: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0001.jpg&type=thumb)


		- Cada Customer tiene por lo menos un Order: No

- Cada Customer puede tener varios Orders: Sí

- Cada Order tiene por lo menos un Customer: Sí

- Cada Order puede tener varios Customers: No
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | También puede introducir directamente las cardinalidades de la relación en el asistente. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0001%201.jpg&type=thumb)<br> |





5. Pase a la etapa siguiente. El asistente muestra automáticamente la clave utilizada por la relación (CustomerID). <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0002.jpg&type=thumb)




- Asimismo, cree una relación entre los archivos de datos PaymentMode y Order. Estos dos archivos de datos se relacionan de la siguiente manera:

	- Un pedido ("Order") debe tener una forma de pago ("PaymentMode").

	- Una forma de pago ("PaymentMode") puede ser utilizada en varios pedidos ("Orders").


En el asistente:

- Las cardinalidades son las siguientes: PaymentMode (0,n), Order (1,1)

- La clave de relación corresponde al campo "Code".




- Ahora vamos a crear una relación entre los archivos de datos "Product" y "Order". Esta relación se utilizará para crear un archivo de relación, el archivo de líneas de pedido.

	1. Cree la relación entre los archivos de datos.

	2. Responda a las preguntas del asistente:

		- Cada Product tiene al menos un Order: No

		- Cada Product puede tener varios Orders: Sí

		- Cada Order tiene al menos un Product: No

		- Cada Order puede tener varios Products: Sí <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0004.jpg&type=thumb)







- Vamos a modificar el archivo de relación creado por WINDEV. Este archivo de relación contendrá las líneas de pedido. Vamos a:

	- Modificar el nombre del archivo de datos.

	- Modificar el nombre de los campos.

	- Agregar campos para conocer la cantidad de productos y el total de la línea de pedido.







- Primero, vamos a cambiar el nombre del archivo de datos. Ya realizamos una acción similar cuando cambiamos el título del archivo de datos importado. Sin embargo, en este caso, no solo se modificará el título: también cambiaremos el nombre del archivo físico relacionado con la descripción del archivo de datos.

	1. Seleccione el archivo de datos "Product_Order".

	2. Haga clic derecho para abrir el menú contextual y seleccione la opción "Descripción del archivo de datos".

	3. En la ventana que aparece, vaya a la pestaña "General" y cambie:

		- el nombre del archivo de datos a "OrderLine".

		- el nombre en el disco a "OrderLine". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0006.jpg&type=thumb)







- Ahora vamos a modificar los campos del archivo de relación.

	1. Haga clic en el ícono ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premiere%20base%20-%20Liaisons%20-%20HC%20N%B0006%201.jpg) (en la parte inferior izquierda de la ventana de descripción del archivo) para abrir la descripción de los campos del archivo de datos. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0007.jpg)


	2. El archivo de relación tiene 3 campos. Seleccione el campo "Reference_OrderID". Este campo es una clave compuesta.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=note.png) | Nota | Una clave compuesta es un conjunto de campos que constituyen un índice.<br><br>Este tipo de clave permite recorrer el archivo de datos según criterios complejos o realizar búsquedas específicas en varios campos al mismo tiempo. |





3. Para cambiar el nombre del campo:

	- Haga clic en la columna "Nombre".

	- Reemplace "Reference_OrderID" por "OrderLineID".

	- Haga clic en la columna "Título".

	- Reemplace el título actual por "OrderLine ID".




- Ahora vamos a agregar 3 campos a este archivo de relación: Quantity, TotalIOT y TotalBT.

	1. Mueva el cursor a una nueva fila y cree el campo "Quantity". Seleccione el tipo "Numérico" para este campo.

	2. Mueva el cursor a una nueva fila y cree el campo "TotalIOT". Seleccione el tipo "Monetario" para este campo.

	3. Una ventana indica que el campo ya existe en el análisis y le propone reutilizar sus características: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0008.jpg)
Conserve las opciones seleccionadas de forma predeterminada y valide (botón "OK"). 

	4. Mueva el cursor a una nueva fila y cree el campo "TotalBT". Seleccione el tipo "Monetario" para este campo. Una vez más, utilice la descripción existente.

	5. La descripción de los campos del archivo de datos "OrderLine" es la siguiente. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0009.jpg&type=thumb)


	6. Valide la ventana de descripción de los campos y del archivo de datos (haga clic en "OK"). 




- El análisis es el siguiente: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%20Liaisons%20-%20HC%20N%B0010.jpg&type=thumb)





<a name="NOTE7"></a>
<a name="NOTE7_1"></a>


## Generación del análisis
<a name="generacion_del_analisis_ELTTEXTE001083"></a>
La generación del análisis consiste en validar los cambios hechos en dicho análisis (crear archivos de datos, agregar o eliminar campos, etc.) y aplicarlos a todo el proyecto (páginas, controles enlazados, reportes, etc.). Así, el proyecto "sabrá" qué archivos de datos, campos y relaciones se definieron en el análisis. Será muy fácil para manipular estos elementos en los diferentes editores de WINDEV. 

Si se han realizado cambios en el análisis, al cerrar editor de análisis aparece automáticamente un cuadro de diálogo de sincronización.

También puede generar el análisis manualmente. Veamos cómo realizar esta acción. 

- Para generar el análisis:

	1. En la cinta de opciones del editor de análisis, vaya a la pestaña "Análisis", grupo "Análisis" y haga clic en "Generación". 

	2. La generación del análisis inicia automáticamente.





Las descripciones de los archivos de datos se modificaron en el análisis.

Para actualizar los archivos de datos de la aplicación, WINDEV inicia automáticamente el procedimiento de modificación de archivos de datos. Esta operación permite actualizar los archivos de datos (archivos ".fic") según su descripción en el análisis.

- El asistente de modificación automática aparece en pantalla. Valide las diferentes etapas hasta llegar a la etapa en la que aparece la lista de los archivos de datos que se tendrán en cuenta.

	- WINDEV detecta que el archivo de datos PaymentMode debe actualizarse. Mantenga este archivo de datos seleccionado. 

	- WINDEV detecta que el archivo de datos Product no está sincronizado. Seleccione este archivo de datos. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=P3_Ma%20premi%E8re%20base%20-%207%20-%20G%E9n%E9ration%20bis%20-%20HC%20N%B0001.jpg&type=thumb)


	- Pase a la etapa siguiente.

- El asistente propone hacer una copia se seguridad de los archivos de datos existentes, no cambie nada y pase a la etapa siguiente.

- El asistente le permite definir una contraseña para proteger los archivos de datos modificados en la modificación automática. Conserve las opciones predeterminadas y pase a la siguiente etapa.

- La lista de los archivos de datos a modificar aparece en la tabla. Valide el asistente.

- Los archivos de datos se actualizan.




- Cierre el editor de análisis.




Hemos visto las principales etapas para crear un análisis.

Una vez que se haya definido y generado el análisis, también es posible:

- Crear una aplicación completa utilizando el RAD (Rapid Application Development). 

- Crear una aplicación completa y personalizada. Utilizaremos este método para desarrollar una aplicación completa basada en una base de datos en la parte [parte 4](../TutoWD/1410087532.md) de este tutorial. Esta aplicación se basará en un análisis que corresponde al que se creó en esta lección.




| [Lección anterior](../TutoWD/1410087520.md) | [Tabla de contenido](../TutoWD/1410087560.md) | [Siguiente lección](../TutoWD/1410087532.md) |
| --- | --- | --- |




