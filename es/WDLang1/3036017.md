


## fCrear (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Crea un fichero externo. Este archivo se abre automáticamente en lectura/escritura.

**Observaciones**: 

- Para los archivos externos de texto manipular, se recomienda utilizar [fLoadText](../WDLang1/3036006.md)/[fSaveText](../WDLang1/3036046.md) y [fLoadBuffer](../WDLang1/1000019410.md)/[fSaveBuffer](../WDLang1/1000019412.md). 

- Para manipular archivos externos de tipo binario, le recomendamos utilizar las funciones **fCrear** o [fOpen](../WDLang1/3036036.md). 





<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo
<a class="notetitle" target="_blank" href="$DOC$=1000003036017&name=fcrear_funcion&product=WD">Ver ejemplos adicionales</a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 
```wl
// Create the external file
ResCreation = fCreate("C:\MyDirectories\File.txt")
IF ResCreation <> -1 THEN 
	...
END
```


![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 
```wl
// Create the external file
MyFile is DiskFile
ResOpening = fCreate("C:\MyDirectories\File.txt")
IF NOT ErrorOccurred THEN
	...
END
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

`<Result> = fCreate(<File path> [, <Creation options>])`
---

**`<Result>: (Integro)`**



- un entero:  

	- el identificador del fichero externo. Este identificador será utilizado por todas las funciones para manejar los archivos externos.

	- -1 si se produce un error. Para obtener más información sobre el error, utilice la función [ErrorInfo](../WDLang1/3013008.md) con la constante *errMessage*.




- una variable de tipo [DiskFile](../WDLang1/1410088883.md). Si se produce un error, la variable [ErrorOccurred](../WDLang1/3087001.md) se pone en <u><u><u><u>True</u></u></u></u>. Para obtener más información sobre el error, utilice la función [ErrorInfo](../WDLang1/3013008.md) con la constante *errMessage*.
	




**`<File path>: (Cadena de caracteres)`**

Nombre y ruta completa (o relativa) del archivo (hasta 260 caracteres). Se puede especificar la extension del fichero. Por Default, si no se especifica la extensión del archivo, el archivo externo no tendrá extensión. Se puede utilizar una ruta de tipo UNC.

Observación: Si el fichero externo ya existe (mismo directorio y mismo nombre), este fichero se destruye y se vuelve a crear.. Para no eliminar un archivo existente, utilice la función [fOpen](../WDLang1/3036036.md) con la constante *foCreateIfNotExist*.



**`<Creation options>: (Combinación de constantes opcionales)`**

Opciones para la creación de archivos: 

- Opciones de bloqueo: Se puede implementar un bloqueo cuando se abre el archivo externo: 
	


|   |   |
| --- | --- |
| *foAutomaticDeletion* | El archivo se bloquea cuando se abre y se elimina automáticamente cuando se cierra (cuando se llama a [fClose](../WDLang1/3036027.md) o cuando se cierra la aplicación).<br>Si varias aplicaciones utilizan el archivo, éste se borrará automáticamente cuando la última aplicación lo cierre (cuando se llame a [fClose](../WDLang1/3036027.md), o al final de la aplicación). |
| *foReadLock* | El archivo se creará en modo de sólo lectura. Las demás aplicaciones que utilicen este archivo no podrán leerlo. |
| *foWriteLock* | El archivo se creará en modo de sólo escritura. Las demás aplicaciones que utilicen este fichero no podrán modificarlo. |


	![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Las opciones de bloqueo no están disponibles. El archivo externo puede ser accedido libremente por las otras aplicaciones.




- Tipo de fichero externo a crear. Este tipo es utilizado por [fReadLine](../WDLang1/3036031.md) y [fWriteLine](../WDLang1/3036025.md) para definir el tipo de información a leer y escribir en el archivo externo: 
	


|   |   |
| --- | --- |
| *foAnsi* | Archivo Ansi. Esta constante se utiliza para gestionar un archivo Ansi cuando se activa el modo "Usar cadenas Unicode en tiempo de ejecución" en la configuración del proyecto.<br><br>Este modo es utilizado por Default en los proyectos WINDEV y WEBDEV. |
| *foUnicode* | Archivo Unicode. Esta constante se utiliza para gestionar un archivo Unicode cuando se activa el modo "Usar cadenas Ansi en tiempo de ejecución" en la configuración del proyecto.<br><br>Este modo es utilizado por Default en los proyectos WINDEV Mobile. |


	



Por Default, si no se especifica ninguna constante: 

- el archivo externo puede ser accedido libremente por las otras aplicaciones,

- el tipo de archivo corresponde al modo Default. 






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Gestión de errores
<a name="gestion_errores_ELTPARAGRAPHE000236"></a>

La función **fCrear** genera un error en los siguientes casos:

- el archivo está bloqueado por otro ordenador o por otra aplicación,

- el usuario no tiene derechos de escritura en el directorio de creación.

- se utilizó una cadena Unicode para &lt;File ruta&gt; en un sistema operativo como Windows 98 o Windows Me.



<a name="NOTE0_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 

### Modo de funcionamiento en Windows Vista (y posterior)
<a name="modo_funcionamiento_windows_vista_posterior_ELTPARAGRAPHE000380"></a>

Si esta función no funciona correctamente en Windows Vista (y posterior), compruebe si el archivo o directorio utilizado no está en ninguno de los directorios del sistema (directorio de Windows o directorio "Archivos de programa").

**En Windows Vista (y posteriores), con el [Mecanismo UAC](../Editeurs/2025014.md) (Cuenta de usuario control) habilitado**, debe tener privilegios de administrador para manipular y/o modificar los archivos o directorios en los directorios del sistema (directorio de Windows o directorio "Archivos de programa").

**Consejo de programación**: A manipular y/o modificar los archivos o directorios sin privilegios de administrador, debería:

- evite escribir en el directorio de Windows o en el de "Archivos de programa",

- utilizar el directorio del sistema de la aplicación (devuelto por [SysDir](../WDLang1/3073026.md) con la constante *srAppDataCommun*, por ejemplo).


**Observación**: En Windows Vista (y posteriores), el mecanismo de virtualización se utiliza para hacer que las aplicaciones sean compatibles con Vista. Si el archivo se crea en un directorio del sistema sin tener suficientes derechos, este archivo se creará en otro directorio (C:\\Users\\&lt;LOGIN&gt;AppData\\Local\\VirtualStore\\Windows\\). En este caso, el archivo no puede ser compartido entre varias aplicaciones.



<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Lógica de negocio
## Componente:
wd280std.dll
