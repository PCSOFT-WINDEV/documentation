
## Mecanismo general de excepción
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000233"></a>
Una Process de excepción general está disponible para todos los componentes del objeto con el que es associated. Esta excepción Process puede ser utilizada siempre y cuando el objeto esté disponible.

Un Process de excepción general puede ser declarado en cualquier Process. Después de la ejecución de una excepción Process, se ejecuta el código WLanguage que sigue al Process.

Por ejemplo:

- Si la excepción Process se declara en el código de inicialización del proyecto, es válida para cualquier error que se produzca en el proyecto.

- Si el proceso de excepción se declara en el código de declaración de las variables globales de una ventana, Page o reporte, es válido para cualquier error que se produzca en la ventana, en el Page, en un control de ventana, en un control Page o en un Procedure local a la ventana o al Page. Esta excepción Process deja de ser válida cuando se cierra la ventana o el Page.

- Si se declara la excepción Process en cualquier Process, es válida para cualquier error que ocurra en este Process. Esta excepción Process ya no será válida una vez que se complete el Process. Por lo tanto, una excepción Process declarada en el código de clic de un botón sólo será válida en este Process y en todos los procedimientos llamados desde este Process.




![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Atención: El mecanismo de excepciones generales no está disponible.. Sólo las excepciones específicas (CUANDO EXCEPCIÓN EN) están disponibles. Para obtener más información, consulte [Gestión de excepciones específicas](../WDLang1/3034003.md).

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Declarando varios procesos de excepciones generales
<a name="declarando_varios_procesos_excepciones_generales_ELTTEXTE000257"></a>


### Declarando las Process es de excepciones generales en el mismo Process
<a name="declarando_las_process_excepciones_generales_mismo_process_ELTPARAGRAPHE000033"></a>

La segunda excepción Process reemplazará a la primera excepción Process de la declaración de la segunda excepción Process.

**Ejemplo**: En el ejemplo Procedure, si se produce un error:

- En &lt;Código1&gt;: no se habilita la gestión de excepciones a menos que se haya definido una excepción Procedure en el código de llamada (en la ventana actual o en la Page actual o en el proyecto).

- En &lt;Código 2&gt;: la excepción activa Process es &lt;Process de la excepción 1...

- En &lt;Código 3&gt;: la excepción activa Process es &lt;Process de la excepción 2...





```txt
PROCEDURE Example()
<"Code 1">
WHEN EXCEPTION
	<Process of Exception 1>
END
<"Code 2">
WHEN EXCEPTION
	<Process of Exception 2>
END
<"Code 3">
```

<a name="NOTE2_2"></a>


### Declarando los procesos de excepción en diferentes procesos
<a name="declarando_los_procesos_excepcion_diferentes_procesos_ELTPARAGRAPHE000048"></a>

Si se declara la excepción Process es en los objetos incrustados (proyecto y ventana, proyecto y página, ventana y control o página y control por ejemplo), la excepción Process del objeto más pequeño oculta la excepción principal Process durante la vida de este objeto.

**Ejemplo**: Si se declaran los dos siguientes procesos de excepción:

- excepción Process A declarada en el código de inicialización de un proyecto,

- excepción Process B declarada en el código de declaración de variables globales de una ventana o Page.




Para todos los errores que se produzcan en la ventana o en la página, se utilizará la excepción Process B y se ocultará la excepción Process A.
<a name="NOTE2_3"></a>


### Anidando los procesos de excepción en diferentes procesos: gestionando la excepción a través de un nivel superior
<a name="anidando_los_procesos_excepcion_diferentes_procesos_gestionando_excepcion_traves_nivel_superior_ELTPARAGRAPHE000062"></a>

Si se declara la excepción Process es en objetos incrustados (proyecto y ventana, proyecto y página, ventana y control o página y control por ejemplo), el error puede ser gestionado en la excepción Process de nivel superior.

Todo lo que tienes que hacer es usar la palabra clave EXCEPCIÓN en la excepción Process.

Ejemplo:


```wl
// Project initialization code
WHEN EXCEPTION
	// Stop the application
	EndProgram()
END
```



```wl
// Global procedure ControlValue
// Returns the value of the control or "" if the control does not exist
PROCEDURE ControlValue(ControlName)
WHEN EXCEPTION
	// For the UnknownControl error, "" is returned
	IF ExceptionInfo(errCODE) = UnknownControl THEN RESULT ""
	// For another error, the error manager of the project is called
	EXCEPTION
END
```


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Principales observaciones
<a name="principales_observaciones_ELTTEXTE000293"></a>


### Una excepción Process sólo puede ser utilizada una vez
<a name="una_excepcion_process_solo_puede_ser_utilizada_una_vez_ELTPARAGRAPHE000079"></a>

Una excepción Process sólo puede ser utilizada una vez. Si se produce una segunda excepción, la excepción Process no se ejecutará. Si existe una excepción Process de nivel superior, se ejecutará esta excepción Process.

Para volver a activar una excepción Process una vez utilizada, llame a [ExceptionEnable](../WDLang1/3034002.md). **Atención**: esta función debe ser usada con mucho cuidado.

![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) **Por ejemplo**: Una excepción general Process fue declarada a nivel de ventana y a nivel de proyecto. 
Un primer error de programación ocurre en la ventana. Este error está Process ed por la excepción Process de la ventana. 
Un segundo error ocurre en la ventana. Este error es Process ed por la excepción Process del proyecto.


<a name="NOTE3_2"></a>


### Calidad del código WLanguage para procesar la excepción
<a name="calidad_del_codigo_wlanguage_para_procesar_excepcion_ELTPARAGRAPHE000107"></a>

Una excepción Process no puede ser usada dentro de una excepción WLanguage Process. Le recomendamos que compruebe la calidad del código en los procesos de excepción, ya que cualquier error provocará la visualización de la ventana estándar/Page del mecanismo de seguridad de WLanguage.
<a name="NOTE3_3"></a>


### La calidad del código después de una excepción Process
<a name="calidad_del_codigo_despues_una_excepcion_process_ELTPARAGRAPHE000114"></a>

Después de la ejecución de una excepción Process, el código WLanguage que sigue al Process se ejecuta. Le recomendamos que preste atención a la calidad de este código (para evitar que aparezca un mensaje de error).

**Ejemplo**: En el siguiente código, {"Control1"}..Valor = 5 activa la excepción Process. Al final de la excepción Process, se vuelve a ejecutar el mismo Line de código: la excepción ya fue procesada y el mecanismo de seguridad de WLanguage se activa.


```wl
// Exception process
WHEN EXCEPTION
	// Process to perform if an exception occurs
	Trace("Error")
END
// Programming error: the Control1 control does not exist
{"Control1"}..Value = 5
```


**Para evitar este problema, al final del proceso de excepción, se recomienda**:

- Asegúrate de que el problema se corrija y que no vuelva a ocurrir.

- Use las palabras clave VOLVER y RESULTADO para salir de la actual Process.

- Utilizar [SetFocusAndReturnToUserInput](../WDLang1/1410088107.md) para devolver control al usuario. 
	

- Utilice [EndProgram](../WDLang1/3013033.md) para cerrar la aplicación.




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Caso especial
<a name="caso_especial_ELTTEXTE000329"></a>
Una excepción general Process no puede ser declarada en declaraciones compuestas como:

- FOR

- LOOP

- WHILE




En este tipo de declaraciones, utilice la [excepción específica Process](../WDLang1/3034003.md).
<a name="NOTE4_2"></a>


### Proceso de excepción y Component
<a name="proceso_excepcion_component_ELTPARAGRAPHE000158"></a>

Si se ejecuta una excepción general Process tanto en el código de inicialización del Component como en el código de inicialización del proyecto que contiene el Component, se ejecutará la excepción Process del proyecto cuando se produzca un error en uno de los elementos Component.
<a name="NOTE4_3"></a>


### Proceso de excepción e subprocesos
<a name="proceso_excepcion_subprocesos_ELTPARAGRAPHE000165"></a>

Si se realiza un proceso de excepción general en el código de inicialización del proyecto, se disparará si se produce una excepción:

- en el subproceso principal,

- en un subproceso secundario iniciado con la función [ThreadExecute](../WDLang1/3077024.md).


Sin embargo, si el subproceso secundario dispara una excepción, no se podrá conocer su origen con la función [ExceptionInfo](../WDLang1/3034006.md) en el código del proyecto. Para conocer el origen de una excepción en un subproceso secundario, se debe incluir el proceso de la excepción en el subproceso secundario.

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Funciones de gestión de excepciones generales
<a name="funciones_gestion_excepciones_generales_ELTTEXTE000365"></a>
Las funciones específicas de la gestión de excepciones pueden utilizarse con los procesos de excepción generales:



|   |   |
| --- | --- |
| [ExceptionDisplay](../WDLang1/1000019408.md) | Muestra la ventana estándar de excepciones con el contenido de la excepción actual.. |
| [ExceptionEnable](../WDLang1/3034002.md) | Vuelve a habilitar la actual excepción Process si la excepción fue corregida. |
| [ExceptionInfo](../WDLang1/3034006.md) | Recupera información sobre la excepción actual. |
| [ExceptionPropagate](../WDLang1/3034014.md) | Propaga una excepción. |
| [ExceptionRestoreParameter](../WDLang1/3034008.md) | Restaura la excepción Process de una Process. |
| [ExceptionThrow](../WDLang1/3034005.md) | Activa artificialmente el mecanismo de seguridad de WLanguage lanzando una excepción. |






