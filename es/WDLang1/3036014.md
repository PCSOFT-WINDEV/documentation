


## fWrite (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Escribe un bloque de bytes en un archivo externo.

**Atención**: Los elementos añadidos no se insertan en el fichero externo, sino que sobrescriben los elementos existentes.


<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo
<a class="notetitle" target="_blank" href="$DOC$=1000003036014&name=fwrite_funcion&product=WD">Ver ejemplos adicionales</a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 
```wl
// Open an external file
FileID = fOpen("C:\MyDirectories\File.txt", foReadWrite)
IF FileID <> -1 THEN
	// Write into this file
	ResWrite = fWrite(FileID, "Meeting report")
	IF ResWrite <> -1 THEN
		// ...
	END
END
```


![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 
```wl
// Open an external file
MyFile is DiskFile
MyFile = fOpen("C:\MyDirectories\File.txt", foReadWrite)
IF NOT ErrorOccurred THEN
	// Write into this file
	ResWrite = fWrite(MyFile, "Meeting report")
	IF ResWrite <> -1 THEN
		// ...
	END
END
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

### Escribir un bloque de bytes en un archivo externo

`<Result> = fWrite(<File used> , <Block to write> [, <Size to write>])`
---

**`<Result>: (Integro)`**



- Número de bytes escritos en el archivo. 

- -1 si se produce un error. Para obtener más información sobre el error, utilice la función [ErrorInfo](../WDLang1/3013008.md) con la constante *errMessage*.




**`<File used>: (Entero o DiskFile Variable)`**



- Identificador del archivo a utilizar, definido por [fOpen](../WDLang1/3036036.md) o [fCreate](../WDLang1/3036017.md).

- Nombre de la variable [DiskFile](../WDLang1/1410088883.md) inicializada con [fOpen](../WDLang1/3036036.md) o [fCreate](../WDLang1/3036017.md).
	






**`<Block to write>: (Cadena de caracteres)`**

Bloque de bytes que se deben escribir en el archivo (hasta 2 GB).

Se respeta el formato del bloque de bytes. No se realiza ninguna conversión. 

**`<Size to write>: (Entero opcional)`**

Tamaño de la cadena a escribir (en bytes).


<a name="SYNTAX2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 
### Escribir una sección de memoria en un archivo externo (velocidad rápida)

`<Result> = fWrite(<File used> , <Address of memory section> , <Size to write>)`
---

**`<Result>: (Integro)`**



- Número de bytes (caracteres) escritos en el archivo,

- -1 si se produce un error. Para obtener más información sobre el error, utilice la función [ErrorInfo](../WDLang1/3013008.md) con la constante *errMessage*.




**`<File used>: (Entero o DiskFile Variable)`**



- Identificador del archivo a utilizar, definido por [fOpen](../WDLang1/3036036.md) o [fCreate](../WDLang1/3036017.md).

- Nombre de la variable [DiskFile](../WDLang1/1410088883.md) inicializada con [fOpen](../WDLang1/3036036.md) o [fCreate](../WDLang1/3036017.md).




**`<Address of memory section>: (Address)`**

Address de la sección de memoria que se debe escribir en el archivo.

**`<Size to write>: (Integro)`**

Tamaño (en bytes) que se debe escribir en el archivo externo (hasta 2 Go).
Este parámetro debe ser menor o igual que el tamaño real del elemento escrito en el archivo externo.. Por ejemplo, si el tamaño del elemento a escribir es igual a 100 bytes, &lt;Size to write&gt; debe ser menor o igual a 100 bytes..
Si este parámetro es menor que el tamaño real del elemento escrito, sólo se escribirá en el archivo externo el número de bytes especificado.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Gestión de errores
<a name="gestion_errores_ELTPARAGRAPHE000212"></a>

La función **fWrite** genera un error en los siguientes casos:

- el archivo no se abre,

- el archivo no es accesible en modo escritura,

- el archivo está bloqueado por otro ordenador o por otra aplicación,

- no hay espacio en disco disponible.



<a name="NOTE0_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 

### Modo de funcionamiento en Windows Vista (y posterior)
<a name="modo_funcionamiento_windows_vista_posterior_ELTPARAGRAPHE000418"></a>

Si esta función no funciona correctamente en Windows Vista (y posterior), compruebe si el archivo o directorio utilizado no está en ninguno de los directorios del sistema (directorio de Windows o directorio "Archivos de programa").

**En Windows Vista (y posteriores), con el [Mecanismo UAC](../Editeurs/2025014.md) (Cuenta de usuario control) habilitado**, debe tener privilegios de administrador para manipular y/o modificar los archivos o directorios en los directorios del sistema (directorio de Windows o directorio "Archivos de programa").

**Consejo de programación**: A manipular y/o modificar los archivos o directorios sin privilegios de administrador, debería:

- evite escribir en el directorio de Windows o en el de "Archivos de programa",

- utilizar el directorio del sistema de la aplicación (devuelto por [SysDir](../WDLang1/3073026.md) con la constante *srAppDataCommun*, por ejemplo).


**Observación**: En Windows Vista (y posteriores), el mecanismo de virtualización se utiliza para hacer que las aplicaciones sean compatibles con Vista. Si el archivo se crea en un directorio del sistema sin tener suficientes derechos, este archivo se creará en otro directorio (C:\\Users\\&lt;LOGIN&gt;AppData\\Local\\VirtualStore\\Windows\\). En este caso, el archivo no puede ser compartido entre varias aplicaciones.
<a name="NOTE0_3"></a>


### Retorno de carro al final de Line
<a name="retorno_carro_final_line_ELTPARAGRAPHE000238"></a>

[fWriteLine](../WDLang1/3036025.md) se utiliza para insertar automáticamente un retorno de carro (CR) al final del Line añadido. Para insertar un Retorno de carro (CR) con **fWrite**, basta con utilizar la constante *CR*.

Por ejemplo:

```wl
ResWrite = fWrite(FileID, "Report" + CR + "Sales - March 2021")
```

<a name="NOTE0_4"></a>


### Posición en el fichero
<a name="posicion_fichero_ELTPARAGRAPHE000259"></a>

Al abrir un archivo, la posición actual corresponde a:

- el primer byte del archivo (por Default),

- el último byte del archivo es el archivo está abierto en modo "adición" (constante *foAdd*).




Esta posición puede ser modificada por [fSeek](../WDLang1/3036039.md).

La función **fWrite** escribe los elementos especificados a partir de la posición actual. Una vez ejecutado **fWrite**, la posición actual es set al último byte escrito.

Observación: Para leer siempre el inicio, hay que llamar a [fSeek](../WDLang1/3036039.md) y luego a [fRead](../WDLang1/3036048.md). 





<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Lógica de negocio
## Componente:
wd280std.dll
