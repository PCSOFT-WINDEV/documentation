


## fUnlock (Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Desbloquea total o parcialmente un archivo externo.. El archivo fue bloqueado por [fLock](../WDLang1/3036030.md).

**Atención**: La operación de desbloqueo sólo se puede realizar si la sección a desbloquear corresponde a la sección bloqueada.


<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo
<a class="notetitle" target="_blank" href="$DOC$=1000003036020&name=funlock_funcion&product=WD">Ver ejemplos adicionales</a>

```wl
// Open an external file
FileID = fOpen("C:\MyDirectories\File.txt", foReadWrite)
IF FileID <> -1 THEN
	// Lock the file
	ResLock = fLock(FileID)
	...
	// Unlock the external file
	ResUnlock = fUnlock(FileID)
END
```



```wl
// Open an external file
MyFile is DiskFile
MyFile = fOpen("C:\MyDirectories\File.txt", foReadWrite)
IF NOT ErrorOccurred THEN
	// Lock the file
	ResLock = fLock(MyFile)
	...
	// Unlock the external file
	ResUnlock = fUnlock(MyFile)
END
```

<a name="XSYNTAX"></a>
<a name="SYNTAX1"></a>

## Sintaxis

`<Result> = fUnlock(<File used> [, <First byte to unlock> [, <Number of bytes to unlock>]])`
---

**`<Result>: (booleano)`**



- <u><u><u><u>True</u></u></u></u> si se desbloqueó el archivo,

- <u><u><u><u>False</u></u></u></u> en caso contrario.




**`<File used>: (Entero o DiskFile Variable)`**



- Identificador del archivo a utilizar, definido por [fOpen](../WDLang1/3036036.md) o [fCreate](../WDLang1/3036017.md).

- Nombre de la variable [DiskFile](../WDLang1/1410088883.md) inicializada con [fOpen](../WDLang1/3036036.md) o [fCreate](../WDLang1/3036017.md).




**`<First byte to unlock>: (Entero opcional)`**

Posición del primer byte (carácter) a desbloquear (0 corresponde al primer byte del fichero).

**`<Number of bytes to unlock>: (Entero opcional)`**

Número de bytes (caracteres) a desbloquear.  



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### La operación de desbloqueo no se ha realizado
<a name="operacion_desbloqueo_realizado_ELTPARAGRAPHE000118"></a>

La función **fUnlock** devuelve <u><u><u><u>False</u></u></u></u> si no se desbloqueó el archivo. La operación de desbloqueo se puede realizar si:

- se abre el archivo externo.

- el identificador de archivo es válido.

- el archivo o los bytes a desbloquear son idénticos a los bloqueados. Por ejemplo, si sólo se ha bloqueado una sección de archivos, esta misma sección debe desbloquearse.. Si el archivo estaba totalmente bloqueado, no puede desbloquear una sección del archivo.

- el archivo o los bytes a desbloquear han sido bloqueados por la misma aplicación y desde el mismo ordenador.



<a name="NOTE0_2"></a>


### Desbloqueo de un archivo
<a name="desbloqueo_archivo_ELTPARAGRAPHE000138"></a>

- El archivo se desbloquea por completo si no se especifica &lt;Primer byte a desbloquear&gt; y &lt;Número de bytes a desbloquear&gt;.

- El archivo se desbloquea desde el primer byte especificado (&lt;Primer byte para desbloquear&gt;) hasta el final del archivo si no se especifica &lt;Número de bytes para desbloquear&gt;.

- Un archivo bloqueado (o parcialmente bloqueado) se desbloqueará automáticamente cuando se cierre.




![Linux](https://doc.pcsoft.fr/ext/images/us/LX.png) **Caso especial**: 
El bloqueo es efectivo entre dos sitios o contextos diferentes. A diferencia de Windows, un Process no puede bloquear un archivo que fue bloqueado previamente.
<a name="NOTE0_3"></a>


### Posición en el fichero
<a name="posicion_fichero_ELTPARAGRAPHE000155"></a>

Al abrir un archivo, la posición actual corresponde a:

- el primer byte del archivo (por Default),

- el último byte del archivo si el archivo está abierto en modo "adición" (constante *foAdd*).




Esta posición puede ser modificada por [fSeek](../WDLang1/3036039.md).

La posición actual no cambia cuando se ejecuta **fUnlock**.
<a name="NOTE0_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Código de Usuario (UMC)](https://doc.pcsoft.fr/ext/images/us/MCU.png) 

### Modo de funcionamiento en Windows Vista (y posterior)
<a name="modo_funcionamiento_windows_vista_posterior_ELTPARAGRAPHE000317"></a>

Si esta función no funciona correctamente en Windows Vista (y posterior), compruebe si el archivo o directorio utilizado no está en ninguno de los directorios del sistema (directorio de Windows o directorio "Archivos de programa").

**En Windows Vista (y posteriores), con el [Mecanismo UAC](../Editeurs/2025014.md) (Cuenta de usuario control) habilitado**, debe tener privilegios de administrador para manipular y/o modificar los archivos o directorios en los directorios del sistema (directorio de Windows o directorio "Archivos de programa").

**Consejo de programación**: A manipular y/o modificar los archivos o directorios sin privilegios de administrador, debería:

- evite escribir en el directorio de Windows o en el de "Archivos de programa",

- utilizar el directorio del sistema de la aplicación (devuelto por [SysDir](../WDLang1/3073026.md) con la constante *srAppDataCommun*, por ejemplo).




<a name="XComponent"></a>

## Clasificación Lógica de negocio / UI:
Lógica de negocio
## Componente:
wd280std.dll
