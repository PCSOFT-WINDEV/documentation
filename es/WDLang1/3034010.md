


## Gestión automática de errores
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000289"></a>
El tratamiento de los errores se puede personalizar para cada Process.

No más "IF .... NOT", "IF ErrorOccurred ...." y otras pruebas anidadas que dificultan la comprensión del código.

Puede elegir entre el procesamiento automático de errores o la gestión avanzada a través de las diferentes funciones de WLanguage.

**Importante**: La gestión de errores y excepciones de automatic funciona para el Process para el que se ha definido.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Gestión automática de errores
<a name="gestion_automatica_errores_ELTTEXTE000313"></a>


### Implementación del tratamiento de errores de automatic
<a name="implementacion_del_tratamiento_errores_automatic_ELTPARAGRAPHE000024"></a>

Para aplicar el tratamiento de errores de automatic: 

1. En el editor de código, abra el Event o Process en el que se tratarán los errores: código de inicialización, código de clic, Procedure, etc.

2. En la cabecera del código, haga clic en "If Error: por programa".
	<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Erreur_auto1.gif&type=thumb)


3. La ventana que se muestra permite especificar el tipo de automatic Process a realizar:
	<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Erreur_auto2.gif&type=thumb)





**Observaciones**:

- El código de gestión del error encontrado en el Process actual tiene prioridad sobre el automatic Process es en los siguientes casos:

	- Prueba de una función como "IF NOT xxxx=True o False"

	- Prueba de errores con el [ErrorOccurred](../WDLang1/3087001.md) Variable.
			![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) El código de gestión del error encontrado en el Process actual no tiene prioridad sobre el automatic Process es: el error Process del código Y el automatic Process se ejecutará en cualquier caso.




- [ErrorChangeParameter](../WDLang1/3034009.md) puede utilizarse para la gestión avanzada de errores.



<a name="NOTE2_2"></a>


### Ejecutar proceso de error ("CASE ERROR:" en el código)
<a name="ejecutar_proceso_error_case_error_codigo_ELTPARAGRAPHE000056"></a>

Si se selecciona esta opción, se añade una Line de código al código actual "CASE ERROR: ". Las líneas de código que siguen a esta declaración se ejecutarán cuando se produzca un error en las líneas de código anteriores. Esta opción se recomienda para agrupar todos los procesos de error que puedan producirse.

**Observación**: Si se escribe "ERROR CASE" directamente en el código, se seleccionará automáticamente la opción "Ejecutar el error Process ("ERROR CASE:" en el código)".
<a name="NOTE2_3"></a>


### Ejecución de una Procedure para procesar el error
<a name="ejecucion_una_procedure_para_procesar_error_ELTPARAGRAPHE000067"></a>

Si se selecciona esta opción, se ejecutará automáticamente el procedimiento especificado para Process el error cuando se produzca un error en el Process actual. Esta opción se recomienda si en su aplicación ya se encuentra un Procedure utilizado para Process los errores. Esta Procedure será llamada automáticamente cuando se produzca un error. No hay que hacer ninguna prueba.

Este Procedure puede devolver una de las constantes que se encuentran en el tabla de abajo.

En función de la constante devuelta, WINDEV, WEBDEV o WINDEV Mobile realizará la correspondiente Process.


|   |   |
| --- | --- |
| ***opCancel*** | La función que disparó el error devuelve un error y el código continúa ejecutándose. |
| ***opEndProcess*** | La función que disparó el error devuelve un error y la actual Process se detiene. Equivale a la siguiente Line de código:<br><br>IF NOT &lt;Función HFSQL&gt; THEN SetFocusAndReturnToUserInput() |
| ***opEndProgram*** | La función que disparó el error devuelve un error y el programa se detiene.. Equivale a la siguiente Line de código:<br><br>IF NOT &lt;Función&gt; THEN EndProgram() |
| ***opRelaunchProgram*** | Finaliza la aplicación y la reinicia automáticamente..<br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible. |
| ***opRetry*** | Se vuelve a ejecutar la función que desencadenó el error.<br><br>![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta constante no está disponible en Java. |


<a name="NOTE2_4"></a>


### Mostrar error y salir de la aplicación
<a name="mostrar_error_salir_aplicacion_ELTPARAGRAPHE000110"></a>Si se selecciona esta opción, se mostrará automáticamente la siguiente ventana si se produce un error en la aplicación:<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Erreur_auto_Fen1.gif)
 Esta ventana permite al usuario:

- copy los detalles del error en el portapapeles (para transmitir estos detalles al proveedor de la aplicación, por ejemplo)

- Detener la aplicación

- Reiniciar automáticamente la aplicación una vez que se haya detenido.. Esta opción no está disponible en Java.




![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) **Observación**: si el componente "Feedback" está incluido en la aplicación (ya sea directamente o mediante el menú ("?") de la aplicación), el usuario también tiene la posibilidad de enviar el informe de error al proveedor de la aplicación. 
<a name="NOTE2_5"></a>


### Mostrar error y reanudar la entrada en la ventana actual
<a name="mostrar_error_reanudar_entrada_ventana_actual_ELTPARAGRAPHE000127"></a>Si se selecciona esta opción, se mostrará automáticamente la siguiente ventana si se produce un error en la aplicación:<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Erreur_auto_Fen2.gif)
 Esta ventana permite al usuario:

- copy los detalles del error en el portapapeles (para transmitir estos detalles al proveedor de la aplicación, por ejemplo)

- Detener la aplicación

- Cancel la operación: se cancela la actual Process. Se muestra la ventana actual de la aplicación.

- Reinicie automáticamente la aplicación una vez que haya sido detenida.




![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) **Observación**: si el componente "Feedback" está incluido en la aplicación (ya sea directamente o mediante el menú ("?") de la aplicación), el usuario también tiene la posibilidad de enviar el informe de error al proveedor de la aplicación. 
<a name="NOTE2_6"></a>


### Mostrar el error y dejar que el usuario decida
<a name="mostrar_error_dejar_que_usuario_decida_ELTPARAGRAPHE000145"></a>Si se selecciona esta opción, se mostrará automáticamente la siguiente ventana si se produce un error en la aplicación:<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Erreur_auto_Fen3.gif)
 Esta ventana permite al usuario:

- copy los detalles del error en el portapapeles (para transmitir estos detalles al proveedor de la aplicación, por ejemplo)

- Detener la aplicación

- Cancel la operación: se cancela la actual Process. Se muestra la ventana actual de la aplicación.

- Vuelva a intentar la operación: la operación que provocó el error se cancelará y luego se volverá a ejecutar.

- Reiniciar automáticamente la aplicación una vez que se haya detenido.. Esta opción no está disponible en Java.




![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) **Observación**: si el componente "Feedback" está incluido en la aplicación (ya sea directamente o mediante el menú ("?") de la aplicación), el usuario también tiene la posibilidad de enviar el informe de error al proveedor de la aplicación. ![Java](https://doc.pcsoft.fr/ext/images/us/JAVA.png) Esta opción y "Mostrar el error y reanudar la entrada en la ventana actual" tienen el mismo modo de funcionamiento.
<a name="NOTE2_7"></a>


### Salir del Procedure, devolver XXX y mostrar el error
<a name="salir_del_procedure_devolver_xxx_mostrar_error_ELTPARAGRAPHE000167"></a>

Si se selecciona esta opción, el RESULTADO XXX se ejecutará automáticamente cuando se produzca un error en el código.

Se pueden devolver los siguientes valores:

- -1

- 0

- Cadena vacía ("")

- FALSE

- NULL

- TRUE




También se puede visualizar el error.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Personalización de las ventanas de gestión de errores de automatic
<a name="personalizacion_las_ventanas_gestion_errores_automatic_ELTTEXTE000373"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png) Por Default, las ventanas para la gestión de los errores, las excepciones y las afirmaciones están incluidas en la aplicación. Estas ventanas están disponibles en inglés y francés. 

Para personalizar estas ventanas (o traducirlas), todo lo que tiene que hacer es importar las ventanas correspondientes en su proyecto.:  

1. En la pestaña "Proyecto", en el grupo "Proyecto", despliegue "Importar" y seleccione "Elementos WINDEV y dependencias". 

2. Seleccione el directorio de los elementos a importar: "Programas\\Datos\\Ventanas preestablecidas\\Afirmación - Error - Excepción".. 

3. Seleccione las ventanas a importar: 
	

| WINDEV | Tipo de ventana |
| --- | --- |
| WD_DisplayAssert.wdwdw | Ventana para gestionar las aserciones |
| WD_DisplayError.wdwdw | Ventana para gestionar los errores |
| WD_DisplayException.wdwdw | Ventanas para la gestión de las excepciones |
| WD_ErrorTemplate.wdt | Plantilla utilizada por las ventanas WINDEV. |



4. Validar. Las ventanas están incluidas en su proyecto. Estas ventanas se usarán automáticamente y reemplazarán a las ventanas de Default. 




**Observación**: Para usar las ventanas de Default, todo lo que tienes que hacer es borrar las ventanas importadas de tu proyecto. 

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Funciones para la gestión de errores de automatic
<a name="funciones_para_gestion_errores_automatic_ELTTEXTE000397"></a>
Las funciones de gestión de errores de automatic son las siguientes: 



|   |   |
| --- | --- |
| [ErrorChangeParameter](../WDLang1/3034009.md) | Configura el comportamiento de automatic que se implementará si se produce un error en el Process actual. |
| [ErrorInfo](../WDLang1/3013008.md) | Recupera información sobre el último error ocurrido en una función de un WINDEV, WINDEV Mobile o WEBDEV Component. |
| [ErrorPropagate](../WDLang1/3034015.md) | Propaga un error no fatal que puede ser procesado por el código de llamada si la gestión de errores no fatales está habilitada para este código (en el editor de código o por [ErrorChangeParameter](../WDLang1/3034009.md)). |
| [ErrorRestoreParameter](../WDLang1/3034012.md) | Restaura el error Process de una Process. |
| [ErrorThrow](../WDLang1/3034011.md) | Lanzar un error no fatal. |








