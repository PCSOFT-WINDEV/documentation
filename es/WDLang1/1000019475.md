
## Gestionar la exclusión mutua en subprocesos
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000173"></a>
Las exclusiones mutuas (Mutex) limitan la ejecución simultánea de un código (procedimiento, línea de código, etc.) a un solo subproceso en un momento dado. Un Mutex se puede compartir entre varias aplicaciones. 

**Observación**: Existen otros sistemas que permiten proteger una sección de código: 

- los **semáforos** limitan la ejecución simultánea de un código (procedimiento, línea de código, etc.) **a uno o más subprocesos** en un momento dado. Un semáforo se puede compartir entre varias aplicaciones. 

- las secciones críticas limitan la ejecución simultánea de un código (procedimiento, línea de código, etc.) **a un hilo** en un momento dado en una sola aplicación.






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principio
<a name="principio_ELTTEXTE000197"></a>
El mutex se crea con la función [MutexCreate](../WDLang1/1000019022.md).

1. El subproceso n°1 ejecuta la función [MutexStart](../WDLang1/1000019023.md): no hay ningún subproceso en el mutex.

2. El subproceso n°1 ejecuta la sección de código protegida por el mutex.

3. Mientras que el subproceso n°1 ejecuta el código protegido por el mutex, el subproceso n°2 ejecuta la función [MutexStart](../WDLang1/1000019023.md): dado que el subproceso n°1 está ejecutando el código protegido por el mutex, el subproceso n°2 debe esperar a que se libere el mutex.

4. El subproceso n°1 ejecuta la función [MutexEnd](../WDLang1/1000019024.md): ningún otro subproceso ejecuta el código del mutex.

5. El subproceso n°2 puede ejecutar el código protegido por el mutex.

6. El subproceso n°2 ejecuta la función [MutexEnd](../WDLang1/1000019024.md): ningún otro subproceso ejecuta el código del mutex.



<br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Mutex.gif)


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## ¿Cómo implementar un mutex?
<a name="¿como_implementar_mutex_ELTTEXTE000221"></a>


### Etapas:
<a name="etapas_ELTPARAGRAPHE000073"></a>

Las etapas para implementar un mutex son las siguientes:

1. Crear un mutex con la función [MutexCreate](../WDLang1/1000019022.md). El mutex se asocia a un nombre.

2. Llamar a la función [MutexStart](../WDLang1/1000019023.md) antes de la sección de código que se va a proteger.

3. Llamar a la función [MutexEnd](../WDLang1/1000019024.md) para delimitar la sección de código que se va a proteger. Las líneas de código que se encuentran después de [MutexEnd](../WDLang1/1000019024.md) no se protegerán.

4. Destruir el mutex con la función [MutexDestroy](../WDLang1/1000019025.md).



<a name="NOTE3_2"></a>


### Observaciones
<a name="observaciones_ELTPARAGRAPHE000100"></a>

- Las secciones de código protegidas por un mutex deben ser lo más cortas posible y tratar solo los procesos "críticos".

- Cuando hay un subproceso en espera, no se utilizan los recursos del procesador.

- Los mutex se utilizan tanto en el subproceso principal como en los secundarios (creados con la función [ThreadExecute](../WDLang1/3077024.md)). Se debe evitar bloquear el subproceso principal. Si se bloquea el subproceso principal (en espera), no se puede ejecutar la aplicación.

- Las funciones [MutexStart](../WDLang1/1000019023.md) y [MutexEnd](../WDLang1/1000019024.md) deben utilizarse en el mismo proceso (en un procedimiento, por ejemplo).

- Un mutex se puede compartir o no entre las aplicaciones ejecutadas en el equipo. Al crear los mutex, se debe especificar su uso compartido (función [MutexCreate](../WDLang1/1000019022.md)).



<a name="NOTE3_3"></a>


### Funciones de gestión de mutex
<a name="funciones_gestion_mutex_ELTPARAGRAPHE000123"></a>Las siguientes funciones WLanguage permiten gestionar los mutex:



|   |   |
| --- | --- |
| [MutexCreate](../WDLang1/1000019022.md) | Crea explícitamente un mutex. |
| [MutexDestroy](../WDLang1/1000019025.md) | Destruye explícitamente un mutex. |
| [MutexEnd](../WDLang1/1000019024.md) | Señales de que el hilo libera el mutex. |
| [MutexStart](../WDLang1/1000019023.md) | Bloquea el actual Thread mientras espera que se libere el mutex. |






