


## WinEdDeclareUndo( Función)



<a name="XUse"></a>
<a name="Use"></a>
<a name="description"></a>
Declara cómo Cancel una acción que fue añadida por [WinEdDo](../WDLang1/1000021897.md). Esta función es relacionado a la función "UI modificación por el usuario final".

Esta función se utiliza principalmente cuando se crea un editor mediante programación (véase "Observaciones"). 
<a name="Example1"></a>
<a name="sample_code"></a>

## Ejemplo


```wl
WinEdDo(WIN_MyEditor, ProcCreateCap, "New")
INTERNAL PROCEDURE ProcCreateCap(sCap)
	pNew is Control
	pNew <- ControlCreate("STC_" + GetIdentifier(), typText, 150, 150, 80, 20)
	pNew.Caption = sCap 
	WinEdDeclareUndo(ProcCancel)
	INTERNAL PROCEDURE ProcCancel()
		ControlDelete(pNew)
	END
END
```

```wl
WinEdDeclareUndo(UndoOperation, CUSTOMER.CustomerID)

// Management of Undo
INTERNAL PROCEDURE UndoOperation(nCustomerID)

IF HReadSeekFirst(CUSTOMER, CustomerID, nCustomerID) THEN
    SourceToScreen()
END
```

<a name="XSYNTAX"></a>

## Sintaxis
<a name="SYNTAX1"></a>

`WinEdDeclareUndo(<WLanguage procedure> [, <Parameter 1> [... [, <Parameter N>]]])`
---

**`<WLanguage procedure>: (Nombre de Procedure)`**

Nombre del procedimiento WLanguage a ejecutar. El código de esta Procedure debe permitir a Cancel la acción creada por [WinEdDo](../WDLang1/1000021897.md).

El uso de una Procedure interna proporciona un acceso directo a las variables locales. 

**`<Parameter 1>: (Cualquier tipo opcional)`**

El primer parámetro opcional que se pasará a la Procedure. 
 En la mayoría de los casos, estos parámetros son valores utilizados para restaurar el estado anterior. 



**`<Parameter N>: (Cualquier tipo opcional)`**

El noveno parámetro opcional que se pasará a la Procedure.
En la mayoría de los casos, estos parámetros son valores utilizados para restaurar el estado anterior.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Observaciones


### Utilice el ejemplo
<a name="utilice_ejemplo_ELTPARAGRAPHE000050"></a>

[WinEdDo](../WDLang1/1000021897.md) se utiliza para crear acciones personalizadas (creación de control, por ejemplo) que soportan el deshacer/rehacer.

Veamos un ejemplo simple: crear un editor de objetos gráficos. 

Un botón se utiliza para crear una forma. El usuario debe tener la capacidad de Cancel la creación de la forma. Se realizan las siguientes operaciones: 

- Pasar la ventana al modo de modificación ([WinEdActive](../WDLang1/1000021843.md)). 

- Llamada a [WinEdDo](../WDLang1/1000021897.md). La Procedure llamada por esta función se utiliza para crear la forma. Este procedimiento también contiene la llamada a la función **WinEdDeclareUndo**. La función **WinEdDeclareUndo** permite definir el comportamiento en caso de que el usuario cancele una acción. 

- Cambio de la ventana al modo Normal ([WinEdActive](../WDLang1/1000021843.md)). 




El usuario final puede Cancel esta acción (Ctrl + Z o [WinEdUndo](../WDLang1/1000021904.md)): entonces, el &lt;WLanguage Procedure&gt; será llamado. 
<a name="NOTE0_2"></a>


### Error
<a name="error_ELTPARAGRAPHE000085"></a>

Si se llama a la función **WinEdDeclareUndo** fuera de un procedimiento agregado con la función [WinEdDo](../WDLang1/1000021897.md), se produce un error WLanguage. 



<a name="XComponent"></a>

## Componente:
wd280obj.dll
