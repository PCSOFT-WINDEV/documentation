
## Gestión de las réplicas de los servidores HFSQL (control Center)
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000240"></a>
El Centro HFSQL control se utiliza para: 

- [implementar una replicación entre servidores HFSQL](#NOTE2_1). Esta réplica puede ser: 

	- una réplica clásica entre dos servidores. 

	- una réplica de un servidor a un servidor de repuesto.




- [gestionar las replicaciones existentes de los servidores HFSQL](#NOTE3_1). 




**Recordatorio**: La replicación de servidores HFSQL consiste en replicar los datos de servidor a servidor automáticamente. Para obtener más información, consulte [Replicación del servidor HFSQL](../WDLang4/1000020588.md). 


|   |
| --- |
| **Atención: La replicación de servidores HFSQL no debe ser implementada sin el acuerdo del desarrollador de la aplicación.**. De hecho, la implementación de la replicación entre varios servidores HFSQL requiere algunas adaptaciones en la aplicación. <br><br>Si no se realizan estas adaptaciones, es posible que la aplicación no funcione correctamente. **los datos pueden perderse**. |







<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Implementación de una replicación entre servidores HFSQL
<a name="implementacion_una_replicacion_entre_servidores_hfsql_ELTTEXTE000270"></a>


### Configuración de una replicación con el HFSQL control Center
<a name="configuracion_una_replicacion_con_hfsql_control_center_ELTPARAGRAPHE000041"></a>

Para configurar una replicación con HFSQL control Center: 

1. [Definir el servidor del suscriptor en el Centro de control](#NOTE2_2). El servidor de suscriptores será el servidor que reciba los datos replicados.. 

2. [Definir el servidor maestro en el Centro de control](#NOTE2_3). El servidor maestro será el servidor que replique sus datos. 

3. [Definir la replicación en el servidor maestro](#NOTE2_4). 


**Observaciones**: 

- El usuario de HFSQL control Center debe tener los derechos de "Crear una replicación entre dos servidores HFSQL" para poder crear y configurar la replicación entre servidores. 

- La comunicación entre servidores es autenticada. No está encriptado.



<a name="NOTE2_2"></a>


### Definir el servidor de suscriptores desde el Centro control de HFSQL
<a name="definir_servidor_suscriptores_desde_centro_control_hfsql_ELTPARAGRAPHE000063"></a>

Para definir el servidor de suscriptores desde el HFSQL control Center: 

1. Desde el HFSQL control Center, conéctese al servidor HFSQL que será el servidor de suscriptores. 

2. Haga doble clic en el archivo HFSQL **moza** en la vista de árbol a la izquierda. 

3. En la pestaña Servidor, en la cinta, haga clic en "Configuración del servidor".. 

4. En la lista de configuraciones posibles, seleccione "Replicación".. Puede configurar la replicación para el servidor actual. 

5. Seleccione la opción "Servidor esclavo o spare (recibe los datos replicados)". <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=CC_HF_Replication_Serveur%20-%20HC%20N%B0001.gif&type=thumb)


6. Especifique el puerto para recibir los datos replicados. 

7. Especifique la contraseña y la contraseña confirmada para la replicación. 

8. Especifique el identificador único del servidor HFSQL (incluido entre 1 y 32000). 

9. Especifique la prioridad del servidor. 
	Observación: Durante un conflicto de modificación, este número se utiliza si el método para resolver el conflicto corresponde a una resolución por prioridad.. Cuanto menor sea el valor de prioridad definido para el servidor, mayor será la prioridad concedida al servidor.

10. Validar. 



<a name="NOTE2_3"></a>


### Definiendo el servidor maestro desde el Centro control de HFSQL
<a name="definiendo_servidor_maestro_desde_centro_control_hfsql_ELTPARAGRAPHE000088"></a>

Para definir el servidor maestro desde el HFSQL control Center: 

1. Desde el HFSQL control Center, conéctese al servidor HFSQL que será el servidor maestro. 

2. Haga doble clic en el archivo HFSQL **moza** en la vista de árbol a la izquierda. 

3. En la pestaña Servidor, en la cinta, haga clic en "Configuración del servidor".. 

4. En la lista de configuraciones posibles, seleccione "Replicación".. Puede configurar la replicación para el servidor actual. 

5. Seleccione la opción "Servidor maestro (replica los datos)". 

6. Especifique el identificador único del servidor HFSQL (incluido entre 1 y 32000). 

7. Especifique la prioridad del servidor. 
	Observación: Durante un conflicto de modificación, este número se utiliza si el método para resolver el conflicto corresponde a una resolución por prioridad.. Cuanto menor sea el valor de prioridad definido para el servidor, mayor será la prioridad concedida al servidor.

8. Haga clic en el botón "Aplicar. 



<a name="NOTE2_4"></a>


### Definición de una replicación en el servidor maestro
<a name="definicion_una_replicacion_servidor_maestro_ELTPARAGRAPHE000110"></a>

Para definir una replicación en el servidor maestro: 

1. Si no se ha definido ninguna replicación, haga clic en el enlace "Haga clic aquí para crear una nueva replicación de servidor". 
	Si se han definido una o más réplicas, haga clic en "Añadir".. 
	La asistente para crear una réplica comienza. 

2. Especifique el tipo de replicación: 

	- Replicación unidireccional, 

	- Replicación spare, 

	- Replicación bidireccional. 
			Para una replicación bidireccional, el servidor también se configurará como suscriptor. En este caso, se debe especificar: 

		- el puerto utilizado para recibir los datos replicados. 

		- la contraseña para la replicación. Esta contraseña será idéntica para el servidor de suscriptores. 




3. especificar el destino de la replicación (es decir, las características del servidor de abonado): 

	- el nombre DNS o IP Address del servidor del suscriptor.

	- el puerto de replicación en el servidor de suscriptores. 

	- la contraseña para la réplica al servidor del suscriptor (para una réplica unidireccional). 




4. Seleccione los elementos a replicar. Puedes replicarte:

	- todo el contenido del servidor, 

	- una base de datos, 

	- una selección de bases de datos o archivos. 


 Observaciones: 

- Puede excluir ciertos archivos de la réplica. Si se ha seleccionado esta opción, el siguiente paso de la asistente permite seleccionar los elementos a excluir. 

- Si es necesario, puede hacer una copy inicial de los elementos a replicar. 

5. Programar la replicación: 

	- periódico: la replicación se llevará a cabo de forma regular. Una asistente permite definir la periodicidad. 

	- Modo continuo: la replicación se realizará de forma continua, siempre que se realice una modificación. 




6. ***En el caso de una réplica unidireccional o bidireccional, *** debe seleccionar el modo de resolución de conflictos: 

	- **Más reciente**: Durante un conflicto, el elemento más reciente tiene prioridad.
			Atención: Este método requiere una sincronización del reloj en los diferentes servidores. La fecha y la hora (con precisión de segundos) de los registros se utiliza para la comparison (AAAAMMDDHHmmSS). Si dos registros en conflicto tienen estrictamente la misma fecha y hora, se utiliza el identificador de servidores para que la comparison sea determinista.

	- **Priority**:  Durante un conflicto, sólo se tiene en cuenta el valor de prioridad definido para el servidor.. Cuanto menor sea el valor de prioridad definido para el servidor, mayor será la prioridad concedida al servidor.

	- **Stored Procedure con todos los artículos**: Durante un conflicto, se inicia un Procedure almacenado. En este procedimiento, todos los artículos encontrados en el Record serán accesibles. Especificar el nombre del Procedure almacenado a utilizar. 

	- **Procedimiento almacenado con los campos modificados**: Durante un conflicto, se inicia un Procedure almacenado. En esta Procedure, sólo los elementos modificados serán accesibles. Especificar el nombre del Procedure almacenado a utilizar. 




7. Dar un nombre a la replicación y validar. El asistente de creación de la réplica se cierra y la réplica aparece en el **Lista de réplicas**. 




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Gestión de las réplicas existentes
<a name="gestion_las_replicas_existentes_ELTTEXTE000312"></a>
Si se han definido réplicas en el servidor HFSQL actual, HFSQL control Center le permite: 

- **Añadir una nueva réplica** (botón"Añadir"). En este caso, la asistente para crear una réplica se inicia automáticamente. 

- **Modificar una réplica** (botón"Modificar"). Aparece la ventana de réplica de description. Esta ventana se utiliza para modificar las características principales de la replicación. Algunas características no pueden modificarse. En este caso, puede que tenga que borrar la réplica y volver a crearla.. 
	Se pueden modificar las siguientes características: 

	- el modo de resolución de conflictos (pestaña"General"). Esta opción sólo está disponible para las réplicas unidireccionales y bidireccionales.  

	- la descripción de la replicación (pestaña "General"). 
			Puede cambiar el nombre DNS del servidor de destino mediante el botón "...".. En la ventana que aparece, simplemente introduzca el nombre del nuevo servidor y el puerto utilizado. 
			**Atención**: Este cambio sólo debe realizarse si el nombre DNS del servidor o el puerto de replicación de datos han cambiado.  

	- los elementos replicados (pestaña"Elementos replicados"). 
			Atención: sólo tiene la capacidad de excluir elementos de la replicación. 

	- la programación de la réplica (ficha"Programación"). 




- **Borrar una réplica** (botón"Borrar"). Después de la confirmación, se borra la configuración de la reproducción..
	Atención: El servidor de suscriptores debe ser accesible. Si el servidor del suscriptor no es accesible, usted tiene la posibilidad de forzar la eliminación.. En ese caso: 

	- la información de replicación no se eliminará del servidor de suscriptores.  

	- Si la replicación es bidireccional, la configuración no se eliminará del servidor inaccesible.. Le aconsejamos que realice este borrado desde este servidor también para evitar un consumo de memoria inútil.. 


En el caso de una réplica de repuesto, cuando se borra la réplica, el servidor del suscriptor vuelve al modo de lectura/escritura. Los datos no se borran del servidor del suscriptor. 

- **Lanzar una réplica** (Botón"Trigger"). Esta opción se utiliza para activar inmediatamente una replicación programada. 





