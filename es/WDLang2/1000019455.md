


## WEBDEV: Tareas programadas y tareas retrasadas
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000201"></a>
WEBDEV le permite implementar tareas en el servidor directamente: cada tarea es un servidor WLanguage Procedure. 

Los [tareas aplazadas](#NOTE2_1) se utilizan para aplazar procesos que consumen mucho tiempo en el servidor de aplicaciones WEBDEV. Por ejemplo, el envío de un Email o el cálculo de estadísticas. 

Los [tareas programadas](#NOTE3_1) se utilizan para realizar una operación determinada de forma regular. Por ejemplo, enviar un mailshot sobre las promociones actuales. 

Observaciones: 

- Las tareas programadas y las tareas retrasadas corresponden a los procedimientos del servidor.. 

- La implementación de estas funciones requiere un servidor de aplicaciones WEBDEV versión 180046 o posterior.. 

- El número de tareas programadas associated con un sitio o con un Webservice se puede ver en el administrador WEBDEV (administrador local o remoto). 

- Tiene la posibilidad de gestionar las tareas programadas desde el administrador de WEBDEV (administrador local o remoto).. 

- Las tareas programadas pueden definirse mediante programación.




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Tareas retrasadas
<a name="tareas_retrasadas_ELTTEXTE000225"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000042"></a>

Ejemplo de tarea retrasada: Se envía una confirmación Email al usuario de la web cuando valida su reserva. El envío real de la Email se pospone en el servidor. El usuario web no está bloqueado durante el envío. 


### Implementación a través del editor de código
<a name="implementacion_traves_del_editor_codigo_ELTPARAGRAPHE000047"></a>

Para implementar una tarea retrasada en un sitio WEBDEV: 

1. En el editor de código, mostrar el servidor Procedure cuya ejecución debe ser aplazada. 

2. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Proc_auto_Ico.gif) en la barra del editor de código. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=WB_Tache_plan1.gif)

	**Observación**: También tiene la posibilidad de realizar una de las siguientes operaciones: 

	- Selecciona "Configurar las automatizaciones del Procedure" en el el menú contextual de Procedure (panel "Explorador del proyecto").

	- Seleccione "Propiedades" de el menú contextual de Procedure en el panel "Código".


 **Atención**: 

- Los procedimientos multi-sintácticos no pueden posponerse. 

- No se puede añadir ninguna sintaxis a una procedimiento diferido.

3. En la ventana de configuración de la automatización del Procedure, seleccione "Tareas WEBDEV" y luego "Tarea retrasada" y configure los diferentes parámetros de la tarea retrasada: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=WB_Tache_diff.gif)


	- Usando (o no) el contexto actual del HFSQL.

- Duración máxima del tiempo de ejecución. 

4. Validar. 

5. Para iniciar la ejecución de la procedimiento diferido en su proyecto: 

	- utilizar [ExecuteDelayedProcedure](../WDLang2/1000020682.md). 

	- introducir el nombre de la función directamente: una Icon específica aparece al lado del nombre de la función: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=WB_Tache_diff_code.gif)



 **Observación**: [InDelayedProcedureMode](../WDLang1/1000020665.md) se utiliza para saber si el Procedure actual se ejecuta en modo diferido. 

6. Durante el próximo implementación del sitio, la tarea retrasada se ejecutará en el servidor.  




**Observación**: Tiene la capacidad de limitar la duración del tiempo de ejecución de las tareas programadas o retrasadas.: 

- a nivel de servidor: en la pestaña "Configuración" del administrador de WEBDEV, especifique la duración máxima de una tarea. Si las tareas utilizadas superan esta duración, se detendrán automáticamente.. 

- en el sitio o servicio web: en el administrador de WEBDEV, en la pestaña "Sitios" o "Webservices", seleccione el sitio o Webservice deseado y haga clic en "Parámetros" para especificar la duración máxima de la tarea. En este caso, la duración máxima de la tarea (de un sitio o Webservice) no puede exceder la de set en el servidor.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Tareas programadas
<a name="tareas_programadas_ELTTEXTE000255"></a>


### Presentación
<a name="presentacion_ELTPARAGRAPHE000095"></a>

Ejemplo de tarea programada: Cada día de la semana, a las 3:00 AM, un Reminder Email es enviado a los clientes que no confirmaron su reserva.. 


### Implementación a través del editor de código
<a name="implementacion_traves_del_editor_codigo_ELTPARAGRAPHE000100"></a>

Para implementar una tarea programada en un sitio WEBDEV: 

1. En el editor de código, mostrar el servidor Procedure que debe ser programado. 

2. Haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Proc_auto_Ico.gif) en la barra del editor de código. <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=WB_Tache_plan1.gif)

	**Observación**: También tiene la posibilidad de realizar una de las siguientes operaciones: 

	- Selecciona "Configurar las automatizaciones del Procedure" en el el menú contextual de Procedure (panel "Explorador del proyecto").

	- Seleccione "Propiedades" de el menú contextual de Procedure en el panel "Código".




3. **Atención**: 

	- Los procedimientos multi-sintácticos no se pueden programar. 

	- No se puede añadir ninguna sintaxis a un Procedure programado.  




4. En la ventana de configuración de la automatización del Procedure, seleccione "Tareas WEBDEV" y luego "Tareas programadas" y configure los diferentes parámetros de programación: <br>![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=WB_Tache_plan2.gif)


	- Mes de ejecución.

- Día de ejecución.

- Tiempo de ejecución.

- Duración máxima del tiempo de ejecución.

5. Validar. 

6. Durante el próximo sitio implementación, la tarea programada se ejecutará en el servidor según los parámetros especificados. 




**Observación**: Tiene la capacidad de limitar la duración del tiempo de ejecución de las tareas programadas o retrasadas.: en la pestaña "Configuración" del administrador de WEBDEV, especifique la duración máxima de una tarea. Si las tareas utilizadas superan esta duración, se detendrán automáticamente.. 
Esta duración también se puede configurar para las tareas de un sitio específico (pestaña"Sitios", botón"Parámetros") o para las tareas de un servicio web específico (pestaña"Servicios web", botón"Parámetros").. En este caso, la duración máxima de una tarea no puede superar la duración máxima set en el servidor.


### Implementación mediante programación
<a name="implementacion_mediante_programacion_ELTPARAGRAPHE000135"></a>

WEBDEV permite definir mediante programación tareas programadas utilizando funciones de tipo [AppServerxxx](../WDLang2/1000022790.md). 

La implementación es un juego de niños. Es necesario: 

1. Definir las características de la tarea programada a través de una [AppServerScheduledTask](../WDLang2/1000022367.md) Variable. 

2. Añadir la tarea programada con [AppServerAddScheduledTask](../WDLang2/1000022347.md). 

3. A continuación, se pueden utilizar varias funciones para manipular las tareas programadas: 
	


|   |   |
| --- | --- |
| [AppServerDeleteScheduledTask](../WDLang2/1000022349.md) | Elimina una tarea programada associated con la aplicación (sitio o Webservice). |
| [AppServerInfoScheduledTask](../WDLang2/1000022789.md) | Lee la description de una tarea programada. |
| [AppServerListScheduledTask](../WDLang2/1000022352.md) | Devuelve la lista de tareas programadas para la aplicación (sitio o servicio web). |
| [AppServerModifyScheduledTask](../WDLang2/1000022348.md) | Modifica una tarea programada existente. |
| [AppServerRunScheduledTask](../WDLang2/1000022350.md) | Inicia inmediatamente la ejecución de una tarea programada en un servidor de aplicaciones WEBDEV. |





