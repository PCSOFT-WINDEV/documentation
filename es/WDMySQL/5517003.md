


## Conector Nativo MySQL: Programación con funciones HFSQL
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Presentación
<a name="presentacion_ELTTEXTE000250"></a>
Para utilizar una base de datos MySQL con el Conector Nativo (o "Acceso Nativo"), es necesario **importar la estructura de las tablas MySQL en el análisis de WINDEV o WEBDEV**.

**Diferencias con respecto a la programación SQL**: Las consultas no son necesarias para manipular los datos MySQL. De hecho, las funciones HFSQL se pueden utilizar directamente para leer datos, realizar búsquedas e implementar filtros., ... Sin embargo, la estructura de los archivos MySQL debe importarse al análisis WINDEV o WEBDEV.

**Observación**: Las consultas realizadas por [HExecuteQuery](../WDLang4/3044080.md) y [HExecuteSQLQuery](../WDLang4/3044084.md) se "corrigen" automáticamente para que sean compatibles con MySQL.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Importación de la estructura de los ficheros de datos
<a name="importacion_estructura_los_ficheros_datos_ELTTEXTE000280"></a>


### Los pasos de importación
<a name="los_pasos_importacion_ELTPARAGRAPHE000030"></a>

Para realizar esta importación: 

1. Inicie la editor de análisis: haga clic en ![](https://doc.pcsoft.fr/en-US/images/image.awp?langid=7&name=Ico_Analyse.gif) en los botones de acceso rápido.

2. En la pestaña "Análisis", en el grupo "Creación", despliegue "Importar" y seleccione "Importar descripciones de archivos/tablas...".

3. El asistente se abre.  Se establece automáticamente una conexión con la base de datos MySQL y associated con los archivos de datos importados en el análisis. Esta conexión tendrá que ser utilizada para manipular el archivo de datos de MySQL a través de la programación.




En los diferentes pasos de la asistente, elija las siguientes opciones:

- Tipo de base de datos: MySQL. 

- Características de la conexión: Servidor de datos, usuario y contraseña, base de datos.  

- La aplicación accederá a los datos en el formato actual.

- Una vez establecida la conexión, basta con seleccionar las tablas que se importarán en el análisis WINDEV o WEBDEV.. Estas tablas pueden manejarse mediante programación con las funciones HFSQL de WLanguage. Estas tablas se mostrarán en azul en el editor de análisis.



<a name="NOTE2_2"></a>


### Teniendo en cuenta la evolución de la base de datos MySQL
<a name="teniendo_cuenta_evolucion_base_datos_mysql_ELTPARAGRAPHE000062"></a>

Para tener en cuenta las evoluciones de las tablas importadas en el editor de análisis, vaya a la pestaña "Análisis", al grupo "Análisis", amplíe "Sincronización " y seleccione "Actualizar análisis a partir de bases de datos externas".

Una asistente comienza, permitiéndole:

- analizar las diferencias para las tablas importadas,

- analizar las diferencias para todas las tablas MySQL.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Programación
<a name="programacion_ELTTEXTE000310"></a>


### 1. Establecimiento de la conexión
<a name="1_establecimiento_conexion_ELTPARAGRAPHE000088"></a>

Para establecer la conexión con la base de datos MySQL, llame a [HOpenConnection](../WDLang4/3044107.md) y especifique el nombre de la conexión a abrir. El nombre de la conexión se definió al importar la estructura de los archivos al análisis.

**Atención**: Si está utilizando otra sintaxis, debe especificarse el nombre de la base de datos a utilizar.

Para modificar algunos parámetros de esta conexión (nombre de usuario o contraseña, por ejemplo), llame a [HConnect](../WDLang4/3044263.md).

**Observaciones**:

- Si intenta leer el archivo directamente (función **HReadFirst**, etc.), la conexión asociada a la descripción del archivo en el análisis se abrirá automáticamente.

- Se pueden definir los parámetros "***Server Port***", "***Unix Socket***" y "***Client Flag*** para establecer la conexión al servidor MySQL. Basta con añadir las cadenas correspondientes en la información ampliada de la conexión ([HDescribeConnection](../WDLang4/3044205.md) o [HOpenConnection](../WDLang4/3044107.md)).
	Ejemplo 1: "Server Port=3306;" para conectar en el puerto 3306 del servidor MySQL.
	Ejemplo 2: "Puerto del servidor=3306; Flag del cliente=0".
	...
	Para más detalles, consulte la documentación sobre MySQL (palabra clave = 'mysql_real_connect').

- El **modo de gestión de los elementos Unicode** puede configurarse durante la conexión. Basta con añadir la opción "WD Unicode Support" a la información ampliada de la conexión ([HDescribeConnection](../WDLang4/3044205.md) o [HOpenConnection](../WDLang4/3044107.md)).

	- **Si "WD Unicode Support = 0"**la gestión del formato Unicode está desactivada para la conexión. Todos los valores serán convertidos (si es necesario) por el servidor en el carácter por defecto set. En este caso, se mejora el rendimiento pero no se admiten los elementos Unicode.. 

	- **Si "WD Unicode Support = 1 "** (valor Default), la gestión del formato Unicode está habilitada para la conexión. Todos los intercambios con el servidor se realizarán en Unicode. Las posibles conversiones son gestionadas por la Conector Nativo. 




- El tamaño de caché se puede especificar en la información opcional de la conexión con la palabra clave "***WD Cache Size***". En este caso, se ignora el parámetro especificado en [CtCacheSize](../Proprietes/2512027.md). 
	Ejemplo:
	
	```txt
	"WD Cache Size = 10000; Server Port=3306;"
	```




<a name="NOTE3_2"></a>


### 2. Ejecutar las consultas
<a name="2_ejecutar_las_consultas_ELTPARAGRAPHE000142"></a>

[HExecuteQuery](../WDLang4/3044080.md) y [HExecuteSQLQuery](../WDLang4/3044084.md) se utilizan para ejecutar consultas en la base de datos actual.

- **HExecuteQuery**: se usa para ejecutar una consulta preestablecida con el editor de consultas.

- **HExecuteSQLQuery**: se utiliza para ejecutar una consulta especificando el código SQL de la consulta y el nombre que se asignará a este código SQL.



```wl
// Initialize the "Customer_84" query
HExecuteQuery(CUSTOMER_84, "MYSQLDatabase", hQueryWithoutCorrection)
HExecuteSQLQuery(CustomerQry, "MYSQLDatabase", hQueryWithoutCorrection, ...
	"SELECT NAME FROM CUSTOMER")
```

<a name="NOTE3_3"></a>


### 3. Recuperación del resultado
<a name="3_recuperacion_del_resultado_ELTPARAGRAPHE000159"></a>

El resultado es navegado por las funciones de lectura estándar: [HReadFirst](../WDLang4/3044051.md), [HReadNext](../WDLang4/3044037.md), [HReadSeek](../WDLang4/3044050.md)...

En esta versión, los registros no pueden bloquearse mediante las opciones de bloqueo de estas funciones. Sólo se admiten los cierres set con [SQLLock](../WDLang4/3072003.md) (véase [Conector Nativo MySQL: gestión de bloqueos y transacciones](../WDMySQL/5517005.md)).
<a name="NOTE3_4"></a>


### 4. Cierre de la conexión
<a name="4_cierre_conexion_ELTPARAGRAPHE000183"></a>

[HCloseConnection](../WDLang4/3044095.md) se utiliza para cerrar la conexión con la base de datos una vez que se han ejecutado todas las consultas necesarias.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Consejo en Linux
<a name="consejo_linux_ELTTEXTE000352"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/us/WD.png)![Linux](https://doc.pcsoft.fr/ext/images/us/LX.png)![Conectores Nativos](https://doc.pcsoft.fr/ext/images/us/AN.png) Dado que los errores no pueden mostrarse en ventanas o páginas en Linux, deben devolverse a la consola utilizando [dbgStandardOutput](../WDLang1/3014020.md).

Por ejemplo:


```wl
IF NOT HOpenConnection(My_Connection) THEN
	dbgStandardOutput(HErrorInfo(hErrFullDetails))
END
```



