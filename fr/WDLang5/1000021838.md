


## FBRequête (Fonction)

***En anglais : FBRequest***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Effectue une requête de communication (requête HTTP) à la Graph API de Facebook.






<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
Cnx_FACEBOOK est un fbSession
FBRésultatRequête est un Variant
sJSON est un Buffer

Cnx_FACEBOOK.AppID = "FACEBOOK_APP_ID"
Cnx_FACEBOOK.AppSecret = "FACEBOOK_APP_SECRET"
Cnx_FACEBOOK.Permission = [fbInfoProfil]

SI FBOuvreSession(Cnx_FACEBOOK) ALORS
	
	// Interrogation de Facebook pour récupérer l'utilisateur 
	// (équivalent de FBRécupèreInformationUtilisateur)
	sJSON = FBRequête(Cnx_FACEBOOK, "https://graph.facebook.com/me?fields=id,name")
	
	SI sJSON <> "" ALORS
		FBRésultatRequête = JSONVersVariant(sJSON)
		Info(FBRésultatRequête.id, FBRésultatRequête.name)
	SINON
		Erreur(ErreurInfo())
	FIN
	
	// Interrogation de Facebook pour récupérer des notifications
	sJSON = FBRequête(Cnx_FACEBOOK, "https://graph.facebook.com/me/notifications?limit=0")
	
	SI sJSON <> "" ALORS
		FBRésultatRequête = JSONVersVariant(sJSON)
		Info(FBRésultatRequête.summary.unseen_count, FBRésultatRequête.summary.updated_time)
	SINON
		Erreur(ErreurInfo())
	FIN
SINON	
	Erreur("Impossible de se connecter.", ErreurInfo())
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = FBRequête(<Session> , <Requête> [, <Type> [, <Données>]])`
---

**`<Résultat> : (Buffer)`**

Résultat de la requête.

**`<Session> : (Variable de type fbSession)`**

Nom de la variable de type [fbSession](../WDLang5/1000021851.md) correspondant à la connexion Facebook à manipuler.

**`<Requête> : (Chaîne de caractères)`**

URL complète de la requête (avec si nécessaire les paramètres stockés dans l'URL).

**`<Type> : (Constante optionnelle de type Entier)`**

Type de la requête HTTP à envoyer : 


|   |   |
| --- | --- |
| *httpDelete* | Méthode DELETE. |
| *httpGet* <br>(valeur par défaut) | Méthode GET. |
| *httpPost* | Méthode POST. |
| *httpPut* | Méthode PUT. |



**`<Données> : (Buffer optionnel)`**

Données à envoyer sur le serveur (uniquement dans le cas d'une requête POST ou PUT).



<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280ggl.dll
