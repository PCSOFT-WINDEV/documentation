


## Lire des codes-barres
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000299"></a>
WINDEV, WEBDEV et WINDEV Mobile permettent de créer des applications capables de lire des codes-barres. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) En WINDEV, la lecture de codes-barres est réalisée grâce à un appareil spécialisé branché sur le port série du poste. 
	Pour les codes-barres de type QR Code, il est également possible de lire un code-barres présent dans une image.
	Pour plus de détails, consultez [Lire un code-barres dans une application WINDEV](#NOTE2_1).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Lire un code-barres dans une application WINDEV
<a name="lire_codebarres_dans_une_application_windev_ELTTEXTE000323"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Lecture de codes-barres avec une application WINDEV : Utilisation d'un appareil spécialisé
<a name="lecture_codesbarres_avec_une_application_windev_utilisation_appareil_specialise_ELTPARAGRAPHE000062"></a>Pour lire un code-barres à l'aide d'un appareil spécialisé :

1. Branchez un appareil spécialisé sur le port série de votre machine (selon l'appareil utilisé, vérifiez que le clavier n'est pas en majuscules, et / ou que l'appareil est configuré pour un clavier français).

2. Récupérez la valeur du code-barres lue grâce aux fonctions de gestion des ports série suivantes :

	- [sOuvre](../WDLang3/3062013.md), qui permet d'ouvrir et d'initialiser le port série (ou le port parallèle) spécifié.

	- [sLit](../WDLang3/3062012.md), qui lit une chaîne de caractères dans le buffer d'entrée du port série spécifié.







La valeur du code-barres peut être affichée dans un champ de saisie.

Remarque : Il est également possible d'utiliser un champ Code-barres dans l'éditeur de fenêtres.

**Exemple de lecture d'un code-barres avec un appareil spécialisé branché sur le port série COM1** : 

```wl
// Déclaration des variables 
// Définition du nombre de caractères à lire
nNbCarALire est un entier = 13 
// Nombre d'octets en attente dans le buffer 
nNbOctetAttente est un entier 
sBuffer est une chaîne // Contenu du buffer 
nPortSérie est un entier = 1 // Port série COM1 

// Ouverture et initialisation du port série COM1 
SI sOuvre(nPortSérie, 5000, 5000) ALORS 
	// Lecture du code-barres 
	// Récupération du nombre d'octets en attente 
	nNbOctetAttente = sDansFileEntrée(nPortSérie) 
	// Récupération de la valeur du code-barres uniquement 
	// si au moins 13 caractères ont été lus 
	SI nNbOctetAttente >= nNbCarALire ALORS 
		sBuffer = sLit(nPortSérie, nNbOctetAttente) 
		// Récupération des 13 premiers caractères lus 
	 	sBuffer = Gauche(sBuffer, 13) 
		// Affichage de la valeur du code-barres 
		// dans le champ de saisie "SAI_CodeBarre" 
		SAI_CodeBarre = sBuffer 
	FIN 
FIN
```

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Lecture d'un code-barres de type QR Code présent dans une image (image physique ou mémoire)
<a name="lecture_codebarres_type_code_present_dans_une_image_image_physique_memoire_ELTPARAGRAPHE000088"></a>Pour lire un code-barres de type QR Code présent dans une image :

1. Sélectionnez l'image contenant le code-barres à décoder. Cette image peut être : 

	- une image présente dans un champ Image. 

	- un fichier image. 

	- une image présente en mémoire. 




2. Déclarez si nécessaire une variable de type [CodeBarres](../WDLang5/1000019451.md). Les caractéristiques du code-barres de type QR Code vont être enregistrées dans cette variable. 

3. Utilisez la fonction [CBDécode](../WDLang5/1000019633.md) pour décoder le code-barres de type QR Code. 




**Exemple de lecture d'un code-barres lu par une Web Caméra et stocké en mémoire** : 

```wl
// Décodage d'un QR Code à partir d'un champ Caméra
s est un Buffer
s = dSauveImageBMP(CAM_MaCaméra, enMémoire)
cb est un CodeBarres
cb = CBDécode(s)
SI ErreurDétectée = Faux _ET_ cb.TypeCodeBarres = CB_QRCODE ...
		_ET_ cb.TypeContenu = cbTypeEmail ALORS
	Info("Adresse email : " + cb.Contenu)
FIN
```


<a name="NOTE3b"></a>
<a name="NOTE3b_1"></a>


## Lire un code-barres dans un site WEBDEV
<a name="lire_codebarres_dans_site_webdev_ELTTEXTE000353"></a>



<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Lire un code-barres dans une application Android
<a name="lire_codebarres_dans_une_application_android_ELTTEXTE000377"></a>
<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Lire un code-barres dans une application iPhone/iPad
<a name="lire_codebarres_dans_une_application_iphoneipad_ELTTEXTE000401"></a>

- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampCode-barres.gif) ***Exemples unitaires (WINDEV)*** : **Le champ Code-barres** <br>Utilisation d'un champ Code-barres


