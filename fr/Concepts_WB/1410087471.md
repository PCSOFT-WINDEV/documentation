
## 13. Avantage sécuritaire : la gestion du "Back"
			

| [Page précédente](../Concepts_WB/1410087470.md) | [Sommaire](../Concepts_WB/1410087102.md) | [Page suivante](../Concepts_WB/1410087472.md) |
| --- | --- | --- |



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>
Un navigateur permet de parcourir les différentes pages d'un site à l'aide des boutons "Suivant" et "Précédent".

A chaque nouvelle page de type Session affichée sur le navigateur, un contexte de page spécifique à son traitement est créé sur le serveur.

Lorsqu'une même page de type Session est utilisée pour afficher des données différentes (page avec table fichier, zones répétées ou page de type "Fiche avec parcours", ...), le contexte de page présent sur le serveur varie en fonction des données affichées.

**Lorsque l'internaute appuie sur le bouton "Précédent" (ou "Back"), le navigateur ne prévient ni le site ni le serveur. Le navigateur revient à la page précédente sans le contexte correspondant**.

Aucune gestion particulière n'est nécessaire lorsque l'on fait un "Back" entre des pages différentes.

Une gestion spécifique est nécessaire pour une même page de type Session affichant des données différentes.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Pourquoi gérer le "Back" ? Un exemple simple ...
<a name="pourquoi_gerer_back_exemple_simple_ELTTEXTE000208"></a>
Pour comprendre la nécessité de la gestion du "Back", étudions un exemple simple : une page de type Session qui permet d'afficher la liste des fournisseurs.
<a name="NOTE2_2"></a>


### Etape 1 : Affichage de la liste des fournisseurs
<a name="etape_1_affichage_liste_des_fournisseurs_ELTPARAGRAPHE000036"></a><br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Avantage%20s%E9curitaire%20%20%20la%20gestion%20du%20back%20-%20HC%20N%B0001.gif&type=thumb)


Le contexte contient la liste des founisseurs affichés dans le champ Table.
<a name="NOTE2_3"></a>


### Etape 2 : Clic sur le lien "Clients".
<a name="etape_2_clic_sur_lien_clients_ELTPARAGRAPHE000047"></a><br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Avantage%20s%E9curitaire%20%20%20la%20gestion%20du%20back%20-%20HC%20N%B0002.gif&type=thumb)


Les clients sont affichés. Le contexte de la page sur le serveur est mis à jour : le contexte contient la liste des éléments affichés dans le champ Table (liste des clients).
<a name="NOTE2_4"></a>


### Etape 3 : Clic sur le bouton "Back" du navigateur.
<a name="etape_3_clic_sur_bouton_back_navigateur_ELTPARAGRAPHE000058"></a><br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Avantage%20s%E9curitaire%20%20%20la%20gestion%20du%20back%20-%20HC%20N%B0001.gif&type=thumb)
La page de type Session affichée sur le navigateur correspond à la page affichée à l'étape 1. Cependant le serveur n'est pas informé par le navigateur que l'internaute a utilisé la touche Back. Le contexte de page sur le serveur est toujours celui correspondant aux clients.

Si l'internaute sélectionne dans le champ Table un élément (un fournisseur), l'élément sélectionné sera l'élément correspondant dans le contexte : un client. **Il y a désynchronisation entre la page dynamique visualisée et le contexte de page présent sur le serveur. Le moteur WEBDEV détecte cette désynchronisation.**

**Une gestion du bouton Back est nécessaire**.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Comment gérer le "Back" ?
<a name="comment_gerer_back_ELTTEXTE000250"></a>
Pour gérer le "Back", vous pouvez utiliser :

- le **code de synchronisation de la page en mode Session**. Ce code est appelé en cas de désynchronisation.

- un **champ de saisie caché** (champ de saisie invisible) pour identifier l'enregistrement affiché sur le navigateur.

- **l'option "Appeler le traitement de synchronisation de la page si l'internaute a utilisé le bouton précédent du navigateur"** sur vos boutons et/ou vos liens (onglet "Avancé" de la description du bouton).




**Selon le type d'action pouvant être effectué dans la page en mode Session, il est possible de choisir et de combiner l'une ou l'autre de ces options.**

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Exemple détaillé de gestion du Back
<a name="exemple_detaille_gestion_back_ELTTEXTE000274"></a>
Une page dynamique permet de parcourir les différents produits d'un site. Les boutons présents dans la page sont les suivants :

- ***Retour au menu principal***
	Cette action ne nécessite pas de gestion particulière du "Back". Ce bouton ne manipule pas les fichiers de données : une désynchronisation entre le contexte et la page affichée n'a pas d'influence.

- ***Supprimer le produit en cours***
	L'action "Supprimer le produit en cours" manipule un fichier de données. Il est important que l'enregistrement supprimé corresponde à l'enregistrement visualisé par l'internaute.
	Pour gérer le "Back" dans ce cas, il est conseillé d'utiliser :

	- un champ caché (invisible) dans la page dynamique : ce champ contiendra l'identifiant de l'enregistrement réellement en cours sur le navigateur.

	- le code de synchronisation : ce code permet de mettre à jour le contexte (recherche de l'enregistrement visualisé par l'internaute). 







Les actions effectuées dans le code de synchronisation seront : 

1. Relecture de l'enregistrement correspondant à l'identifiant stocké dans le champ caché. 

2. Si l'enregistrement n'est pas trouvé : une page d'erreur est affichée et le code du bouton "Supprimer" n'est pas exécuté. 

3. Si l'enregistrement est trouvé, le contexte de page est alors automatiquement modifié sur le serveur : le code du bouton "Supprimer" est exécuté.




La sécurité totale !

| [Page précédente](../Concepts_WB/1410087470.md) | [Sommaire](../Concepts_WB/1410087102.md) | [Page suivante](../Concepts_WB/1410087472.md) |
| --- | --- | --- |




