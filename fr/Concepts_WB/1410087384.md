
## 2. L'administrateur WEBDEV en pratique
			

| [Page précédente](../Concepts_WB/1410087147.md) | [Sommaire](../Concepts_WB/1410087102.md) | [Page suivante](../Concepts_WB/1410087387.md) |
| --- | --- | --- |



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000431"></a>
L'administrateur WEBDEV est un module permettant de gérer les sites WEBDEV dynamiques (de type Session ou AWP).

Lors du développement d'un site WEBDEV dynamique (en mode Session ou AWP), l'administrateur permet principalement de :

- tester le site grâce à la page de test.

- régler les paramètres de connexion au site pour vos tests : temps de déconnexion, ...

- supprimer directement les connexions de test en cours.

- changer le serveur Web utilisé pour vos tests.

- effectuer un diagnostic en cas de problème lors du lancement d'un site WEBDEV.

- ...




En déploiement, deux types d'administrateur WEBDEV existent :

- ***l'administrateur WEBDEV Déploiement*** qui permet à l'hébergeur de gérer les sites WEBDEV dynamiques installés sur un serveur Web.

- ***l'administrateur WEBDEV Distant*** qui permet au gestionnaire de site de gérer ses sites WEBDEV dynamiques à distance depuis n'importe quel poste.




Ce chapitre présente uniquement l'administrateur de WEBDEV version Développement.

Pour plus de détails sur les outils de déploiement, consultez leur aide.

**Lancement de l'administrateur WEBDEV**

Pour lancer l'administrateur de WEBDEV version Développement :

- depuis WEBDEV version Développement : sous le volet "Outils", dans le groupe "Utilitaires Web", cliquez sur "WDAdmin".

- sélectionnez l'option "Programmes .. WEBDEV 28 .. Administrateur WEBDEV" depuis le menu "Démarrer".




L'administrateur WEBDEV est lancé automatiquement au premier test du site.

L'administrateur peut ensuite être laissé en tâche de fond.

Par défaut, l'administrateur WEBDEV autorise dix connexions simultanées à un même site WEBDEV dynamique (icône GO).

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Interface de l'administrateur WEBDEV
<a name="interface_administrateur_webdev_ELTTEXTE000455"></a>
L'administrateur WEBDEV se présente sous la forme d'une fenêtre comportant plusieurs onglets :

- Onglet "Connexions".

- Onglet "Sites" et onglet "Webservices".

- Onglet "WebSockets".

- Onglet "Configuration".

- Onglet "Avancé".

- Onglet "Installations".

- Onglet "Journaux". 



<a name="NOTE2_2"></a>


### Caractéristiques des connexions en cours
<a name="caracteristiques_des_connexions_cours_ELTPARAGRAPHE000079"></a>L'onglet "Connexions" fournit diverses informations à propos des connexions en cours. Ces informations peuvent être consultées à tout moment sur le serveur.Les informations affichées dans l'onglet "Connexions" sont les suivantes :

- le ***nombre de connexions en cours*** indique le nombre de connexions totales aux sites WEBDEV dynamiques gérés par l'administrateur.

- le ***tableau des connexions en cours*** indique pour chaque connexion :

	- l'identifiant de la connexion,

	- le site concerné par la connexion,

	- l'identité du client connecté. En utilisation réelle, le client est identifié par son adresse IP ou son adresse Internet,

	- le temps actuel de connexion,

	- le temps d'inactivité de la connexion.




- l'option **Rafraîchissement automatique** permet de réactualiser automatiquement la table présentant les différentes connexions en cours.




L'onglet "Connexions" permet également de :

- Tester directement les sites installés sur le poste :
	Sélectionnez le site dans la liste déroulante puis cliquez sur "Tester". Ce mode de test permet de tester sur le poste de développement des options spécifiques à la gestion des cookies par exemple.

- Arrêter une connexion en cours :
	Sélectionnez une des connexions et cliquez sur "Déconnecter".

- Stopper toutes les connexions en cours et fermer l'administrateur : cliquez sur "Déconnecter Tous".



<a name="NOTE2_3"></a>


### Sites installés
<a name="sites_installes_ELTPARAGRAPHE000089"></a>L'onglet "Sites" liste les différents sites WEBDEV dynamiques installés sur le poste et gérés par l'administrateur WEBDEV. Pour chaque site, les informations suivantes sont affichées dans un tableau :

- le nom du site.

- le répertoire complet d'installation du site sur le poste.

- le nom du fichier "projet" correspondant.

- l'état du site (bloqué ou non). Il est possible de cocher la case pour bloquer directement l'accès au site pendant la mise à jour du site. 

- le nombre de tâches planifiées utilisées par le site.




L'onglet "Sites" permet aussi de :

- **Supprimer** le site sélectionné dans le tableau.
	Il s'agit uniquement de supprimer le site de l'administrateur : le site WEBDEV sera toujours présent sur le disque.

- **Rafraîchir** l'affichage des sites présents dans le tableau.
	Ce rafraîchissement permet de vérifier la présence d'un site dans l'administrateur après son installation.

- **Ajouter** un site dans le tableau.

- **Paramétrer** individuellement les sites présents sur le poste.
	Par défaut, la configuration prise en compte est celle de l'onglet "Configuration".
	Il est également possible de créer une configuration spécifique pour le site sélectionné (bouton "Paramètres").
	Cette configuration concerne le nombre de connexions autorisées, la durée d'inactivité autorisée et le blocage éventuel du site pour une mise à jour. Pour plus de détails sur ces paramètres, consultez l'onglet "Configuration".
	Pour valider immédiatement le nouveau paramétrage, appuyez sur le bouton "Appliquer".
	Il est également possible de gérer les tâches planifiées associées au site sélectionné (bouton "Tâches planifiées"). Ce paramétrage est disponible uniquement lorsque le site est déployé.

- Tester directement les sites installés sur le poste (uniquement en version de développement) :
	Sélectionnez le site puis cliquez sur "Tester".



<a name="NOTE2_4"></a>


### Webservices installés
<a name="webservices_installes_ELTPARAGRAPHE000122"></a>L'onglet "Webservices" fournit des informations concernant les Webservices WEBDEV dynamiques installés sur le poste.

L'onglet "Webservices" liste les différents Webservices WEBDEV dynamiques installés sur le poste et gérés par l'administrateur WEBDEV. Pour chaque Webservice, les informations suivantes sont affichées dans un tableau :

- le nom du Webservice.

- le répertoire complet d'installation du Webservice sur le poste.

- le nom du fichier "projet" correspondant.

- l'état du Webservice (bloqué ou non). Il est possible de cocher la case pour bloquer directement l'accès au Webservice pendant sa mise à jour.

- le nombre de tâches planifiées utilisées par le Webservice.




L'onglet "Webservices" permet aussi de :

- **Supprimer** le Webservice sélectionné dans le tableau.
	Il s'agit uniquement de supprimer le Webservice de l'administrateur : le Webservice WEBDEV sera toujours présent sur le disque.

- **Rafraîchir** l'affichage des Webservices présents dans le tableau.
	Ce rafraîchissement permet de vérifier la présence d'un Webservice dans l'administrateur après son installation.

- **Ajouter** un Webservice dans le tableau.

- **Paramétrer** individuellement les Webservices présents sur le poste.
	Par défaut, la configuration prise en compte est celle de l'onglet "Configuration".
	Il est également possible de créer une configuration spécifique pour le Webservice sélectionné (bouton "Paramètres").
	Cette configuration concerne le nombre de connexions autorisées, la durée d'inactivité autorisée et le blocage éventuel du Webservice pour une mise à jour. Pour plus de détails sur ces paramètres, consultez l'onglet "Configuration".
	Pour valider immédiatement le nouveau paramétrage, appuyez sur le bouton "Appliquer".
	Il est également possible de gérer les tâches planifiées associées au Webservice sélectionné (bouton "Tâches planifiées"). Ce paramétrage est disponible uniquement lorsque le Webservice est déployé.



<a name="NOTE2_4b"></a>


### Serveurs de WebSocket installés
<a name="serveurs_websocket_installes_ELTPARAGRAPHE000160"></a>L'onglet "WebSockets" liste les différents serveurs de WebSocket WEBDEV installés sur le poste et gérés par l'administrateur WEBDEV. Pour chaque serveur de WebSocket, les informations suivantes sont affichées dans un tableau :

- le nom du serveur,

- le répertoire complet d'installation du serveur de Websocket sur le poste,

- l'état du serveur de websocket (bloqué ou non). Il est possible de cocher la case pour bloquer directement l'accès au serveur de Websocket pendant la mise à jour. 




L'onglet "WebSockets" permet aussi de :

- **Supprimer le ou les serveur(s) de websocket dans le tableau** (bouton "Supprimer").
	Il s'agit uniquement de supprimer le serveur de WebSockets de l'administrateur (et non du disque).

- **Rafraîchir l'affichage** des webservices présents dans le tableau (bouton "Rafraîchir").
	Ce rafraîchissement permet de vérifier la présence d'un webservice dans l'administrateur après son installation.

- **Ajouter un serveur de WebSocket** dans le tableau  (bouton "Ajouter").







<a name="NOTE2_5"></a>


### Configuration générale
<a name="configuration_generale_ELTPARAGRAPHE000170"></a>L'onglet "Configuration" permet de définir les différentes options de connexion par défaut pour les sites WEBDEV présents sur le serveur et gérés par l'administrateur.

L'onglet "Configuration" permet de :

- Paramétrer les connexions.

- Paramétrer les sessions et les requêtes.

- Gérer le débogage à distance.

- Gérer les utilisateurs (Administrateur dé"ploiement uniquement).




Le paramétrage des connexions est réalisé par les options suivantes :

- ***Nombre maximum de connexions pour le serveur*** : 
	Nombre maximum de connexions simultanées autorisées pour l'ensemble des sites gérés par l'administrateur (une connexion = un internaute).

- ***Nombre maximum de connexions pour un site*** : 
	Nombre maximum de connexions simultanées autorisées pour chaque site géré par l'administrateur. Ce nombre peut être modifié pour chaque site dans l'onglet "Sites".

- ***Nombre maximum de connexions d'un utilisateur sur un site*** :
	Nombre maximum de connexions simultanées autorisées pour un même internaute sur chaque site géré par l'administrateur.
	Si ce paramètre est égal à zéro, l'internaute essayant de se connecter simultanément à un même site sera automatiquement déconnecté puis reconnecté.
	Si ce paramètre est supérieur à zéro, un message d'erreur apparaîtra automatiquement au bout des x connexions simultanées.
	Ce nombre peut être modifié pour chaque site (onglet "Sites").
	L'option "Une seule connexion par IP recyclée automatiquement" permet de limiter la connexion d'un utilisateur à une connexion. La même connexion sera réutilisée. Pour autoriser plusieurs connexions depuis la même adresse IP (utilisateurs à travers un routeur ou un proxy), sélectionnez l'option "Limite le nombre de connexions à" et indiquez le nombre de connexions autorisées pour une même adresse IP.




Le paramétrage des sessions et des requêtes est réalisé par les options suivantes :

- ***Déconnecter les utilisateurs inactifs depuis*** :
	Il s'agit du temps maximum de connexion autorisé sans action de la part de l'internaute. Si ce temps est dépassé, l'internaute est automatiquement déconnecté, et un message d'erreur est affiché.
	Ce nombre peut être modifié pour chaque site dans l'onglet "Sites".

- ***Durée des contextes AWP*** : 
	Durée de validité des contextes AWP. Dès que la durée indiquée est écoulée et si aucune nouvelle requête n'a été effectuée, le fichier des contextes est supprimé. Pour plus de détails sur la gestion des contextes AWP, consultez [AWP : Gestion des contextes](../WDChamp/3539060.md).

- ***Durée des contextes Webservices*** : 
	Durée de validité des contextes des webservices. Dès que la durée indiquée est écoulée et si aucune nouvelle requête n'a été effectuée, le fichier des contextes est supprimé. Pour plus de détails sur la gestion des contextes des webservices, consultez [Générer un webservice](../WDLang3/3086002.md).

- ***Durée maximum d'une requête*** : 
	Temps maximum d'attente autorisé entre le déclenchement d'une action par l'internaute (par un bouton ou un lien) et l'affichage de la réponse. Si ce temps est dépassé, une page d'erreur est affichée, mais l'internaute n'est pas déconnecté.

- ***Durée maximum d'une tâche*** : 
	Permet de limiter la durée d'exécution d'une tâche planifiée ou d'une tâche différée WEBDEV. Si la tâche dépasse cette durée, elle sera automatiquement arrêtée.
	Pour plus de détails, consultez [WEBDEV : Tâches planifiées et tâches différées](../WDLang2/1000019455.md).  

- ***Autoriser les sessions prélancées.*** : Cette option permet de gérer les sessions prélancées sur le serveur d'application WEBDEV. Cette option permet d'optimiser le temps de connexion aux sites et Webservices WEBDEV présents sur le serveur. Si cette option est cochée, il est nécessaire de : 

	- modifier le projet pour gérer correctement les sessions prélancées. Pour plus de détails, consultez [Les sessions prélancées](../WDLang2/1000019485.md). 

	- paramétrer le site ou le webservice pour indiquer le nombre de sessions prélancées nécessaires (onglet "Sites" ou "Webservices", bouton "Paramètres").







**Gérer le débogage à distance**
L'administrateur WEBDEV permet d'autoriser ou non le débogage à distance des sites WEBDEV dynamiques.
Si le débogage à distance est autorisé, les paramètres suivants doivent être spécifiés :

- Port principal (27 271 par défaut).

- Plage des ports des sessions (entre 27 282 et 27 289 par défaut).


Le bouton "Par défaut" permet de rétablir les valeurs par défaut.
<a name="NOTE2_6"></a>


### Options avancées
<a name="options_avancees_ELTPARAGRAPHE000189"></a>L'onglet "Avancé" permet de paramétrer des fonctionnalités avancées au niveau du serveur :<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDADMIN_Onglets%20-%20HC%20N%B0006.gif)


- Gérer le serveur Web : 

	- Choisir un des serveurs Web installés sur le poste en cours pour exécuter les sites WEBDEV.

	- Effectuer un diagnostic de configuration du poste en cours.

	- Spécifier le nom ou l'adresse IP du poste en cours.




- Afficher une page de test : 

	- Afficher sous le navigateur une page permettant de lancer tous les sites WEBDEV installés sur le poste en cours.

	- Afficher sous le navigateur une page permettant de lancer tous les webservices WEBDEV installés sur le poste en cours.




- Faire une recherche des pages périmées. 

- Gérer les impressions.

- Paramétrer les messages d'erreur affichés dans le navigateur.

- Réaliser diverses configurations : 

	- Gérer les emails en mode asynchrone.

	- Gérer les sockets serveur.

	- Interdire le changement d'IP en cours de navigation.

	- Interdire l'accès aux identifiants de contexte AWP depuis JavaScript.

	- Gérer les fonctions fCopieFichierRépertoireWeb et fSupprimeFichierRépertoireWeb.

	- Exiger une connexion sécurisée (https) pour les sites d'administration à distance.







Les options concernant le serveur WEB sont les suivantes : 

- **Serveur utilisé** : Le bouton "Serveur" permet de choisir un des serveurs WEB installés sur le poste en cours pour exécuter les sites WEBDEV. Attention : Ce serveur sera utilisé pour tous les sites dynamiques WEBDEV installés sur ce poste. 
	Si le serveur utilisé n'est pas présent dans cette liste, choisissez "Autre". Il faudra alors configurer manuellement le serveur Web utilisé. Pour plus de détails sur la configuration de serveurs spécifiques, consultez l'aide en ligne.

- **Diagnostic** : Le bouton "Diagnostic" permet d'effectuer une vérification de la configuration du poste en cours. Ce diagnostic permet de vérifier :

	- si le protocole TCP/IP est installé

	- si un serveur Web (serveur HTTP) est lancé

	- si le gestionnaire de protocole AWP est correctement configuré

	- si les exécutables WEBDEV nécessaires sont présents.


 Si une de ces conditions n'est pas remplie, les sites WEBDEV dynamiques ne pourront pas fonctionner. Pour plus de détails, consultez l'aide en ligne.

- **Nom ou adresse IP du poste en cours** : L'administrateur WEBDEV permet de spécifier un nom ou une adresse IP pour désigner un poste spécifique. Il est également possible de spécifier le numéro de port. Par exemple : localhost:8080. Ce poste sera utilisé :

	- lors de l'utilisation du bouton "Diagnostic".

	- lors de l'utilisation du bouton "Page de test".

	- lors du test d'un site, d'une page, d'un état, ... depuis l'éditeur WEBDEV (icône "GO").




- **Test** : Le bouton "Page de test" permet d'afficher sous le navigateur une page permettant de lancer chacun des sites WEBDEV dynamiques et des Webservices WEBDEV dynamiques installés sur ce poste. Pour plus de détails sur les tests d'un site WEBDEV, consultez le chapitre [5. Test d'un site en pratique](../Concepts_WB/1410087482.md).




La zone "Recherche des pages périmées" permet de rechercher les pages périmées. L'option "Autoriser la recherche des pages périmées" permet d'activer et de paramétrer la recherche des pages périmées sur les sites WEBDEV gérés par le serveur d'application WEBDEV.

La zone "Impressions" permet de définir l'imprimante utilisée par défaut (site intranet uniquement). Le bouton "Impressions" permet de sélectionner l'imprimante utilisée par défaut lors d'une impression directe sur une imprimante locale ou réseau du serveur Web.

La zone "Messages d'erreur" permet de paramétrer les messages d'erreurs affichés dans le navigateur. Le bouton "Erreurs" affiche les différentes erreurs pouvant être affichées dans le navigateur de l'internaute. Il est possible de personnaliser le message d'erreur ou encore la page HTML où l'erreur est affichée.

La zone "Divers" propose les options suivantes : 

- Gestion des emails : Si l'option "Désactiver le spooler de mail" est décochée, vos sites pourront envoyer des emails sans bloquer l'exécution des différents traitements (mode asynchrone). 
	Il est également nécessaire d'activer le mode asynchrone à l'ouverture de la session d'emails (à l'aide de la fonction [EmailOuvreSessionSMTP](../WDLang3/3032025.md) ou [EmailOuvreSession](../WDLang3/3032028.md)).
	Si le mode asynchrone est activé, tous les emails à envoyer seront transmis à un "Spooler". Les emails sont ainsi mis en file d'attente avant d'être envoyés. L'exécution des fonctions Email n'est alors plus bloquante pour le reste du programme. La fonction [EmailEtat](../WDLang3/3032009.md) permet de connaître l'état d'un email.
	**Remarque** : Si l'administrateur WEBDEV est fermé, le spooler d'emails est vidé : les emails en attente ne sont pas envoyés et sont enlevés du spooler. 
	Si vous cochez l'option "Désactiver le spooler de mail" alors que des emails sont en attente, ces emails ne seront pas perdus : l'administrateur continue de les envoyer, mais aucun nouveau mail ne sera accepté par le spooler. 
	**Attention** : Le mode asynchrone est utilisable uniquement lors de l'ouverture d'une session sur un serveur SMTP (fonction EmailOuvreSessionSMTP pour l'envoi d'emails ou fonction EmailOuvreSession). Ce mode est ignoré dans tous les autres cas. 

- Gestion des Sockets : Si l'option "Autoriser les sockets serveur" est cochée, vos sites pourront manipuler les sockets du serveur (à l'aide des fonctions Socketxxx du WLangage). 

- Si l'option **Interdire le changement d'IP en cours de navigation** est cochée, l'adresse IP associée à la session ne peut pas changer en cours de navigation. Il est ainsi possible d'empêcher les attaques du type "vol de session" (attaque consistant à se faire passer pour un utilisateur légitime connecté au serveur). 

- **Interdire l'accès aux identifiants de contexte AWP depuis JavaScript** : Dans un site AWP, le contexte du site est stocké sur le serveur. L'identifiant de ce contexte est transmis et mémorisé dans le navigateur par l'intermédiaire d'un cookie. 
	Si l'option "Interdire l'accès aux identifiants de contexte AWP depuis JavaScript" est cochée, les cookies utilisés seront de type "HTTPOnly", type ne pouvant pas être lu depuis du code Javascript. Ce mode protège contre les attaques de type XSS (Cross-Site scripting). 
	Par défaut, l'accès aux identifiants de contexte AWP depuis Javascript est interdit. 

- **Gérer les fonctions fCopieFichierRépertoireWeb et fSupprimeFichierRépertoireWeb** : L'option "Autoriser les fonctions fCopieFichierRépertoireWeb et fSupprimeFichierRépertoireWeb." doit être cochée si ces fonctions sont utilisées dans le site Web.
	Ces fonctions permettent notamment de mettre dans le répertoire des images du site des images présentes dans le répertoire des données (cas par exemple d'images uploadées puis mises à disposition pour les internautes utilisant le site). 
	Attention : La copie est prise en charge par l'administrateur de WEBDEV sur le serveur (WD280ADMIN.EXE). Le compte Windows qui l'exécute doit disposer de droits suffisants sur l'emplacement cible de la copie.

- L'option "Exiger une connexion sécurisée (https) pour les sites d'administration à distance" permet d'utiliser les sites d'administration à distance fournis avec WEBDEV en mode sécurisé. Les sites d'administration concernés sont : 

	- l'administrateur distant WEBDEV, 

	- l'administrateur distant HFSQL, 

	- l'administrateur distant SaaS. 






<a name="NOTE2_7"></a>


### Installations
<a name="installations_ELTPARAGRAPHE000288"></a>L'onglet "Installations" permet de :

- Configurer le serveur pour les installations et les mises à jour de site.

- Gérer le journal des installations.




**Installation / Mise à jour**

Ces options sont accessibles en version déploiement. Elles permettent à l'hébergeur de permettre et de paramétrer les installations et mises à jour de sites à distance.

L'option ***"Bloquer le serveur (pour une mise à jour)"*** permet de simplifier la mise à jour d'un site, en interdisant toute connexion d'un nouvel utilisateur. A chaque essai d'une nouvelle connexion à un des sites présents sur le serveur, l'internaute reçoit un message l'informant de l'indisponibilité momentanée du site et lui demandant de réessayer plus tard. Les utilisateurs déjà connectés peuvent continuer d'utiliser le site WEBDEV en cours.

L'option **"La racine du serveur "http[s]://&lt;serveur#XGTXLT#serveur#XGTXLT#serveur&gt;/" affiche une page présentant un lien vers chaque site installé sur le serveur.  

**Fichier journal des installations**

Le journal des installations permet de tracer les éléments installés d'un site. Ce journal est particulièrement utile avant de contacter le Support Technique si vous rencontrez des erreurs lors du déploiement.

Pour gérer le journal des installations, il suffit d'indiquer le chemin complet du fichier correspondant (fichier "WDInstalle_log.txt" par défaut).
<a name="NOTE2_8"></a>


### Journaux
<a name="journaux_ELTPARAGRAPHE000329"></a>L'onglet "Journaux" permet de : 

- visualiser le détail des journaux sur une période donnée. 

- configurer l'envoi des rapports d'erreurs par email.




**Attention** : Pour utiliser cette fonctionnalité, les journaux doivent avoir été activés pour le site. Les journaux peuvent être activés : 

- dans l'onglet "Journaux" pour gérer un journal général, 

- dans l'onglet "Sites" (bouton "Paramètres") et dans l'onglet "Webservices" (bouton "Paramètres") pour gérer un journal spécifique. 


L'activation du journal des statistiques entraîne automatiquement la création du journal des erreurs.

L'administrateur WEBDEV permet de générer un fichier journal spécifique permettant de suivre les statistiques de fréquentation.

- ***Générer un fichier journal (.log)*** :
	Cette option permet de générer un fichier journal (extension ".LOG") pour visualiser les statistiques de fréquentation des sites WEBDEV à l'aide de WDStatistiques. Pour plus de détails sur WDStatistiques, consultez l'aide de WDStatistique.
	La localisation du fichier journal peut être spécifiée. 
	Cette option peut être modifiée pour chaque site dans l'onglet "Sites".

- ***Enregistrer dans le fichier global et dans le fichier de chaque application*** : 
	Cette option permet d'enregistrer les statistiques à la fois dans le fichier journal de l'application et dans le fichier journal du serveur. En effet, si le fichier journal est défini à la fois au niveau du serveur et au niveau des applications (onglet "Sites"), des informations peuvent être "perdues".








| [Page précédente](../Concepts_WB/1410087147.md) | [Sommaire](../Concepts_WB/1410087102.md) | [Page suivante](../Concepts_WB/1410087387.md) |
| --- | --- | --- |




