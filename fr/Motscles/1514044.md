


## Chaînes de caractères
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Types de chaînes de caractères
<a name="types_chaines_caracteres_ELTTEXTE000492"></a>
Le WLangage propose différents types de chaînes de caractères. 

**1. Les types les plus courants sont les suivants** : 


|   |   |
| --- | --- |
| <br><br>- ***Caractère***<br><br><br> | Caractère codé sur 1, 2 ou 4 octets selon le mode de gestion des chaînes de caractères et la plateforme d'exécution.<br><br>- Sous Windows : <br><br>	- en mode Ansi, un caractère est codé sur 1 octet, <br><br>	- en mode Unicode, un caractère est codé sur 2 octets.<br><br><br><br><br>- Sous Linux :<br><br>	- en mode Ansi, un caractère est codé sur 1 octet, <br><br>	- en mode Unicode, un caractère est codé sur 4 octets.<br><br><br><br><br>- Sous iOS, en Unicode, un caractère est codé sur 4 octets. <br><br><br><br><br>Lorsque un caractère est vide, sa valeur correspond à Caract(0).<br><br><br>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Remarque :<br><br>- Si la configuration courante utilise les chaînes ANSI en exécution, les variables de type Caractère seront des caractères ANSI (fonctionnement par défaut).<br><br>- Si la configuration courante utilise les chaînes Unicode en exécution, les variables de type Caractère seront des caractères Unicode.<br><br><br>Rappel : Pour modifier la gestion des chaînes de caractères dans la configuration courante :<br><br><br>1. Affichez la fenêtre de description du projet : sous le volet "Projet", dans le groupe "Projet", cliquez sur "Description".<br><br>2. Dans l'onglet "Projet", cliquez sur le bouton "Description de la configuration courante". <br><br>3. Dans la fenêtre qui s'affiche, affichez l'onglet "Unicode" et choisissez le mode voulu.<br><br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Le type Caractère n'est pas supporté. Il est remplacé par le type Chaîne. |
| <br><br>- ***Chaîne Ansi***<br><br><br> | Chaîne de taille dynamique contenant uniquement des caractères au format ANSI.<br><br>Ce format est notamment nécessaire pour manipuler :<br><br>- les fichiers XML<br><br>- les fichiers RTF<br><br>- les fichiers PDF<br><br>- les fonctions utilisant le format UTF8, ...<br><br><br><br><br> |
| <br><br>- ***Chaîne Unicode***<br><br><br> | Chaîne de taille dynamique contenant uniquement des caractères au format UNICODE.<br><br>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Dans une configuration utilisant des chaînes Ansi en exécution, ce type de chaîne de caractères peut être renvoyé par la fonction [AnsiVersUnicode](../WDLang1/3024002.md) ou par une des fonctions de manipulation des chaînes Unicode. <br>Pour plus de détails, consultez [Gestion de l'Unicode](../WDLang1/3024038.md).<br><br>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Ce type de chaîne de caractères est utilisé par défaut si la configuration courante utilise les chaînes Unicode en exécution.<br><br><br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Ce type de chaîne de caractères n'est pas supporté. Il est remplacé par le type Chaîne.<br><br> |
| <br><br>- ***Chaîne***<br><br><br> | Chaîne de taille dynamique.<br><br>Le type "chaîne" est propre au WLangage. Avec ce type, il n'est pas nécessaire de déclarer la longueur de la chaîne. Celle-ci peut varier de façon libre lors de l'utilisation de la variable.<br><br>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Remarque :<br><br>- Si la configuration courante utilise les chaînes ANSI en exécution, les variables de type Chaîne seront des chaînes ANSI (fonctionnement par défaut).<br><br>- Si la configuration courante utilise les chaînes Unicode en exécution, les variables de type Chaîne seront des chaînes Unicode.<br><br><br>Rappel : Pour modifier la gestion des chaînes de caractères dans la configuration courante :<br><br><br>1. Affichez la fenêtre de description du projet : sous le volet "Projet", dans le groupe "Projet", cliquez sur "Description".<br><br>2. Dans l'onglet "Projet", cliquez sur le bouton "Description de la configuration courante". <br><br>3. Dans la fenêtre qui s'affiche, affichez l'onglet "Unicode" et choisissez le mode voulu.<br><br><br><br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Ce type de chaîne de caractères est au format Unicode. |
| <br><br>- ***Buffer***<br><br><br> | Zone mémoire binaire. Permet d'écrire un code portable entre WINDEV et WINDEV Mobile en ce qui concerne la manipulation des données brutes. Pour plus de détails, consultez [le type "Buffer"](../Motscles/1514042.md).<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Le type Buffer n'est pas supporté. |

**2. D'autres types de chaînes de caractères peuvent également être utilisés :**



|   |   |
| --- | --- |
| <br><br>- ***Chaîne sur***<br><br><br> | Chaîne de taille fixée, terminée par un 0 binaire (identique au langage C). La taille spécifiée correspond au nombre maximum de caractères de la chaîne.<br><br>Ce type de chaîne de caractères permet de créer un code compatible WINDEV / WINDEV Mobile lors de l'appel d'API existantes sur les deux plateformes.<br><br>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Ce type de chaîne de caractères est au format ANSI. |
| <br><br>- ***Chaîne ASCIIZ sur***<br><br><br> | Chaîne terminée par un 0 binaire (identique au langage C). <br><br>La longueur d'une chaîne ASCIIZ est limitée à environ 2 Go. La taille à donner à la chaîne ASCIIZ doit être égale à la taille de la chaîne plus 1 (pour le zéro binaire).<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Le type Chaîne ASCIIZ n'est pas supporté. Il est remplacé par le type Chaîne. |
| <br><br>- ***Chaîne fixe sur***<br><br><br> | Chaîne de taille fixe. <br><br>La longueur d'une chaîne fixe est limitée à environ 2 Go. La chaîne de caractères est complétée : <br><br>- avec 0 si la variable n'est pas encore affectée.<br><br>- avec des espaces si nécessaire si la variable est affectée (elle est semblable au type "string" du Basic).<br><br><br><br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Le type Chaîne fixe n'est pas supporté. Il est remplacé par le type Chaîne. |
| <br><br>- ***Chaîne pascal sur***<br><br><br> | Chaîne précédée d'un octet précisant la longueur (identique au langage Pascal). Cet octet n'est pas accessible. Par exemple chaine[1] représente le premier caractère de la chaîne et non pas sa longueur.  <br><br>La longueur d'une chaîne Pascal est limitée à 255 caractères maximum. La taille à donner à la chaîne Pascal doit être égale à la taille de la chaîne.<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Le type Chaîne Pascal n'est pas supporté. Il est remplacé par le type Chaîne. |
| <br><br>- ***Chaîne Unicode sur***<br><br><br> | Chaîne de taille fixée contenant uniquement des caractères au format UNICODE.<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Ce type de chaîne de caractères n'est pas supporté. Il est remplacé par le type Chaîne.<br><br> |

**Remarques** : 

- Le type "Chaîne sur" doit être utilisé pour envoyer des paramètres en entrée / sortie à une API Windows.

- Tous les types avancés (différents du type "Chaîne") sont disponibles pour compatibilité avec les autres langages de programmation (Turbo Pascal Windows, C, Visual Basic Windows, ...) ou pour recevoir le résultat d'une API Windows.

- WINDEV Mobile et WINDEV ne proposent pas les mêmes types de chaînes de caractères. Pour plus de détails sur les différents types de chaînes de caractères proposées, consultez le paragraphe Notes.




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Cas particulier
<a name="cas_particulier_ELTTEXTE000516"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Chaîne Fixe et chaîne ASCIIZ
<a name="chaine_fixe_chaine_asciiz_ELTPARAGRAPHE000247"></a>

- Lors de la déclaration d'une chaîne ASCIIZ ou d'une chaîne fixe, la mémoire nécessaire est immédiatement allouée. Il est donc nécessaire d'éviter d'utiliser des chaînes de trop grande taille.

- La chaîne fixe est complétée par des espaces. L'initialisation et l'affectation d'une chaîne de grande taille (plusieurs centaines de kilo octets) peuvent être relativement longues.



<a name="NOTE2_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) 

### Traitement des chaînes fixes
<a name="traitement_des_chaines_fixes_ELTPARAGRAPHE000257"></a>Les chaînes fixes ne sont pas disponibles en Java. Elles sont remplacées en exécution par le type Chaîne.

Il est cependant possible d'utiliser la fonction [Complète](../WDLang1/3024010.md) sur une variable de type Chaîne :

```wl
MaChaîne est une chaîne
MaChaîne = Complète("Test", 10)
// Equivalent à 
// MaChaîne est une chaîne fixe sur 10 caractères
// MaChaîne = "Test"
```

<a name="NOTE2_3"></a>


### Attribut d'extension &lt;indétectable&gt;
<a name="attribut_extension_ELTPARAGRAPHE000272"></a>L'attribut d'extension &lt;indétectable&gt; permet d'obfusquer la valeur stockée en mémoire d'une chaîne de caractères (par exemple lors d'un Dump mémoire d'un exécutable). 
Par défaut (si l'attribut d'extension &lt;indétectable&gt; n'est pas précisé), tous les caractères affectés à une variable de type Chaîne sont visibles lors d'un Dump mémoire de l'exécutable. Ils sont visibles parmi toutes les informations présentes dans le dump : on ne sait donc pas où commence et où fini la chaîne, et il n'y a pas moyen d'identifier à quoi correspond cette chaîne. 

L'attribut &lt;indétectable&gt; permet d'obfusquer la valeur stockée en mémoire. Les caractères visibles lors d'un Dump ne pourront identifier la valeur de la chaîne. 

Cet attribut d'extension est notamment utile lors du stockage mémoire de la valeur d'un login ou d'un mot de passe, ou lors du passage d'un mot de passe à la fonction [HPasse](../WDLang4/3044108.md) ou lors de la connexion à une base de données. 

Exemple : 

```wl
MaChaîneMémoire est une chaîne <indétectable>
MaChaîneMémoire = "MotDePasse"
```


Remarque : L'utilisation de l'attribut d'extension &lt;indétectable&gt; peut ralentir l'application. Il est nécessaire de l'utiliser uniquement sur les variables de type chaîne le nécessitant.  

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Interpolation de chaînes (ou construction dynamique des chaînes)
<a name="interpolation_chaines_construction_dynamique_des_chaines_ELTTEXTE000552"></a>
L'interpolation de chaînes consiste à combiner des variables (ou des expressions) et des chaînes de caractères. Pour effectuer cette opération, le WLangage propose : 

- Une option spécifique dans l'onglet "Compilation" de la fenêtre de description du projet : **Autoriser "[% %]" dans les chaînes**. 

- Une syntaxe spécifique : 
	
	```txt
	[%Nomdevariable ou Expression%]
	```
Par exemple : 
	
	```wl
	// Demande de confirmation du client
	SI OuiNon(Oui, "Confirmez-vous la création du client [%sNomClient%]") = Non ALORS
		RETOUR
	FIN
	```





Remarques : 

- Si l'option n'est pas cochée dans l'onglet "Compilation" de la fenêtre de description du projet, la chaîne apparaît telle quelle : le nom de la variable (ou l'expression) apparaît dans la chaîne de caractères. 

- Pour ne pas interpréter les caractères "[% %]", il est nécessaire de les faire précéder par "-%". Certaines fonctions WLangage nécessitent cette syntaxe spécifique.  Exemple : 
	
	```wl
	grBulle(GR_Echéance, grFormatBulle, "[%CATEGORIE%]" + RC + RC+ "[%VALEUR%]" + " H")
	```
 devient
	```wl
	grBulle(GR_Echéance, grFormatBulle, -%"[%CATEGORIE%]" + RC + RC + -%"[%VALEUR%]" + " H")
	```


- Lors de la traduction de ce type de chaînes, il est nécessaire de ne pas traduire le nom de la variable (ou l'expression) à l'intérieur des [% %]. Cependant, il est possible de modifier la place de la balise [%Nomdevariable ou Expression%] dans la phrase. 




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Notes
<a name="notes_ELTTEXTE000576"></a>


### Valeur par défaut
<a name="valeur_par_defaut_ELTPARAGRAPHE000343"></a>

- Une variable de type "Chaîne" ou "Chaîne sur" déclarée et non initialisée correspond à une chaîne vide ("").

- Une variable de type "Buffer" déclarée et non initialisée est vide.

- Une variable de type "Buffer sur" déclarée et non initialisée est remplie avec des 0.



<a name="NOTE3_2"></a>


### Passer une chaîne de caractères en paramètre à une procédure
<a name="passer_une_chaine_caracteres_parametre_une_procedure_ELTPARAGRAPHE000352"></a>Il est possible de passer une variable de type "Chaîne" en paramètre à une procédure.

**Attention** : Si la variable a une taille fixée, il faut supprimer les espaces. Par exemple :

```wl
MaChaîne est une chaîne
MaChaîne = "WINDEV est formidable"
// Suppression des espaces dans MaChaîne
MaChaîne = SansEspace(MaChaîne)
ComptageLettre(MaChaîne)
// ComptageLettre est une procédure
```

<a name="NOTE3_3"></a>


### Utiliser le caractère guillemet dans une chaîne de caractères
<a name="utiliser_caractere_guillemet_dans_une_chaine_caracteres_ELTPARAGRAPHE000362"></a>Pour utiliser le caractère guillemet dans une chaîne de caractères, il est nécessaire de le doubler.

Par exemple :

```wl
MaChaîne est une chaîne
MaChaîne = "L'option ""Conditions générales"" doit être cochée"
Info(MaChaîne)
// Affiche : L'option "Conditions générales" doit être cochée
```

<a name="NOTE3_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Comparaison des différents types chaîne disponibles dans WINDEV et dans WINDEV Mobile
<a name="comparaison_des_differents_types_chaine_disponibles_dans_windev_dans_windev_mobile_ELTPARAGRAPHE000374"></a>

|   | WINDEV / WEBDEV<br>Format de la chaîne | WINDEV Mobile<br>Format de la chaîne |
| --- | --- | --- |
| **Chaîne** | ANSI | Unicode |
| **Caractère** | ANSI | Unicode |
| **Chaîne ASCIIZ sur** | Chaîne ANSI de N caractères | non disponible |
| **Chaîne fixe sur** | Chaîne ANSI de N caractères | non disponible |
| **Chaîne Pascal sur** | Chaîne ANSI de N caractères | non disponible |
| **Chaîne Unicode** | Unicode | Unicode |
| **Buffer** | Binaire | Binaire |
| **Chaîne sur** | Chaîne ANSI de N caractères | Chaîne Unicode de N caractères |
| **Chaîne Unicode sur** | Chaîne Unicode de N caractères | Chaîne Unicode de N caractères |
| **Buffer sur** | Mémo binaire de N octets | Mémo binaire de N octets |



- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Diverstypesdechaines.gif) ***Exemples unitaires (WINDEV)*** : **Divers types de chaînes** <br>Utilisation des différents types de chaînes disponibles avec WINDEV.<br>Les spécificités de chaque type sont détaillées.<br>Types utilisés : <br>- Chaîne "standard"<br>- Chaîne UNICODE<br>- Chaîne fixe<br>- Chaîne Pascal<br>- Chaîne ASCIIZ<br>- Type Buffer



