
## Procédures zombies
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000094"></a>
Lorsqu'un code a beaucoup vécu, il contient souvent des procédures qui sont utilisées, mais qui ne répondent plus aux normes de qualité actuelles.

Dans ce cas, une nouvelle version de la procédure est créée, mais avec des paramètres différents.

Tous les appels existants ne pouvant être modifiés immédiatement, il est possible d'indiquer que l'ancienne version devient une **procédure zombie**. 

Dans ce cas : 

- Lors de la recompilation du projet, un warning permet d'indiquer tous les appels à la procédure zombie. 

- A chaque nouvelle utilisation de la procédure zombie, un logo spécifique est affiché à côté de l'appel pendant 10 s et un warning de compilation est généré.

- La procédure zombie apparaît grisée et barrée dans le volet "Explorateur de projet". 




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000118"></a>
Pour indiquer qu'une procédure est une procédure zombie, il suffit de faire suivre la déclaration de la procédure par l'attribut d'extension &lt;Zombie&gt;. 

La syntaxe est la suivante : 

```txt
PROCEDURE <Nom procédure>(<Paramètres>) <zombie [commentaire = "texte"]> [: <Type du retour>]
PROCEDURE <Nom procédure>() <zombie [commentaire = "texte"]> [: <Type du retour>]
```

Dans ces syntaxes, le mot-clé optionnel **commentaire** permet d'indiquer le texte qui sera affiché dans l'erreur de compilation associée à la procédure obsolète. 


### Exemple
<a name="exemple_ELTPARAGRAPHE000036"></a>

- Code de la procédure : 
	
	```wl
	PROCÉDURE AjouteArbre(sNoeud, sMois, sImageDate, sImage)<zombie commentaire = "utiliser AjComplet">
	
	// Vérification pour savoir si l'année existe
	SI ArbreEtat(ArbreCommande, sNoeud) = aErreur ALORS
		// elle n'existe pas, on la crée avec tous les mois
		ArbreAjoute(ArbreCommande, sNoeud, sImageDate, sImageDate, "", aDernier)
		AjouteMois(sNoeud)
	FIN
	```


- La procédure zombie apparaît grisée et barrée dans le volet "Explorateur de projet" (dès que l'élément est recompilé). <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=proc_zombie_3.gif)


- Lors de la saisie de l'appel à la fonction, une icône spécifique sera affichée pendant 10 secondes  : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Proc_zombie_1.gif)
 et une erreur de compilation contenant le commentaire sera affichée : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Proc_zombie_2.gif)








