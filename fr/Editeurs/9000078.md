


## Imprimer sous Linux
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000297"></a>
WINDEV et WEBDEV permettent de réaliser des impressions en WLangage sous Linux au format PDF. Il est possible d'effectuer : 

- des impressions WLangage au format PDF. 

- des impressions d'états réalisés avec l'éditeur d'états au format PDF.




L'impression se fait à l'aide des fonctions WLangage de la même façon que pour une impression classique.

Cette page d'aide présente les limitations de l'impression sous Linux.
<a name="NOTE1_2"></a>


### Configuration nécessaire
<a name="configuration_necessaire_ELTPARAGRAPHE000025"></a>Pour utiliser les impressions en WEBDEV Linux, il est nécessaire d'installer :

- **la librairie QT (Core et GUI), version 5 minimale.**
	Sous Ubuntu, la librairie QT peut être installée avec les commandes suivantes : 
	
	```txt
	sudo apt-get install libqtcore5
	sudo apt-get install libqtgui5
	```





- **la librairie LibFreeType.so (32 ou 64 bits), version 6 minimale.**
	**Attention** : Le framework de PC SOFT recherche la librairie libfreetype.so. Si seul le fichier libfreetype.so.6 existe, il est nécessaire de créer un lien symbolique grâce à la commande suivante :
	
	```txt
	ln -s /usr/lib/libfreetype.so.6 /usr/lib/libfreetype.so
	```







**Note** : Il est possible d'installer des polices Microsoft sous Linux, pour obtenir des états plus fidèles à leur aperçu sous Windows. Sous Ubuntu, ces polices peuvent être rajoutées en suivant la procédure ci après : [http://doc.ubuntu-fr.org/msttcorefonts](http://doc.ubuntu-fr.org/msttcorefonts).

**Remarque** : Les distributions Linux supportées sont les suivantes :

- Debian 5.02

- Ubuntu 10.04



<a name="NOTE1_3"></a>


### Comment lancer directement le PDF généré lors d'une impression ? 
<a name="comment_lancer_directement_pdf_genere_lors_une_impression_ELTPARAGRAPHE000066"></a>Pour lancer directement le PDF créé lors de l'impression, il suffit d'utiliser les commandes suivantes : 

```txt
xdg-open url
```


ou 

```txt
gnome-open url
```


<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Imprimer des états au format PDF en Linux
<a name="imprimer_des_etats_format_pdf_linux_ELTTEXTE000333"></a>
Les étapes pour imprimer des états en Linux sont les suivantes :

- **Étape 1** : Configuration de la destination de l'impression. 
	Cette configuration est réalisée avec la fonction [iDestination](../WDLang5/3046074.md). Seule l'impression au format PDF est disponible en Linux, il est donc nécessaire d'utiliser la fonction [iDestination](../WDLang5/3046074.md) avec les constantes de génération des fichiers PDF (*iPDF*ou *iPDFGénérique*). 

- **Étape 2** : Lancement de l'impression.
	Le lancement de l'impression de l'état est réalisé avec la fonction [iImprimeEtat](../WDLang5/3046032.md). 



<a name="NOTE2_2"></a>


### Limitations : champs d'un état supportés en Linux
<a name="limitations_champs_etat_supportes_linux_ELTPARAGRAPHE000100"></a>Les champs supportés dans un état imprimé sous Linux sont les suivants : 

- Champ Libellé (le type RTF n'est pas supporté).

- Champ Calculé. 

- Champ Image. 

- Champ Pré-défini. 

- Champ Forme. 

- Champ Etat Interne. 

- Champ Lien. 

- Champ de saisie. 

- Champ Code-Barres. 

- Champ Graphe.

- Champ Interrupteur.  

- Champ Agenda.

- Champ Planning.

- Champ Tableur.




Les champs non supportés sont les suivants : 

- Champ Libellé de type RTF.

- Champ Tableau croisé dynamique. 

- Champ Diagramme de Gantt. 

- Champ Signature.

- Champ Libellé de type HTML.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Impression en WLangage sous Linux
<a name="impression_wlangage_sous_linux_ELTTEXTE000363"></a>
Les étapes pour imprimer en WLangage sont :

- **[Étape 1 (optionnelle)](#NOTE3_2)** : Configuration des paramètres d'impression.

- **[Étape 2 (optionnelle)](#NOTE3_3)** : Création de la police ou des polices d'impression (optionnel).

- **[Étape 3](#NOTE3_4)** : Impression des caractères, des lignes ou des images et fin d'impression.

- **[Étape 4](#NOTE3_5)** : Lancement de l'impression.



<a name="NOTE3_2"></a>


### Etape 1 : Configuration des paramètres d'impression
<a name="etape_1_configuration_des_parametres_impression_ELTPARAGRAPHE000158"></a>Cette étape permet de choisir les paramètres d'impression du document (qualité d'impression, orientation).

**Cette étape est facultative**.

Les différentes manipulations possibles sont les suivantes :

1. **Sélection des paramètres d'impression du document** (fonction [iParamètre](../WDLang5/3046008.md)). Lors de l'impression en Linux, Il est possible de paramétrer uniquement le format de la page ou son orientation.

2. **Re-définition des marges d'impression** (fonction [iMarge](../WDLang5/3046011.md)). Il est possible de modifier les marges basse, haute, gauche et droite. Si cette fonction n'est pas appelée, les marges par défaut (différentes selon l'imprimante sélectionnée) sont utilisées.




**Attention** : L'ordre des manipulations présentées ci-dessus doit être respecté. Si une impression est en cours, la fonction [iParamètre](../WDLang5/3046008.md) provoque la fermeture de l'impression en cours.
<a name="NOTE3_3"></a>


### Etape 2 : Création des polices d'impression
<a name="etape_2_creation_des_polices_impression_ELTPARAGRAPHE000183"></a>Cette étape permet de définir et de choisir les différentes polices qui seront utilisées dans le document imprimé.

Il est uniquement possible de choisir des polices spécifiques à l'impression : ces polices ne pourront être utilisées que lors de l'impression avec les fonctions du WLangage.

**Cette étape est facultative**.

Si aucune police n'est définie pour l'impression, la police par défaut est utilisée.

- Fonte : Don't care

- Police numéro 0,

- taille : 12 points pica,

- style normal.

- couleur : noir




Les polices d'impression sont créées avec la fonction [iCréePolice](../WDLang5/3046045.md).

**Remarques** : 

- En Linux, seules les polices TrueType (\*.ttf) sont utilisables.

- Si des polices autres que les polices de base doivent être utilisées, il est nécessaire de les installer sur le serveur WEBDEV (en utilisant les répertoires de la distribution utilisée). Pour plus de détails, consultez la documentation de la distribution utilisée. 



<a name="NOTE3_4"></a>


### Etape 3 : Impression de caractères, d'images
<a name="etape_3_impression_caracteres_images_ELTPARAGRAPHE000212"></a>Cette étape consiste à "envoyer à l'impression" les différents éléments à imprimer :

- texte,

- images,

- dessins, ...




L'impression en PDF (configuré avec la fonction [iDestination](../WDLang5/3046074.md)) ne sera effective qu'à la fin de l'impression (fonction [iFinImprime](../WDLang5/3046053.md)).

Plusieurs fonctions WLangage permettent d'imprimer du texte, des images, etc. Pour plus de détails, consultez la liste des fonctions d'impression utilisables en Linux.

**Remarque** : Impression des images : En Linux, les images au format JPEG, BMP, PNG et GIF peuvent être imprimées.
<a name="NOTE3_5"></a>


### Etape 4 : Lancement de l'impression
<a name="etape_4_lancement_impression_ELTPARAGRAPHE000235"></a>Cette étape consiste à lancer l'impression (fonction [iFinImprime](../WDLang5/3046053.md)).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Liste des fonctions d'impression disponibles en Linux
<a name="liste_des_fonctions_impression_disponibles_linux_ELTTEXTE000411"></a>
Les fonctions d'impression suivantes sont disponibles en Linux : 



|   |   |
| --- | --- |
| [iCadre](../WDLang5/3046044.md) | Imprime un cadre aux coordonnées spécifiées. |
| [iCadreArrondi](../WDLang5/3046024.md) | Imprime un cadre avec des bords arrondis aux coordonnées spécifiées. |
| [iChangeSousEtatSource](../WDLang5/1000019621.md) | Modifie par programmation l'état associé à un sous-état dans un état composite. |
| [iConfigureEtat](../WDLang5/3046076.md) | Configure l'imprimante en ouvrant directement la fenêtre de configuration (WINDEV et WINDEV Mobile). |
| [iCréePolice](../WDLang5/3046045.md) | Crée une nouvelle police d'impression. |
| [iDernierFichier](../WDLang5/3046068.md) | Renvoie : <br><br>- le nom complet du dernier fichier généré lors de l'impression (PDF, RTF, Texte, ...).<br><br>- la liste des fichiers duplicata créés. <br><br><br> |
| [iDestination](../WDLang5/3046074.md) | Paramètre la destination de l'impression. |
| [iEllipse](../WDLang5/3046009.md) | Imprime une ellipse (à l'intérieur d'un rectangle). |
| [iEnchaînementAjoute](../WDLang5/1000020059.md) | Ajoute un état dans un enchaînement d'impressions d'états. |
| [iEnchaînementImprime](../WDLang5/1000019903.md) | Déclenche l'impression d'un enchaînement d'états. |
| [iEscape](../WDLang5/3046054.md) | Envoie une commande ESCAPE ou une commande de données à une imprimante. |
| [iFenêtreAbandon](../WDLang5/3046042.md) | Paramètre l'affichage de la fenêtre permettant l'abandon de l'impression en cours... |
| [iFermeEtat](../WDLang5/3046041.md) | Arrête immédiatement l'impression de l'état en cours. |
| [iFichierEnCours](../WDLang5/1000021859.md) | Renvoie le nom du fichier en cours de génération. |
| [iFinEtat](../WDLang5/3046040.md) | Force l'arrêt de l'impression d'un état. |
| [iFinImprime](../WDLang5/3046053.md) | Signale la fin du document à imprimer et lance l'impression effective des données actuellement stockées dans la file d'attente de l'imprimante par les fonctions [iImprime](../WDLang5/3046031.md), [iImprimeImage](../WDLang5/3046017.md), [iLigne](../WDLang5/3046035.md), etc. |
| [iForceComplément](../WDLang5/3046046.md) | Force l'impression d'un bloc de complément de corps. |
| [iGroupeAjoute](../WDLang5/1000020580.md) | Ajoute un état à un groupe d'états. |
| [iGroupeImprime](../WDLang5/1000020582.md) | Lance l'impression d'un état présent dans un groupe d'états. |
| [iGroupeParamètre](../WDLang5/1000020581.md) | Modifie les paramètres d'un état présent dans un groupe d'états. |
| [iHautBasPageImbriqué](../WDLang5/3046047.md) | Imprime ou non les hauts et bas de page de l'état imbriqué. |
| [iHauteurImage](../WDLang5/3046057.md) | Calcule la hauteur de l'image à imprimer (en millimètres). |
| [iHauteurPage](../WDLang5/3046052.md) | Calcule la hauteur de la page imprimable (en millimètres) en tenant compte des marges (hautes ou bases) définies. |
| [iHauteurRestantePage](../WDLang5/3046060.md) | Calcule la hauteur disponible (en millimètres) restant sur la page en cours en tenant compte des marges (hautes ou basses) définies. |
| [iHauteurTexte](../WDLang5/3046070.md) | Calcule la hauteur de la police du texte à imprimer (en millimètres). |
| [iHauteurZone](../WDLang5/3046062.md) | Calcule la hauteur nécessaire d'une zone de largeur fixe pour que l'ensemble d'un texte utilisant la police en cours puisse être imprimé dans cette zone. |
| [iImpressionAbandonnée](../WDLang5/3046006.md) | Permet de savoir si l'utilisateur a demandé l'abandon de l'impression du document en cours. |
| [iImpressionDemandée](../WDLang5/3046029.md) | Permet de savoir si l'utilisateur a demandé l'impression du document depuis le visualisateur de rapports. |
| [iImprime](../WDLang5/3046031.md) | Envoie au buffer d'impression la chaîne de caractères passée en paramètre. |
| [iImprimeBloc](../WDLang5/3046030.md) | Force l'impression d'un bloc de l'état en cours d'impression. |
| [iImprimeCodeBarre](../WDLang5/3046020.md) | Imprime un code-barres (à l'intérieur d'un rectangle). |
| [iImprimeComplémentCorps](../WDLang5/3046019.md) | Force l'impression d'un bloc de complément de corps en spécifiant la hauteur du bloc de complément. |
| [iImprimeEtat](../WDLang5/3046032.md) | Imprime un état réalisé avec l'éditeur d'états. |
| [iImprimeImage](../WDLang5/3046017.md) | Envoie au buffer d'impression le fichier image à imprimer. |
| [iImprimeMot](../WDLang5/3046034.md) | Envoie au "buffer" d'impression la chaîne de caractères passée en paramètre. |
| [iImprimeZone](../WDLang5/3046027.md) | Imprime un texte dans une zone rectangulaire. |
| [iInfoImprimante](../WDLang5/3046022.md) | Récupère les caractéristiques de l'imprimante en cours ou de l'imprimante par défaut. |
| [iInitRequêteEtat](../WDLang5/3046021.md) | Initialise la requête liée à l'état (cas d'une requête paramétrée). |
| [iInitRequêteEtatConnexion](../WDLang5/3046028.md) | Initialise la requête liée à l'état. |
| [iInitSousEtat](../WDLang5/1000019503.md) | Initialise les paramètres d'un sous-état d'un état composite. |
| [iLargeurImage](../WDLang5/3046061.md) | Calcule la largeur de l'image à imprimer (en millimètres). |
| [iLargeurPage](../WDLang5/3046036.md) | Calcule la largeur de la page imprimable (en millimètres) en tenant compte des marges (gauches ou droites) définies. |
| [iLargeurTexte](../WDLang5/3046033.md) | Calcule la largeur (en millimètres) du texte à imprimer en fonction de la police spécifiée. |
| [iLigne](../WDLang5/3046035.md) | Imprime une ligne (au standard Windows, avec le bout arrondi) aux coordonnées spécifiées. |
| [iListeEtatsImbriqués](../WDLang5/3046005.md) | Renvoie : <br><br>- la liste des états imbriqués en cours d'impression (états lancés par la fonction [iImprimeEtat](../WDLang5/3046032.md) dans un des traitements de l'état en cours d'impression). <br><br>- la liste des états enchaînés en cours d'impression (fonction [iEnchaînementAjoute](../WDLang5/1000020059.md)).<br><br><br> |
| [iMarge](../WDLang5/3046011.md) | Définit les marges "logiques" d'impression. |
| [iMMVersPica](../WDLang5/3046004.md) | Convertit les coordonnées d'un point (exprimées en millimètres) en coordonnées système. |
| [iNationImpression](../WDLang5/1000020968.md) | Modifie la langue courante pour la prochaine impression (impression programmée ou impression d'états). |
| [iNumColonne](../WDLang5/1000018825.md) | Renvoie le numéro de la colonne en cours dans un état multi-colonnes. |
| [iNumPage](../WDLang5/3046013.md) | Renvoie ou initialise le numéro de la page en cours d'impression. |
| [iParamètre](../WDLang5/3046008.md) | Récupère le paramétrage de l'imprimante et paramètre l'impression. |
| [iParamètreEtat](../WDLang5/3046077.md) | Configure l'imprimante en ouvrant directement la fenêtre de configuration. |
| [iParamètrePDF](../WDLang5/3046007.md) | Fixe les options du fichier PDF généré. |
| [iPicaVersMM](../WDLang5/3046010.md) | Convertit les coordonnées d'un point (exprimées en coordonnées système) en millimètres. |
| [iPolice](../WDLang5/3046014.md) | Sélectionne la police par défaut. |
| [iPoliceDidot](../WDLang5/3046016.md) | Sélectionne l'unité à utiliser pour la hauteur des polices (créées avec la fonction [iCréePolice](../WDLang5/3046045.md)) : point DIDOT ou point PICA. |
| [iPosX](../WDLang5/3046015.md) | Permet de gérer la position horizontale (abscisse ou colonne) du curseur d'impression dans la page. |
| [iPosY](../WDLang5/3046075.md) | Permet de gérer la position verticale (ordonnée ou ligne) du curseur d'impression dans la page. |
| [iRAZ](../WDLang5/3046067.md) | Ré-initialise les paramètres d'impression (marges, police, format du papier, orientation, ...) mémorisés dans la librairie d'impression. |
| [iRAZNbPages](../WDLang5/1000021134.md) | Réinitialise le nombre de pages courant, utilisé dans les champs prédéfinis de type "Nombre de pages" et "Numéro et nombre de pages". |
| [iSauteLigne](../WDLang5/3046071.md) | Force un ou plusieurs sauts de ligne. |
| [iSautePage](../WDLang5/3046073.md) | Génère un saut de page : le code correspondant est envoyé dans la file d'impression de l'imprimante. |
| [iSelectPolice](../WDLang5/3046055.md) | Crée une nouvelle police d'impression depuis la fenêtre standard de sélection des polices de Windows... |
| [iStatusImpressionEtat](../WDLang5/3046043.md) | Renvoie l'état de l'impression en cours. |
| [iSubstBloc](../WDLang5/3046048.md) | Substitue un bloc de l'état par un autre bloc au cours de l'impression de l'état. |
| [iTermineColonne](../WDLang5/1000019184.md) | Force un saut de colonne dans un état multicolonne. |
| [iTerminePage](../WDLang5/3046038.md) | Force le passage à la page suivante au cours de l'impression d'un état. |
| [iTrait](../WDLang5/3046050.md) | Imprime un trait aux coordonnées spécifiées. |
| [iTraitH](../WDLang5/3046051.md) | Imprime un trait horizontal aux coordonnées spécifiées. |
| [iTraitV](../WDLang5/3046066.md) | Imprime un trait vertical aux coordonnées spécifiées. |





**Remarque** : Les fonctions de type **iImprimexxx** fonctionnent uniquement avec les nouvelles distributions Linux. 


