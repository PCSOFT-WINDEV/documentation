


## Analyseur de performances
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000303"></a>
L'analyseur de performances (appelé également Profiler) est un outil permettant de vérifier et d'optimiser le temps d'exécution de votre application.

**Son principe est simple** :
Vous testez votre application. Pendant ce test, l'analyseur de performances répertorie toutes les actions effectuées et les traitements correspondants exécutés.
A la fin du test, l'analyseur de performances vous présente :

- les 10 manipulations qui ont pris le plus de temps

- toutes les actions effectuées dans l'application testée, triées par durée (de l'action la plus longue à l'action la moins longue).




Il est possible de sélectionner un traitement afin d'analyser les causes de son temps de traitement pour l'optimiser.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Lancer l'analyseur de performances
<a name="lancer_analyseur_performances_ELTTEXTE000327"></a>


### Lancer l'analyseur de performances
<a name="lancer_analyseur_performances_ELTPARAGRAPHE000033"></a>L'analyseur de performances peut être lancé :

- **Directement depuis l'éditeur de WINDEV, WINDEV Mobile ou WEBDEV** : sous le volet "Projet", dans le groupe "Audit et performances", déroulez "Analyser les performances" et sélectionnez "Analyser les performances". Dans ce cas, le projet est alors automatiquement exécuté en mode test. Vous pouvez exécuter le traitement à optimiser dans votre application. 
	Pour revenir sous l'éditeur de WINDEV, WINDEV Mobile ou WEBDEV, il suffit de quitter votre application ou votre site. 
	L'analyseur de performances affiche alors le résultat de l'analyse. Ce résultat est enregistré sous forme d'un fichier WPF.
	![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Le test est réalisé sous le simulateur. 

- **Depuis un de vos traitements en WLangage**, grâce aux fonctions suivantes :
	


|   |   |
| --- | --- |
| [AnalyseurDébut](../WDLang1/3013012.md) | Lance la "collecte d'informations" pour l'[analyseur de performances](../Editeurs/2030035.md). |
| [AnalyseurFin](../WDLang1/3013002.md) | Arrête la "collecte d'informations" pour l'[analyseur de performances](../Editeurs/2030035.md). |

- **Depuis n'importe quelle application** : l'appui sur la combinaison de touches WIN + Maj + F10 a un effet équivalent à l'appel de la fonction [AnalyseurDébut](../WDLang1/3013012.md). Dans ce cas, l'analyse se termine : 

	- à l'arrêt de l'application, 

	- avec le raccourci WIN + Maj + F11. 


A l'arrêt de l'enregistrement, l'emplacement du rapport d'analyse est copié dans le presse-papiers.


**Remarques** : 

- Il est conseillé d'utiliser l'analyseur de performances pour optimiser votre application (avant sa diffusion par exemple).

- Si le Widget "Performances" est activé dans le [Tableau de bord du projet](../Editeurs/9500221.md), l'analyseur de performances est automatiquement lancé à chaque GO du projet. Le rapport de performances correspondant est enregistré dans le répertoire du projet. En cas de problèmes, un clic sur le lien "Cliquez ici pour voir le détail" permet d'afficher le rapport de performances. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=TDB_Wid_perf.gif)




<a name="NOTE2_2"></a>


### Enregistrer ou ouvrir un fichier des statistiques
<a name="enregistrer_ouvrir_fichier_des_statistiques_ELTPARAGRAPHE000106"></a>Par défaut, l'analyseur de performances enregistre les statistiques réalisées sur le code de l'application dans un fichier "&lt;Nom du Projet&gt;.WPF".

Pour changer ce nom, cliquez sur le bouton "Enregistrer sous ..." dans l'analyseur de performances.

Pour ouvrir un fichier de statistiques spécifique (par exemple un fichier créé par programmation) :

1. Sous le volet "Projet", dans le groupe "Audit et performances", déroulez "Analyser les performances" et sélectionnez "Ouvrir un rapport de performances".

2. Indiquez le chemin et le nom du fichier de statistiques.


Pour obtenir la liste des derniers fichiers de statistiques ouverts, sous le volet "Projet", dans le groupe "Audit et performances", déroulez "Analyser les performances".
Remarque : Il est également possible d'ouvrir un fichier de statistiques depuis le Widget "Performances" présent dans le [Tableau de bord du projet](../Editeurs/9500221.md).

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Optimiser un traitement à l'aide de l'optimiseur de performances
<a name="optimiser_traitement_aide_optimiseur_performances_ELTTEXTE000379"></a>


### Lire le résultat de l'analyseur de performances
<a name="lire_resultat_analyseur_performances_ELTPARAGRAPHE000154"></a>L'analyseur de performances présente le résultat de l'analyse dans deux onglets :

- l'onglet "Synthèse" présente les 10 traitements qui ont pris le plus de temps.

- l'onglet "Détail" présente tous les traitements lancés lors du test de l'application (classés du plus long au plus rapide).




Pour chaque traitement, les informations suivantes sont affichées :<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Analyseur%20performances%20-%20HC%20N%B0004%201.gif)



|   |   |   |
| --- | --- | --- |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cercle1.gif)<br> | Parent | Elément ou traitement qui a appelé la fonction. |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cercle2.gif)<br> | Fonction | Fonction, traitement, événement ou procédure exécutée. |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cercle3.gif)<br> | Temps Total | Temps d'exécution de la fonction. |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cercle4.gif)<br> | Nb appels | Nombre d'appels effectués à la fonction (procédure, événement ou traitement). |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cercle5.gif)<br> | Temps 1 appel | Temps d'exécution d'un appel à la fonction (procédure, événement ou traitement) |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cercle6.gif)<br> | % code | Pourcentage du temps passé dans le traitement de la fonction ou de la procédure (code du développeur pouvant être optimisé). |


**Remarques** : 

- Le libellé "Exécution complète" représente le temps complet de l'exécution du test de l'application réalisé avec l'analyseur de performances.

- Le libellé "Total Fenêtre XXX" représente le temps complet de l'exécution de la fenêtre XXX (de son ouverture à sa fermeture).



<a name="NOTE3_2"></a>


### Choisir un traitement à optimiser
<a name="choisir_traitement_optimiser_ELTPARAGRAPHE000210"></a>Le choix du traitement à optimiser se fait en fonction de plusieurs critères :

- **Le temps d'exécution du traitement**. Les traitements les plus longs doivent bien entendu être optimisés.

- **Le pourcentage de temps passé dans le traitement de la fonction ou procédure**. Plus ce pourcentage est important, plus le code peut contenir des traitements pouvant être optimisés.




**Remarque** : Si le traitement correspond à une fonction WLangage, il est relativement difficile de l'optimiser.
<a name="NOTE3_3"></a>


### Optimiser un traitement
<a name="optimiser_traitement_ELTPARAGRAPHE000222"></a>Lorsque le traitement à optimiser est choisi, l'analyseur de performances vous permet de connaître le détail des opérations effectuées.

Pour afficher le détail des opérations effectuées dans un traitement : 

1. Sélectionnez la fonction à optimiser dans l'onglet "Détail".

2. Affichez le détail de cette fonction :

	- soit en double-cliquant sur la fonction.

	- soit en cliquant sur le bouton "Appels".




3. L'onglet suivant apparaît :<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Analyseur%20performances%20-%20HC%20N%B0004.gif&type=thumb)
Cet onglet est divisé en trois parties :

	- La liste des fonctions appelant le traitement sélectionné.

	- La fonction sélectionnée (avec le nombre d'appels à cette fonctions et le temps total de traitement).

	- La liste des fonctions appelées par la fonction sélectionnée.







**La liste des fonctions appelées permet d'affiner la recherche du traitement à optimiser**. En effet, il est possible de visualiser les différentes fonctions appelées, et le temps de traitement de chaque fonction.

Tous les traitements contenant du code WLangage (nommé "Code du développeur") peuvent être optimisés.

Un double-clic sur une des fonctions de cette liste (par exemple : "Clic sur Valider") permet de visualiser le détail des traitements appelés par cette fonction.

**Remarques** :

- Le libellé "***Traitement interne au moteur d'exécution***" correspond au temps d'exécution de la fonction ou de la procédure (cas d'une fonction WLangage par exemple). Ce temps est incompressible et ne peut pas être optimisé.

- Le libellé "***Code du développeur***" correspond au temps d'exécution de la fonction ou de la procédure. Ce temps est compressible et peut être optimisé.

- Pour visualiser rapidement le traitement en cours, il suffit de cliquer sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Detail_Description_FEN_btnCode%20-%20HC%20N%B0001%201.GIF). L'analyseur reste ouvert et vous pouvez modifier le code en cours.

- Le bouton "Précédent" permet de revenir à la fonction immédiatement appelante.

- Le bouton "Début" permet de revenir au traitement du début de l'application.

- Si l'application comporte plusieurs threads, seul le thread principal est pris en compte.





