


## Fichier MDL (conservé par compatibilité) : Description de la fenêtre 
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000215"></a>
Le fichier MDL est le fichier permettant de générer une fenêtre de type RAD. Ce fichier contient toute la description du modèle à générer. Cette description est divisée en deux parties distinctes :

- la description du modèle,

- la description de la fenêtre.




Cette page d'aide présente uniquement le code permettant de décrire la fenêtre. Pour détailler ce code, le script d'un modèle Fiche.mdl est utilisé. 

**ATTENTION : En version 12, le RAD a été entièrement refait. Les fichiers MDL sont conservés par compatibilité. Pour plus de détails, consultez [Nouveaux Patterns RAD](../Editeurs/2031020.md).**

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Les différentes parties de la description de la fenêtre
<a name="les_differentes_parties_description_fenetre_ELTTEXTE000239"></a>


### 1. Les caractéristiques de la fenêtre
<a name="1_les_caracteristiques_fenetre_ELTPARAGRAPHE000028"></a>
```txt
##############################################################
# 
# F I C H E
# 
###############################################################
###############################################################
# 
# Description de partie fiche
# 
###############################################################
[ZoneFiche]
#############################
Fichier=A
NomZone=Fiche
DescZone=Choisissez le fichier ou la requête associé à la fenêtre
Coord=6,6,200,500
TYPEFIC=SaufRelation
```


Les différents éléments utilisés dans ce code sont les suivants : 


|   |   |
| --- | --- |
| **[ZoneFiche]** | Signale le début de la section de description de la fenêtre |
| **Fichier** | Fichier associé à la zone (ici la fenêtre) |
| **NomZone** | Nom de la zone |
| **DescZone** | Phrase descriptive permettant dans l'assistant de choisir l'élément associé à la fenêtre |
| **Coord** | Coordonnées de la zone données sous la forme &lt;X&gt;, &lt;Y&gt;, &lt;Largeur&gt;, &lt;Hauteur&gt; |
| **TypeFic** | Type des fichiers acceptés : Tous, Relation, SaufRelation |


<a name="NOTE2_2"></a>


### 2. Description des boutons
<a name="2_description_des_boutons_ELTPARAGRAPHE000068"></a>
```txt
##############################################################
#
# Description des boutons de validation associés à la fiche
#
##############################################################
[ZoneBouton]
#############################
NomZoneAssoc=Fiche
Coord=212,6,80,54
AUTOEXTENSION=4
NomZone=Bouton_Fiche_Modif
#############################
# Bouton de modification
#############################
BOUTON=OK,OK,Validation,GP_MODIF,BoutonOK
BOUTON=Annuler,Annuler,Abandon,GP_MODIF,BoutonAnnuler
```

<a name="NOTE2_3"></a>
Les différents éléments utilisés dans ce code sont les suivants :


|   |   |
| --- | --- |
| **[ZoneBouton]** | Signale le début de la section de description des boutons de la fenêtre |
| **NomZoneAssoc** | Indique le nom de la zone de champs associée à la zone de bouton |
| **%ifdef** | Indique le début d'un code conditionnel. L'instruction complète est de la forme :<br> **%ifdef .... %else      %endif** |
| **Coord** | Coordonnées de la zone de boutons, données sous la forme &lt;X&gt;, &lt;Y&gt;, &lt;Largeur&gt;, &lt;Hauteur&gt; |
| **AUTOEXTENSION** | La zone peut s'agrandir :<br>1. Déplacement vertical<br>2. Agrandissement vertical<br>4. Déplacement horizontal<br>8. Agrandissement horizontal |
| **NomZone** | Nom de la zone de bouton |
| **BOUTON** | Description d'un des boutons : Nom du bouton, libellé, type du bouton, groupe associé, style associé dans le gabarit du projet. Ce style doit être choisi parmi les styles suivants :<br><br><br><br>\   \   \   \<br>\ --- \ --- \ --- \<br>\ BoutonNouveau \ BoutonModifier \ BoutonSupprimer \<br>\ BoutonFermer \ BoutonParcours \ BoutonPremier \<br>\ BoutonPrecedent \ BoutonSuivant \ BoutonDernier \<br>\ BoutonImprimer \ BoutonVision \   \<br><br> |


<a name="NOTE2_4"></a>


### 3. Code des boutons
<a name="3_code_des_boutons_ELTPARAGRAPHE000148"></a>
```txt
#############################
# code du bouton OK
#############################
CodeBouton=Debut,OK
%define PCODE Clic
%ifdef PROC
@// indique que la fiche n'est plus modifiée
gbFenetreModifiee = gbFenetreModifiee OU MaFenetre..Modifié
MaFenetre..Modifié=faux
// selon le mode de la fenêtre
SELON Gauche(ExtraitChaîne(gModeFenetre,1,"="),8)
// mode création
CAS "Création"
// Mise en place de l'enregistrement et validation
SI RADEnregistre() ALORS
@
%ifdef SQL
@ // ajout de l'enregistrement 
SI PAS HExecuteRequete({RAD_REQ_INSERT_A},hRequeteDefaut, ...
@ 
%repeat XXXX
@ {RAD_RUB_A},...
@
%endrep
@ {RAD_DERNIER_RUB_A}) ALORS 
Info("Impossible d'ajouter un enregistrement"+RC+HErreurInfo())
...

@
%endif
%enddef PCODE
Code=Fin
```

<a name="NOTE2_5"></a>
Les différents éléments utilisés dans ce code sont les suivants :


|   |   |
| --- | --- |
| **CodeBouton=Debut,OK** | Signale le début du code du bouton OK. La fin du code est signalé par **Code=Fin** |
| **%Repeat** | Signale une répétition dans le nom des rubriques à insérer. <br>Dans l'exemple, toutes les rubriques sélectionnées par l'utilisateur sont insérées dans le code. La dernière rubrique est indiquée grâce à la variable RAD_DERNIER_RUB_A.<br><br><pre><code>SI PAS HExecuteRequete<br>({RAD_REQ_INSERT_A},hRequeteDefaut,...<br>@ <br>%repeat XXXX  <br>@ {RAD_RUB_A},...<br>@ <br>%endrep<br>@ {RAD_DERNER_RUB_A}) ALORS</code></pre><br> |




