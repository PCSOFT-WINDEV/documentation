


## Créer les fenêtres Vision du pattern RAD WINDEV Mobile
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Les étapes de la création de pattern RAD
<a name="les_etapes_creation_pattern_rad_ELTTEXTE000400"></a>
Les différentes étapes permettant de créer un Pattern RAD WINDEV Mobile sont les suivantes :

1. [Création du projet de type "Pattern RAD"](../Editeurs/2031021.md).

2. Création des différentes fenêtres du pattern.

	- [Fenêtre Fiche](../Editeurs/2031036.md).

	- [Fenêtre Table](../Editeurs/2031037.md).

	- [Fenêtre de relation](../Editeurs/2031038.md).

	- **Boutons et fenêtre Vision Plus**.

	- [Menu principal](../Editeurs/2031041.md).




3. [Génération du Pattern RAD](../Editeurs/2031023.md).

4. [Utilisation du Pattern RAD](../Editeurs/2031024.md).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Création des différentes fenêtres du pattern
<a name="creation_des_differentes_fenetres_pattern_ELTTEXTE000424"></a>


### Les fichiers à créer
<a name="les_fichiers_creer_ELTPARAGRAPHE000043"></a>Rappel : Pour réaliser un pattern RAD permettant de faire un projet complet, les fichiers suivants sont nécessaires :

- Une fiche pour RADFichierA.

- Une fiche pour RADFichierB. Un bouton Vision Plus (ou une combo popup) doit permettre de sélectionner un élément du fichier RADFichierA.

- Une fiche pour RADFichierC. Un bouton Vision Plus (ou une combo popup) doit permettre de sélectionner un élément du fichier RADFichierB.

- Une table pour RADFichierA.

- Une table pour RADFichierB.

- Une table pour RADFichierC.

- Une fenêtre de relation RADFichierB / RADFichierD.




Ces différents éléments doivent contenir des boutons de liaison. Il est également possible de fournir le menu général de l'application.
<a name="NOTE2_2"></a>


### Différence Mobile et Smartphone
<a name="difference_mobile_smartphone_ELTPARAGRAPHE000060"></a>Concevoir une application pour Mobile et une application pour Smartphone sont deux choses différentes. En effet, sur un Smartphone, l'écran est plus petit et un menu déroulant permet de valider ou non les écrans.

Cette différence se retrouve au niveau des patterns RAD. Cette page d'aide présente comment faire une fenêtre fiche pour Mobile et pour Smartphone.
<a name="NOTE2_3"></a>


### Norme à suivre
<a name="norme_suivre_ELTPARAGRAPHE000069"></a>Cette page d'aide présente différentes règles applicables à la conception des pages et des fenêtres du Pattern RAD. Ces règles ont été utilisées pour concevoir les différents Patterns livrés avec WINDEV Mobile 16.

Ces règles sont une recommandation. Vous pouvez évidemment mettre en place et utiliser vos propres normes.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Les fenêtres Vision Plus Mobile
<a name="les_fenetres_vision_plus_mobile_ELTTEXTE000460"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000080"></a>Les fenêtres Vision Plus permettent :

- de sélectionner un élément de RADFichierA à partir d'une fiche sur RADFichierB.

- de sélectionner un élément de RADFichierB à partir d'une fiche sur RADFichierC.




Exemple : Sélection d'un client à partir de la commande.

Les éléments permettant d'utiliser une fenêtre Vision Plus sont :

- dans la fenêtre fiche : une combo et un bouton.

- une fenêtre Vision Plus.



<a name="NOTE3_2"></a>


### Création de la fenêtre Vision Plus
<a name="creation_fenetre_vision_plus_ELTPARAGRAPHE000097"></a>La fenêtre Vision Plus est une fenêtre contenant :

- une table.

- des boutons permettant de sélectionner et manipuler les éléments dans la table.




Pour créer une fenêtre Vision Plus : 

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif)
 parmi les boutons d'accès rapide : 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Fenêtre" puis sur "Fenêtre".

	- L'assistant de création d'une fenêtre se lance.

	- Dans l'assistant, sélectionnez "Vierge" et validez. Dans l'assistant, conservez les options par défaut.




2. Dans la fenêtre de description, saisissez les informations suivantes :

	- Le nom de la fenêtre. Ce nom doit obligatoirement contenir le nom du fichier affiché dans la table (quelques exemples : FEN_Vision_RADFichierA, FEN_Visu_RADFichierA, ...).

	- Le titre de la fenêtre. Si le titre doit afficher le nom du fichier, utilisez le nom du fichier "RADFichierXX" (par exemple "RADFichierA : Vision Plus").




3. Enregistrez la fenêtre.

4. Créez un champ Table dans la fenêtre : sous le volet "Création", dans le groupe "Données", déroulez "Table et Liste" et sélectionnez "Table (Verticale)".

5. Dans l'assistant de création de table, indiquez les caractéristiques suivantes :

	- Sélectionnez l'option "Afficher les données d'un fichier ou d'une requête existante".

	- Sélectionnez le fichier de base de la table (par exemple RADFichierA).

	- Conservez la rubrique proposée ainsi que la clé de parcours.

	- Indiquez la source pour le remplissage : "Fichier avec accès direct".

	- Validez le nom de la table.




6. Positionnez le champ Table dans la fenêtre et définissez sa taille. 

7. Créez et positionnez les différents boutons de votre fenêtre : Valider et Nouveau.
	Attention : si vous autorisez l'utilisateur à appliquer un gabarit aux fenêtres créées par le RAD, il est nécessaire de définir le type de bouton qui doit être utilisé par le gabarit. Cette information peut être définie dans le modifieur (Catégorie "Gabarit").

8. Cas du ***bouton Valider***.
	Ce bouton va permettre la validation de la sélection dans la table. Le code du bouton est le suivant : 
	
	```wl
	// Valeur de retour
	MaFenêtre..ValeurRenvoyée = Vrai
	// Fermeture de la fenêtre
	Ferme()
	```


9. Cas du ***bouton Nouveau***.
	Ce bouton permet de créer un nouvel enregistrement en ouvrant la fenêtre fiche correspondante. Le code du bouton Nouveau peut être par exemple :
	
	```wl
	// RAZ de l'enregistrement d'un RADFichierA
	HRAZ(RADFichierA)
	// Ouverture de la fiche d'un RADFichierA
	SI Ouvre(FEN_Fiche_RADFichierA) ALORS
		// Rafraîchissement de la table
		TableAffiche(TABLE_RADFichierA, taCourantEnreg) 
	FIN
	```


10. Code d'initialisation de la fenêtre : 
	
	```wl
	// Positionnement sur l'enregistrement courant
	TableAffiche(TABLE_RADFichierA, taCourantEnreg)
	// Valeur de retour par défaut
	MaFenêtre..ValeurRenvoyée = Faux
	```




<a name="NOTE3_3"></a>


### Création des éléments nécessaires dans la fenêtre fiche
<a name="creation_des_elements_necessaires_dans_fenetre_fiche_ELTPARAGRAPHE000159"></a>Les fenêtres Vision Plus peuvent être utilisées à partir des fenêtres suivantes :

- Fiche sur RADFichierB

- Fiche sur RADFichierC

- Fenêtre de relation avec fiche sur le fichier RADFichierB




Dans ces fenêtres, il est nécessaire de créer une combo et un bouton. Ces éléments peuvent être superposés au superchamp correspondant à la fiche.

**Pour créer la combo** : 

1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur "Combo".

2. Dans l'assistant de création de la combo, sélectionnez les options suivantes :

	- "Je veux saisir directement une liste de valeurs ou remplir la combo par programmation".

	- la combo est liée à la clé de la relation (par exemple IDRADFichierARel pour la combo présente dans la fiche RADFichierB.

	- le champ déroulé est une liste.

	- le nom du champ est "COMBO_IDRADFichierX" (COMBO_ est le préfixe de la charte de programmation : il n'est pas nécessaire si vous n'utilisez pas de charte de programmation). Par exemple, pour la fiche RADFichierB, le nom de la combo sera COMBO_IDRADFichierA.




3. Validez. Le champ Combo est créé.




**Pour créer le bouton** :

1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur "Bouton".

2. Dans la fenêtre de description du champ, indiquez le nom du bouton. Ce champ a un nom de la forme "BTN_VISION_RADFichierX" (BTN_ est le préfixe de la charte de programmation : il n'est pas nécessaire si vous n'utilisez pas de charte de programmation). Par exemple, pour la fiche RADFichierB, le nom du bouton sera BTN_VISION_RADFichierA.
	Attention : si vous autorisez l'utilisateur à appliquer un gabarit aux fenêtres créées par le RAD, il est nécessaire de définir le type de bouton qui doit être utilisé par le gabarit. Cette information peut être définie dans le modifieur (Catégorie "Gabarit").

3. Le code de clic du bouton est par exemple le suivant :
	
	```wl
	// Ouverture de la fenêtre vision d'un RADFichierA
	SI Ouvre(FEN_Vision_RADFichierA) = Vrai ALORS
		// Rafraîchit le contenu de la combo RADFichierA
		ListeAffiche(COMBO_IDRADFichierA, taCourantEnreg)
	FIN
	```





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Les fenêtres Vision Plus Smartphone
<a name="les_fenetres_vision_plus_smartphone_ELTTEXTE000496"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000219"></a>Les fenêtres Vision Plus permettent :

- de sélectionner un élément de RADFichierA à partir d'une fiche sur RADFichierB

- de sélectionner un élément de RADFichierB à partir d'une fiche sur RADFichierC




Exemple : Sélection d'un client à partir de la commande.

Les éléments permettant d'utiliser une fenêtre Vision Plus sont :

- dans la fenêtre fiche : une combo et un bouton.

- une fenêtre Vision Plus.



<a name="NOTE4_2"></a>


### Création de la fenêtre Vision Plus
<a name="creation_fenetre_vision_plus_ELTPARAGRAPHE000236"></a>La fenêtre Vision Plus est une fenêtre contenant :

- une table.

- des options de menus permettant de valider le choix dans la table, créer un nouvel élément et fermer la fenêtre.




**Pour créer une fenêtre Vision Plus** : 

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif)
 parmi les boutons d'accès rapide : 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Fenêtre" puis sur "Fenêtre".

	- L'assistant de création d'une fenêtre se lance.

	- Dans l'assistant, sélectionnez "Vierge" et validez. Dans l'assistant, conservez les options par défaut.




2. Dans la fenêtre de description, saisissez les informations suivantes :

	- Le nom de la fenêtre. Ce nom doit obligatoirement contenir le nom du fichier affiché dans la table (quelques exemples : FEN_Vision_RADFichierA, FEN_Visu_RADFichierA, ...).

	- Le titre de la fenêtre. Si le titre doit afficher le nom du fichier, utilisez le nom du fichier "RADFichierXX" (par exemple "RADFichierA : Vision Plus").




3. Enregistrez la fenêtre.

4. Créez un champ Table dans la fenêtre : sous le volet "Création", dans le groupe "Données", déroulez "Table et Liste" et sélectionnez "Table (Verticale)".

5. Dans l'assistant de création de table, indiquez les caractéristiques suivantes :

	- Sélectionnez l'option "Afficher les données d'un fichier ou d'une requête existante".

	- Sélectionnez le fichier de base de la table (par exemple RADFichierA).

	- Conservez la rubrique proposée ainsi que la clé de parcours.

	- Indiquez la source pour le remplissage : "Fichier avec accès direct".

	- Validez le nom de la table.




6. Positionnez le champ Table dans la fenêtre et définissez sa taille. 

7. Modifiez le menu présent dans la fenêtre :

	- Une option doit permettre de valider le choix dans la table.

	- Une option doit permettre de créer un nouvel élément.

	- Une option doit permettre de fermer la fenêtre.




8. Les options de ce menu doivent porter des noms spécifiques : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=pattern_RAD_Menu_Vision_sma.gif)


9. Cas de l'option de validation.
	Cette option va permettre la validation de la sélection dans la table. Le code de l'option est le suivant : 
	
	```wl
	// Valeur de retour
	MaFenêtre..ValeurRenvoyée = Vrai
	// Fermeture de la fenêtre
	Ferme()
	```


10. Cas de l'option Nouveau.
	Cette option permet de créer un nouvel enregistrement en ouvrant la fenêtre fiche correspondante. Le code de l'option Nouveau peut être par exemple :
	
	```wl
	// RAZ de l'enregistrement d'un RADFichierA
	HRAZ(RADFichierA)
	// Ouverture de la fiche d'un RADFichierA
	SI Ouvre(FEN_Fiche_RADFichierA) ALORS
		// Rafraîchissement de la table
		TableAffiche(TABLE_RADFichierA, taCourantPremier) 
	FIN
	```


11. Code d'initialisation de la fenêtre : 
	
	```wl
	// Positionnement sur l'enregistrement courant
	TableAffiche(TABLE_RADFichierA, taCourantPremier)
	// Valeur de retour par défaut
	MaFenêtre..ValeurRenvoyée = Faux
	```




<a name="NOTE4_3"></a>


### Création des éléments nécessaires dans la fenêtre fiche Smartphone
<a name="creation_des_elements_necessaires_dans_fenetre_fiche_smartphone_ELTPARAGRAPHE000302"></a>Les fenêtres Vision Plus peuvent être utilisées à partir des fenêtres suivantes :

- Fiche sur RADFichierB.

- Fiche sur RADFichierC.

- Fenêtre de relation avec fiche sur le fichier RADFichierB. 




Dans ces fenêtres, il est nécessaire de créer une combo et un bouton. Ces éléments peuvent être superposés au superchamp correspondant à la fiche.

**Pour créer la combo** : 

1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur "Combo".

2. Dans l'assistant de création de la combo, sélectionnez les options suivantes :

	- "Afficher les données d'un fichier ou d'une requête existante".

	- source de données : RADFichierA pour la combo présente dans le fiche RADFichierB.

	- la combo est liée à la clé de la relation (par exemple IDRADFichierARel pour la combo présente dans la fiche RADFichierB.

	- le nom du champ est "COMBO_IDRADFichierX" (COMBO_ est le préfixe de la charte de programmation : il n'est pas nécessaire si vous n'utilisez pas de charte de programmation). Par exemple, pour la fiche RADFichierB, le nom de la combo sera COMBO_IDRADFichierA.




3. Validez. Le champ Combo est créé.




**Pour créer le bouton** :

1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur "Bouton".

2. Dans la fenêtre de description du champ, indiquez le nom du bouton. Ce champ a un nom de la forme "BTN_VISION_RADFichierX" (BTN_ est le préfixe de la charte de programmation : il n'est pas nécessaire si vous n'utilisez pas de charte de programmation). Par exemple, pour la fiche RADFichierB, le nom du bouton sera BTN_VISION_RADFichierA.

3. Le code de clic du bouton est par exemple le suivant :
	
	```wl
	// Ouverture de la fenêtre vision d'un RADFichierA
	SI Ouvre(FEN_Vision_RADFichierA) = Vrai ALORS
		// Rafraîchit le contenu de la combo RADFichierA
		ListeAffiche(COMBO_IDRADFichierA, taCourantPremier)
	FIN
	```






