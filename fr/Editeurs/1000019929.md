


## Développer une application Widget iOS 14
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000208"></a>
Une application Widget iOS est une application destinée à être affichée sous forme de Widget sur un périphérique iOS (iPhone, iPad, ...).

Une application Widget iOS est toujours associée à une application iOS avec laquelle elle peut échanger des données.

Le développement d'une application Widget iOS est réalisé en plusieurs étapes : 

- [Création et développement du projet sous WINDEV Mobile](#NOTE2_1). 

- [Génération de l'application](../Editeurs/1000019908.md). 

- [Compilation sous Xcode](../Editeurs/1000019878.md). 




Cette page d'aide présente uniquement la création d'un projet Widget iOS et son développement. Sa génération et sa compilation sont identiques à celles pour une application iOS classique.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Créer un projet pour Widget iOS 14 avec WINDEV Mobile
<a name="creer_projet_pour_widget_ios_14_avec_windev_mobile_ELTTEXTE000232"></a>
Pour créer un projet Widget iOS 14 avec WINDEV Mobile : 

1. Créez un projet pour iOS (pour plus de détails, consultez [Développer une application pour iPhone/iPad](../Editeurs/1000019818.md)).

2. Créez une configuration Widget iOS 14 :

	- Lancez l'assistant de création d'une nouvelle configuration : sous le volet "Projet", dans le groupe "Configuration de projet", déroulez "Nouvelle configuration" et sélectionnez l'option "Nouvelle configuration (via assistant)". 
			Pour plus de détails, consultez [Configuration de projet](../Editeurs/9000030.md).

	- Dans l'étape "Informations générales" de l'assistant, sélectionnez "Widget iOS".<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cr%E9erAppliWidgetIOS14%20-%20HC%20N%B0001.gif&type=thumb)


	- Dans l'étape "Application iOS associée" de l'assistant, sélectionnez la configuration iOS du projet associée à la configuration Widget iOS.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Cr%E9erAppliWidgetIOS14%20-%20HC%20N%B0002.gif&type=thumb)




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Développer une application pour Widget iOS avec WINDEV Mobile
<a name="developper_une_application_pour_widget_ios_avec_windev_mobile_ELTTEXTE000256"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000070"></a>Le développement d'une application Widget iOS 14 et de son application iOS associée est similaire au développement pour une application classique.


### Application iOS
<a name="application_ios_ELTPARAGRAPHE000075"></a>Pour développer l'application iOS, vous créez les différents éléments de votre application. Le développement du projet se fait comme un projet WINDEV Mobile classique. Cependant, il existe quelques spécificités au développement pour iOS. Pour plus de détails, consultez [Particularités des applications iOS](../Editeurs/1000019865.md).




### Application Widget iOS 14
<a name="application_widget_ios_14_ELTPARAGRAPHE000084"></a>Le développement de l'application Widget iOS 14 consiste à : 

- créer des fenêtres de type Widget. Ces fenêtres contiennent toutes les fonctionnalités nécessaires à votre Widget. 
	Remarques : 

	- Pour créer des fenêtres de type Widget, il est nécessaire d'avoir activé la configuration "Widget". 

	- Seuls deux types de champs sont disponibles dans les fenêtres Widget iOS 14 : les champs Image et les champs Libellé. 

	- Les fenêtres Widget iOS 14 présentent un certain nombre de spécificités. Pour plus de détails, consultez [Fenêtres Widget iOS](../WDChamp/9000200.md). 




- utiliser des fonctions/propriétés/types WLangage. Si une fonction n'est pas disponible, une erreur de compilation est affichée. L'aide affiche l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_IosWidget.gif) si la fonction est disponible pour iOS Widget 14. 

- définir si nécessaire la procédure à exécuter lorsque l'utilisateur clique sur le Widget, grâce à la fonction [WidgetProcédure](../WDLang3/1410087599.md). Cette fonction doit être utilisée dans le code "Initialisation" du projet. 




En mode Widget iOS 14, l'utilisation du "scroll" ou du clavier est interdite. 

**Attention** : iOS limite la mémoire disponible pour les widgets. La valeur de cette limitation dépend du matériel, de la version d'iOS, des autres applications, ... Il est conseillé de limiter au maximum la consommation de mémoire dans vos configurations Widget iOS 14 :

- Limiter le nombre de champs. 

- Préférer les fenêtres internes aux plans, 

- Vérifier la taille des images (notamment pour le style des champs). 


Si le widget dépasse la limitation, il sera tué par iOS avec l'erreur : EXC_RESOURCE RESOURCE_TYPE_MEMORY (limit=xxx MB, unused=xxx)


### Test de l'application Widget iOS 14
<a name="test_application_widget_ios_14_ELTPARAGRAPHE000117"></a>Il est possible de tester directement les fenêtres de type Widget iOS 14 dans le simulateur de WINDEV Mobile. Les caractéristiques des fenêtres Widget sont respectées. 

Remarques : 

- Le test sous WMDev n'est pas disponible. 

- Lors d'un test depuis Xcode, un mode Widget est forcé par défaut. Il est possible de changer la configuration de Xcode si nécessaire (se reporter à la documentation de Xcode).  





### Génération du projet Xcode
<a name="generation_projet_xcode_ELTPARAGRAPHE000127"></a>**Lorsque le développement est terminé**, vous pouvez générer le projet Xcode permettant de compiler l'application Widget iOS et son application iOS associée sur le MAC : 

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_generation_IOS.gif) parmi les boutons d'accès rapide. 

2. Choisissez si nécessaire la première fenêtre affichée sur les différentes plateformes (iPhone, iPad et Widget iOS).

3. L'assistant de génération se lance. Pour plus de détails sur la génération du projet Xcode, consultez [Génération de l'application](../Editeurs/1000019908.md).


Remarque : Une étape spécifique "Signature Widget (Widget iOS)" est affichée dans l'assistant. Cette étape permet de gérer la signature du Widget iOS. Le "Bundle ID" du widget correspond à celui de l'application iOS en lui ajoutant à la fin ".widget". Il est nécessaire d'enregistrer les 2 "Bundle ID" (celui de l'application et celui du widget) dans le "Provisioning profile". 





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Fonctions WLangage spécifiques aux Widgets iOS 14
<a name="fonctions_wlangage_specifiques_aux_widgets_ios_14_ELTTEXTE000304"></a>


### Fonctions de gestion des Widgets
<a name="fonctions_gestion_des_widgets_ELTPARAGRAPHE000148"></a>Les fonctions suivantes permettent de gérer les spécificités des Widgets iOS 14 : 



|   |   |
| --- | --- |
| [EnModeWidget](../WDLang1/1000020649.md) | Identifie si le code est exécuté en mode Widget Android ou non. |
| [WidgetAffiche](../WDLang3/1000020647.md) | Rafraîchit l'affichage d'une fenêtre de type Widget. |
| [WidgetProcédure](../WDLang3/1410087599.md) | Permet de spécifier la procédure qui sera appelée lorsque l'utilisateur effectue un clic dans un Widget iOS 14. |






### Fonctions utilisables dans les Widgets
<a name="fonctions_utilisables_dans_les_widgets_ELTPARAGRAPHE000154"></a>La plupart des fonctions disponibles pour les applications iOS sont également disponibles en mode iOS Widget 14. Pour identifier facilement ces fonctions, l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_IosWidget.gif) apparaît dans la barre des plateformes de la fonction. 








