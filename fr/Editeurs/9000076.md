
## Manipulation des fichiers de données en PHP
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000132"></a>
WEBDEV permet de créer un site PHP manipulant des fichiers de données :

- au format **MySQL**. Ces données peuvent être manipulées avec les fonctions SQL du WLangage ou avec les fonctions HFSQL du WLangage. Une base de données MySQL est nécessaire.

- **via ODBC**. Ces données peuvent être manipulées avec les fonctions SQL du WLangage. Il est possible par exemple de manipuler une source de données au format HFSQL Classic ou HFSQL Client/Serveur définie dans l'administrateur ODBC.

- au format **PostgreSQL**. Ces données peuvent être manipulées avec les fonctions SQL du WLangage ou avec les fonctions HFSQL du WLangage. Une base de données PostgreSQL est nécessaire et l'extension php_pgsql doit être activée dans le fichier php.ini.

- au format **Oracle**. Ces données peuvent être manipulées avec les fonctions SQL du WLangage ou avec les fonctions HFSQL du WLangage. Une base de données Oracle est nécessaire, l'extension php_oci8 doit être activée dans le fichier php.ini et la couche cliente Oracle doit être présente sur le serveur.








<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Manipuler des fichiers de données MySQL, Oracle ou PostgreSQL
<a name="manipuler_des_fichiers_donnees_mysql_oracle_postgresql_ELTTEXTE000205"></a>


### Pour manipuler des fichiers de données MySQL, Oracle ou PostgreSQL en PHP avec les fonctions HFSQL :
<a name="pour_manipuler_des_fichiers_donnees_mysql_oracle_postgresql_php_avec_les_fonctions_hfsql_ELTPARAGRAPHE000031"></a>Les fichiers de données décrits dans l'analyse du projet doivent être du type correspondant à la base ciblée. La connexion au serveur est décrite dans l'analyse.

Si cette condition est remplie, les fichiers de données peuvent être manipulés directement par les fonctions HFSQL disponibles en PHP.

Les champs Table fichier créés sous l'éditeur sont alors directement reliées aux fichiers de données décrits sous l'éditeur d'analyses.


<a name="NOTE2_2"></a>


### Remarques
<a name="remarques_ELTPARAGRAPHE000043"></a>

- L'utilisation des fonctions HFSQL sur des requêtes avec l'accès PHP/MySQL nécessite un serveur MySQL en version 4.1 ou supérieure.

- Lors des parcours sur requête (fonctions [HLitPremier](../WDLang4/3044051.md)/[HLitSuivant](../WDLang4/3044037.md) par exemple), il peut arriver que la requête soit ré-exécutée plusieurs fois.

- Les noms des fichiers et des rubriques de la base de données ne doivent contenir ni caractères accentués, ni espaces.

- Utilisation de requêtes paramétrées : Si le code SQL de la requête n'a pas été intégralement généré par l'éditeur de requêtes, le nom des paramètres de la requête doit être de la forme {paramX} où X est le numéro du paramètre dans l'ordre d'apparition dans la requête.
	Exemple : SELECT Nom, Prenom FROM Client WHERE Nom={Param1} AND Prenom={Param2}





<a name="NOTE2_3"></a>


### Les fonctions suivantes sont actuellement disponibles en PHP :
<a name="les_fonctions_suivantes_sont_actuellement_disponibles_php_ELTPARAGRAPHE000062"></a>


|   |   |
| --- | --- |
| [EcranVersFichier](../WDLang4/3044146.md) | Initialise automatiquement :<br><br>- la valeur mémoire des rubriques d'un fichier de données avec la valeur des champs de la fenêtre. <br><br>- la valeur des variables WLangage avec la valeur des champs de la fenêtre. <br><br><br>Cette fonction est également disponible pour les pages WEBDEV. |
| [FichierVersEcran](../WDLang4/3044210.md) | Initialise automatiquement les champs d'une fenêtre ou d'une page avec :<br><br>- les valeurs des rubriques associées dans l'enregistrement en cours (chargé en mémoire) du fichier de données décrit sous l'éditeur d'analyses. <br><br>- les valeurs des variables WLangage associées. <br><br><br>Cette opération est effectuée quel que soit l'état des champs (grisés, inactifs, ou invisibles). |
| [FichierVersPage](../WDLang4/3044148.md) | Initialise automatiquement les champs d'une page avec :<br><br>- les valeurs des rubriques associées dans l'enregistrement en cours (chargé en mémoire) du fichier de données décrit sous l'éditeur d'analyses. Cette opération est effectuée quel que soit l'état des champs (grisés, inactifs, ou invisibles).<br><br>- les valeurs des variables WLangage associées. Cette opération est effectuée quel que soit l'état des champs (grisés, inactifs, ou invisibles).<br><br><br> |
| [HActiveFiltre](../WDLang4/3044158.md) | Active le filtre précédemment créé pour le fichier de données (la vue ou la requête) spécifié. |
| [HAjoute](../WDLang4/3044147.md) | Ajoute : <br><br>- l'enregistrement présent en mémoire dans le fichier de données (la requête ou la vue). <br><br>- l'enregistrement présent dans une variable de type [Enregistrement](../WDLang4/1000020962.md) dans le fichier de données (la requête ou la vue).<br><br><br> |
| [HAnnuleDéclaration](../WDLang4/3044174.md) | Permet de : <br><br>- Supprimer une déclaration précédemment faite avec les fonctions [HDéclare](../WDLang4/3044203.md), [HDéclareExterne](../WDLang4/3044204.md), [HDécritFichier](../WDLang4/3044206.md). Après cette opération, le fichier de données n'est plus connu par le moteur HFSQL.<br><br>- Libérer les ressources d'une requête (suite à l'utilisation des fonctions [HExécuteRequête](../WDLang4/3044080.md) ou [HExécuteRequêteSQL](../WDLang4/3044084.md)).<br><br><br> |
| [HAnnuleRecherche](../WDLang4/3044157.md) | Annule le critère de recherche en cours. |
| [HAttacheMémo](../WDLang4/3044173.md) | Permet d'associer un fichier à une rubrique de type mémo binaire ou d'annuler l'attachement existant entre un fichier et une rubrique binaire. |
| [HAvance](../WDLang4/3044154.md) | Avance de plusieurs enregistrements dans le fichier de données, à partir de la position en cours, selon une rubrique spécifiée. |
| [HChangeConnexion](../WDLang4/3044150.md) | Change dynamiquement la connexion associée à un fichier de données. |
| [HConstruitValClé](../WDLang4/3044258.md) | Construit la valeur d'une clé composée pour réaliser un filtre (fonction [HFiltre](../WDLang4/3044100.md)) ou effectuer une recherche (fonctions [HLitRecherchePremier](../WDLang4/3044036.md), [HLitRechercheDernier](../WDLang4/3044034.md), ...). |
| [HCréation](../WDLang4/3044255.md) | Crée à vide un fichier de données (fichier d'extension ".FIC") avec le fichier d'index et le fichier mémo si nécessaires. |
| [HCréationSiInexistant](../WDLang4/3044254.md) | Effectue les opérations suivantes : <br><br>- Si le fichier n'existe pas, crée à vide un fichier de données (fichier d'extension ".FIC") avec le fichier d'index et le fichier mémo si nécessaire.La fonction est équivalente à [HCréation](../WDLang4/3044255.md). <br><br>- Si le fichier existe, ouvre le fichier.<br><br><br> |
| [HDécritConnexion](../WDLang4/3044205.md) | Décrit une nouvelle connexion à une base de données externe. |
| [HDésactiveFiltre](../WDLang4/3044085.md) | Désactive temporairement un filtre sur un fichier de données (une vue ou une requête). |
| [HEnDehors](../WDLang4/3044094.md) | Permet de savoir si l'enregistrement sur lequel on veut se positionner est en dehors du fichier de données, du filtre, de la vue ou de la requête. |
| [HErreur](../WDLang4/3044088.md) | Renvoie le numéro de la dernière erreur déclenchée par le moteur HFSQL. |
| [HErreurDoublon](../WDLang4/3044077.md) | Permet de vérifier si une erreur de doublons est survenue. |
| [HErreurInfo](../WDLang4/3044071.md) | Renvoie une information détaillée sur la dernière erreur déclenchée par le moteur HFSQL. |
| [HExécuteRequête](../WDLang4/3044080.md) | Déclare une requête créée sous l'éditeur de requêtes au moteur HFSQL et exécute cette requête. |
| [HExécuteRequêteSQL](../WDLang4/3044084.md) | Initialise une requête écrite en langage SQL et déclare cette requête au moteur HFSQL. |
| [HExtraitMémo](../WDLang4/3044072.md) | Extrait le contenu d'une rubrique de type mémo binaire d'un fichier HFSQL, d'une requête ou d'une vue HFSQL dans un fichier physique (sur le disque). |
| [HFerme](../WDLang4/3044073.md) | Ferme soit un fichier de données, soit tous les fichiers de données ouverts par l'utilisateur en cours : tous les fichiers de données physiques correspondant sont fermés pour l'utilisateur en cours. |
| [HFermeConnexion](../WDLang4/3044095.md) | Ferme une connexion à une base de données. |
| [HFiltre](../WDLang4/3044100.md) | Définit et active un filtre sur un fichier de données, une vue ou une requête. |
| [HFiltreCommencePar](../WDLang4/3044098.md) | Définit et active un filtre de type "Commence par" sur un fichier, une vue ou une requête. |
| [HFiltreIdentique](../WDLang4/3044105.md) | Définit et active un filtre permettant de rechercher la valeur exacte d'une rubrique de type chaîne. |
| [HLibèrePosition](../WDLang4/3044062.md) | Supprime une position sauvegardée par la fonction [HSauvePosition](../WDLang4/3044136.md). |
| [HListeBaseDeDonnées](../WDLang4/3044288.md) | Liste les bases de données Client/Serveur associées à une connexion. |
| [HListeConnexion](../WDLang4/3044046.md) | Renvoie la liste des connexions actuellement décrites dans l'application. |
| [HLitDernier](../WDLang4/3044140.md) | Positionne sur le dernier enregistrement d'un fichier selon une rubrique de parcours. |
| [HLitPrécédent](../WDLang4/3044048.md) | Positionne sur l'enregistrement précédent d'un fichier en fonction d'une rubrique de parcours. |
| [HLitPremier](../WDLang4/3044051.md) | Positionne sur le premier enregistrement d'un fichier en fonction d'une rubrique de parcours. |
| [HLitRecherche](../WDLang4/3044050.md) | Positionne sur le premier enregistrement du fichier dont la valeur d'une rubrique spécifique est supérieure ou égale à une valeur recherchée (recherche générique). |
| [HLitRechercheDernier](../WDLang4/3044034.md) | Positionne sur le dernier enregistrement du fichier dont la valeur d'une rubrique spécifique est inférieure ou égale à une valeur recherchée (recherche à l'identique). |
| [HLitRecherchePremier](../WDLang4/3044036.md) | Positionne sur le premier enregistrement du fichier dont la valeur d'une rubrique spécifique est strictement égale à une valeur recherchée (recherche à l'identique). |
| [HLitSuivant](../WDLang4/3044037.md) | Positionne sur l'enregistrement suivant d'un fichier de données en fonction d'une rubrique de parcours. |
| [HModifie](../WDLang4/3044042.md) | Modifie l'enregistrement spécifié ou l'enregistrement présent en mémoire dans le fichier de données (la requête ou la vue). |
| [HNbEnr](../WDLang4/3044006.md) | Renvoie le nombre d'enregistrements d'un fichier, d'une requête ou d'une vue HFSQL : enregistrements actifs, rayés, supprimés, etc. |
| [HOuvre](../WDLang4/3044120.md) | Ouvre un fichier de données. |
| [HOuvreConnexion](../WDLang4/3044107.md) | Ouvre une connexion à une base de données spécifique. |
| [HPositionCourante](../WDLang4/3044109.md) | Renvoie la position approximative de l'enregistrement en cours dans le fichier de données. |
| [HRAZ](../WDLang4/3044118.md) | Initialise : <br><br>- une ou toutes les variables des rubriques d'un fichier de données avec leurs valeurs par défaut. <br><br>- une ou toutes les rubriques d'une variable de type [Enregistrement](../WDLang4/1000020962.md) avec leurs valeurs par défaut. <br><br><br> |
| [HRecule](../WDLang4/3044126.md) | Recule de plusieurs enregistrements dans le fichier de données, à partir de la position en cours, selon une rubrique spécifiée. |
| [HRetourPosition](../WDLang4/3044137.md) | Restaure le contexte précédemment sauvegardé d'un fichier (fonction [HSauvePosition](../WDLang4/3044136.md)) : enregistrement en cours, filtre, pointeurs de lecture. |
| [HSauvePosition](../WDLang4/3044136.md) | Mémorise le contexte en cours d'un fichier : enregistrement en cours, filtre, pointeurs de lecture. |
| [HSupprime](../WDLang4/3044018.md) | Supprime un enregistrement d'un fichier de données (d'une requête ou d'une vue). |
| [HTrouve](../WDLang4/3044104.md) | Vérifie si l'enregistrement en cours correspond au filtre ou à la recherche en cours. |





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Manipuler des fichiers de données via ODBC
<a name="manipuler_des_fichiers_donnees_via_odbc_ELTTEXTE000643"></a>
Pour manipuler des fichiers de données via ODBC :

1. Définissez une source de données ODBC.
	Pour créer par exemple une source de données sur des fichiers HFSQL Classic ou Client/Serveur, consultez [Driver ODBC sur HFSQL Classic et Client/Serveur.](../WDLang4/3044179.md)
	Remarque : Pour utiliser les fonctions SQL en PHP, il est nécessaire de définir une source de données ODBC "système" et non "utilisateur".

2. Utilisez la fonction [SQLConnecte](../WDLang4/3072005.md) pour vous connecter à la base de données. Dans ce cas, le type de la base est "ODBC".

3. Utilisez les fonctions SQL pour manipuler vos données.







