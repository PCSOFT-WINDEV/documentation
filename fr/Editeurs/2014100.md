


## Composant interne
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000214"></a>
Un composant interne est un regroupement d'éléments d'un projet. Ce regroupement permet de :

- **Organiser un projet** : vous pouvez créer des composants internes pour regrouper les éléments d'un projet par exemple par fonctionnalité.

- **Partager des éléments entre différents projets** : Les éléments présents dans un composant interne peuvent être partagés entre plusieurs projets par l'intermédiaire du GDS. Pour plus de détails, consultez [Partager un composant interne](../Editeurs/2014101.md).




Un des avantages du composant interne par rapport au composant externe est de pouvoir déboguer directement le composant interne depuis le projet qui l'utilise.

**Différence avec un composant externe** : 

- Un composant interne permet d'intégrer la totalité des éléments du composant dans l'interface du projet contenant le composant interne. Il est possible de manipuler tous les éléments "publics" du composant interne directement sous l'éditeur.

- Lors de l'utilisation d'un composant externe, les éléments "publics" du composant ne peuvent pas être manipulés directement. Il est nécessaire pour modifier le composant externe d'ouvrir le projet correspondant.


Pour plus de détails, consultez [Composants externes](../Editeurs/2014011.md). 

<a name="NOTE2"></a>


## Créer un composant interne
<a name="creer_composant_interne_ELTTEXTE000238"></a>


### Créer un composant interne
<a name="creer_composant_interne_ELTPARAGRAPHE000035"></a>Pour créer un composant interne : 

1. Sous le volet "Projet", dans le groupe "Configuration de projet", déroulez "Nouvelle configuration" et sélectionnez "Composant Interne". L'assistant de création d'un composant interne se lance. Pour ANDROID/IOS faites un clic droit sur "Composants internes" dans l'explorateur de projet, puis sélectionnez "Nouveau composant interne".  

2. Indiquez les caractéristiques du composant interne :

	- son nom. Le nom du composant interne sera utilisé pour le fichier WCI correspondant à la description du composant interne. Ce nom sera également utilisé pour créer un sous-répertoire dans votre projet contenant tous les éléments du composant interne.

	- son libellé.

	- sa description.




3. Passez à l'étape suivante. 

4. Indiquez les éléments à intégrer dans le composant interne. Un composant interne peut contenir tous les types d'éléments présents dans un projet : fenêtres, pages, états, modèles, collections de procédures, ...
	**Remarque** : Si les éléments intégrés dans le composant interne contiennent des liens vers les éléments présents par exemple dans le projet ou dans un autre composant interne, une erreur de compilation apparaît indiquant qu'il n'est pas possible d'accéder à un élément du projet depuis un composant interne.

5. Passez à l'étape suivante. 

6. Indiquez les éléments du composant interne qui seront directement accessibles dans le code et dans les actions prédéfinies du projet accueillant le composant interne. 
	**Remarque** : Les éléments du composant interne accessibles (ou "public") seront automatiquement proposés par la complétion. Ils pourront être utilisés par les éléments présents dans le projet ou depuis un autre composant interne. Les éléments non accessibles (ou "privés") pourront être manipulés uniquement par un autre élément du composant interne (la complétion proposera ces éléments "privés" uniquement depuis les éléments d'un composant interne).

7. Passez à l'étape suivante. 

8. Indiquez l'analyse utilisée par le composant interne. Trois modes sont disponibles :

	- **Utiliser l'analyse du projet ou aucune analyse (partage complet)** : Le composant interne accède aux fichiers de données du projet. Le composant interne utilise également les mêmes contextes d'exécution que le projet. 
			Ce mode correspond au mode par défaut si le composant interne n'utilise pas d'analyse.

	- **Utiliser l'analyse du projet avec contexte d'exécution différent (mode avancé)** : Le composant interne accède aux fichiers de données du projet. Le composant interne utilise des contextes d'exécution distincts de ceux du projet. 
			Ce mode est à utiliser dans des cas très spécifiques.

	- **Utiliser une analyse spécifique** : Le composant interne accède à ses propres fichiers de données : il est autonome. Le composant interne utilise des contextes d'exécution distincts de ceux du projet. 
			Ce mode correspond au mode par défaut si le composant utilise une analyse. 
			Dans ce cas, il est nécessaire d'indiquer l'analyse utilisée par le composant interne et si nécessaire son mot de passe. Il est également possible de créer directement une nouvelle analyse. Cette analyse sera associée au composant interne.




9. Passez à l'étape suivante. 

10. Validez la création du composant interne. A tout moment, il sera possible de :

	- Modifier les caractéristiques du composant interne grâce à la [fenêtre de description du composant interne](../Editeurs/2014103.md).

	- [Manipuler le composant interne et ses éléments](../Editeurs/2014104.md).







**Astuce** : Un composant interne n'a pas de code de déclaration des globales. Il suffit d'utiliser une collection de procédures pour effectuer l'initialisation du composant interne.
<a name="NOTE2_2"></a>


### Composant interne : les modifications réalisées lors de la création
<a name="composant_interne_les_modifications_realisees_lors_creation_ELTPARAGRAPHE000095"></a>Lors de la création d'un composant interne, les opérations suivantes sont réalisées :

- Un sous-répertoire au nom du composant interne est créé dans le projet.

- Les différents éléments affectés au composant interne sont regroupés dans le répertoire du composant interne. Les fichiers correspondant aux éléments du projet sont déplacés physiquement.

- Un fichier WCI est créé dans le répertoire du composant interne. Ce fichier contient la liste des éléments du composant.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Composant interne et analyse : cas de l'autonomie totale
<a name="composant_interne_analyse_cas_autonomie_totale_ELTTEXTE000268"></a>
Un composant interne peut être lié à sa propre analyse. Dans ce cas, le projet accueillant le composant interne peut avoir plusieurs analyses :

- l'analyse du projet,

- l'analyse du ou des composants internes. Cette analyse est définie lors de la création du composant interne. Elle peut être également sélectionnée depuis la [fenêtre de description du composant interne](../Editeurs/2014103.md).



<a name="NOTE3_2"></a>


### RAD et composants internes avec analyse
<a name="rad_composants_internes_avec_analyse_ELTPARAGRAPHE000119"></a>Si plusieurs analyses sont disponibles dans un projet, lors de la création de fenêtres ou de pages par le RAD, il sera possible de sélectionner aussi bien des fichiers de données liés à l'analyse du projet que liés à l'analyse du ou des composants internes.

Les éléments générés par le RAD pour le composant interne seront générés dans le répertoire du composant interne. Bien entendu, si l'analyse du composant interne est modifiée, une nouvelle génération par le RAD proposera automatiquement de générer uniquement les éléments correspondants aux modifications.

**Remarques et limites** : 

- Le pattern RAD de type "Compatible 11" n'est pas disponible sur les composants internes.

- Si le RAD a été généré sur le projet puis ensuite sur un composant interne, les modèles et les dépendances ne sont pas automatiquement déplacés dans le répertoire du composant interne. Des erreurs d'UI peuvent apparaître. Les manipulations doivent être effectuées manuellement.




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Remarques et limites
<a name="remarques_limites_ELTTEXTE000298"></a>


- Les composants internes peuvent être partagés uniquement par l'intermédiaire du GDS. Pour plus de détails, consultez [Partager des composants internes](../Editeurs/2014101.md).

- Un élément du projet ne peut pas être présent dans plusieurs composants internes. Il n'est pas possible de partager une collection de procédures entre plusieurs composants internes.

- Les composants internes ne peuvent pas être imbriqués.

- **Gestion des noms des éléments** : Il y a unicité des noms entre les éléments du projet et ses composants internes : il n'est pas possible d'utiliser un composant interne ayant un élément dont le nom est déjà présent dans le projet. Si à la mise à jour d'un composant interne, un conflit de nom apparaît, un des deux éléments portant le même nom devra être renommé.

- **Gestion des styles** : Si un composant interne utilise des styles spécifiques, seul le projet qui possède ces styles pourra les modifier. Dans les autres projets, les styles ne seront pas perdus mais ils ne pourront pas être modifiés.

- Les états présents dans un composant interne ne doivent pas être ouverts avec le logiciel "Etats & Requêtes".

- Il n'est pas possible de mettre un assemblage .NET dans un composant interne.

- Afin d'organiser les éléments d'un composant interne, il est possible de créer des perso-dossiers dans un composant interne. Pour plus de détails, consultez [Perso-Dossiers](../Editeurs/9000005.md).

- La portée des fonctions d'un [webservice SOAP](../WDLang3/3086001.md) importé dans un composant interne, est limitée aux événements/traitements des éléments inclus dans le composant interne. Les fonctions d'un webservice importé dans un composant interne ne seront pas accessibles dans les événements/traitements du projet hôte.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Installation d'une application utilisant des composants internes
<a name="installation_une_application_utilisant_des_composants_internes_ELTTEXTE000322"></a>
Les composants internes n'ont aucun effet sur les manipulations permettant le déploiement d'une application ou d'un site. Tous les éléments présents dans le projet (qu'ils soient dans des composants internes ou non) sont pris en compte lors de la création de l'exécutable et lors de la création du programme d'installation.


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDTimeline.gif) ***Exemples didactiques (WINDEV)*** : **WD Timeline** <br>Cet exemple propose un composant interne permettant de manipuler un modèle de champ 'Timeline'.<br>Une timeline permet d'afficher de façon linéaire une série d'événements qui se sont déroulés sur une période donnée de temps.<br>Les modèles de champ MDLC_TIMELINE et MDLC_TIMELINE_DOUBLE permettent de gérer et d'afficher une timeline d'événements.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDDessinsurGraphe.gif) ***Exemples didactiques (WINDEV)*** : **WD Dessin sur Graphe** <br>Cet exemple repose sur l'utilisation d'un composant interne permettant de dessiner des éléments sur un champ graphe :<br>- Zones min/max<br>- Zone diverses<br>- Drapeaux<br>- Plots et trackers de suivi<br>...
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDDirectX.gif) ***Exemples didactiques (WINDEV)*** : **WD DirectX** <br>DirectX est une collection de bibliothèques (ou API) destinées à la programmation d’applications multimédia.<br>Cet exemple intègre un composant interne permettant d'utiliser DirectX 9.0 dans vos applications WINDEV.<br>Toutes les APIs et interfaces de DirectX 9 ont été implémentées.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDBGInfo.gif) ***Composants (WINDEV)*** : **WD BGInfo** <br>Cet exemple montre comment écrire des informations sur le fond d'écran d'un ordinateur (adresse IP, Nom de la machine, Date du jour etc...). <br>Il est possible d'intégrer rapidement cette fonctionnalité à une application existante en utilisant le composant interne de cet exemple.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDWindowsUpdate.gif) ***Exemples didactiques (WINDEV)*** : **WD WindowsUpdate** <br>Cet exemple montre comment gérer les mises à jour disponibles sur Windows Update. Il propose un composant interne permettant de télécharger les mises à jour et de les installer. <br>Il est également possible de récupérer des informations plus précises sur les mises à jour (espace disque minimum nécessaire, niveau d'importance etc..)


