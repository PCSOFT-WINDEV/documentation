
## Déploiement ad Hoc
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Principe
<a name="principe_ELTTEXTE000233"></a>
Ce mode de déploiement vous permet de diffuser votre application sur un matériel de type iPhone ou iPad. 

Le mode "Ad Hoc" est réservé au déploiement d'applications sur une petite flotte de télé phones / tablettes (maximum 100 appareils). Ce mode peut, par exemple, être utilisé pour une application interne dans une PME.

Pour utiliser le déploiement "Ad Hoc", il est nécessaire d'enregistrer l'identifiant unique de chaque appareil iOS sur lequel l'application sera installée.

Les différentes opérations se feront en grande partie sur le Web, dans le portail du "developer center d'Apple"; puis ensuite dans le compilateur XCode sur un Mac.

**Avantages** :

- pas de contrôle du contenu de l'application par Apple


**Inconvénients** :

- nécessite un serveur HTTPS pour la distribution de l'application,

- limité à 100 périphériques clients.






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Installation adhoc : les différentes étapes
<a name="installation_adhoc_les_differentes_etapes_ELTTEXTE000257"></a>
Le type d'installation adhoc est fait pour une installation de l'application sur une flotte d'appareils (maximum 100 par type d'appareils).

**Remarque** : Les manipulations suivantes peuvent être modifiées à tout moment par la société Apple. 

La distribution de l'application se décompose en plusieurs étapes : 

- [Etape 1 : Connexion et identification au site Apple](#NOTE2_2). 

- [Etape 2 : Provisioning portal](#NOTE2_3). 

- [Etape 3 : Manipulations sous Xcode](#NOTE2_4). 



<a name="NOTE2_2"></a>


### Connexion et identification au site Apple
<a name="connexion_identification_site_apple_ELTPARAGRAPHE000052"></a>

1. Connectez-vous au site de l'iOS developer center "http://developer.apple.com". 

2. Cliquez sur le lien "iOS Dev Center". 

3. Cliquez sur le bouton "Log In" et saisissez vos login et mot de passe que vous avez créés lors de votre enregistrement auprès de "iOS Dev Center".

4. Cliquez sur le lien "iOS Provisioning Portal". 



<a name="NOTE2_3"></a>


### Provisioning Portal
<a name="provisioning_portal_ELTPARAGRAPHE000062"></a>Une fois connecté à l'iOS Provisioning Portal, vous devez suivre les 4 étapes suivantes : 

- Certificates.

- Devices.

- App IDs.

- Provisioning.




Ces étapes vont vous permettre de :

- Récupérer les certificats afin d'authentifier votre application.

- Référencer les différents matériels (device) sur lesquels va être diffusée votre application.

- Créer un identifiant pour votre application (bundle).

- Associer votre application et les matériels cibles. 

- Créer un certificat final. Ce certificat sera installé sur la machine qui compile sous Xcode l'application en mode Release (distribuable) afin de pouvoir l'installer sur les matériels prévus.




Pour plus de détails, nous vous conseillons de cliquer sur le lien "Distribution", vous trouverez une aide détaillée sur les différentes étapes. Cette documentation explique les différentes étapes pour enregistrer, distribuer une application iOS sur un matériel.

**Etape Certificates : récupération (téléchargement) du certificat du développeur**
Cliquez sur le lien "Certificates". Dans la page, plusieurs liens (onglets) sont visibles : 

- "Development" : cet onglet permet de télécharger et d'installer un certificat pour tester l'application sur le matériel (device) en réel.

- "Distribution" : cet onglet permet de télécharger et de diffuser l'application sur le matériel (déploiement réel).




Par exemple, pour tester l'application sur votre matériel : 

- Sélectionnez l'onglet "Development"

- Téléchargez le certificat de développement (signature du développeur). 

- Téléchargez le certificat Intermediate (signature Apple). 

- Double-cliquez sur chaque certificat pour l'installer sur la machine Apple utilisée pour la compilation. 




**Etape Device : Reconnaissance du ou des matériels**
Cliquez sur le lien "Devices". Dans le cas d'une installation AdHoc, par exemple, pour installer une application sur un matériel, il faut tout d'abord inscrire chaque matériel (limite de 100 matériels).
La liste des appareils enregistrés s'affiche dans un tableau. 
Pour enregistrer un nouveau matériel, cliquez sur le lien "Add device". Il est nécessaire d'indiquer le "Device ID" du matériel à enregistrer. 

**Etape App IDs : Création d'un identifiant pour l'application** 
L' "App ID" de l'application permet de représenter de manière unique l'application qui va être installée (cet identifiant est aussi nommé "Bundle Identifier"). 

Cet identifiant doit être unique par application. Attention, ce nom ne peut pas être supprimé. Cet identifiant est composé de 2 parties (préfixe et suffixe) : 

- Le préfixe peut être soit un identifiant générique (\* pour team id) ou un identifiant lié à votre compte développeur.

- Le suffixe correspond au nom de votre application. 




Il est conseillé de nommer cet identifiant en 'reverse domain' soit par exemple : fr.pcsoft.MonAppli



Pour plus de détails, consultez la documentation Apple. 

**Etape Provisioning**
Le "Provisioning" permet de lier les certificats d'application et les certificats de device (Matériel). Cette association permet de représenter de manière unique le couple correspondant à votre matériel et votre application.

Pour cela, il faut :

- Créer un profil (bouton "New Profile"). 

- Sélectionner le "App Id" de votre application et de cocher le ou les matériels qui pourront recevoir votre application.




Une fois le profil créé : 

- cliquez dans la colonne "Action" pour télécharger le certificat à installer sur la machine de compilation (machine Apple avec Xcode)

- cliquez sur le certificat téléchargé pour l'installer. Il s'installera automatiquement dans Xcode.


Note : Sur la machine compilation MAC, n'oubliez pas d'installer la clé privée générée lors de l'achat de la licence developpeur.
<a name="NOTE2_4"></a>


### Manipulations sous Xcode
<a name="manipulations_sous_xcode_ELTPARAGRAPHE000160"></a>Les manipulations sous Xcode sont les suivantes : 

- Démarrez Xcode et chargez votre projet. 

- Faites glisser par Drag and Drop le certificat de "provisioning" téléchargé précédemment dans l'environnement Xcode. Il sera installé automatiquement.
	

- Créez une nouvelle configuration pour votre projet (ou copiez par exemple une configuration existante). 

- Dans la fenêtre "Target Info", sélectionnez l'onglet "build" et sélectionnez la nouvelle configuration créée précédemment.

- Dans la fenêtre "Target Info" : 

	- Cliquez sur le volet "Code Signing". 

	- Cliquez sur "Code Signing identity". 

	- Cliquez ensuite sur "any iOS device". 

	- Associez le certificat récupéré précédemment.




- Dans la fenêtre "Target Info", sélectionnez l'onglet "Properties" puis saisissez le suffixe de l'identifiant de votre application (par exemple, si votre identifiant d'application est ABCDEF123456.com.nomdomaine.nomapplication, saisir "com.nomdomaine.nomapllication". 

- Dans la fenêtre du projet, en haut à gauche, sélectionnez l' "active configuration" et l' "active SDK" pour le matériel (device) correspondant (iPhone ou iPad).

- Pour terminer, lancez la compilation ("build"). 


Si le matériel est connecté au MAC de compilation, l'application sera installée automatiquement sur celui-ci.






