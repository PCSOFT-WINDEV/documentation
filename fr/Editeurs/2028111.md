
## Installation d'un site WEBDEV avec mise à jour sans déconnexion
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000143"></a>
A partir de la version 24, il est possible de mettre à jour un site de type Session ou AWP sans forcer la déconnexion de tous les internautes qui sont connectés au site !

La mise à jour d'un site WEBDEV Session ou AWP est transparente pour les internautes connectés. Les internautes connectés restent sur l'ancienne version. Ils n'auront accès à la nouvelle version du site que lors de leur prochaine reconnexion. 

Ce mode de déploiement permet aux sites avec sessions de déployer à chaud. 


![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=D%E9ploiement_sans_deconnexion%20-%20HC%20N%B0002.gif)


ATTENTION : ce mode est **déconseillé** pour : 

- les sites contenant des pages AWP sans contexte.

- les sites contenant des pages statiques. 

- les sites PHP. 


En effet, en utilisant ce mode de déploiement, les URLs changent à chaque déploiement d'une nouvelle mise à jour ce qui empêche un référencement correct de ces pages ainsi que la mémorisation des URLs par les internautes. 

Remarque : Cette fonctionnalité est disponible uniquement pour les sites déployés depuis WEBDEV version 24 et supérieures. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000167"></a>


### Principe
<a name="principe_ELTPARAGRAPHE000033"></a>Pour éviter la déconnexion des utilisateurs, le serveur maintient plusieurs versions du site. 

Par défaut, 4 versions précédentes sont conservées sur le serveur. 




### Comment le faire ? 
<a name="comment_faire_ELTPARAGRAPHE000041"></a>Pour réaliser une installation d'un site sans déconnexion des internautes lors de la mise à jour : 

1. **Cas d'un premier déploiement du site** : 

	- Déployez une première fois votre site. 
			Dans le plan concernant la mise à jour sans déconnexion, sélectionnez l'option "Déployer sans déconnecter les utilisateurs". 
			Remarque : L'installation est similaire au mode classique (comme le site n'a jamais été déployé, il ne peut pas y avoir d'utilisateur connecté !).

	- Lors des futures mises à jour, le site s'installera automatiquement sans que l'on ai à se préoccuper si des utilisateurs sont connectés ou non.




2. **Cas d'un site déjà déployé** : Si le site était déjà installé avec la méthode "classique" : 

	- Lors de la première installation en utilisant l'option "Déployer sans déconnecter les utilisateurs", TOUS les utilisateurs seront déconnectés. 

	- Lors des installations/déploiements suivants, les utilisateurs pourront rester connectés. 


 Ce nouveau mode s'applique à partir de la seconde installation.







### Important : Gestion des répertoires et des fichiers de données
<a name="important_gestion_des_repertoires_des_fichiers_donnees_ELTPARAGRAPHE000061"></a>Si vous utilisez une installation d'un site sans déconnexion des internautes lors de la mise à jour : 

- utilisez la fonction [fRepDonnéesUtilisateur](../WDLang1/3036071.md) pour manipuler ou accéder aux fichiers de données du site. Il ne faut pas utiliser en écriture les fonctions [fRepWeb](../WDLang1/3036052.md) ou [fRepExe](../WDLang1/3036049.md) car les données ne seront pas synchronisées entre les différentes mises à jour du site. Seule la fonction [fRepDonnéesUtilisateur](../WDLang1/3036071.md) garantit l'utilisation d'un répertoire unique partagé entre les différentes versions du site. 

- pour manipuler le répertoire &lt;Nom Projet&gt;_WEB, utilisez les fonctions [fRepWeb](../WDLang1/3036052.md) et/ou [RépertoireWeb](../WDLang2/3012015.md). N'utilisez pas directement le nom du répertoire (&lt;Nom Projet&gt;_WEB ne doit pas apparaître dans votre code). 







### Limitations
<a name="limitations_ELTPARAGRAPHE000088"></a>**Attention** : Il n'est pas possible de refaire une installation "classique" après une installation "sans déconnexion". Si vous souhaitez réinstaller votre site avec la méthode "classique", vous devez : 

1. Désinstaller le site.

2. Supprimer dans le serveur web (IIS ou Apache) les répertoires virtuels qui ont été créés pour ce site.

3. Installer à nouveau le site en mode classique.









