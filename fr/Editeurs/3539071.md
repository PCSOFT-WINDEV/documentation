
## Droits sur le répertoire virtuel
			



## Présentation
<a name="presentation_ELTTEXTE000136"></a>
Le diagnostic de configuration affiche l'erreur suivante : "Application : droit de lecture dans le répertoire virtuel"

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=wdadmin_verif_droitsrepweb.gif)


Cette erreur indique que le serveur Web n'arrive pas à lire les fichiers contenus dans le répertoire virtuel du site (répertoire _WEB) ou qu'il ne parvient pas à accéder au répertoire lui-même.

Cette erreur provient généralement : 

- d'un problème de droits au niveau du système de fichiers.
	**Rappel** : Le serveur Web s'exécute généralement en utilisant un compte particulier du système d'exploitation. Par exemple, le serveur IIS (jusqu'à sa version 7 sous Windows) s'exécute par défaut en utilisant le compte "Invité Internet" (dont le nom est IUSR_NomDuPoste). Cette identité dispose habituellement de droits restreints pour empêcher qu'une page web mal conçue ne puisse endommager la configuration du serveur. Les versions suivantes de IIS à partir de Windows 7 et 2008 r2 utilisent l'identité définie dans le pool d'applications de IIS.

- de la présence d'un fichier de configuration local du serveur Web (par exemple "web.config" pour IIS, ".htaccess" pour Apache) contenant une configuration incompatible et/ou invalide.








## Comment diagnostiquer plus précisément le problème ?
<a name="comment_diagnostiquer_plus_precisement_probleme_ELTTEXTE000160"></a>
Pour résoudre le problème, il est nécessaire de savoir précisément à quel répertoire ou fichier le serveur web n'a pas réussi à accéder :

- Selon la configuration du serveur Web, l'erreur renvoyée peut contenir le chemin physique. Pour voir le détail de l'erreur :

	- Copiez dans le presse papier l'URL de l'erreur affichée par la fenêtre de diagnostic (par exemple : http://localhost/MONPROJET_WEB/res/WWConstante5.js').

	- Collez cette URL dans un navigateur web (Internet Explorer est conseillé dans ce cas).

	- Le navigateur affiche la page d'erreur du serveur web. Cette page contient parfois le chemin physique en erreur.




- Si la page d'erreur affichée dans le navigateur est insuffisante, il est possible de consulter les logs du serveur web.

- Il est également possible de consulter la configuration du serveur web pour déterminer sur quel répertoire physique pointe le répertoire virtuel du site.




**Rappel** : pour lancer le panneau d'administration de IIS, choisissez l'option "Exécuter" du menu "Démarrer" de Windows et saisissez "inetmgr". Cet outil vous permettra de chercher le chemin physique du répertoire virtuel et de connaître le compte utilisé par le serveur Web.
Une des sources fréquentes de ce problème est l'installation du projet (en développement) ou du site (en déploiement) dans l'arborescence des données d'un utilisateur :

- Dans le répertoire "Documents"/"Mes documents" (Windows)

- Dans un sous-répertoire de "C:\\Documents and settings\\&lt;Utilisateur&gt;" (Windows 2000, XP et 2003 Serveur)

- Dans un sous-répertoire de "C:\\Users\\&lt;Utilisateur&gt;" (à partir de Windows Vista)

- Dans le répertoire home de l'utilisateur "~&lt;Utilisateur&gt;" (Linux)




Généralement seul l'utilisateur (et les administrateurs) ont des droits suffisants pour lire dans ces répertoires.





## Comment corriger le problème ?
<a name="comment_corriger_probleme_ELTTEXTE000190"></a>
Les solutions possibles sont :

- Déplacer le répertoire du projet/site dans un répertoire où le compte utilisé par le serveur Web aura les droits de lecture (y compris en créant une arborescence spécifique à cet usage sur votre disque).

- Donner les droits de lecture au compte utilisé par le serveur web sur le répertoire virtuel du site. 
	Attention : cette modification devra être faite pour chaque site WEBDEV.

- Donner les droits de lecture au compte utilisé par le serveur web sur le répertoire du projet/site. 
	Attention : cette modification devra être faite pour chaque site WEBDEV.

- Donner les droits de lecture au compte utilisé par le serveur web sur le répertoire des projets/sites. 
	Attention : tous les projets/sites doivent alors être regroupés dans le même répertoire parent.





### Si le répertoire contient un fichier de configuration local du serveur Web
<a name="repertoire_contient_fichier_configuration_local_serveur_web_ELTPARAGRAPHE000062"></a>WEBDEV ne crée ou ne modifie jamais ces fichiers. Ces fichiers sont donc créés par un outil externe :

- Configuration manuelle du serveur Web (éventuellement au moyen d'une interface utilisateur de configuration).

- Ajout par l'administrateur du système. 

- Copie (en même temps que le projet) depuis un autre répertoire. 

- Etc.




Pour vérifier si le fichier est la source du problème, déplacez (temporairement) le fichier et vérifiez si le problème est résolu. 

- En développement : La suppression de ce fichier est généralement possible.

- En déploiement : Il vaux mieux comprendre exactement le problème avant de manipuler le fichier. Ce fichier peut avoir été mis en place (par exemple par l'administrateur du système) pour une raison précise.








## Configuration recommandée
<a name="configuration_recommandee_ELTTEXTE000220"></a>
**Sur un poste de développement**
Sur une machine de développement, il est recommandé de :

- regrouper tous les projets WEBDEV dans un répertoire unique (par défaut : C:\\Mes Sites).

- donner les droits de lecture au compte utilisé par le serveur web sur ce répertoire.




**Sur un Serveur d'Application**
Sur un Serveur d'Application, il est recommandé d'utiliser le Centre de Contrôle des Hébergements WEBDEV pour automatiser la création des comptes et des répertoires et l'application des permissions nécessaires sur les répertoires.




