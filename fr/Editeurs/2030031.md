
## Patch d'application
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000149"></a>
Lorsqu'une application est installée, chaque modification nécessite normalement la réinstallation au moins de la bibliothèque de l'application (fichier WDL).

Cette manipulation peut être pénalisante par exemple :

- lorsque la modification ne concerne qu'une seule fenêtre sur les 500 fenêtres de l'application.

- lors de mises à jour de l'application par Internet, en raison de la taille de la bibliothèque.




Il est possible de livrer des ressources complémentaires (fenêtres, états, ...) sous forme de patch. Ces patchs sont en fait des bibliothèques additives.

Si l'exécutable a été créé avec l'option "L'exécutable prendra en compte les mises à jour par patch", lors du lancement de l'application, les éléments présents dans le patch se substitueront aux éléments présents dans la bibliothèque de l'application.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principe
<a name="principe_ELTTEXTE000173"></a>


### Qu'est-ce qu'un patch ?
<a name="questce_quun_patch_ELTPARAGRAPHE000028"></a>Un patch est une bibliothèque annexe qui contient les éléments qui vont remplacer les éléments de la bibliothèque d'origine.

Un patch ne contient pas nécessairement tous les éléments de la WDL d'origine : seuls les éléments modifiés sont nécessaires.

Le nom des fichiers de patchs respecte le format suivant : **&lt;Nom&gt;.&lt;WDL&gt;.NNN** (exemple : Application.WDL.001, Application.WDL.002, ...).


<a name="NOTE2_2"></a>


### Fonctionnement des patchs
<a name="fonctionnement_des_patchs_ELTPARAGRAPHE000040"></a>Un patch est automatiquement chargé lors du chargement de la bibliothèque (fichier WDL) ou de l'exécutable incluant la bibliothèque. Il faut pour cela que le fichier physique correspondant au patch ait le même nom (hors extension) que le fichier correspondant à la bibliothèque.

Ainsi la bibliothèque &lt;Nom&gt;.WDL accepte les patchs du genre &lt;Nom&gt;.WDL.001.

L'exécutable &lt;Nom&gt;.EXE avec WDL intégrée accepte les patchs du genre &lt;Nom&gt;.WDL.001.

Si la bibliothèque ou l'exécutable n'a pas le même nom que le projet, il est nécessaire de modifier le nom physique du patch (sans toucher à l'extension).


<a name="NOTE2_3"></a>


### Re-création d'un exécutable
<a name="recreation_executable_ELTPARAGRAPHE000054"></a>Lorsque l'exécutable est recréé (ou la WDL complète), les patchs créés pour les versions précédentes sont ignorés.

Exemple :


|   |   |
| --- | --- |
| **Création de l'exécutable version 1** qui contient les fenêtres "Fenêtre1" et "Fenêtre2". | Nom du fichier : &lt;NomProjet&gt;.EXE |
| **Création d'un patch 001** corrigeant la fenêtre "Fenêtre1".<br><br>Lors de l'exécution de l'application, la fenêtre "Fenêtre1" du patch sera prise en compte. | Nom du fichier : &lt;NomProjet&gt;.WDL.001 |
| **Création d'un patch 002** corrigeant la fenêtre "Fenêtre1" et la "Fenêtre2".<br><br>Lors de l'exécution de l'application, les fenêtres "Fenêtre1" et "Fenêtre2" du patch seront prises en compte. | Nom du fichier : &lt;NomProjet&gt;.WDL.002 |
| **Création de l'exécutable version 2** qui contient les fenêtres "Fenêtre1" et "Fenêtre2".<br><br>Cet exécutable ne prend pas en compte les deux patchs précédents. Ces patchs peuvent être supprimés du répertoire d'installation de l'application (aucune suppression automatique n'est effectuée). | Nom du fichier : &lt;NomProjet&gt;.EXE |
| **Création d'un patch 003** corrigeant la fenêtre "Fenêtre1".<br><br>Lors de l'exécution de l'application, la fenêtre "Fenêtre1" du patch 003 sera prise en compte. | Nom du fichier : &lt;NomProjet&gt;.WDL.003 |


<a name="NOTE2_4"></a>


### Patchs et branches du GDS
<a name="patchs_branches_gds_ELTPARAGRAPHE000096"></a>Il est possible de créer des patchs à partir d'une branche présente dans le GDS. 

Il est recommandé de ne pas mélanger les patchs réalisés dans une branche avec ceux de la version principale. 

Pour reporter une modification effectuée dans la version principale, le report doit être réalisé dans les sources de la branche puis le patch doit être généré depuis la branche.


