


## Comment créer un patch ?
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Création d'un patch
<a name="creation_patch_ELTTEXTE000225"></a>
Pour créer un patch d'application : 

1. Effectuez les modifications nécessaires dans votre application.

2. Sous le volet "Projet", dans le groupe "Génération", déroulez "Patch" et sélectionnez "Créer un patch de la bibliothèque".

3. Indiquez les éléments à intégrer dans le nouveau patch (fenêtres, états, ...). Vous pouvez également :

	- **Ajouter des éléments** (bouton "Ajouter") : 
			Tout type de fichier peut être ajouté à la liste des éléments insérés dans le patch : images, fichiers texte, ...

	- **Créer le patch à partir d'une description de bibliothèque existante** (bouton "WDU"). 
			Lors de la création d'une bibliothèque WINDEV, un fichier ".WDU" du même nom est automatiquement créé. Ce fichier contient toutes les références des éléments intégrés à la bibliothèque.
			Le numéro du patch est indiqué par défaut. Il est possible de le modifier.
			Tous les éléments déjà présents dans un patch précédemment créé sont automatiquement sélectionnés.
			Si des patchs ont déjà été créés, il est possible de ré-initialiser les patchs (vider l'historique) (bouton [Réinitialiser les patchs]). Dans ce cas, le patch en cours de création aura le numéro 1.




4. Saisissez si nécessaire une description des modifications effectuées par ce patch. Cette description apparaîtra lors de la gestion de l'historique des différents patchs réalisés à partir d'un projet.

5. Pour installer le patch, il suffit de le copier dans le répertoire de l'application.
	Il est également possible de générer une installation du patch (cochez l'option "Générer une installation"). Un exécutable auto-extractible sera créé à partir du patch en cours de création.
	Dans ce cas, il est possible de spécifier :

	- un fichier à afficher avant l'extraction du patch,

	- un fichier à afficher après l'extraction du patch,

	- dans le cas d'une application multilingue, le chemin du fichier TXT contenant la traduction de l'interface d'auto-extraction. Pour plus de détails, consultez le paragraphe [Remarques](#NOTE5_1).




6. Validez. Le patch de l'application est créé dans un sous-répertoire PATCH du répertoire du projet en cours, ainsi que dans le sous-répertoire EXE du projet. Le nom du fichier est de la forme : ***&lt;Nom du projet&gt;.WDL.001*** où 001 correspond au numéro de version du patch. Renommez le paramètre &lt;Nom du projet&gt; avec le nom de la bibliothèque uniquement si le nom du projet et le nom de la bibliothèque sont différents.




Si un exécutable auto-extractible a été demandé, il est généré dans le répertoire PATCH et à un nom de la forme : 
***&lt;Nom du projet&gt;.001.EXE*** où 001 correspond au numéro de version du patch.

**Remarque : Patch contenant des classes** : Si votre patch contient une classe, il ne faut pas que le code de déclaration de la classe soit modifié par rapport à la version utilisée avec l'exécutable. Le code de déclaration doit être identique : mêmes membres, mêmes structures, même ordre de déclaration. Dans le cas contraire, il est nécessaire de re-créer l'exécutable.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Historique des patchs
<a name="historique_des_patchs_ELTTEXTE000249"></a>


### Visualiser l'historique des patchs réalisés à partir d'un projet
<a name="visualiser_historique_des_patchs_realises_partir_projet_ELTPARAGRAPHE000073"></a>Pour visualiser l'historique des patchs réalisés à partir d'un projet : 

1. Sous le volet "Projet", dans le groupe "Génération", déroulez "Patch" et sélectionnez "Historique des patchs de bibliothèques".

2. Pour chaque patch créé, vous pouvez visualiser les éléments du patch et la description correspondante.



<a name="NOTE2_2"></a>


### Réinitialiser les patchs (vider l'historique) réalisés à partir d'un projet
<a name="reinitialiser_les_patchs_vider_historique_realises_partir_projet_ELTPARAGRAPHE000095"></a>Pour réinitialiser les patchs (vider l'historique) réalisés à partir d'un projet : 

1. Sous le volet "Projet", dans le groupe "Génération", déroulez "Patch" et sélectionnez "Historique des patchs de bibliothèques".

2. Cliquez sur le bouton "Réinitialiser".  




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Installation d'un patch
<a name="installation_patch_ELTTEXTE000279"></a>


### Pour installer un patch
<a name="pour_installer_patch_ELTPARAGRAPHE000119"></a>**Si vous n'avez pas créé de fichier d'installation** : copiez le fichier correspondant au patch dans le répertoire de l'application (répertoire contenant la bibliothèque de l'application).

**Si vous avez créé un fichier d'installation** : exécutez le fichier correspondant à l'exécutable auto-extractible sur le poste de l'utilisateur et extrayez le patch dans le répertoire de l'application (répertoire contenant la bibliothèque de l'application).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Patch et installation réseau
<a name="patch_installation_reseau_ELTTEXTE000303"></a>


### Patch et installation réseau
<a name="patch_installation_reseau_ELTPARAGRAPHE000130"></a>Il est possible d'utiliser des patchs avec une installation réseau.					

Il suffit de copier les fichiers correspondant au patch (ou de les installer en utilisant l'installeur de patchs) dans un sous-répertoire "PATCH" du répertoire "INSTALL" de l'application de référence.

Au lancement de l'application cliente, les patchs seront automatiquement récupérés.

**Remarque** : Ce mécanisme n'est pas géré pour une installation réseau par HTTP.

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Notes
<a name="notes_ELTTEXTE000327"></a>


### Traduction de l'interface de l'auto-extraction
<a name="traduction_interface_autoextraction_ELTPARAGRAPHE000145"></a>L'interface de l'auto-extracteur peut utiliser une langue différente de la langue par défaut (le français).<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Zipcreeexe.gif)
Pour cela, il suffit de créer un fichier .TXT contenant les informations suivantes :

```txt
[GENERAL]
NATIONDEFAUT=1
[WDAUTOEX01]
R000=Archive Autoextractible PC SOFT
R001=Extraire le contenu de l'archive dans le répertoire :
R002=Conserver l'arborescence
R003=Extraire
R004=Fermer
```


Par exemple pour obtenir une interface en anglais :

```txt
[GENERAL]
NATIONDEFAUT=1
[WDAUTOEX01]
R000=Self-Extracting PC SOFT archive
R001=Extract the content of the archive in the directory:
R002=Keep the tree structure 
R003=Extract
R004=Close
```
**Attention** : Les trois premières lignes de ce fichier ne doivent pas être modifiées.

Dans les lignes suivantes, indiquez la traduction voulue.
<a name="NOTE5_2"></a>


### Création d'un nouvel exécutable
<a name="creation_nouvel_executable_ELTPARAGRAPHE000161"></a>Si après avoir créé plusieurs patchs, vous créez un nouvel exécutable prenant en compte les différents patchs, il est possible de supprimer les patchs créés précédemment et devenus inutiles.					

Lors de la création d'un nouveau patch sur ce nouvel exécutable, il est nécessaire de respecter la numérotation des patchs proposée par WINDEV. Le numéro de patch ne peut pas être ré-initialisé (voir paragraphe suivant).					
<a name="NOTE5_3"></a>


### Ré-initialiser à la valeur 1 le numéro du patch
<a name="reinitialiser_valeur_1_numero_patch_ELTPARAGRAPHE000170"></a>Un patch d'application permet d'appliquer à un exécutable ou une bibliothèque des modifications sans qu'une réinstallation de l'application soit nécessaire. Il s'agit d'une opération de maintenance simple, légère et rapide.

A chaque nouveau patch, un numéro de génération est incrémenté et s'inscrit dans un historique. Ce numéro de patch et cet historique évitent que l'application tienne compte de patchs indésirables.

**Il n'est donc pas possible de les réinitialiser.**

Cependant, WINDEV permet d'affecter un numéro précis à un patch, cela afin de réparer d'éventuelles erreurs de maintenance.


