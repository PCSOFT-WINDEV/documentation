


## Créer un plan d'action
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000274"></a>
Les plans d'action regroupent toutes les actions à effectuer par la fabrique logicielle. Un éditeur de plans d'action permet de définir simplement ces actions. Il permet de définir l'enchaînement des actions à effectuer automatiquement. La création des plans d'action est réalisée depuis WINDEV, WEBDEV ou WINDEV Mobile. 



## Comment le faire ?
<a name="comment_faire_ELTTEXTE000298"></a>


### Créer un plan d'action
<a name="creer_plan_action_ELTPARAGRAPHE000015"></a>Pour créer un plan d'action : 

1. Ouvrez le projet pour lequel un plan d'action doit être créé. 
	**Remarque** : Un plan d'action n'est pas obligatoirement lié à un projet, puisqu'il peut être utilisé pour plusieurs projets. Cependant, pour créer un plan d'action, il est nécessaire d'utiliser un projet. Il est également possible de créer directement un projet de type "Plan d'action". 

2. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif) parmi les boutons d'accès rapide. 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Automatisation" puis sur "Plan d'action".

	- L'assistant de création d'une configuration de projet est automatiquement lancé sur le projet en cours.




3. Dans l'assistant, indiquez : 

	- le nom et la description du plan d'action. 

	- les éléments intégrés au plan d'action. Dans le cas général, aucun élément ne doit être intégré au plan d'action. Ce plan permet notamment d'intégrer des éléments utilisés par exemple par une action spécifique du plan d'action (par exemple procédure utilisée par une action WLangage). 




4. Validez la création de la configuration de projet. 

5. Un plan d'action par défaut est généré et apparaît dans l'éditeur de plans d'action. 

6. Enregistrez le plan d'action (Ctrl + S). Le plan d'action correspond à un fichier d'extension "wpa". Le plan d'action apparaît dans l'explorateur du projet. 





### Description d'un plan d'action
<a name="description_plan_action_ELTPARAGRAPHE000037"></a>L'éditeur de plans d'action se présente de la manière suivante : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Plan_Action_Description.gif&type=thumb)


**1** : Nom du plan d'action. L'option "Description" du menu contextuel permet de : 

- modifier le nom du plan d'action. 

- spécifier les paramètres du plan d'action. 


**2** : Liste des actions pouvant être effectuées par le plan d'action. Pour ajouter une action au plan d'action, il suffit de "dropper" une action vers la liste des actions du plan. L'action sera intégrée à la place survolée lors du lâché de l'action. 
Le menu contextuel de l'action permet de : 

- Afficher la fenêtre de description de l'action. Cette fenêtre permet de fournir les paramètres nécessaires (par exemple le nom du projet à ouvrir) et de gérer les erreurs et les personnes concernées par le compte-rendu. 

- Monter, descendre ou supprimer l'action. 


**3** : Liste des actions présentes dans le plan d'action. 

**4** : Action effectuée en cas d'erreur. Ce fonctionnement a été configuré dans la fenêtre de configuration de l'action. 


### Actions pouvant être utilisées dans un plan d'action
<a name="actions_pouvant_etre_utilisees_dans_plan_action_ELTPARAGRAPHE000060"></a>Voici une liste non exhaustive des actions pouvant être exécutées dans un plan d'action : 

- Ouverture de WINDEV, WEBDEV, WINDEV Mobile. 

- Fermeture de WINDEV, WEBDEV, WINDEV Mobile. 

- Ouverture d'un projet depuis le GDS.

- Ouverture d'un projet sur le disque. 

- Fermeture du projet.

- Mise à jour des composants.

- Mise à jour des modèles.

- Réactualisation des styles.

- Mise à jour des ambiances.

- Relocalisation des composants.

- Sélection d'une configuration.

- Génération d'une configuration.

- Génération multiple.

- Génération de l'aide des nouveautés.

- Compilation de l'aide.

- Création de l'installation.

- Installation.

- Extraction pour WDMSG.

- Réintégration de WDMSG.

- Mise à jour de la base du sources du GDS.

- Extraction depuis le GDS.

- Réintégration depuis le GDS.

- Annulation de l'extraction depuis le GDS.

- Etiquetage GDS.

- Extraction pour test du GDS.

- Annulation de l'extraction du GDS pour test.

- Recherche dans l'historique du GDS.

- Lancement des audits.

- Lancement des tests automatiques.

- Spécification de la ligne de commande pour tests.

- Recompilation du projet.

- Mise à niveau du projet.

- Activation / Désactivation des erreurs UI, Warnings, informations.

- Activation / désactivation du logiciel Etats & Requêtes.

- Activation / désactivation de la charte de programmation.

- Affichage / Masquage des préfixes de code.

- Activation / Désactivation de l'audit Orthographe.

- Définition du nom du fichier à générer.

- Définition du numéro de version.

- Activation / Désactivation de l'incrémentation du numéro de version.

- Définition du Copyright.

- Définition du SplashScreen.

- Génération de la documentation du composant.

- Définition du numéro de version compatible.

- Définition du chemin du SDK Android.

- Définition de la signature Android.

- Temporisation.

- Emission d'un son.

- Copier un fichier, un répertoire.

- Graver un CD.

- Supprimer un répertoire.

- Ouvrir tous les éléments.

- Fermer tous les éléments.

- Ajouter un fichier dans le projet.

- Envoyer un email.

- Supprimer les rubriques inutilisées dans l'analyse.

- Sauver et générer l'analyse.

- Remettre à zéro du numéro de version de l'analyse.

- Migrer un projet.

- Déployer dans un Store Privé.

- Ouvrir un projet dans git.

- Générer le dossier technique.








## Caractéristiques des actions
<a name="caracteristiques_des_actions_ELTTEXTE000334"></a>


### Action paramétrée
<a name="action_parametree_ELTPARAGRAPHE000138"></a>Une action peut avoir besoin de paramètres. Par exemple, l'action "Ouverture d'un projet depuis le GDS" nécessite le nom du projet à ouvrir. 

La définition de ces paramètres s'effectue dans l'onglet "Général" de la fenêtre de description de l'action (option "Description" du menu contextuel de l'action). 

Les paramètres peuvent être définis : 

- Sous forme de valeur "fixe" : la valeur est spécifiée directement dans le plan d'action. 

- Sous forme de paramètres donnés lors de l'exécution du plan d'action. 


Ce paramètre sera nécessaire pour exécuter le plan d'action. 

Dans le cas du nom du projet à ouvrir, le développeur a évidemment intérêt à l'indiquer en paramètre. 

**Conseil** : Dans la mesure du possible, il est conseillé d'utiliser des paramètres lors de la création des plans d'action afin de pouvoir réutiliser ces plans d'action pour différents projets.  


### Gestion des échecs et des erreurs
<a name="gestion_des_echecs_des_erreurs_ELTPARAGRAPHE000156"></a>Point important du plan d'action : définir le comportement à adopter en cas d'échec de l'action. Exemple simple : que faire lors de la mise à jour d'une fenêtre qui est extraite en exclusif chez un développeur. 

Par défaut, la gestion d'erreurs sélectionnée est la gestion la plus cohérente avec l'action. Mais il est bien entendu possible de la personnaliser. Voici les modes de gestion d'erreurs possibles : 

- **Arrêter l'exécution du plan d'action et enregistrer l'erreur dans le compte-rendu**. 
	Ce mode de gestion est à réserver pour les erreurs graves, par exemple l'ouverture du projet qui échoue... : il est inutile d'essayer de continuer. 

- **Exécuter le traitement d'erreur personnalisé du plan d'action**.
	Ce mode de gestion permet de gérer un mécanisme d'erreur spécifique. Par exemple, envoyer un SMS en cas d'erreur. 

- **Enregistrer l'erreur dans le compte-rendu et continuer l'exécution**. 
	Ce mode de gestion permet de continuer l'exécution du plan d'action même en cas d'erreurs. 
	Par exemple, en cas de non mise à jour d'un composant (serveur inaccessible, etc.), le plan d'action peut continuer. 

- **Enregistrer pour information mais ne pas générer d'erreur**. 
	Par exemple, lorsque l'audit détecte qu'il y a des fichiers non utilisés dans le répertoire du projet, ce n'est pas une erreur, mais il peut être important d'avoir cette information.  




En cas d'échec de l'action, il est possible de sélectionner une ou plusieurs personnes à pré­venir (onglet "Message" de la fenêtre de description de l'action). 

Dans tous les cas, le propriétaire du plan d'action est prévenu de l'échec ou du succès de l'exécution. 

**Conseil** : Pour obtenir toutes les erreurs potentielles d'un projet, il est possible d'utiliser le mode "Enregistrer l'erreur dans le compte-rendu et de continuer" et une action particulière : "Stopper l'exécution en cas d'erreur". Par exemple, si la synchronisation des modèles ne s'est pas effectuée, l'erreur est enregistrée et le plan d'action continue à s'exécuter. Lors de la suite du plan d'action, si la recompilation détecte des erreurs d'UI, ces erreurs seront stockées. Ainsi, toutes les erreurs du projet sont trouvées en une seule exécution du plan d'action.  

**Cas particulier : Exécution d'une procédure dans un plan d'action** : 

Selon le résultat de la procédure, le plan d'action doit être interrompu. Il suffit d'utiliser le code suivant dans la procédure WLangage : 

```wl
SI bRes = Faux ALORS
	sMessageErreur est une chaîne = "Erreur dans ma fonction XXX" + RC + ... 
		ErreurInfo(errMessageSystème)
	ExceptionDéclenche(1, sMessageErreur)
FIN
```



### Action spécifique : Exécution d'un plan d'action
<a name="action_specifique_execution_plan_action_ELTPARAGRAPHE000189"></a>Il est possible d'exécuter un plan d'action depuis un autre plan d'action. 

Cette action peut être utile, notamment pour mutualiser les opérations communes aux projets WINDEV, WEBDEV et WINDEV Mobile. 

Par exemple, un plan d'action spécifique peut être utilisé pour lancer WINDEV, WEBDEV ou WINDEV Mobile en fonction d'un paramètre. Les actions inutiles peuvent être désactivées grâce à la fonction [paDésactiveAction](../WDLang6/1000019620.md). 

Dans ce cas : 

- Le plan d'action contient les 3 lancements des produits. 

- Le code d'initialisation du plan d'action est le suivant : 
	
	```wl
	SELON pNomProduit
		CAS ~= "WD"
			// On ne veut pas lancer WEBDEV ni WINDEV Mobile
			paDésactiveAction(Lancement_de_WEBDEV)
			paDésactiveAction(Lancement_de_WINDEV_Mobile)
			
		CAS ~= "WB"
			// On ne veut pas lancer WINDEV ni WINDEV Mobile
			paDésactiveAction(Lancement_de_WINDEV)
			paDésactiveAction(Lancement_de_WINDEV_Mobile)
			
		CAS ~= "WM"
			// On ne veut pas lancer WINDEV ni WEBDEV
			paDésactiveAction(Lancement_de_WINDEV)
			paDésactiveAction(Lancement_de_WEBDEV)
			
		AUTRE CAS
			ExceptionDéclenche(1, "Ce type de projet n'est pas associé à un produit")
	FIN
	```






### Evénements WLangage associés à un plan d'action
<a name="evenements_wlangage_associes_plan_action_ELTPARAGRAPHE000208"></a>Deux événements sont associés à un plan d'action : 

| Evénement | Condition d'exécution |
| --- | --- |
| Initialisation du plan d'action | Exécuté avant l'exécution du plan d'action. |
| Terminaison du plan d'action | Exécuté après l'exécution du plan d'action. |





## Tester un plan d'action
<a name="tester_plan_action_ELTTEXTE000376"></a>
WINDEV permet de faire un "Go" d'un plan d'action pour tester en local son fonctionnement, notamment des actions personnalisées contenant du code WLangage. 


