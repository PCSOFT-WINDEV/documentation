


## Fichier MDL (conservé par compatibilité) : Description du modèle 
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000277"></a>
Le fichier MDL est le fichier permettant de générer une fenêtre de type RAD. Ce fichier contient toute la description du modèle à générer. Cette description est divisée en deux parties distinctes :

- la description du modèle,

- la description de la fenêtre.




Cette page d'aide présente uniquement le code permettant de décrire le modèle. Pour détailler ce code, le script d'un modèle **Fiche.mdl** est utilisé.

**Attention** : **En version 12, le RAD a été entièrement refait. Les fichiers MDL sont conservés par compatibilité. Pour plus de détails, consultez [Nouveaux Patterns RAD](../Editeurs/2031020.md)**.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Les différentes parties de la description du modèle
<a name="les_differentes_parties_description_modele_ELTTEXTE000301"></a>


### 1. Les caractéristiques du modèle reprises dans l'assistant :
<a name="1_les_caracteristiques_modele_reprises_dans_assistant_ELTPARAGRAPHE000028"></a>
```txt
[Modele] 
############################# 
# nom du modèle 
############################# 
Nom=Fiche avec parcours 
Titre=Fiche 
Numero=2 
############################# 
# description du modèle 
############################# 
Description=Debut 
Modèle fiche avec bouton de parcours. 
Permet de saisir, modifier et supprimer des enregistrements. 
Permet de consulter des enregistrements. 
Description=Fin 
############################# 
# classes pour la POO 
############################# 
Classe=CWDManipFic 
Classe=CWDFiche 
############################# 
# groupe de fichier 
############################# 
GpFic=A 
#accepte les requêtes 
Requete=Oui 
############################# 
# groupe de champ 
############################# 
GroupeChamp=GP_CHAMP 
GroupeParcours=GP_PARCOURS 
Groupe=GP_PARCOURS 
Groupe=GP_MODIF 
GroupeLiaison=GP_LIAISON 
Groupe=GP_APPLIQUER
```

<a name="NOTE2_2"></a>
Les différents éléments utilisés dans ce code sont les suivants :


|   |   |
| --- | --- |
| **[Modele]** | Signale le début de la section de description du modèle |
| **Nom** | Nom du modèle, affiché dans l'assistant de création de fenêtres. |
| **Titre** | Titre de la fenêtre générée |
| **Numéro** | Numéro du modèle RAD. Par défaut 11 modèle RAD sont disponibles |
| **Description = Début** | Début de la description des fonctionnalités du modèle. Ces fonctionnalités seront affichée dans l'assistant de création de fenêtres |
| **Description = Fin** | Fin de la description des fonctionnalités du modèle. |
| **Classe** | La fenêtre peut être créée en mode de programmation POO. L'option correspondante sera visible dans l'assistant.<br>Nom des classes présentes dans le répertoire \\modele\\RAD devant être copiées dans le répertoire du projet, pour le bon fonctionnement de la fenêtre. |
| **GPFic=A** | Indique qu'un seul type de fichier doit être choisi dans l'assistant.<br>La notation **GpFic=A(N1)B** indique que deux fichiers doivent être sélectionnés dans l'assistant. Ces deux fichiers doivent être liés sous l'analyse par une liaison de type 1-n. |
| **Requete=oui** | Indique que pour ce modèle RAD, l'assistant peut proposer à la fois les fichiers définis dans l'analyse et les requêtes créées avec l'éditeur de requêtes.<br>Si les requêtes ne doivent pas être utilisées, indiquer **Requete=Non** |
| **GroupeChamp=GP_CHAMP**<br>**GroupeParcours=GP_PARCOURS**<br>**Groupe=GP_PARCOURS**<br>**Groupe=GP_MODIF**<br>**GroupeLiaison=GP_LIAISON**<br>**Groupe=GP_APPLIQUER** | Définit les noms des différents groupes de champs à créer.<br>**GroupeChamp** : groupe pour les champs de saisie dans la fenêtre<br>**GroupeParcours** : groupe pour les champs visibles en mode parcours<br>**Groupe** : groupe de champs<br>**GroupeLiaison** : groupe pour les boutons de liaison |


<a name="NOTE2_3"></a>


### 2. Code du projet
<a name="2_code_projet_ELTPARAGRAPHE000111"></a>
```txt
CodeFen=Debut
%define PCODEPRJ OuverturePrj
%ifdef FICHIER
@// Création des fichiers
SI PAS HCréationSiInexistant({RAD_FICHIER_A}) ALORS Info("Impossible de créer 
ou d'initialiser l'accès au fichier {RAD_FICHIER_A}",HErreurInfo())
@
%endif
%enddef PCODEPRJ
```

<a name="NOTE2_4"></a>
Les différents éléments utilisés dans ce code sont les suivants :


|   |   |
| --- | --- |
| **CodeFen=Debut** | Signale le début de la section de code de la fenêtre. La fin du code est signalée par **CodeFen=Fin** |
| **%define** | Indique le début d'une définition de zone de code. La fin de cette définition est signalée par le mot-clé **%enddef** |
| **%ifdef** | Indique le début d'un code conditionnel. L'instruction complète est de la forme :<br>**%ifdef .... %else %endif** |
| **PCODEPRJ** | Définit le type de traitement en cours de description :<br><br>- **PROCLOC** : Description d'une procédure locale<br><br>- **PROCGLOB** : Description d'une procédure globale<br><br>- **PCODE** : Description d'un traitement spécifique<br><br>- **PCODEPRJ** : Description d'un traitement associé au projet<br><br><br> |
| **OuverturePrj** | Type de traitement en cours de description<br><br>- "**Ouverture**" : Code de déclaration des globales de la fenêtre<br><br>- "**FinInitialisation**" : Code d'ouverture de la fenêtre<br><br>- "**Fermeture**" : Code de fermeture de la fenêtre<br><br>- "**Modification**" : Code à chaque modification de la fenêtre<br><br>- "**OuverturePrj**" : Code d'initialisation du projet<br><br>- "**FermeturePrj**" : Code de fermeture du projet<br><br>- "**Initialisation**" : Code d'initialisation d'un bouton<br><br>- "**Clic**" : Code de clic sur un bouton<br><br>- "**EntreeLigne**" : Code d'entrée de ligne dans une table<br><br>- "**SelectionLigne**" : Code de sélection d'une ligne dans une table<br><br><br> |
| **FICHIER** | Permet de savoir si l'utilisateur a sélectionné un fichier dans l'assistant de création de fenêtre.<br>**REQUETE** : permet de savoir si l'utilisateur a choisi une requête dans l'assistant de création de fenêtre. |
| **@** | Indique le début et la fin du code à insérer dans le traitement spécifié, lors de la génération de la fenêtre. |
| **{RAD_FICHIER_A}** | Balise permettant de désigner le fichier sélectionné par l'utilisateur dans l'assistant. A désigne le premier fichier, B le second, ... Cette balise est automatiquement remplacée dans le code généré par le nom du fichier.<br>Les autres balises utilisées sont :<br><br>- **RAD_FICHIER_** : variable fichier<br><br>- **Fiche_** : variable fenêtre Fiche<br><br>- **RAD_CLE_** : variable clé<br><br>- **RAD_CLE_SOURCE** : Nom de la rubrique avant d'être utilisée dans la requête (avant l'alias)<br><br>- **RAD_CHAMP_CLE_** : Champ associé à la clé<br><br>- **RAD_FENETRE** : variable fenêtre<br><br>- **RAD_CLELIAISON** : clé de liaison entre 2 fenêtres<br><br>- **RAD_CLELIAISON_SOURCE** : Nom de la rubrique clé de liaison avant d'être utilisée dans la requête (avant l'alias)<br><br>- **RAD_CLELIAISON_ORIGINE** : Nom de la rubrique clé de liaison dans le fichier en cours (et non dans le fichier lié)<br><br>- **RAD_CLELIAISON_SOURCE_ORIGINE** : Nom de la rubrique clé de liaison dans le fichier en cours avant d'être utilisée dans la requête (avant l'alias)<br><br>- **RAD_CHAMP_CLELIAISON** : Champ associé à la clé de liaison entre 2 fenêtres<br><br>- **RAD_ETAT** : variable état<br><br>- **RAD_COMBO_VISION** : variable contenant le nom de la combo auto alimentée<br><br>- **RAD_FICHIER_VISION** : variable contenant le nom du fichier pour les boutons vision plus<br><br>- **RAD_CLE_VISION** : variable contenant le nom de la clé pour les boutons vision plus<br><br>- **RAD_FENETRE_VISION** : variable contenant le nom de la fenêtre Vision à ouvrir<br><br>- **Etat_Fiche_** : variable contenant le nom d'un état de type fiche<br><br>- **Etat_Table_** : variable contenant le nom d'un état de type table<br><br>- **RAD_RUB_** : variable rubrique<br><br>- **RAD_DERNIER_RUB_** : variable dernière rubrique du fichier<br><br>- **RAD_REQ_SELECT_** : variable contenant le nom d'une requête Select<br><br>- **QUOTE_** : préfixe des variables devant être mise obligatoirement entre quotes<br><br>- **SANSQUOTE_** : préfixe des variables ne devant obligatoirement pas être entre quotes<br><br><br> |
| **%endif** | Signale la fin d'une boucle de condition |
| **%enddef** | Signale la fin d'une définition de code |


<a name="NOTE2_5"></a>


### 3. Code de la fenêtre
<a name="3_code_fenetre_ELTPARAGRAPHE000210"></a>
```txt
%define PCODE Ouverture 
%ifdef PROC 
.... 
@ 
%else 
%ifdef SQL 
@ 
... 
@ 
%endif 
%endif
```

<a name="NOTE2_6"></a>
Les différents éléments utilisés dans ce code sont les suivants :


|   |   |
| --- | --- |
| **PROC** | Permet de savoir si l'utilisateur a choisi le mode de programmation procédural |
| **SQL** | Permet de savoir si l'utilisateur a choisi le mode de programmation SQL |
| **ODBC** | Permet de savoir si l'utilisateur a choisi le mode de programmation ODBC |




