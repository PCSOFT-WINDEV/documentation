


## Log d'exécution
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000303"></a>
Comment connaître les fonctionnalités de l'application les plus utilisées ? Il suffit d'utiliser le log d'exécution. Le log d'exécution est une trace d'exécution. Ce log est un fichier qui contient le détail de toutes les manipulations effectuées par un utilisateur sur une application WINDEV, WINDEV Mobile ou un site WEBDEV :

- détail des traitements appelés,

- fonctions du WLangage avec leurs paramètres,

- procédures utilisateur avec leurs paramètres,

- threads,

- composants.




Ce fichier permet par exemple de :

- analyser les performances de l'application.

- connaître les manipulations les plus utilisées dans l'application.

- connaître les traitements prenant le plus de temps.

- suivre le code exécuté lors d'un traitement posant problème (difficile à isoler en mode test).




L'équipe de développement connaît ainsi les parties de l'application les plus utilisées, et peut focaliser ses ressources sur des parties de code à optimiser.

Remarque : Jusqu'à la version 27, le log d'exécution correspondait à un fichier ".wlog". A partir de la version 28, le log d'exécution est composé d'un fichier ".wxl", d'un fichier ".ndx" et d'un fichier ".mmo".

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Mise en place
<a name="mise_place_ELTTEXTE000327"></a>


### Activation du log d'exécution
<a name="activation_log_execution_ELTPARAGRAPHE000037"></a>L'activation du log d'exécution peut être réalisée : 

- directement dans l'application, **par programmation**. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) sans modifier l'application, **grâce à un fichier spécifique**





### Activation directement dans l'application par programmation
<a name="activation_directement_dans_application_par_programmation_ELTPARAGRAPHE000047"></a>Cette activation est réalisée grâce à la fonction [dbgActiveLog](../WDLang1/1000017137.md). Différentes fonctions WLangage permettent de gérer le log d'exécution :


|   |   |
| --- | --- |
| [dbgActiveLog](../WDLang1/1000017137.md) | Active la gestion du log d'exécution. |
| [dbgEtatLog](../WDLang1/1000017138.md) | Permet de connaître et modifier l'état du log d'exécution (actif, inactif, en pause). |
| [dbgOptionLog](../WDLang1/1000017136.md) | Permet de connaître et de modifier les options du log d'exécution. |


![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Activation sans modifier l'application, grâce à un fichier spécifique
<a name="activation_sans_modifier_application_grace_fichier_specifique_ELTPARAGRAPHE000073"></a>Il suffit de créer un fichier &lt;Nom Exécutable&gt;.WX à côté de l'exécutable de l'application. Ce fichier doit contenir les lignes suivantes :

```txt
[LOG]
Actif=<0/1>
Fichier=<Nom du fichier de log>
Option=<Valeur des options>
```


Détaillons ces lignes :

- **Actif** : Ce paramètre doit correspondre à 0 pour désactiver le log et 1 pour l'activer.

- **Fichier** : Nom du fichier de log. Ce nom peut être construit avec les éléments suivants : 
	


|   |   |
| --- | --- |
| [%RepExe%] | Répertoire de l'exécutable, toujours complété par le caractère "\\". Ce répertoire est équivalent au résultat de la fonction [fRepExe](../WDLang1/3036049.md). |
| [%NomExe%] | Nom de l'exécutable. |
| [%Date%] | Date de lancement du fichier Log. |
| [%Heure%] | Heure de lancement du fichier Log. |
| [%NomUtilisateur%] | Nom de l'utilisateur courant. |
| [%NomMachine%] | Nom de la machine. |
| [%RepDonnees%] | Répertoire des fichiers de données HFSQL spécifié par l'utilisateur lors de l'installation de l'application. Ce répertoire est équivalent au résultat de la fonction [fRepDonnées](../WDLang1/3036001.md). |
| [%RepDonneesUtilisateur%] | Répertoire pour les données de l'utilisateur courant de l'application courante. Ce répertoire est équivalent au résultat de la fonction [fRepDonnéesUtilisateur](../WDLang1/3036071.md). |



- **Option** : Options du fichier de log.

	- Si les options ne sont pas spécifiées dans le fichier WX (la ligne OPTION n'est pas présente), le fichier de log est créé avec les options par défaut : seules les fonctions WLangage sont présentes dans le fichier de log.

	- "" (chaîne vide) : Seuls les traitements sont mémorisés dans le log.

	- "\*" : le log contient toutes les informations.

	- une combinaison de valeurs :

		- "+F" pour activer la trace des fonctions,

		- "+P" pour activer la trace des paramètres.






<a name="NOTE2_2"></a>


### Conseils d'utilisation
<a name="conseils_utilisation_ELTPARAGRAPHE000174"></a>Selon la finalité du log d'exécution, sa mise en place peut différer ainsi que les options choisies :

- Pour connaître les options les plus utilisées d'une application, il est conseillé d'utiliser un log d'exécution le plus simple possible (sans détail des fonctions appelées). En effet, plus le nombre d'options demandées est important, plus la taille du log d'exécution sera importante. 
	![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Le log peut être mis en place avec le fichier ".WX".

- Pour tracer un problème difficilement reproductible, il est conseillé d'utiliser les fonctions WLangage pour mettre en place le log d'exécution. Le log d'exécution sera activé au début de la partie posant problème.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Visualisation du log d'exécution
<a name="visualisation_log_execution_ELTTEXTE000369"></a>
Pour visualiser le log d'exécution : 

1. Ouvrez le projet voulu sous l'éditeur : le projet en cours doit être le projet de l'application ou le projet d'un des composants utilisé par l'application. Seules les informations concernant le projet en cours seront affichées.

2. Ouvrez le fichier correspondant au log d'exécution sous l'éditeur de WINDEV, WEBDEV ou WINDEV Mobile :

	- soit en faisant un "Drag and Drop" du fichier ".wxl" (ou ".wlog") vers l'éditeur de fenêtres ou de pages (par exemple sur la barre des documents ouverts).

	- soit directement en ouvrant le fichier ".wxl" (ou ".wlog"). 
			Rappel : Pour ouvrir un fichier depuis l'éditeur, sous le volet "Accueil", dans le groupe "Général", déroulez "Ouvrir" et sélectionnez le fichier voulu.




3. Sélectionnez les informations à visualiser. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Log_ex%E9cution%20-%20HC%20N%B0001.gif&type=thumb)




<a name="NOTE3_2"></a>


### Informations affichées
<a name="informations_affichees_ELTPARAGRAPHE000217"></a>Les informations pouvant êtres affichées à partir du log d'exécution sont les suivantes :

- **Informations générales sur le fichier de log** : nom, application, date et heure de lancement, date et heure de fin.

- Analyse des performances à partir du log d'exécution : Permet de visualiser l'activité de l'application pendant son utilisation. Le graphe affiche les périodes d'activité et de non activité via un système de paliers, les paliers hauts représentant les périodes d'activité. Pour chaque palier haut, il est possible de visualiser les procédures exécutées et le détail des fonctions WLangage utilisées. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Log_ex%E9cution%20-%20HC%20N%B0002.gif&type=thumb)
Pour plus de détails, consultez [Analyseur Temps Réel (ATR)](../Editeurs/9500237.md). 

- **Eléments les plus utilisés** : différents onglets sont affichés : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Log_ex%E9cution%20-%20HC%20N%B0004.gif&type=thumb)


	- ***Statistiques des éléments*** : Permet de voir les éléments les plus utilisés de votre projet, avec le temps d'utilisation et le nombre de traitements effectués. La sélection d'un élément permet de : 
			- voir les endroits depuis lesquels l'élément est utilisé (dans la partie basse de l'écran)
			- voir l'élément dans l'éditeur (bouton "Voir l'élément")
			- accéder aux statistiques de traitements (bouton "Statistiques des traitements").

- ***Statistiques des traitements*** : Permet d'obtenir des statistiques sur le temps de chaque traitement. Il est également possible de filtrer les informations sur un élément spécifique du projet. 
			En bas de l'écran, la raison de l'appel est affichée (action utilisateur, ...). Pour l'élément sélectionné, il est possible de visualiser l'enchaînement des appels (bouton "Enchaînement des appels"). 
			Le bouton "Voir le code du traitement" permet d'afficher le code WLangage correspondant sous l'éditeur de code. Attention, la fenêtre d'affichage des logs est toujours positionnée au premier plan.

- ***Enchaînement des appels*** : Permet de visualiser l'enchaînement des traitements réalisés dans le code sélectionné. Le détail des fonctions manipulées est affiché. 
			En bas de l'écran, des informations supplémentaires peuvent être affichées : Paramètres de la procédure, résultat, ...
			Le bouton "Voir le code de l'appel" permet d'afficher le code appelant. Le bouton "Recentrer sur traitement" permet de visualiser le code du traitement en cours.

- **Jounal des appels** : Permet de voir tous les appels aux procédures et fonctions WLangage. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Log_ex%E9cution%20-%20HC%20N%B0003.gif&type=thumb)
En bas de l'écran, des informations supplémentaires peuvent être affichées : paramètres de la procédure, résultat, ...
	Le bouton "Voir le code du traitement" permet d'afficher le code WLangage correspondant sous l'éditeur de code. Attention, la fenêtre d'affichage des logs est toujours positionnée au premier plan.

- **Threads** : Permet de sélectionner le thread à considérer et de visualiser l'enchaînement des appels pour chaque thread.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Log_ex%E9cution%20-%20HC%20N%B0006.gif&type=thumb)






