


## Règles métier
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000420"></a>
WINDEV, WEBDEV et WINDEV Mobile permettent de gérer des règles métier. Une règle métier permet de définir un mode opératoire précis ou de préciser un traitement particulier. Par exemple : le calcul d'un taux de TVA avec ses particularités, les règles de changement de statut d'un client, la formule de calcul d'un montant de frais de port, ...

Une règle métier peut être simple ou élaborée.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=RegleMetier.GIF)
Les règles métier proviennent du cahier des charges, de l'architecte du projet, du chef de projet, des développeurs, ...

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Les règles métier peuvent également provenir des suggestions faites par les utilisateurs de l'application, grâce au [Menu "?"](../Editeurs/9000070.md). Dans ce cas, le [composant Feedback](../Editeurs/2014013.md) est utilisé. 

Une règle métier est spécifique à un projet et peut être liée à un ou plusieurs éléments du projet.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000444"></a>


### Visualiser les règles métier
<a name="visualiser_les_regles_metier_ELTPARAGRAPHE000034"></a>Pour visualiser les règles métier, affichez le [volet "Règles métier"](../Editeurs/2027024.md) : sous le volet "Accueil", dans le groupe "Environnement", déroulez "Volets" et sélectionnez "Volets" puis "Règles métier".

Il est possible de visualiser :

- les règles métier de l'élément en cours.

- les règles métier du projet en cours.

- les règles métier de tous vos projets.

- les règles métier n'ayant aucun lien.

- les règles correspondant à des critères donnés (projet, élément, auteur, état, ...).




Ce paramétrage s'effectue grâce au bouton "Filtre" :
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=FiltreMetier.GIF)
Le champ "Mots-clés" permet d'effectuer une recherche dans la liste des règles métier.
<a name="NOTE2_2"></a>


### Ajouter une règle métier
<a name="ajouter_une_regle_metier_ELTPARAGRAPHE000068"></a>Pour ajouter une règle métier :

1. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_NewRegle.GIF)
 dans le [volet "Règles métier"](../Editeurs/2027024.md). La fenêtre d'édition de la règle métier s'ouvre.

2. Saisissez la description de la règle métier. Cette description peut être mise en forme (gras, italique, ...).

3. Pour associer à la règle métier :

	- l'image présente dans le presse-papiers, cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_ImgRegle.GIF)
.

	- une partie de l'image de l'écran, cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_ImgRegleLasso.GIF)
 et sélectionnez la partie de l'image voulue.

	- un fichier image, cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_ImgRegleFic.GIF)
 et sélectionnez le fichier image voulu.

	- le document présent dans le scanner du poste en cours, cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_ImgRegleScan.GIF)
.




4. Pour lier la tâche à un ou des éléments, affichez l'onglet "Liens". 
	Il est possible :

	- soit de sélectionner ces éléments manuellement :
			***1° méthode*** : Affichez l'élément à lier à la tâche dans l'éditeur, cliquez sur le bouton "Viser un élément pour le lier" et cliquez sur l'élément à lier. Répétez ces opérations pour tous les éléments à lier à la règle métier.
			***2° méthode*** : Cliquez sur le bouton "Choisir dans la liste des éléments du projet" et sélectionnez le ou les éléments à lier.

	- soit de sélectionner ces éléments automatiquement. Il suffit de cliquer sur le bouton "Conditions des liens automatiques" et de décrire les conditions de sélections des éléments à lier à la règle métier (le ou les projets concernés, les éléments concernés, les critères de sélection, ...).




5. Validez.




Remarques :

- La fenêtre de création d'une règle métier est non-modale : il n'est pas nécessaire de la fermer pour travailler sur le projet en cours.

- Une règle métier peut être définie sur n'importe quel élément d'un projet (fenêtre, page, état, champ, ...) et sur le projet lui-même.

- L'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IcoSelectManu.GIF)
 indique les éléments sélectionnés manuellement et l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IcoSelectAuto.GIF)
 indique les éléments sélectionnés automatiquement.




![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Les règles métier peuvent également provenir des suggestions faites par les utilisateurs de l'application, grâce au [Menu "?"](../Editeurs/9000070.md). Dans ce cas, le [composant Feedback](../Editeurs/2014013.md) est utilisé. Ces règles métier sont affichées en rouge. 
<a name="NOTE2_3"></a>


### Modifier une règle métier
<a name="modifier_une_regle_metier_ELTPARAGRAPHE000128"></a>Pour modifier une règle métier, cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_ModifRegle.GIF)
 dans le [volet "Règles métier"](../Editeurs/2027024.md) et effectuez les modifications voulues.

L'onglet "Historique" permet de connaître l'ensemble des modifications effectuées sur la règle métier en cours.

**Remarque** : La fenêtre de modification d'une règle métier est non-modale : il n'est pas nécessaire de la fermer pour travailler sur le projet en cours.
<a name="NOTE2_4"></a>


### Valider une règle métier
<a name="valider_une_regle_metier_ELTPARAGRAPHE000144"></a>Le taux de validation d'une règle métier (colonne "% réalisé") dépend de l'état des différents éléments liés à la règle métier.

Pour valider une règle métier, cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_ModifRegle.GIF)
 dans le [volet "Règles métier"](../Editeurs/2027024.md) et définissez l'état de chaque élément lié à la règle métier. Cet état peut correspondre à :

- "En attente" : la règle métier n'est pas encore appliquée sur cet élément.

- "En cours" : la règle métier est en cours d'application sur cet élément.

- "Réalisé" : la règle métier est appliquée sur cet élément.

- "Non concerné" : l'élément n'est pas concerné par la règle métier.




Le taux de validation d'une règle métier se calcule ainsi : Nombre de liens pour lesquels la règle est respectée / Nombre total de liens x 100.
<a name="NOTE2_5"></a>


### Rendre une règle métier obsolète
<a name="rendre_une_regle_metier_obsolete_ELTPARAGRAPHE000165"></a>Pour rendre une règle métier obsolète, cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_RegleObsolete.GIF)
 dans le [volet "Règles métier"](../Editeurs/2027024.md).

Les règles métier obsolètes peuvent être affichées dans le [volet "Règles métier"](../Editeurs/2027024.md) (filtre "Afficher les règles correspondant aux critères suivants", état "&lt;Tous&gt;" ou "Obsolète"). Les règles métier obsolètes sont alors affichées sur fond rose.
<a name="NOTE2_6"></a>


### Afficher l'élément lié à une règle métier
<a name="afficher_element_lie_une_regle_metier_ELTPARAGRAPHE000182"></a>Pour afficher un élément lié à une règle métier :

1. Double-cliquez sur la règle métier concernée.

2. Affichez l'onglet "Liens".

3. Double-cliquez sur l'élément à afficher.



<a name="NOTE2_7"></a>


### Imprimer les règles métier
<a name="imprimer_les_regles_metier_ELTPARAGRAPHE000193"></a>Il est possible d'imprimer :

- toutes les règles métier du projet en imprimant le dossier du projet : sous le volet "Accueil", dans le groupe "Général", déroulez ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_imprimer.gif)
 et sélectionnez "Imprimer le dossier du projet".

- la règle métier visualisée (bouton "Imprimer").




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Administration des règles métier
<a name="administration_des_regles_metier_ELTTEXTE000504"></a>
La fenêtre d'administration des règles métier (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_regle_admin.GIF)
) permet de :

- Sauvegarder les règles métier du projet en cours.

- Importer les règles métier dans le projet en cours à partir d'une sauvegarde.

- Utiliser momentanément une sauvegarde.




Les administrateurs peuvent également :

- Optimiser la vitesse de gestion des règles métier.

- Réparer la base de données des règles métier.




![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Cette fenêtre permet également de récupérer les demandes effectuées par les utilisateurs finaux. Pour plus de détails, consultez [Composant Feedback](../Editeurs/2014013.md). 
<a name="NOTE3_2"></a>


### Sauvegarder les règles métier du projet en cours
<a name="sauvegarder_les_regles_metier_projet_cours_ELTPARAGRAPHE000238"></a>Il est possible d'effectuer une sauvegarde des règles métier. Cette sauvegarde permet de :

- conserver l'état des règles métier à un moment donné.

- importer des règles métier dans une base de données de Centre de Contrôle différente.




**Pour sauvegarder les règles métier du projet en cours :**

1. Affichez la fenêtre d'administration des règles métier (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_regle_admin.GIF)
).

2. Sélectionnez l'onglet "Export/Sauvegardes".

3. Cliquez sur le bouton "Sauvegarder". L'assistant de sauvegarde des règles métier se lance. Passez à l'étape suivante.

4. Sélectionnez les règles métier à sauvegarder. Passez à l'étape suivante.

5. Sélectionnez les options de la sauvegarde :

	- Sauvegarder les liens : sauvegarde le nom de l'ensemble des éléments liés aux règles métier sauvegardées.

	- Sauvegarder dans une archive ZIP : sauvegarde les règles métier sous forme d'une archive ZIP.




6. Passez à l'étape suivante.

7. Indiquez le nom de l'archive ZIP ou le nom du répertoire à créer. Cette archive ou ce répertoire contiendra l'ensemble des fichiers de données de la sauvegarde.
	Ce nom peut être automatiquement complété avec la date du jour.

8. Validez.



<a name="NOTE3_3"></a>


### Importer des règles métier dans le projet en cours à partir d'une sauvegarde
<a name="importer_des_regles_metier_dans_projet_cours_partir_une_sauvegarde_ELTPARAGRAPHE000266"></a>Il est possible d'importer des règles métier dans le projet en cours à partir d'une sauvegarde. Cette sauvegarde correspond :

- soit à une sauvegarde des règles métier effectuée préalablement. Voir le paragraphe précédent.

- soit à la description d'une règle métier (fichier "RTF" créé grâce au bouton "Enregistrer sous" présent dans la fenêtre d'édition d'une règle métier).




Cette sauvegarde peut contenir des règles métier provenant :

- soit de la même base de données des Centres de Contrôle que celle en cours. Dans ce cas, les règles métier communes pourront alors être mises à jour, remplacées ou ignorées.

- soit d'une base de données des Centres de Contrôle différente. Dans ce cas, les règles métier seront ajoutées aux règles métier existantes.




**Pour importer des règles métier dans le projet en cours :**

1. Affichez la fenêtre d'administration des règles métier (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_regle_admin.GIF)
).

2. Sélectionnez l'onglet "Importation".

3. Cliquez sur le bouton "Importer les règles métier". L'assistant d'importation de règles métier se lance. Passez à l'étape suivante.

4. Sélectionnez la sauvegarde à utiliser (fichier "ZIP", fichier "Demande.FIC" ou fichier "Description.RTF") et passez à l'étape suivante.

5. Sélectionnez les règles métier à importer et validez.



<a name="NOTE3_4"></a>


### Utiliser momentanément une sauvegarde
<a name="utiliser_momentanement_une_sauvegarde_ELTPARAGRAPHE000291"></a>Il est possible d'utiliser momentanément une sauvegarde. Cette sauvegarde correspond à une sauvegarde des règles métier effectuée préalablement. Les règles métier de cette sauvegarde seront accessible en lecture uniquement.

Les règles métier actuelles seront temporairement ignorées.

**Pour utiliser momentanément une sauvegarde :**

1. Affichez la fenêtre d'administration des règles métier (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_regle_admin.GIF)
).

2. Sélectionnez l'onglet "Export/Sauvegardes".

3. Cliquez sur le bouton "Utiliser une sauvegarde". L'assistant d'utilisation temporaire d'une sauvegarde se lance. Passez à l'étape suivante.

4. Sélectionnez la sauvegarde à utiliser (fichier "ZIP", fichier "Demande.FIC" ou fichier "Description.RTF"). Passez à l'étape suivante.

5. Validez.




Pour signaler l'utilisation temporaire d'une sauvegarde, le bandeau du volet des règles métier sera orange. Pour revenir à vos règles métier actuelles, cliquez sur ce bandeau.
<a name="NOTE3_5"></a>


### Optimiser la vitesse de gestion des règles métier
<a name="optimiser_vitesse_gestion_des_regles_metier_ELTPARAGRAPHE000312"></a>Il est possible d'optimiser la vitesse de gestion des règles métier. Cette optimisation peut être effectuée uniquement par un administrateur.

Cette optimisation réalise un calcul des statistiques sur la base de données HFSQL des règles métier (ré-indexation avec statistiques et sans compactage). Ce calcul permet d'optimiser les recherches, les filtres, ...

**Pour optimiser la vitesse de gestion des règles métier :**

1. Affichez la fenêtre d'administration des règles métier (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_regle_admin.GIF)
).

2. Sélectionnez l'onglet "Maintenance".

3. Cliquez sur le bouton "Optimiser les données".



<a name="NOTE3_6"></a>


### Réparer la base de données des règles métier
<a name="reparer_base_donnees_des_regles_metier_ELTPARAGRAPHE000329"></a>Il est possible de réparer la base de données des règles métier. Cette réparation peut être effectuée uniquement par un administrateur.

Cette réparation permet de réindexer les fichiers de données HFSQL, de vérifier leur contenu et de les réparer si nécessaire.

**Pour réparer la base de données des règles métier :**

1. Affichez la fenêtre d'administration des règles métier (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_regle_admin.GIF)
).

2. Sélectionnez l'onglet "Maintenance".

3. Cliquez sur le bouton "Réparer la base de données".




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Remarques
<a name="remarques_ELTTEXTE000558"></a>


### Afficher le volet "Règles métier" si des règles métier sont associées
<a name="afficher_volet_regles_metier_des_regles_metier_sont_associees_ELTPARAGRAPHE000348"></a>L'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IcoPunaiseRegle.GIF)
 permet d'afficher constamment le volet "Règles métier" s'il y a au moins une règle métier associée à l'élément en cours.
<a name="NOTE4_2"></a>


### Mise à jour des règles métier
<a name="mise_jour_des_regles_metier_ELTPARAGRAPHE000357"></a>La liste des règles métier est mise à jour automatiquement à chaque sauvegarde du projet ou de l'élément en cours.
<a name="NOTE4_3"></a>


### Projets de même nom
<a name="projets_meme_nom_ELTPARAGRAPHE000364"></a>Deux projets ayant le même nom auront les mêmes règles métier.
<a name="NOTE4_4"></a>


### Renommage de projet
<a name="renommage_projet_ELTPARAGRAPHE000371"></a>Lors du renommage d'un projet, les règles métier associées à ce projet sont automatiquement perdues. En effet, les règles métier sont basées sur le nom du projet.


