


## Créer les fenêtres Fiche d'un Pattern RAD WINDEV Mobile
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Les étapes de la création de pattern RAD
<a name="les_etapes_creation_pattern_rad_ELTTEXTE000333"></a>
Les différentes étapes permettant de créer un Pattern RAD WINDEV Mobile sont les suivantes :

1. [Création du projet de type "Pattern RAD"](../Editeurs/2031021.md).

2. Création des différentes fenêtres du pattern.

	- **Fenêtre Fiche**.

	- [Fenêtre Table](../Editeurs/2031037.md).

	- [Fenêtre de relation](../Editeurs/2031038.md).

	- [Boutons et fenêtre vision plus](../Editeurs/2031040.md).

	- [Menu principal](../Editeurs/2031041.md).




3. [Génération du Pattern RAD](../Editeurs/2031023.md).

4. [Utilisation du Pattern RAD](../Editeurs/2031024.md).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Quelles fenêtres doivent être créées ?
<a name="quelles_fenetres_doivent_etre_creees_ELTTEXTE000357"></a>


### Les fichiers à créer
<a name="les_fichiers_creer_ELTPARAGRAPHE000043"></a>Rappel : Pour réaliser un pattern RAD permettant de faire un projet complet, les fichiers suivants sont nécessaires :

- Une fiche pour RADFichierA.

- Une fiche pour RADFichierB. Une combo et un bouton Vision plus (ou une combo popup) doivent permettre de sélectionner un élément du fichier RADFichierA.

- Une fiche pour RADFichierC. Une combo et un bouton Vision plus (ou une combo popup) doivent permettre de sélectionner un élément du fichier RADFichierB.

- Une table pour RADFichierA.

- Une table pour RADFichierB.

- Une table pour RADFichierC.

- Une fenêtre de relation RADFichierB / RADFichierD.




Ces différents éléments doivent contenir des boutons de liaison. Il est également possible de fournir le menu général de l'application.
<a name="NOTE2_2"></a>


### Différence Mobile et Smartphone
<a name="difference_mobile_smartphone_ELTPARAGRAPHE000060"></a>Concevoir une application pour Mobile et une application pour Smartphone sont deux choses différentes. En effet, sur un Smartphone, l'écran est plus petit et un menu déroulant permet de valider ou non les écrans.

Cette différence se retrouve au niveau des patterns RAD. Cette page d'aide présente comment faire une fenêtre fiche pour Mobile et pour Smartphone.
<a name="NOTE2_3"></a>


### Norme à suivre
<a name="norme_suivre_ELTPARAGRAPHE000069"></a>Cette page d'aide présente différentes règles applicables à la conception des pages et des fenêtres du Pattern RAD. Ces règles ont été utilisées pour concevoir les différents Patterns livrés avec WINDEV Mobile 28.

Ces règles sont une recommandation. Vous pouvez évidemment mettre en place et utiliser vos propres normes.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Les fenêtres fiche pour Mobile
<a name="les_fenetres_fiche_pour_mobile_ELTTEXTE000393"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000082"></a>Une fenêtre fiche est constituée des éléments suivants :

- Un superchamp : Ce superchamp contient les champs de la fiche à afficher. Ce superchamp est lié au fichier à afficher.

- Des champs Bouton permettant de réaliser des actions de base : "Valider" et si nécessaire "Imprimer".

- Des options de liaison permettant d'afficher par exemple les tables correspondantes (uniquement pour les fiches concernant RADFichierA et RADFichierB).

- Des champs Bouton de type Vision Plus permettant de sélectionner des éléments d'un autre fichier de données dans une fenêtre spécifique (uniquement pour les fiches concernant RADFichierB et RADFichierC).




Exemple de fenêtre Fiche pour le Pattern RAD Simple : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Pattern_RAD_WMFiche.gif)

<a name="NOTE3_2"></a>


### Créer une fenêtre fiche
<a name="creer_une_fenetre_fiche_ELTPARAGRAPHE000097"></a>Pour créer une fenêtre fiche :

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif) parmi les boutons d'accès rapide. 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Fenêtre" puis sur "Fenêtre". L'assistant de création d'une fenêtre se lance. 

	- Sélectionnez l'option "Assistant". 

	- Dans l'assistant, conservez les options par défaut.




2. Dans la fenêtre de description, saisissez les informations suivantes :

	- Le nom de la fenêtre. Ce nom doit obligatoirement contenir le nom du fichier qui apparaît dans la fiche (quelques exemples : FEN_Fiche_RADFichierA, FEN_Fic_RADFichierA, ...).

	- Le titre de la fenêtre. Si le titre doit afficher le nom du fichier, utilisez le nom du fichier "RADFichierXX" (par exemple "RADFichierA : Fiche de saisie").




3. Enregistrez la fenêtre.

4. Créez un superchamp dans la fenêtre : sous le volet "Création", dans le groupe "Conteneurs", cliquez sur "Superchamp". Ce superchamp va afficher les champs de la fiche. Positionnez ce champ dans la fenêtre et définissez sa taille. Si tous les champs ne peuvent pas entrer dans la taille définie, des ascenseurs apparaîtront automatiquement.

5. Dans la fenêtre de description du superchamp, indiquez le nom du superchamp. Ce nom doit être obligatoirement SC_Fiche (SC_ est le préfixe de la charte de programmation : il n'est pas nécessaire si vous n'utilisez pas de charte de programmation).

6. Dans l'onglet "Contenu" de la fenêtre de description du superchamp, spécifiez :

	- le fichier parcouru : RADFichierXX (par exemple "RADFichierA").

	- la rubrique parcourue : IDRADFichierXX (par exemple "IDRADFichierA").




7. Créez et positionnez les différents boutons de votre fenêtre (bouton de validation, d'impression, de parcours, ...). Ces boutons peuvent avoir n'importe quel nom.
	Remarque : Dans un pattern RAD Mobile, le bouton Annuler n'est pas présent pour ne pas surcharger les fenêtres. L'utilisateur utilise le bouton de fermeture de la fenêtre.
	Attention : si vous autorisez l'utilisateur à appliquer un gabarit aux fenêtres créées par le RAD, il est nécessaire de définir le type de bouton qui doit être utilisé par le gabarit. Cette information peut être définie dans le modifieur (Catégorie "Gabarit").

8. Cas du ***bouton de validation*** (bouton "OK" ou "Valider" par exemple).
	Pour simplifier la gestion du bouton de validation, il est possible d'utiliser une action prédéfinie. Il est conseillé d'utiliser l'action "Fermeture de la fenêtre et renvoyer une valeur", avec l'option "Valeur renvoyée : la valeur spécifiée dans le code par ..ValeurRenvoyée".
	Dans le code du bouton de validation, il est conseillé d'activer le gestion automatique des erreurs (Option "Si Erreur : ", avec le traitement automatique "Afficher l'erreur et retourner en saisie").
	Le code du bouton de validation peut être par exemple (cas d'une fiche sur RADFichierA) :
	
	```wl
	// Lecture des informations saisies 
	EcranVersFichier()
	// S'il s'agit d'un nouvel enregistrement
	SI RADFichierA..NouvelEnregistrement = Vrai ALORS 
		// On l'ajoute
		HAjoute(RADFichierA) 
	SINON 
		// On le modifie 
		HModifie(RADFichierA) 
	FIN
	// Valeur de retour de la fenêtre 
	MaFenêtre..ValeurRenvoyée = Vrai
	```


9. Saisissez le code d'initialisation de la fenêtre : Voici un exemple : 
	
	```wl
	// Impression du bon de commande
	NomFichier = fRepDonnées() + [fSep()] + ChaîneConstruit("BDC_%1.PDF", NuméroCommande)
	iDestination(iPDFGénérique, NomFichier)
	iImprimeEtat(ETAT_BonDeCommande, NuméroCommande, NuméroCommande)
	
	// Test de l'existence du fichier
	SI fFichierExiste(NomFichier) = Faux ALORS
		Erreur("Le fichier PDF n'a pas été généré")
		RETOUR
	FIN
	
	// Confirmation pour afficher le PDF
	SI OuiNon(Oui, "Afficher le bon de commande généré (format PDF) ?") = Oui ALORS	
		// Affichage du bon de commande généré
		LanceAppliAssociée(NomFichier)
	SINON
		iImprimePDF(NomFichier)
	FIN
	```

	Ce code permet d'afficher la valeur des enregistrements dans la fiche et de renvoyer une valeur.

10. Ajoutez si nécessaire les [options de menu de liaison](../Editeurs/2031039.md).

11. Ajoutez si nécessaire les [boutons Vision Plus](../Editeurs/2031040.md) (pour les fiches RADFichierB et RADFichierC).



<a name="NOTE3_3"></a>


### Cas des boutons d'impression
<a name="cas_des_boutons_impression_ELTPARAGRAPHE000162"></a>Un pattern RAD peut contenir des boutons permettant de lancer une impression. Le code de ces boutons (ou l'action prédéfinie associée) doit permettre de lancer l'impression de l'état.

Il est nécessaire de créer les états dans le projet du pattern RAD :

- Le nom de ces états doit contenir RADFichierX. Pour plus de lisibilité, il est conseillé d'utiliser dans le nom de l'état :

	- "Details" pour les états de type fiche,

	- "Liste" pour les états de type table.




- Ce nom doit être utilisé dans le code du bouton "Imprimer" (ou dans l'action prédéfinie associée au bouton).




ATTENTION : Il n'est pas nécessaire de personnaliser les états présents dans votre projet du Pattern RAD. En effet, lors de la génération, seul le nom de l'état sera conservé. Si le bouton "Imprimer" est présent dans une fenêtre de type "Fiche", l'état imprimé sera un état de type fiche. Si le bouton "Imprimer" est présent dans une fenêtre de type "Table", l'état imprimé sera un état de type Table.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Les fenêtres fiche pour Smartphone
<a name="les_fenetres_fiche_pour_smartphone_ELTTEXTE000433"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000181"></a>Une fenêtre fiche est constituée des éléments suivants :

- Un superchamp : Ce superchamp contient les champs de la fiche à afficher. Ce superchamp est lié au fichier à afficher.

- D'options de menu permettant de réaliser des actions de base : Valider et Annuler.

- D'options de menu de liaison permettant d'afficher par exemple les tables correspondantes (uniquement pour les fiches concernant RADFichierA et RADFichierB).

- De boutons Vision Plus permettant de sélectionner des éléments d'un autre fichier dans une fenêtre spécifique (uniquement pour les fiches concernant RADFichierB et RADFichierC).




Exemple de fenêtre Fiche pour le Pattern RAD Simple Smartphone : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Pattern_RAD_WMFiche_smart.gif)


**Remarque** : Le projet doit être configuré pour utiliser une plateforme Smartphone : 

- Affichez la fenêtre de description du projet : sous le volet "Projet", dans le groupe "Projet", cliquez sur "Description".

- Dans l'onglet "Projet", cliquez sur le bouton "Description de la plateforme".



<a name="NOTE4_2"></a>


### Créer une fenêtre fiche pour Smartphone
<a name="creer_une_fenetre_fiche_pour_smartphone_ELTPARAGRAPHE000213"></a>Pour créer une fenêtre fiche pour Smartphone : 

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif) parmi les boutons d'accès rapide. 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Fenêtre" puis sur "Fenêtre". L'assistant de création d'une fenêtre se lance. 

	- Sélectionnez l'option "Assistant". 

	- Dans l'assistant, conservez les options par défaut.




2. Dans la fenêtre de description, saisissez les informations suivantes :

	- Le nom de la fenêtre. Ce nom doit obligatoirement contenir le nom du fichier affiché dans la fiche (quelques exemples : FEN_Fiche_RADFichierA, FEN_Fic_RADFichierA, ...).

	- Le titre de la fenêtre. Si le titre doit afficher le nom du fichier, utilisez le nom du fichier "RADFichierXX" (par exemple "RADFichierA : Fiche").




3. Enregistrez la fenêtre.

4. Créez un superchamp dans la fenêtre : sous le volet "Création", dans le groupe "Conteneurs", cliquez sur "Superchamp". Ce superchamp va afficher les champs de la fiche. Positionnez ce champ dans la fenêtre et définissez sa taille. Si tous les champs ne peuvent pas entrer dans la taille définie, des ascenseurs apparaîtront automatiquement.

5. Dans la fenêtre de description du superchamp, indiquez le nom du superchamp. Ce nom doit être obligatoirement SC_Fiche (SC_ est le préfixe de la charte de programmation : il n'est pas nécessaire si vous n'utilisez pas de charte de programmation).

6. Dans l'onglet "Contenu" de la fenêtre de description du superchamp, spécifiez :

	- le fichier parcouru : RADFichierXX (par exemple "RADFichierA").

	- la rubrique parcourue : IDRADFichierXX (par exemple "IDRADFichierA").




7. Modifiez le menu présent dans la fenêtre :

	- Une option de menu doit permettre de valider la fenêtre.

	- Une option de menu doit permettre d'accéder au fichier lié (par exemple accéder à RADFichierB depuis la fiche de RADFichierA)

	- Une option de menu doit permettre de sortir de la fiche sans valider.




8. Les options de menu doivent porter des noms spécifiques :<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Pattern_RAD_MenuFiche_smart.gif)


	- MENUPRINCIPAL_xxxx pour les options principales.

- MENULIA_xxx pour les options de liaison.

9. Cas de l'option de menu de validation.
	Dans le code de l'option de menu de validation, il est conseillé d'activer le gestion automatique des erreurs (Option "Si Erreur : ", avec le traitement automatique "Afficher l'erreur et retourner en saisie").
	Le code du bouton de validation peut être par exemple (cas d'une fiche sur RADFichierA) :
	
	```wl
	// Lecture des informations saisies 
	EcranVersFichier()
	// S'il s'agit d'un nouvel enregistrement
	SI RADFichierA..NouvelEnregistrement = Vrai ALORS 
		// On l'ajoute
		HAjoute(RADFichierA) 
	SINON 
		// On le modifie 
		HModifie(RADFichierA) 
	FIN
	// Valeur de retour de la fenêtre 
	MaFenêtre..ValeurRenvoyée = Vrai
	```


10. Cas des options de liaison :
	Depuis la fiche RADFichierA, il est possible par exemple d'avoir une option de liaison permettant d'afficher la table RADFichierB.
	Depuis la fiche RADFichierB, il est possible par exemple d'avoir une option de liaison permettant d'afficher la fiche RADFichierA, la table RADFichierC et la fenêtre de relation.
	Exemple de code permettant d'ouvrir la fenêtre Table RADFichierB à partir de la fenêtre Fiche RADFichierA :
	
	```wl
	// Mise en place du filtre sur la clé de liaison
	HFiltre(RADFichierB, IDRADFichierARel, RADFichierA.IDRADFichierA)
	// Ouverture de la fenêtre table des RADFichierB
	Ouvre(FEN_Table_RADFichierB)
	// Désactivation du filtre
	HDésactiveFiltre(RADFichierB)
	```


11. Cas de l'option "Annuler"
	
	```wl
	// Valeur de retour de la fenêtre
	MaFenêtre..ValeurRenvoyée = Faux
	// Fermeture de la fenêtre
	Ferme()
	```


12. Saisissez le code d'initialisation de la fenêtre. Voici un exemple :
	
	
	```wl
	// Affichage des enregistrements 
	FichierVersEcran()
	// Valeur de retour renvoyée par défaut
	MaFenêtre..ValeurRenvoyée = Faux
	```

	Ce code permet d'afficher la valeur des enregistrements dans la fiche et de renvoyer une valeur.

13. Ajoutez si nécessaire les boutons [Vision Plus](../Editeurs/2031040.md) (pour les fiches RADFichierB et RADFichierC).





