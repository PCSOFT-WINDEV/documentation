
## Clé et intégrité référentielle
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000132"></a>
Dans une analyse, les rubriques "Clé" permettent aussi de gérer la cohérence des données (appelée intégrité référentielle) :

- cohérence au niveau d'un fichier de données.

- cohérence entre plusieurs fichiers de données.






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Cohérence au niveau d'un fichier de données
<a name="coherence_niveau_fichier_donnees_ELTTEXTE000156"></a>
La cohérence au niveau des enregistrements d'un fichier de données est définie grâce aux clés uniques.

Par exemple, dans un fichier de données PRODUIT, la référence du produit doit être unique : chaque enregistrement doit correspondre à un produit différent, identifié par sa référence.

Pour cela, il suffit de définir la rubrique REFERENCE comme clé unique.



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Cohérence au niveau de plusieurs fichiers de données
<a name="coherence_niveau_plusieurs_fichiers_donnees_ELTTEXTE000180"></a>
La cohérence entre plusieurs fichiers de données est définie grâce aux liaisons. Les principaux types de liaisons sont :

- [liaison partagée](#NOTE3_2).

- [liaison complexe](#NOTE3_3).





<a name="NOTE3_2"></a>


### Liaison partagée
<a name="liaison_partagee_ELTPARAGRAPHE000050"></a>Un enregistrement peut être associé à plusieurs enregistrements d'un autre fichier de données.

Exemple : Un FOURNISSEUR distribue plusieurs ARTICLES, mais chaque ARTICLE est associé à un seul FOURNISSEUR.

Pour gérer l'intégrité référentielle dans ce type de liaison, il est nécessaire d'inclure l'identifiant unique du FOURNISSEUR dans le fichier de données ARTICLE (cette opération est automatiquement réalisée sous l'éditeur d'analyses).

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LiaisonPartagee.gif)


Le contrôle de l'intégrité référentielle permet de vérifier par exemple :

- lors de la création d'un ARTICLE, que le FOURNISSEUR existe

- lors de la suppression d'un fournisseur, que tous les articles associés ont été supprimés.




Des règles avancées peuvent aussi être définies : 

- la suppression en cascade : dans ce cas, lors de la suppression d'un fournisseur, tous les articles associés sont supprimés.

- la modification en cascade : la modification de la rubrique clé (identifiant automatique ou autre) dans le fichier source entraîne la modification en cascade de tous les enregistrements liés.





<a name="NOTE3_3"></a>


### Liaison complexe
<a name="liaison_complexe_ELTPARAGRAPHE000074"></a>Plusieurs enregistrements d'un fichier de données peuvent être associés à plusieurs enregistrements d'un autre fichier de données et vice-versa.

Exemple : Une commande peut contenir plusieurs produits, et chaque produit peut être utilisé dans plusieurs commandes.

Dans ce cas, il est nécessaire de créer un fichier de relation. Ce fichier contient la clé unique de chacun des fichiers de données à relier (plus si nécessaire d'autres informations).

La liaison complexe devient alors un ensemble de liaisons partagées.


![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LiaisonComplexe.gif&type=thumb)





