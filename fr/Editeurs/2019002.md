
## Déboguer sans le débogueur
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000153"></a>
Dans certain cas, l'exécution d'un programme ou d'un site avec ou sans le débogueur peut être différente.

En effet, le débogueur introduit des pauses dans l'exécution du traitement, durant lesquelles Windows effectue certaines tâches.

Ainsi, le débogueur ne peut pas être utilisé dans une procédure appelée par timer ou dans le code d'un ascenseur.

Pour déboguer ces applications, il peut être nécessaire par exemple de suivre l'évolution d'une valeur, le passage dans différentes procédures, ...



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000177"></a>


### Afficher des informations
<a name="afficher_des_informations_ELTPARAGRAPHE000035"></a>Deux outils permettent d'afficher des informations :

- Les boîtes d'information : fonction [Info](../WDLang1/3021011.md) du WLangage. **Attention** : L'affichage d'une boîte d'information est bloquante.

- La fenêtre de trace : fonction [Trace](../WDLang1/3013050.md) du WLangage.




La fenêtre de trace s'affiche en haut à gauche de l'écran, sans interrompre le déroulement du programme. Il est possible également de l'afficher dans l'interface grâce au [Volet "Trace du débogueur"](../Editeurs/2027028.md).


<a name="NOTE2_2"></a>


### Gérer l'affichage des informations de débogage
<a name="gerer_affichage_des_informations_debogage_ELTPARAGRAPHE000061"></a>L'affichage à l'écran des informations de débogage est utile uniquement en mode test.

Avant de diffuser une application, il est donc nécessaire de supprimer tout affichage superflu.

Pour éviter tout oubli, il est conseillé de gérer l'affichage des informations de débogage à l'aide d'une procédure globale. Par exemple :


```wl
PROCEDURE MaTrace(ChaîneATracer)
SI EnModeTest() = Vrai ALORS
	Trace(ChaîneATracer)
FIN
```


Dans ce code, selon le résultat de la fonction [EnModeTest](../WDLang1/3013011.md), la fenêtre de trace apparaît uniquement lors d'un test de l'application ou du site.

Une telle procédure permet de laisser l'appel aux fenêtres de trace dans le code de l'application, sans risque d'apparition en clientèle.

L'appel à cette procédure de trace est identique à l'utilisation de la fonction [Trace](../WDLang1/3013050.md) :


```wl
MaTrace("Client : " + Client.NumClient)
```



<a name="NOTE2_3"></a>


### Créer un fichier de trace
<a name="creer_fichier_trace_ELTPARAGRAPHE000089"></a>Lors de traitements longs (traitements Batch, ...), pour contrôler le bon déroulement du programme, il est nécessaire de conserver une trace physique des traitements effectués (un fichier texte par exemple).

La procédure suivante permet de gérer par exemple l'affichage de la trace :

- Soit à l'écran (paramètre /DEBUG en ligne de commande).

- Soit dans un fichier texte (mode par défaut).





```wl
PROCEDURE MaTrace(ChaîneATracer)
CheminFichier est une chaîne
CheminFichier = fRepDonnéesUtilisateur() + ProjetInfo(piNomProjet) + ".txt"
NumFichier est un entier
ModeDebug est un booléen = Faux
SI Position(LigneCommande(), "/DEBUG") > 0 ALORS
	ModeDebug = Vrai
FIN
SI ModeDebug = Vrai ALORS
	Trace(ChaîneATracer)
SINON
	NumFichier = fOuvre(CheminFichier, foCréationSiInexistant + foEcriture + foAjout)
	SI NumFichier <> -1 ALORS
		DateHeureTrace est un DateHeure = DateHeureSys()
		DateTrace est une Date = Madate..PartieDate
		HeureTrace est une Heure = Madate..PartieHeure
		fEcritLigne(NumFichier, DateVersChaîne(DateTrace) + ...
			" - " + HeureVersChaîne(HeureTrace))
		fEcritLigne(NumFichier, ChaîneATracer)
		fEcritLigne(NumFichier, " ")
		fFerme(NumFichier)
	FIN
FIN
```


**Remarques** :

- Le fichier de trace est créé par défaut dans le répertoire des données de l'utilisateur. Ce fichier a pour nom le nom du projet. Ce fichier contient les informations à tracer durant l'exécution du programme. Les informations sont complétées par la date et l'heure de chaque "Trace". Il est ainsi possible de déterminer un éventuel dysfonctionnement durant le traitement.

- Exemple de contenu du fichier de trace :
	
	```txt
	01/12/2001 - 10:53:25:20
	Nom de client : Martin
	01/12/2001 - 10:53:25:26
	Nom de client : Mirva
	```








