


## Créer les fenêtres Table du pattern RAD WINDEV Mobile
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Les étapes de la création de pattern RAD
<a name="les_etapes_creation_pattern_rad_ELTTEXTE000309"></a>
Les différentes étapes permettant de créer un Pattern RAD WINDEV Mobile sont les suivantes :

1. [Création du projet de type "Pattern RAD"](../Editeurs/2031021.md).

2. Création des différentes fenêtres du pattern.

	- [Fenêtre Fiche](../Editeurs/2031036.md).

	- **Fenêtre Table**.

	- [Fenêtre de relation](../Editeurs/2031038.md).

	- [Boutons et fenêtre vision plus](../Editeurs/2031040.md).

	- [Menu principal](../Editeurs/2031041.md).




3. [Génération du Pattern RAD](../Editeurs/2031023.md).

4. [Utilisation du Pattern RAD](../Editeurs/2031024.md).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Création des différentes fenêtres du pattern
<a name="creation_des_differentes_fenetres_pattern_ELTTEXTE000333"></a>


### Les fichiers à créer
<a name="les_fichiers_creer_ELTPARAGRAPHE000043"></a>Rappel : Pour réaliser un pattern RAD permettant de faire un projet complet, les fichiers suivants sont nécessaires :

- Une fiche pour RADFichierA.

- Une fiche pour RADFichierB. Un bouton Vision plus (ou une combo popup) doit permettre de sélectionner un élément du fichier RADFichierA.

- Une fiche pour RADFichierC. Un bouton Vision plus (ou une combo popup) doit permettre de sélectionner un élément du fichier RADFichierB.

- Une table pour RADFichierA.

- Une table pour RADFichierB.

- Une table pour RADFichierC.

- Une fenêtre de relation RADFichierB / RADFichierD.




Ces différents éléments doivent contenir des boutons de liaison. Il est également possible de fournir le menu général de l'application.
<a name="NOTE2_2"></a>


### Différence Mobile et Smartphone
<a name="difference_mobile_smartphone_ELTPARAGRAPHE000060"></a>Concevoir une application pour Mobile et une application pour Smartphone sont deux choses différentes. En effet, sur un Smartphone, l'écran est plus petit, et un menu déroulant permet de valider ou non les écrans.

Cette différence se retrouve au niveau des patterns RAD. Cette page d'aide présente comment faire une fenêtre fiche pour Mobile et pour Smartphone.
<a name="NOTE2_3"></a>


### Norme à suivre
<a name="norme_suivre_ELTPARAGRAPHE000069"></a>Cette page d'aide présente différentes règles applicables à la conception des pages et des fenêtres du Pattern RAD. Ces règles ont été utilisées pour concevoir les différents Patterns livrés avec WINDEV Mobile 28.

Ces règles sont une recommandation. Vous pouvez évidemment mettre en place et utiliser vos propres normes.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Les fenêtres Table pour Mobile
<a name="les_fenetres_table_pour_mobile_ELTTEXTE000369"></a>
Une fenêtre Table est constituée des éléments suivants :

- Un champ Table : Cette table est une table fichier, avec fichier en accès direct.

- De boutons permettant de réaliser des actions de base : "Ajouter", "Modifier", "Supprimer" et si nécessaire "Imprimer".

- Des options de liaison permettant d'afficher par exemple les fiches correspondantes.  




Exemple : Fenêtre Table sur le fichier RADFichierA du pattern Modèle Simple :![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Pattern_RAD_WMTable.gif)

<a name="NOTE3_2"></a>


### Créer une fenêtre table pour Mobile
<a name="creer_une_fenetre_table_pour_mobile_ELTPARAGRAPHE000094"></a>Pour créer une fenêtre table pour Mobile :

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif)
 parmi les boutons d'accès rapide : 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Fenêtre" puis sur "Fenêtre".

	- L'assistant de création d'une fenêtre se lance.

	- Sélectionnez l'option "Assistant". 

	- Dans l'assistant, conservez les options par défaut.




2. Dans la fenêtre de description, saisissez les informations suivantes :

	- Le nom de la fenêtre. Ce nom doit obligatoirement contenir le nom du fichier affiché dans la table (quelques exemples : FEN_Table_RADFichierA, FEN_Tab_RADFichierA, ...).

	- Le titre de la fenêtre. Si le titre doit afficher le nom du fichier, utilisez le nom du fichier "RADFichierXX" (par exemple "RADFichierA : Table de visualisation").




3. Enregistrez la fenêtre.

4. Créez dans la fenêtre un champ Table : sous le volet "Création", dans le groupe "Données", déroulez "Table et Liste" et sélectionnez "Table (Verticale)".

5. Dans l'assistant de création de table, indiquez les caractéristiques suivantes :

	- Sélectionnez l'option "Afficher les données d'un fichier ou d'une requête existante".

	- Sélectionnez le fichier de base de la table (par exemple RADFichierA).

	- Conservez la rubrique proposée ainsi que la clé de parcours.

	- Indiquez la source pour le remplissage : "Fichier avec accès direct (Sans limite)".

	- Validez le nom de la table.




6. Positionnez le champ Table dans la fenêtre et définissez sa taille. Si nécessaire la colonne correspondant à l'identifiant peut être invisible.

7. Créez et positionnez les différents boutons de votre fenêtre (bouton de validation, d'impression, de parcours, ...). Ces boutons peuvent avoir n'importe quel nom.
	Attention : si vous autorisez l'utilisateur à appliquer un gabarit aux fenêtres créées par le RAD, il est nécessaire de définir le type de bouton qui doit être utilisé par le gabarit. Cette information peut être définie dans le modifieur (Catégorie "Gabarit").

8. Cas du ***bouton d'ajout*** (bouton Nouveau par exemple).
	Ce bouton peut par exemple permettre la saisie d'un nouvel enregistrement dans une fenêtre de type fiche. Le code du bouton Nouveau peut être par exemple :
	
	```wl
	// Création d'un nouvel enregistrement 
	HRAZ(RADFichierA) 
	// Ouverture de la fiche du fichier RADFichierA en mode création 
	Ouvre(FEN_Fiche_RADFichierA)
	// Rafraîchissement de la table 
	TableAffiche(TABLE_RADFichierA, taCourantEnreg)
	```


9. Cas du ***bouton de modification*** (bouton Modifier par exemple).
	Ce bouton peut par exemple permettre la modification d'un enregistrement dans une fenêtre de type fiche. Le code du bouton Modifier peut être par exemple :
	
	```wl
	// Une ligne est-elle sélectionnée ? 
	SI TableSelect(TABLE_RADFichierA) = -1 ALORS RETOUR
	// Ouverture de la fiche du fichier RADFichierA en mode modification 
	Ouvre(FEN_Fiche_RADFichierA)
	// Rafraîchissement de la table 
	TableAffiche(TABLE_RADFichierA, taCourantEnreg)
	```


10. Cas du ***bouton de suppression*** (bouton Supprimer par exemple).
	Ce bouton peut par exemple supprimer un enregistrement sélectionné dans la table. 
	Le code du bouton Supprimer peut être par exemple (pour la table sur le fichier RADFichierA) :
	
	```wl
	// Une ligne est-elle sélectionnée ? 
	SI TableSelect(TABLE_RADFichierA) = -1 ALORS RETOUR
	
	// Demande confirmation de suppression
	SELON OuiNon("Supprimer l'enregistrement ?")
		CAS Oui
		  // Suppression de l'enregistrement RADFichierA à partir de la table
		  TableSupprime(TABLE_RADFichierA)
		  // Positionnement sur l'enregistrement courant
		  TableAffiche(TABLE_RADFichierA, taCourantEnreg)
		 CAS Non
			// Ne rien faire
	FIN
	```

	Dans le code du bouton de suppression, il est conseillé d'activer le gestion automatique des erreurs (Option "Si Erreur : ", avec le traitement automatique "Afficher l'erreur et retourner en saisie").

11. Ajoutez si nécessaire [les menus de liaison](../Editeurs/2031039.md).
	

12. Ajoutez si nécessaire [les boutons Vision Plus](../Editeurs/2031040.md).



<a name="NOTE3_3"></a>


### Cas des boutons d'impression
<a name="cas_des_boutons_impression_ELTPARAGRAPHE000167"></a>Un pattern RAD peut contenir des boutons permettant de lancer une impression. Le code de ces boutons (ou l'action prédéfinie associée) doit permettre de lancer l'impression de l'état.

Il est nécessaire de créer les états dans le projet du pattern RAD :

- Le nom de ces états doit contenir RADFichierX. Pour plus de lisibilité, il est conseillé d'utiliser dans le nom de l'état "Détails" pour les états de type fiche et "Liste" pour les états de type table.

- Ce nom doit être utilisé dans le code du bouton imprimer (ou dans l'action prédéfinie associée au bouton).




ATTENTION : Il n'est pas nécessaire de personnaliser les états présents dans votre projet du Pattern RAD. En effet, lors de la génération, seul le nom de l'état sera conservé. Si le bouton "Imprimer" est présent dans une fenêtre de type "Fiche", l'état imprimé sera un état de type fiche. Si le bouton "Imprimer" est présent dans une fenêtre de type "Table", l'état imprimé sera un état de type Table.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Les fenêtres Table pour Smartphone
<a name="les_fenetres_table_pour_smartphone_ELTTEXTE000405"></a>
Une fenêtre Table est constituée des éléments suivants :

- Une table : Cette table est une table fichier, avec fichier en accès direct.

- Options de menu permettant de réaliser des actions de base : Ajouter, Modifier et Supprimer.

- Options de menu de liaison permettant d'afficher par exemple les fiches correspondantes.  




Exemple : Fenêtre Table sur le fichier RADFichierA du pattern Modèle Simple : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Pattern_RAD_WMTable_smart.gif)

<a name="NOTE4_2"></a>


### Pour créer une fenêtre table pour Smartphone :
<a name="pour_creer_une_fenetre_table_pour_smartphone_ELTPARAGRAPHE000195"></a>

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif)
 parmi les boutons d'accès rapide. 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Fenêtre" puis sur "Fenêtre".

	- L'assistant de création d'une fenêtre se lance.

	- Sélectionnez l'option "Assistant". 

	- Dans l'assistant, conservez les options par défaut.




2. Dans la fenêtre de description, saisissez les informations suivantes :

	- Le nom de la fenêtre. Ce nom doit obligatoirement contenir le nom du fichier affiché dans la table (quelques exemples : FEN_Table_RADFichierA, FEN_Tab_RADFichierA, ...).

	- Le titre de la fenêtre. Si le titre doit afficher le nom du fichier, utilisez le nom du fichier "RADFichierXX" (par exemple "RADFichierA : Table de visualisation").




3. Enregistrez la fenêtre.

4. Créez dans la fenêtre un champ Table : sous le volet "Création", dans le groupe "Données", déroulez "Table et Liste" et sélectionnez "Table (Verticale)".

5. Dans l'assistant de création de table, indiquez les caractéristiques suivantes :

	- Sélectionnez l'option "Afficher les données d'un fichier ou d'une requête existante".

	- Sélectionnez le fichier de base de la table (par exemple RADFichierA).

	- Conservez la rubrique proposée ainsi que la clé de parcours.

	- Indiquez la source pour le remplissage : "Fichier avec accès direct (Sans limite)".

	- Validez le nom de la table.




6. Positionnez le champ Table dans la fenêtre et définissez sa taille. Si nécessaire la colonne correspondant à l'identifiant peut être invisible.

7. Modifiez le menu présent dans la fenêtre :

	- Des options de menu doivent permettre d'ajouter, de modifier ou de supprimer un élément.

	- Une option de menu doit permettre d'accéder au fichier lié (par exemple accéder à RADFichierB depuis la table de RADFichierA).

	- Une option de menu doit permettre de fermer la fenêtre.




8. Les options de menu doivent porter des noms spécifiques : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Pattern_RAD_MenuTable_smart.gif)


9. Cas de l'option d'ajout.
	Cette option peut par exemple permettre la saisie d'un nouvel enregistrement dans une fenêtre de type fiche. Le code de l'option Nouveau peut être par exemple :
	
	```wl
	// Création d'un nouvel enregistrement 
	HRAZ(RADFichierA) 
	// Ouverture de la fiche du fichier RADFichierA en mode création 
	Ouvre(FEN_Fiche_RADFichierA)
	// Rafraîchissement de la table 
	TableAffiche(TABLE_RADFichierA, taCourantPremier)
	```


10. Cas de l'option de modification.
	Cette option peut par exemple permettre la modification d'un enregistrement dans une fenêtre de type fiche. Le code de l'option Modifier peut être par exemple :
	
	```wl
	// Une ligne est-elle sélectionnée ? 
	SI TableSelect(TABLE_RADFichierA)=-1 ALORS RETOUR
	// Ouverture de la fiche du fichier RADFichierA en mode modification 
	Ouvre(FEN_Fiche_RADFichierA)
	// Rafraîchissement de la table 
	TableAffiche(TABLE_RADFichierA, taCourantbandeau)
	```


11. Cas de l'option de suppression.
	Cette option peut par exemple supprimer un enregistrement sélectionné dans la table. Le code de l'option Supprimer peut être par exemple (pour la table sur le fichier RADFichierA) :
	
	```wl
	// Demande confirmation de suppression
	SELON OuiNon("Supprimer l'enregistrement ?")
		CAS Oui
		  // Suppression de l'enregistrement RADFichierA à partir de la table
		  TableSupprime(TABLE_RADFichierA)
		  // Positionnement sur l'enregistrement courant
		  TableAffiche(TABLE_RADFichierA, taCourantPremier)
		 CAS Non
			// Ne rien faire
	FIN
	```

	Dans le code du bouton de suppression, il est conseillé d'activer le gestion automatique des erreurs (Option "Si Erreur : ", avec le traitement automatique "Afficher l'erreur et retourner en saisie").

12. Cas des options de liaison :

	- Depuis la table RADFichierA, il est possible par exemple d'avoir une option de liaison permettant d'afficher la table RADFichierB.

	- Depuis la table RADFichierB, il est possible par exemple d'avoir une option de liaison permettant d'afficher la table RADFichierA, la table RADFichierC, et la fenêtre de relation.







Exemple de code permettant d'ouvrir la fenêtre Table RADFichierB à partir de la fenêtre table RADFichierA :

```wl
// Mise en place du filtre sur la clé de liaison
HFiltre(RADFichierB, IDRADFichierARel, RADFichierA.IDRADFichierA)
// Ouverture de la fenêtre table des RADFichierB
Ouvre(FEN_Table_RADFichierB)
// Désactivation du filtre
HDésactiveFiltre(RADFichierB)
```



