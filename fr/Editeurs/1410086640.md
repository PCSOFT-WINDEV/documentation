
## Intégrer un site WEBDEV dans une application WINDEV
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000202"></a>
L'intégration d'un site Web existant dans une fenêtre d'application Desktop existante permet de créer des passerelles de productivité, et de mutualiser l'existant. 

De nombreux nouveaux développements s'effectuent en Web. Par contre l'existant en place est généralement constitué d'applications Windows. Pour conserver la richesse applicative du patrimoine logiciel d'une entreprise et se diriger sereinement vers une webisation sans perte de fonctionnalités, l'intégration d'un site Web dans une fenêtre WINDEV est une avancée déterminante.

Cela permet de progresser rapidement, de manière agile, sans risques, par étapes.

Cette page de documentation propose une mise en place pas à pas, et s'appuie sur les exemples "WD IntégrationWEBDEVdansWINDEV" et "WW_IntégrationWEBDEVdansWINDEV" livrés avec WINDEV et WEBDEV. Ces deux exemples permettent d'effectuer les opérations suivantes : 

- Visualiser directement une page WEBDEV intégrée à une fenêtre WINDEV. 

- Faire dialoguer la fenêtre WINDEV et la page WEBDEV. 





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Intégration simple d'une page WEBDEV dans une application WINDEV
<a name="integration_simple_une_page_webdev_dans_une_application_windev_ELTTEXTE000226"></a>


### Comment le faire ?
<a name="comment_faire_ELTPARAGRAPHE000026"></a>Pour intégrer une page WEBDEV dans une application WINDEV, les étapes sont les suivantes : 

1. Création du projet WEBDEV. 

2. Préparation des pages WEBDEV à afficher dans l'application WINDEV : création d'un agencement spécifique. 
	Pour créer un agencement spécifique pour une utilisation sous WINDEV : 

	- Affichez la page concernée sous l'éditeur de WEBDEV. 

	- Sous le volet "Page", dans le groupe "Agencements", déroulez "Agencements" et sélectionnez "Ajouter un agencement pour intégration dans WINDEV". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WB_dans_WD%20-%20HC%20N%B0002.gif&type=thumb)


	- Dans l'agencement "Pour WINDEV", définissez l'interface qui sera affichée dans l'application WINDEV. 

- Enregistrez la page. 

3. Création d'un champ "Page WEBDEV" dans la fenêtre affichant la page.

	- Ouvrez la fenêtre devant afficher le site WEBDEV dans l'éditeur WINDEV. 

	- Créez un champ de type "Page WEBDEV" : sous le volet "Création", dans le groupe "Autres champs", cliquez sur "Page WEBDEV". 

	- Positionnez le champ dans la fenêtre.  




4. Initialisation du champ Page WEBDEV : 
	L'initialisation du champ Page WEBDEV peut être effectuée : 

	- Directement dans la fenêtre de description du champ en précisant l'URL source.  

	- Via la propriété [URL](../Proprietes/2510132.md) du champ Page WEBDEV.




5. Test du site WEBDEV et de l'application WINDEV. 
	Le site WEBDEV doit être lancé avant l'application WINDEV pour initialiser les données Web.   




Remarques : 

- Vérifiez l'URL de la page WEBDEV à lancer dans l'application WINDEV. 

- Les pages WEBDEV peuvent être en mode Session, Session référençable ou AWP. Si des paramètres doivent être passés à la page pour afficher des données spécifiques, il est nécessaire d'utiliser le mode Session référençable ou le mode AWP et d'utiliser la propriété [URL](../Proprietes/2510132.md) pour initialiser le champ. 

- La fonction [EnModePageDansFenêtre](../WDLang1/1410089362.md) permet de savoir si le code de la page WEBDEV est exécuté en mode site ou dans une page affichée dans un champ d'une fenêtre. 





### Illustration avec les exemples WD IntégrationWEBDEVdansWINDEV et WW_IntégrationWEBDEVdansWINDEV
<a name="illustration_avec_les_exemples_integrationwebdevdanswindev_wwintegrationwebdevdanswindev_ELTPARAGRAPHE000095"></a>

- Dans le site WW_IntégrationWEBDEVdansWINDEV, la page PAGE_CarnetEntretien contient un agencement WINDEV. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WB_dans_WD%20-%20HC%20N%B0001.gif&type=thumb)


- Dans l'application WD IntégrationWEBDEVdansWINDEV, la fenêtre FEN_FicheVéhicule affiche la page PAGE_CarnetEntretien dans un champ Page WEBDEV.

- L'initialisation du champ Page WEBDEV est réalisée dans la procédure Initialisation de la fenêtre FEN_FicheVehicule. 

- En exécution, l'agencement pour WINDEV de la page WEBDEV est affiché dans l'application WINDEV. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WB_dans_WD%20-%20HC%20N%B0003.gif&type=thumb)





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Faire dialoguer une page WEBDEV et une application WINDEV
<a name="faire_dialoguer_une_page_webdev_une_application_windev_ELTTEXTE000256"></a>


### Exécuter un traitement WINDEV depuis une page WEBDEV
<a name="executer_traitement_windev_depuis_une_page_webdev_ELTPARAGRAPHE000109"></a>Pour exécuter un traitement WINDEV depuis une page WEBDEV, les étapes sont les suivantes : 

- Dans la fenêtre WINDEV, créer le traitement à utiliser. Ce traitement doit être une procédure locale au champ Page WEBDEV. 

- Dans la page WEBDEV manipulée par la fenêtre WINDEV (ou dans le traitement), utilisez le mot-clé **MonChampHôte** pour exécuter la procédure présente dans le champ Page WEBDEV qui affiche la page WEBDEV. Il est possible de passer des paramètres à cette procédure.  





### Exécuter un traitement WEBDEV depuis une fenêtre WINDEV
<a name="executer_traitement_webdev_depuis_une_fenetre_windev_ELTPARAGRAPHE000117"></a>Pour exécuter un traitement WEBDEV depuis une fenêtre WINDEV, les étapes sont les suivantes : 

- Dans la page WEBDEV, le traitement WEBDEV à exécuter doit correspondre à une procédure locale navigateur de la page affichée dans le champ Page WEBDEV. 

- Dans la fenêtre WINDEV qui affiche le champ Page WEBDEV, utilisez la propriété [Page](../Proprietes/1410089371.md) sur le champ Page WEBDEV en précisant le nom de la procédure à exécuter ainsi que les paramètres à passer à la procédure.







### Illustration avec les exemples WD IntégrationWEBDEVdansWINDEV et WW_IntégrationWEBDEVdansWINDEV
<a name="illustration_avec_les_exemples_integrationwebdevdanswindev_wwintegrationwebdevdanswindev_ELTPARAGRAPHE000129"></a>

L'exemple WD IntégrationWEBDEVdansWINDEV propose un dialogue en WLangage entre la page WEBDEV et la fenêtre WINDEV. Pour tester ce dialogue : 

- Dans la fenêtre de facturation, cliquez sur l'option "Facturer" d'une ligne de la table dans la page WEBDEV intégrée (Véhicules présents dans l'atelier).

- La page WEBDEV affiche alors une popup pour choisir un goodies, choisissez par exemple la danseuse hawaïenne.

- La popup WEBDEV appelle ensuite la procédure WINDEV **DemandeFacturation**. L'application ouvre la fenêtre WINDEV de facturation. Et quand la facturation est validée, l'application appelle une procédure de la page WEBDEV pour supprimer la ligne du véhicule dans la table WEBDEV.




Voyons le code utilisé par l'application WINDEV et le site WEBDEV : 

- Pour le dialogue de WINDEV vers WEBDEV : 

	- Dans l'application WD IntégrationWEBDEVdansWINDEV, la fenêtre FEN_GestionClient contient : 

		- un champ Page WEBDEV qui affiche la page PAGE_SortieAtelier. Cette page liste les véhicules présents dans l'atelier. 

		- une procédure locale **DemandeFacturation**. Cette procédure est appelée depuis la page WEBDEV. 




- Dans le site WW_IntégrationWEBDEVdansWINDEV, la page PAGE_SortieAtelier permet de lancer la facturation via la page popup "POPUP_GOODIES". Dans cette popup, à la validation du Goodies, la procédure **DemandeFacturation** locale au champ Page WEBDEV est appelée via le code : 
			
		```wl
		MonChampHôte.demandeFacturation(ATT_Expéditeur[gnNumLigne], ATT_Résumé[gnNumLigne], ...
			gnNumLigne, ATT_CR[gnNumLigne], sNomGoodies)
		```


- Pour le dialogue entre la page WEBDEV et l'application WINDEV : 

	- Dans le site WW_IntégrationWEBDEVdansWINDEV, la page PAGE_SortieAtelier contient la procédure locale navigateur **actualise_ligne**. Cette procédure permet d'actualiser la ligne correspondant à la facture validée. 

	- Dans l'application WD IntégrationWEBDEVdansWINDEV, la procédure locale **DemandeFacturation** du champ Page WEBDEV appelle la procédure ActualiseLigne. 
			
		```wl
		WEBDEV_ListeVéhicules.Page.actualise_ligne(nnumligne)
		```









- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDIntegrationWEBDEVdansWINDEV.gif) ***Exemples didactiques*** : **WD IntegrationWEBDEVdansWINDEV** <br>Cet exemple présente la fonctionnalité "WEBDEV dans WINDEV".<br>Il présente comment insérer un site ou une partie de site ou une page WEBDEV dans une fenêtre WINDEV avec communication bi-directionnelle en WLangage.<br>L'intégration d'une page WEBDEV directement dans une fenêtre WINDEV a plusieurs utilisations :<br>- réunir deux existants, un existant WINDEV et un existant WEBDEV,<br>- permettre la webisation progressive d'une application. Il suffit alors de développer les nouvelles fonctionnalités dans WEBDEV et de les intégrer dans les applications WINDEV existantes.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WW_IntegrationWEBDEVdansWINDEV.gif) ***Exemples didactiques*** : **WW_IntegrationWEBDEVdansWINDEV** <br>Cet exemple présente la fonctionnalité "WEBDEV dans WINDEV".<br>Il présente comment insérer un site ou une partie de site ou une page WEBDEV dans une fenêtre WINDEV avec communication bi-directionnelle en WLangage.<br><br>L'intégration d'une page WEBDEV directement dans une fenêtre WINDEV a plusieurs utilisations :<br>- réunir deux existants, un existant WINDEV et un existant WEBDEV,<br>- permettre la webisation progressive d'une application. Il suffit alors de développer les nouvelles fonctionnalités dans WEBDEV et de les intégrer dans les applications WINDEV existantes.



