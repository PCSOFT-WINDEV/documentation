


## Groupware utilisateur (WINDEV et WEBDEV) : Options et paramétrage
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000382"></a>
Une application est souvent destinée à être utilisée en réseau, par différents utilisateurs. De même, un site est toujours destiné à être utilisé par plusieurs internautes. Il est souvent nécessaire de prévoir différents niveaux d'accès selon les fonctions de l'utilisateur ou de l'internaute.

Pour gérer ces niveaux d'accès dans vos applications WINDEV ou vos sites WEBDEV, il suffit d'intégrer le groupware utilisateur à votre application ou à votre site. Quelques clics de souris suffisent à transformer une application classique en une application gérant de nombreux niveaux d'accès. La mise en place est instantanée.

Pour plus de détails sur le groupware utilisateur, consultez [Présentation du Groupware utilisateur](../Editeurs/1000021152.md).

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Les options du groupware utilisateur
<a name="les_options_groupware_utilisateur_ELTTEXTE000406"></a>


### Mettre en place le groupware utilisateur dans votre application
<a name="mettre_place_groupware_utilisateur_dans_votre_application_ELTPARAGRAPHE000025"></a>Pour mettre en place le groupware utilisateur dans votre application ou votre site : 

1. Sous le volet "Projet", dans le groupe "Projet", cliquez sur "Groupware Utilisateur". 

2. Dans la fenêtre de description de la configuration de projet en cours, dans la zone "Groupware Utilisateur : Inactif", cliquez sur le bouton "Modifier". 

3. Dans la fenêtre qui s'affiche, activez le groupware utilisateur. Les différents onglets de cette fenêtre permettent de paramétrer le groupware utilisateur de votre application ou de votre site. Ce paramétrage est présenté dans les paragraphes suivants. 

4. Validez. Le groupware utilisateur est intégré à votre projet. 

5. Un compte administrateur sera créé lors de la première exécution de l'application ou du site sous le nom "superviseur". Le mot de passe correspondant pourra alors être spécifié. 




<a name="NOTE2B"></a>
<a name="NOTE2B_1"></a>


## Options de l'onglet "Général"
<a name="options_onglet_general_ELTTEXTE000430"></a>
L'onglet "Général" permet d'activer ou non le groupware utilisateur dans la configuration de projet en cours. Les options disponibles dans cet onglet sont les suivantes : 

- Type de groupware, 

- Mode de lancement

- Compte utilisateur. 


Voyons le détail de ces options. 


### Type de groupware
<a name="type_groupware_ELTPARAGRAPHE000061"></a>Plusieurs types de groupware sont proposés : 

- **Groupware utilisateur classique** : Le groupware utilisateur sera intégré dans sa version "Classique" : le groupware utilisateur sera associé uniquement à votre application (ou site), et la définition des droits sera effectuée depuis l'application (ou site). 
	Si cette option est choisie, deux onglets spécifiques sont affichés : 

	- l'onglet "Fichiers" permettant de spécifier le type de base de données utilisée ainsi que le type d'identification. 

	- l'onglet "OAuth" permettant de spécifier les services de connexion disponibles pour les utilisateurs. 




- **Groupware utilisateur BaaS** : Cette option permet d'intégrer un groupware utilisateur BaaS (Backend as a Service) avec une gestion des droits effectuée via un serveur. 
	Si cette option est choisie, deux onglets spécifiques sont affichés : 

	- l'onglet "BaaS" permettant de spécifier les caractéristiques du serveur BaaS, des comptes utilisateurs et les URL des sites d'administration. 

	- l'onglet "Email" permettant de personnaliser les emails à envoyer aux utilisateurs (email envoyé pour la validation de l'inscription ou email envoyé en cas de mot de passe oublié). 







**Groupware utilisateur BaaS : Configuration nécessaire** : 
Deux cas peuvent se présenter : 

- **Vous utilisez une plateforme PCSCloud** : les éléments nécessaires sont installés par défaut sur votre plateforme. 
	Rappel : PCSCloud est une solution payante, clé en main. Pour plus de détails, consultez [PCSCloud](https://pcscloud.net/FR/cloud_developpement.awp).

- **Vous n'utilisez pas une plateforme PCSCloud** : installez les éléments suivants : 

	- un serveur HFSQL,

	- le serveur réservé, en demandant l'installation des modules pour le Groupware utilisateur mobile (WDBaaS).


 Pour plus de détails, consultez la page [Configuration d'un serveur BaaS (Groupware utilisateur et Store Privé)](../Editeurs/1000021311.md).





### Mode de lancement
<a name="mode_lancement_ELTPARAGRAPHE000097"></a>Plusieurs modes de lancement sont disponibles : 

- L'option "Lancement automatique" permet d'indiquer que le groupware utilisateur est lancé dès le démarrage de l'application ou du site.
	La fenêtre ou page de login du groupware utilisateur est lancée avant toute autre fenêtre/page de l'application. Le code d'initialisation du projet est exécuté après l'ouverture et la validation de la fenêtre/page de login.

- L'option "Lancement manuel par programmation" permet de définir le moment où le groupware utilisateur doit être lancé.
	La fenêtre ou page de login sera ouverte uniquement si la fonction [gpwOuvre](../WDLang6/3041002.md) (ou la fonction [gpwLogin](../WDLang6/3041001.md)) est utilisée. Cette option permet d'exécuter le code d'initialisation du projet par exemple, avant d'ouvrir la fenêtre/page de login. Cette option est intéressante par exemple dans le cas d'une application multilingue : une fenêtre ou une page peut être affichée pour demander la langue d'exécution de l'application.

- ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) L'option "Lancement manuel par un modèle de champs" permet d'intégrer la page de connexion du groupware utilisateur dans le site. Il est ainsi possible de conserver le groupware utilisateur automatique (et ses mises à jour) tout en pouvant personnaliser la page de connexion.
	Si cette option est sélectionnée, le composant interne **WDGPU_WB_CNX** est intégré à votre projet. Ce composant contient un modèle de champs "MDLC_GPU_Connexion" qui gère la connexion. Il suffit d'intégrer ce modèle de champs dans les pages (ou les modèles) souhaitées via un simple Drag and Drop. 
	Après intégration, il est possible de personnaliser ce modèle de champs : 

	- en surchargeant les champs et/ou les traitements pour des modifications légères, 

	- en modifiant directement le modèle de champs pour des modifications plus importantes. 







<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Options de l'onglet "Options"
<a name="options_onglet_options_ELTTEXTE000466"></a>


### Personnalisation du groupware
<a name="personnalisation_groupware_ELTPARAGRAPHE000129"></a>Plusieurs modes de personnalisation du groupware utilisateur dans votre application ou votre site sont disponibles :

- **Pas de personnalisation** : 
	WINDEV et WEBDEV se chargent de tout. Il suffit de lancer l'application ou le site pour configurer les accès des utilisateurs. 
	![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Les fenêtres du groupware utilisateur peuvent utiliser automatiquement le gabarit de l'application. Il suffit de cocher l'option “Appliquer le gabarit du projet sur les fenêtres non personnalisées lors de l'exécution”.
	Pour conserver un aspect identique entre toutes les fenêtres de l'application, il est conseillé de toujours cocher cette option si vous utilisez le groupware utilisateur en mode non personnalisé.
	

- **Personnaliser l'UI de connexion** : 
	La fenêtre ou la page de login permettant l'inscription est automatiquement intégrée à votre application.

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Le composant interne **WDGPU** est intégré à votre projet. Ce composant contient la fenêtre de login et la procédure associée. Vous pouvez ainsi personnaliser la connexion au groupware utilisateur.




- **Personnalisation complète (mode expert)** - Groupware utilisateur classique uniquement : 
	Toute la programmation du groupware utilisateur est automatiquement intégrée à votre application.

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Le composant interne **WDGPU** est intégré à votre projet. Ce composant contient une analyse ainsi que toutes les fenêtres, requêtes, classes et procédures nécessaires à la gestion du groupware utilisateur. Vous pouvez ainsi personnaliser totalement toutes les fenêtres utilisées par le groupware utilisateur.






<a name="NOTE3_4"></a>


### Sécurité
<a name="securite_ELTPARAGRAPHE000174"></a>Les options de sécurité sont les suivantes : 

- **Autoriser l'ouverture des fenêtres et des états par défaut** : Cette option permet d'autoriser par défaut l'ouverture des fenêtres et des états par tous les utilisateurs. Il suffit dans ce cas d'indiquer lors de la configuration des droits les éléments qui ne seront pas accessibles. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Autoriser l'édition des états et des requêtes de l'application dans "Etats et Requêtes"** : Si cette option est cochée, l'utilisation du logiciel "Etats et Requêtes" sera autorisée pour les états et les requêtes de l'application. 
	Remarque : Cette option est identique à l'option "Autoriser le lancement de "Etats et Requêtes"" présente dans l'onglet "Avancé" de la description du projet. 



<a name="NOTE3_5"></a>


### Login automatique en mode test
<a name="login_automatique_mode_test_ELTPARAGRAPHE000188"></a>Indiquez le login et le mot de passe à utiliser en mode [test automatique](../Editeurs/2019025.md). Ces informations seront utilisées si un test automatique est réalisé sur l'application.
<a name="NOTE3_6"></a>


### Langue des fichiers
<a name="langue_des_fichiers_ELTPARAGRAPHE000198"></a>Par défaut, les fichiers de données spécifiques au groupware utilisateur sont en français mais il est possible d'utiliser les fichiers de données en langue anglaise. 
<a name="NOTE_3_7"></a>


### Mot de passe des fichiers de données
<a name="mot_passe_des_fichiers_donnees_ELTPARAGRAPHE000205"></a>Par défaut, les fichiers de données du groupware utilisateur ont un mot de passe spécifique. Ce mot de passe est : ***"PCSGPW2001***".

Pour changer ce mot de passe, saisissez le nouveau mot de passe. Les caractères saisis apparaissent masqués.

**Remarques** : 

- Le changement du mot de passe est pris en compte uniquement s'il est réalisé avant la création des fichiers de données du Groupware utilisateur. 

- Ce mot de passe est utilisé par exemple lors de la ré-indexation des fichiers ou lors de l'ouverture des fichiers avec l'outil WDMAP.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Onglet "Fichiers" (Groupware utilisateur classique)
<a name="onglet_fichiers_groupware_utilisateur_classique_ELTTEXTE000514"></a>


### Type de base de données (uniquement en mode "Lancement automatique)
<a name="type_base_donnees_uniquement_mode_lancement_automatique_ELTPARAGRAPHE000221"></a>Le groupware utilisateur manipule des fichiers de données permettant d'identifier les utilisateurs et de définir leurs droits. 

Ces fichiers peuvent être :

- au format HFSQL Classic (par défaut). Il est nécessaire de spécifier le répertoire des fichiers de données. 

- au format HFSQL Client/Serveur. Il est alors nécessaire de spécifier les caractéristiques de connexion au serveur HFSQL, ainsi que le répertoire des différentes catégories de fichiers.




Important : Les informations de localisation saisies s'appliquent uniquement en mode "Lancement automatique". Si vous avez choisi d'utiliser le mode "Lancement manuel par programmation" du groupware, utilisez les fonctions WLangage [gpwOuvre](../WDLang6/3041002.md) et [gpwOuvreConnexion](../WDLang6/3041007.md).
<a name="NOTE5_2"></a>


### Type d'identification
<a name="type_identification_ELTPARAGRAPHE000241"></a>Plusieurs types d'identification sont disponibles : 

- Identification entièrement gérée par le groupware utilisateur. 

- Identification à partir d'un annuaire LDAP ou Active Directory. 
	Cette option éviter de dupliquer les logins et les mots de passe en se basant sur les utilisateurs obtenus dans l'annuaire LDAP. Il est alors nécessaire de spécifier les caractéristiques de connexion (voir ci-dessous). 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Utilisation de l'authentification Windows. 
	Cette option nécessite de créer les utilisateurs dans la base du groupware utilisateur. Seul le superviseur (mot de passe superviseur) est créé par défaut. A la première exécution, il est nécessaire de : 

	- se connecter avec l'utilisateur superviseur. 

	- créer les utilisateurs qui existent sous Windows. 
			Remarque : Il n'est pas nécessaire d'indiquer un mot de passe pour ces utilisateurs : leur mot de passe Windows sera vérifié pour leur authentification.







**Dans le cas d'une identification à partir d'un annuaire LDAP ou Active Directory**, il est nécessaire de paramétrer les caractéristiques du serveur LDAP utilisé pour test (et en exécution). Les informations demandées sont :

- Adresse du serveur.

- Numéro de port du serveur.

- Version du serveur LDAP contacté.

- Base de données


Par programmation, il suffit d'utiliser la fonction [gpwOuvreSessionLDAP](../WDLang6/1000017055.md).

Remarques : 

- Le groupware utilisateur fonctionne avec Active Directory. Il ne fonctionne pas avec openLDAP.

- Lorsque le port du serveur correspond au port636, la connexion est automatiquement effectuée en mode "Negociate".



<a name="NOTE6_2"></a>


### Options
<a name="options_ELTPARAGRAPHE000280"></a>Selon le type d'identification choisi, plusieurs options sont disponibles : 

- **Fenêtre de login uniquement (pas de gestion des droits)** : Cette option est disponible uniquement pour les identifications LDAP et Windows. 
	 Dans ce cas, aucun fichier du groupware ne sera créé. Si le lancement est automatique, la fenêtre de login demandera à l'utilisateur de s'identifier. Si l'utilisateur est bien enregistré dans l'annuaire LDAP ou dans Windows, l'application se lancera, sinon elle se fermera. Il n'est pas possible à un superviseur de paramétrer les droits sur les fenêtres ou sur les pages. Si cette option n'est pas cochée, l'identification est réalisée avec gestion des droits : seuls les utilisateurs présents dans l'annuaire LDAP pourront se connecter. Le paramétrage des droits sur les fenêtres ou les pages est disponible.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Authentification unique (SSO)** : Cette option permet à l'utilisateur de s'identifier une seule fois (dans la première application lancée). Les autres applications utilisant le groupware utilisateur se connecteront automatiquement avec l'utilisateur indiqué. Si l'authentification Windows est utilisée avec cette option, les utilisateurs n'ont aucun login à saisir : la connexion est automatique. Dans ce cas, pour paramétrer le groupware, il est nécessaire que la session Windows ait été ouverte avec un utilisateur qui est superviseur.




<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Onglet "OAuth" (Groupware utilisateur classique)
<a name="onglet_oauth_groupware_utilisateur_classique_ELTTEXTE000550"></a>
Dans le cas d'un groupware utilisateur "classique", l'onglet "OAuth" permet d'autoriser l'utilisation d'un service de connexion spécifique. Pour le service spécifié, il est nécessaire de spécifier les identifiants correspondants (fournis lors de l'enregistrement de l'application auprès du service sélectionné).



<a name="NOTE7"></a>
<a name="NOTE7_1"></a>


## Onglet "BaaS" (Groupware utilisateur BaaS)
<a name="onglet_baas_groupware_utilisateur_baas_ELTTEXTE000574"></a>
L'onglet "BaaS" permet de définir toutes les options nécessaires à la gestion des droits depuis un site spécifique :  

- Dans la zone "Serveur d'application du GPU (webservice et site d'administration)", indiquez le serveur à utiliser. Dans le cas d'un nouveau serveur, sélectionnez le type de serveur à utiliser : 

	- **Plateforme PCSCloud**. Dans ce cas, indiquez les caractéristiques de votre plateforme PCSCloud. 
			Rappel : Cette option permet de profiter d'un serveur Web, d'un serveur réservé et d'un moteur HFSQL Client/Serveur déjà installés et configurés. 

	- **Serveur réseau ou Internet** avec le protocole utilisé. Saisissez le nom du serveur, l'utilisateur et le mot de passe. Ces informations vous ont été communiquées lors de l'installation du serveur réservé pour le groupware utilisateur/Store Privé. 




- Indiquez le type de comptes utilisateurs manipulé : 

	- **Comptes partagés entre applications** : Cette option permet de déployer l'application avec d'autres applications qui seront accessibles aux mêmes utilisateurs. Cette option est conseillée pour un déploiement inter-entreprise. 

	- **Comptes uniques pour l'application** : Cette option permet de stocker l'application avec sa base d'utilisateurs. 
						Cette option est conseillée pour un déploiement sur un store. 




<a name="NOTE8"></a>
<a name="NOTE8_1"></a>


## Onglet "Email" (Groupware utilisateur BaaS)
<a name="onglet_email_groupware_utilisateur_baas_ELTTEXTE000598"></a>
L'onglet "Email" permet d'indiquer les options de personnalisation des emails : 

- Validation d'inscription : Personnalisez si nécessaire les textes envoyés aux utilisateurs qui viennent de s'inscrire. 

- Mot de passe oublié : Personnalisez si nécessaire les textes envoyés aux utilisateurs qui oublient leur mot de passe.





