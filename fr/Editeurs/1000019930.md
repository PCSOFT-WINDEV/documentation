
## Dynamic Island
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000138"></a>
Nouveauté majeure de l'iPhone, la Dynamic Island (îlot dynamique) transforme l'encoche noire en un widget. <br>![Dynamic Island ouverte, avec message d'action](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=iphone14-Dynamic-Island-pizza-min.png)
WINDEV Mobile gère ce nouveau concept à partir de la version 28. 
Il suffit de définir l'UI des Widgets à l'aide de Swift UI, puis le WLangage permet de générer automatiquement les widgets dans le projet et de spécifier la callback qui sera appelée lors des clics dans le widget.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment gérer Dynamic Island dans vos applications iOS ?
<a name="comment_gerer_dynamic_island_dans_vos_applications_ios_ELTTEXTE000162"></a>
<a name="NOTE1_2"></a>


### Fonctionnement et pré-requis
<a name="fonctionnement_prerequis_ELTPARAGRAPHE000024"></a>

- Dynamic Island nécessite des connaissances en Swift, langage natif utilisé pour gérer les informations affichées dans la Dynamic Island. L'exemple iOS Dynamic Island contient les fichiers de base qui peuvent être repris et modifiés. 

- Dynamic Island ne fonctionne que sur le matériel physique. Il n'est pas possible de l'utiliser sur un émulateur ou un simulateur. 

- Dynamic Island est disponible uniquement pour les téléphones iPhone 14 Pro. 

- C'est l'application iOS qui déclenche l'affichage et le remplissage du Dynamic Island. Ces informations ne seront visibles uniquement lorsque l'application sera affichée en arrière plan. 







### Visualiser Dynamic Island en édition et en Go
<a name="visualiser_dynamic_island_edition_ELTPARAGRAPHE000033"></a>Pour visualiser la dynamic Island sous l'éditeur et en Go, il suffit de sélectionner une configuration iPhone 14 ou supérieure : 

1. Sélectionnez si nécessaire la configuration iOS de votre projet. 

2. Sous le volet "Projet", dans le groupe "Configuration de projet", cliquez sur "Configuration courante". 

3. Dans la fenêtre qui s'affiche, cliquez sur le lien "Description de la plateforme". 

4. Dans la zone "Description de la plateforme", ajoutez une plateforme "iPhone14" et supprimez si nécessaire la description "iPhone générique". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Dynamic_Island%20-%20HC%20N%B0001.gif)


5. Validez les 2 fenêtres. 

6. La coque affichée dans l'éditeur de fenêtres affiche désormais une encoche noire "Dynamic Island". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Dynamic_Island%20-%20HC%20N%B0002.gif)










### Programmation
<a name="programmation_ELTPARAGRAPHE000049"></a>Pour mettre en place la fonctionnalité Dynamic Island : 

1. Créez les différents fichiers Swift permettant de gérer l'interface et les données affichées par la Dynamic Island. 
	**Dans l'exemple iOS Dynamic Island**, les fichiers correspondant sont : 

	- InterventionActivityAttributes, qui définit les attributs à mettre à jour. 

	- InterventionActivityWidget, qui définit l'aspect du Widget affiché, en fonction du mode d'affichage (enroulé seul, déroulé, enroulé avec plusieurs applications affichées en même temps).




2. Dans le projet WINDEV Mobile, créez une collection de procédures contenant les différentes procédures en langage Swift permettant d'afficher la Dynamic Island. 
	**Dans l'exemple iOS Dynamic Island**, la collection de procédure "DynamicIsland" contient les procédures de base suivantes qui peuvent être réutilisées : 

	- actualiserIntervention : Permet de mettre à jour les données dans la Dynamic Island. 

	- commencerIntervention : Permet d'afficher des données dans la Dynamic Island. 

	- listeIntervention : Permet de lister les interventions. 

	- stopIntervention : Permet d'arrêter l'affichage dans la Dynamic Island. 




3. Dans le projet WINDEV Mobile, gérez grâce à une procédure l'action à effectuer lorsque l'utilisateur fait une action sur la dynamic Island. 
	**Dans l'exemple iOS Dynamic Island**, un deep link est utilisé. Dans le code d'initialisation du projet, la fonction [iOSApplicationOpenURLProcédure](../WDLang3/1410089346.md) permet de spécifier la procédure à appeler lorsque l'application doit ouvrir une ressource désignée par une URL. Dans cet exemple, une fenêtre spécifique est affichée. 







### Génération de l'application iOS
<a name="generation_application_ios_ELTPARAGRAPHE000076"></a>Lors de la génération de l'application iOS, l'assistant de génération propose des options spécifiques pour la gestion du Dynamic Island.
Dans l'étape "Configuration", l'option "Inclure les fichiers natifs nécessaires à la génération des "Live Activity" pour Dynamic Island.
Nécessite Xcode en version 14.1 minimum." permet d'indiquer que l'application doit inclure les fichiers nécessaires à la gestion du Dynamic Island. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Dynamic_Island%20-%20HC%20N%B0003.gif&type=thumb)
Les noms des structures et fichiers nécessaires sont à préciser dans l'étape suivante de l'assistant. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Dynamic_Island%20-%20HC%20N%B0004.gif&type=thumb)


Attention : Si cette option est cochée, il est nécessaire d'utiliser Xcode version 14.1 minimum. 


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=iOSDynamicIsland.gif) ***iPhone/iPad (WINDEV Mobile)*** : **iOS Dynamic Island** <br>Cet exemple montre l'utilisation de Dynamic Island d'iOS dans un projet WINDEV Mobile.


