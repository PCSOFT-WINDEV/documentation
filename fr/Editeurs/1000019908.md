


## Générer une application iOS
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000310"></a>
Le développement d'une application iPhone/iPad est réalisé en plusieurs étapes : 

- [Création et développement du projet sous WINDEV Mobile](../Editeurs/1000019818.md). 

- [Génération de l'application](#NOTE2_1). 

- [Compilation sous Xcode](../Editeurs/1000019878.md). 


**Attention** : Depuis Avril 2020, le déploiement via App Store nécessite d'utiliser la version 25 de WINDEV Mobile.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Génération de l'application pour la porter sur le MAC
<a name="generation_application_pour_porter_sur_mac_ELTTEXTE000334"></a>


### Génération de l'application
<a name="generation_application_ELTPARAGRAPHE000034"></a>Pour générer l'application à compiler sur le MAC : 

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_generation_IOS.gif) parmi les boutons d'accès rapide. L'assistant de génération se lance. 
	Remarque : Si la configuration en cours ne correspond pas à l'application iOS, déroulez l'icône de génération parmi les boutons d'accès rapide, cliquez sur "Autres générations" et sélectionnez "Générer l'application iPhone/iPad".

2. Dans l'assistant de génération de l'application, indiquez les informations générales sur l'application à créer : 

	- Nom de l'application

	- Société

	- Copyright

	- Identifiant du Bundle. Cet identifiant est l'identifiant unique de votre application auprès de Apple. Il se définit et s'enregistre sur le compte développeur Apple. 
			Cet identifiant permettra d'enregistrer votre application pour pouvoir la tester et la déployer. Par défaut, WINDEV Mobile propose automatiquement un identifiant respectant les normes de développement Apple actuelles. Vous pouvez modifier cet identifiant. 
			Pour plus de détails sur cet identifiant, consultez directement la [documentation iOS](http://developer.apple.com/library/ios/documentation/General/Conceptual/ApplicationDevelopmentOverview/ConfigureYourProject/ConfigureYourProject.html|). 




3. Passez à l'étape suivante. 

4. Indiquez le chemin des différentes icônes de l'application : icône pour iPad, icône pour iPhone, icône pour iPad Rétina, ...
	Remarque : Le bouton "Icônes facultatives" permet d'indiquer le chemin d'icônes supplémentaires.

5. Passez à l'étape suivante.

6. Choisissez le mode de gestion de l'image de lancement.
	Il existe deux modes de gestion des images de lancement.
	Vous pouvez :
	

	- Utiliser le nouveau système de gestion : permet le redimensionnement de l'application (Split View).

	- Utiliser l'ancien système de gestion : supporte toutes les versions d'iOS mais ne permet pas le redimensionnement de l'application (Split View).




7. Passez à l'étape suivante.

8. Si vous avez choisi d'utiliser à l'étape précédente :

	- le nouveau système de gestion de l'image de lancement, indiquez :

		- les éléments que vous souhaitez afficher dans le splash screen :

			- le nom de l'application.

			- la version de l'application.

			- le message affiché lors du chargement de l'application.

			- si nécessaire, l'image du logo de l'application dans le splash screen.

			- si vous souhaitez une animation au chargement du splash screen.

			- si nécessaire l'image de fond du splash screen. Dans ce cas, précisez l'image de fond et son mode d'affichage. 
										Vous pouvez récupérer l'image de fond et son mode d'affichage avant le lancement de l'assistant en cliquant sur le bouton "Réinitialiser l'image de fond".




- le style du splash screen : la couleur des libellés et la couleur de fond.

- l'ancien système de gestion de l'image de lancement : indiquez le chemin des différentes images de lancement de l'application pour l'iPhone puis pour l'iPad. Ces images sont au format PNG. Des images par défaut sont automatiquement créées pour votre application.

- les deux systèmes de gestion de l'image de lancement : les étapes de choix des paramètres du nouveau puis de l'ancien système de gestion de l'image de lancement s'affichent.

9. Passez à l'étape suivante.

10. Indiquez le numéro de version de l'application générée. Ce format correspond à un ensemble de 4 nombres séparés par des points.

	- Le premier groupe de 4 chiffres correspond au nombre de changements majeurs effectués dans l'application.

	- Le second groupe de 4 chiffres correspond au nombre de changements mineurs effectués dans l'application.

	- Le troisième groupe de 4 chiffres correspond au numéro de génération.
			Il est conseillé d'incrémenter automatiquement ce numéro à chaque génération. Cette incrémentation est réalisée automatiquement si l'option "Incrémentation automatique de la version à chaque génération" est cochée.

	- Le dernier groupe de 4 chiffres correspond au nombre de révisions (branches dans le GDS par exemple).




11. Passez à l'étape suivante.

12. Indiquez si nécessaire les librairies externes à inclure. 

	- Ces librairies peuvent être des librairies système ou non système. 

	- Ces librairies peuvent être nécessaires par exemple si vous avez saisi du code natif Objective C utilisant des librairies spécifiques. Pour plus de détails, consultez [Saisir du code Objective C](../Editeurs/1000019887.md).
			Remarque : Il est également possible d'ajouter un framework externe. Il suffit de dérouler le bouton "Ajouter" et de sélectionner "Ajouter un framework externe". Il est alors possible de sélectionner le répertoire ".framework" contenant la librairie externe. 




13. Passez à l'étape suivante.

14. Indiquez si des fichiers doivent être intégrés à l'exécutable. Il est possible d'intégrer :

	- des ressources spécifiques.

	- des images spécifiques.

	- des fichiers de données. 




15. Spécifiez les options des fichiers : 

	- **Si les fichiers ont l'option "Ecriture" cochée**, ces fichiers seront extraits automatiquement (fichiers à modifier par l'application par exemple). Dans ce cas, spécifiez dans quel répertoire de l'application ce fichier doit être extrait (répertoire "Documents" ou répertoire "Library"). 

	- **Si les fichiers ont l'option "Ecriture" décochée**, ces fichiers pourront ensuite :

		- soit être utilisés directement (fichiers à lire par exemple : fichiers son, image, ...). Ces fichiers sont intégrés à l'application et ne seront pas extraits. La fonction [fRepRessource](../WDLang1/1000020166.md) permet d'accéder en lecture à ces fichiers.  

		- soit être extraits par programmation avec la fonction [fExtraitRessource](../WDLang1/1000019509.md). 
						**Attention** : le système iOS est sensible à la casse. 




16. Passez à l'étape suivante.

17. Si votre application contient un champ HTML, il est nécessaire de respecter des options de sécurité dans une application iOS 9.0 (et supérieur). Par défaut, le champ HTML permet d'accéder uniquement aux sites utilisant une connexion HTTPS respectant les préconisations de la société Apple. Cette étape permet : 

	- de fournir la liste des domaines pour lesquels la sécurité peut être désactivée. Il est nécessaire d'indiquer : 

		- le nom du domaine (par exemple pcsoft.fr). 

		- la version TLS minimale pour les connexions HTTPS. Toutes les connexions supérieures ou égales à la version sélectionnée sont autorisées. Si "Défaut" est sélectionné, la version TLS minimale dépend de la version de Xcode. 

		- si la connexion HTTP non sécurisée est autorisée. 

		- si les sous-domaines doivent être inclus. 




- soit de désactiver la sécurité pour tous les domaines (option "Désactiver la sécurité pour tous les domaines").

18. Passez à l'étape suivante.

19. Indiquez les options de configuration : 

	- **Split View**
			L'option "Autoriser l'application à être redimensionnée (Split View)" permet à l'utilisateur final d'afficher deux fenêtres de deux applications différentes côte à côte sur iPAD Air 2. 

	- **Partage des fichiers ("File Sharing")** 
			Si l'option "Autoriser le partage de fichiers" est cochée, il sera possible de récupérer les fichiers de l'application sur le PC lors de la synchronisation. 
			Par exemple, si des fichiers de données ont été livrés avec l'application, l'application iTunes permettra de récupérer ces fichiers. Pour cela : 

		- Connectez le mobile. 

		- Dans iTunes, cliquez sur "Apps" et choisissez votre application. 

		- La liste des fichiers s'affiche. Par simple "Drag and Drop" il est possible d'ajouter ou de récupérer des fichiers. 




- **Cible de déploiement**
			Indiquez la version minimale nécessaire d'iOS pour exécuter l'application. 
			Remarque : La version minimale gérée est iOS 11.0.

- **Exécution en arrière-plan**
			Cette option est présente uniquement si la fonction [GPSSuitDéplacement](../WDLang3/1000019206.md) et/ou la fonction [BeaconDétectePrécis](../WDLang3/1000023115.md) sont utilisées dans l'application. L'option "Autoriser les fonctions GPSSuitDéplacement et BeaconDétectePrécis à être appelées quand l'application est en arrière-plan." permet de continuer la géolocalisation et/ou la détection précise des balises Beacon quand l'appareil est en veille.

- **Dynamic Island**
			L'option "Inclure les fichiers natifs nécessaires à la génération des "Live Activity" pour Dynamic Island.
Nécessite Xcode en version 14.1 minimum." permet d'indiquer que l'application doit inclure les fichiers nécessaires à la gestion dun Dynamic Island. Les noms des structures et fichiers nécessaires sont à préciser dans l'écran suivant de l'assistant.  
			Attention : Si cette option est cochée, il est nécessaire d'utiliser Xcode version 14.1 minimum. 
			Rappel : Dynamic Island est une manière d'utiliser l'endroit où les capteurs et la caméra selfie sont intégrés. A partir de l'iPhone 14, l'encoche fait partie de l'écran. Le code permettant de gérer Dynamic Island est un code natif saisi en Swift.

20. Passez à l'étape suivante.

21. L'étape "Signature" permet de choisir le mode de signature de votre application iOS. Pour plus de détails, consultez [Signature des applications iOS](../Editeurs/1000019923.md). Passez à l'étape suivante. 

22. **Si vous publiez votre application iOS sur l'App Store**, il est nécessaire d'indiquer un texte pour chaque fonctionnalité utilisée. Lors de la première utilisation d'une de ces fonctionnalités par l'utilisateur final, une fenêtre d'autorisation affichera ce texte pour informer l'utilisateur.  

24. Validez l'assistant. Si nécessaire, une configuration de projet est créée. La génération est faite dans le dossier EXE du répertoire du projet. **Le répertoire contenant les sources à utiliser sur le Mac s'appelle "Nom_du_projet.xcode.gen"**. C'est ce répertoire qui doit être copié sur le MAC. 
	Remarque : Le dossier de génération peut être ouvert directement dans l'explorateur de fichier : sous le volet "Accueil", dans le groupe "Général", déroulez l'option ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Rep_Projet.gif) et sélectionnez "Explorer le répertoire de génération". 





### Contenu du répertoire de génération "Nom_du_projet.xcode.gen"
<a name="contenu_repertoire_generation_nomduprojetxcodegen_ELTPARAGRAPHE000243"></a>Le répertoire de génération contient les éléments suivants : 

- Un répertoire **lib**. Ce répertoire contient le Framework WINDEV Mobile pour iOS avec si nécessaire : 

	- un dossier **libwd\*.xcframework** avec le Framework pour une application iOS,

	- un dossier **extwd\*.xcframework** avec le Framework pour un Widget jusqu'à iOS 13,

	- un dossier **widwd\*.xcframework** avec le Framework pour un Widget à partir de iOS 14.




- Un répertoire au nom du projet contenant : 

	- La bibliothèque .WDL des objets du projet. Cette bibliothèque est identique à la bibliothèque générée sous WINDEV ou WEBDEV.

	- Plusieurs fichiers nécessaires au compilateur Xcode sur le MAC (main.m, WDAppDelegate.h, WDAppDelegate.mm, Info.plist).




- Un dossier nommé **&lt;Nom du projet&gt;.xcodeproj**. Dans ce dossier, le fichier project.pbxproj correspond au projet à ouvrir sous Xcode sur le MAC.




Pour effectuer les manipulations sous Xcode, consultez [Compiler un projet WINDEV Mobile sous Xcode](../Editeurs/1000019878.md). 


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMClicsurGraphe.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Clic sur Graphe** <br>L'exemple "WM Clic sur Graphe" propose une solution pour excentrer les parts d'un graphe de type secteur sur un simple clic utilisateur.<br>Cet exemple met à disposition un modèle de champs "MDLC_ExcentreGraphe". Ce modèle de champs permet d'activer l'excentration de parts sur simple clic sur un graphe.<br>Pour disposer de cette fonctionnalité dans une autre application, il suffit d'importer le modèle de champs "MDLC_ExcentreGraphe".
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMGestionContacts.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Gestion Contacts** <br>Cet exemple illustre la gestion de contacts pour Android et iOS.<br>Il permet de :<br>- lister les contacts du téléphone<br>- appeler les contacts<br>- envoyer des sms aux contacts<br>- ...
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMInscrits.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Inscrits** <br>Cette application est un gestionnaire de présence. Elle permet de noter les personnes présentes lors d'un séminaire.<br>La base de données est préalablement renseignée avec la liste des personnes inscrites.<br>Il est possible de rechercher une personne par son nom.<br>Dans cet exemple, nous abordons les principaux thèmes suivants :<br>1/ l'utilisation d'une zone répétée fichier basée sur une requête<br>2/ l'utilisation d'une base de données au format HFSQL.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMLecteurRSS.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Lecteur RSS** <br>Cet exemple est un lecteur de flux RSS pour les périphériques Android et iOS. Cette application vous permettra de suivre l'actualité de vos flux préférés. Ce lecteur gère les images composant un billet ainsi que les liens vers un site extérieur. Il intègre en plus un système de gestion de favoris.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMMotdepasse.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Mot de passe** <br>Sites web, comptes bancaires, ... notre vie quotidienne est remplie de mots de passe. Avec WM Mot de passe, vous n'avez plus besoin de mémoriser tous les mots de passe de vos différents comptes. L'application conserve pour vous, de façon sécurisée tous vos mots de passe. WM Mot de passe est également capable de générer pour vous des mots de passe extrêmement sûrs.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMNotedefrais.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Note de frais** <br>Cet exemple permet de gérer vos notes de frais.<br><br>Voici les principales fonctionnalités de cette application :<br>- La saisie des factures<br>- Gestion des devises étrangères<br>- Ajout de justificatif photo pour les factures<br>- Envoi par mail de la note de frais<br>- Suivi des notes de frais<br>- ...
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMStocks.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Stocks** <br>Cette application permet de réaliser des inventaires et d'enregistrer les résultats dans une base de données.<br>L'exemple permet de créer des entrées/sorties dans le stock, en scannant directement le code-barres des produits.<br>Il est optimisé pour être exécuté sur les tablettes.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSysteme.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Système** <br>Cette application est un exemple didactique montrant quelques unes des fonctionnalités de WINDEV Mobile pour Android/iOS.<br>Les fonctions système utilisées sont : <br>- NFC<br>- Champ Multimédia<br>- Luminosité<br>- Volume<br>- WIFI<br>- Bluetooth<br>- Toast<br>- Boussole<br>- Accéléromètre<br>- Champ caméra<br>- LED<br>- Vibrations<br>- Notifications<br>- Fonctions de dessin<br>- Internet
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=iOSDynamicIsland.gif) ***iPhone/iPad (WINDEV Mobile)*** : **iOS Dynamic Island** <br>Cet exemple montre l'utilisation de Dynamic Island d'iOS dans un projet WINDEV Mobile.


