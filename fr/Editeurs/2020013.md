
## Traitements multi-projets : utilisation de batchs
			






	<B><B>Avertissement</B></B>

	A partir de la version <B><B>16</B></B>,  la création de traitements batch est conservée par compatibilité. Il est conseillé d'utiliser la [Fabrique Logicielle](../Editeurs/1000019563.md) pour automatiser le processus de production des applications. 





<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000183"></a>
WINDEV, WEBDEV et WINDEV Mobile offrent la possibilité d'exécuter une suite de traitements (compilation, génération, ...) qui seront appliqués à un projet ou à une suite de projets. Ces traitements sont regroupés dans un "batch".

Les batchs peuvent être exécutés immédiatement ou par des tâches planifiées de Windows (par exemple compilation d'un ensemble de projets chaque nuit).



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000207"></a>


### Créer un fichier batch
<a name="creer_fichier_batch_ELTPARAGRAPHE000030"></a>Pour créer un fichier batch :

1. Sélectionnez l'option "Atelier .. Batch multi-projets .. Créer un batch". L'assistant de création d'un batch se lance.

2. Indiquez le nom du batch, son emplacement et sa description.
	**Remarque** : Le fichier correspondant à un batch a pour extension ".WDBatch".

3. Sélectionnez les différents projets à manipuler dans le batch grâce aux boutons "Ajouter un projet", "Ajouter plusieurs projets" et "Supprimer de la liste".
	**Remarques** :

	- L'ordre des projets est très important. Par exemple, un projet générant un composant utilisé par un second projet devra être traité en premier.

	- Un même projet peut apparaître plusieurs fois dans la liste des projets. En effet, il est possible par exemple de traiter à chaque fois une configuration de projet différente. Par défaut, toutes les configurations de projet sont prises en compte. Le choix de la configuration à prendre en compte est effectué dans la description du batch.




4. Indiquez les traitements à exécuter par le batch. Une liste de traitements est proposée par défaut. Vous pouvez ajouter de nouveaux traitements ou en supprimer.
	Vous pouvez paramétrer les opérations qui seront automatiquement effectuées lors de l'exécution du batch grâce au bouton "Editer la feuille de route". Ces opérations concernent :

	- la mise à jour automatique des composants.

	- la synchronisation du projet avec l'analyse.

	- la synchronisation des modèles.

	- la mise à niveau du projet.

	- la gestion des erreurs de compilation (les erreurs de compilation d'IHM ne sont pas prises en compte). Si l'option "Lancer la génération malgré les erreurs" est sélectionnée, un "warning" sera inscrit dans le compte-rendu pour toute erreur de compilation rencontrée.

	- la gestion des tests automatiques. Si l'option "Continuer l'exécution du batch malgré les erreurs" est sélectionnée, un "warning" sera inscrit dans le compte-rendu pour toute erreur rencontrée dans les tests automatiques.

	- les options spécifiques aux projets présents dans le GDS.




5. Indiquez les actions post-batch à exécuter. Il est possible de lancer un exécutable après le batch, de fermer l'éditeur, d'éteindre l'ordinateur, ... Un compte-rendu peut également être envoyé dans la messagerie WDBal.

6. L'assistant est terminé. Il est possible de :

	- Editer la description du batch. La fenêtre de description du batch permet de paramétrer plus précisément les caractéristiques du batch.

	- Exécuter immédiatement le batch.

	- Planifier l'exécution du batch, en créant une tâche planifiée dans Windows. L'assistant de création d'une tâche programmée est alors exécuté.








<a name="NOTE3_2"></a>


### Conseil
<a name="conseil_ELTPARAGRAPHE000066"></a>Pour traiter des projets multi-produits (projet avec une configuration en WINDEV et une configuration en WEBDEV par exemple), il est conseillé de créer un batch par produit.

Par exemple, le batch WINDEV permettra de traiter la configuration WINDEV du projet et le batch WEBDEV permettra de traiter la configuration WEBDEV du projet.


<a name="NOTE3_3"></a>


### Compte-rendu de batch
<a name="compterendu_batch_ELTPARAGRAPHE000076"></a>Lors de l'exécution d'un batch, un compte-rendu est automatiquement généré (fichier .wbl). Ce compte-rendu peut être directement ouvert sous l'éditeur :

- grâce à l'option "Atelier .. Batch multi-projets .. Ouvrir un compte-rendu de batch".

- grâce à l'option "Fichier .. Ouvrir".






<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Description d'un batch
<a name="description_batch_ELTTEXTE000243"></a>
A tout moment, il est possible d'afficher la description d'un batch existant. Il suffit d'ouvrir le batch :

- grâce à l'option "Atelier .. Batch multi-projets .. Ouvrir un batch".

- grâce à l'option "Fichier ..Ouvrir".




La fenêtre de description d'un batch permet de :

- Créer un nouveau batch (bouton "Nouveau").

- Sélectionner un batch existant.

- Lancer l'exécution du batch (bouton "Lancer l'exécution") ou planifier l'exécution du batch sous Windows (bouton "Planifier l'exécution").

- Définir pour chaque projet traité par le batch :

	- la configuration à traiter. Par défaut, toutes les configurations du projet sont traitées.

	- la liste des traitements à effectuer. Par défaut, la liste principale du batch est appliquée à tous les projets. Il est possible de créer une nouvelle liste de traitements. Chaque projet peut être associé à une liste de traitements différente. La liste de traitements est affichée dans la partie basse de l'écran. Pour chaque liste de traitements, il est possible de définir une feuille de route spécifique.




- Définir les actions post-batch à effectuer (bouton "Actions post-batch").






<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Exécuter un batch en ligne de commande
<a name="executer_batch_ligne_commande_ELTTEXTE000267"></a>
Il est possible d'exécuter un batch en ligne de commande grâce à la syntaxe suivante :

En WINDEV :


```txt
WinDev17.EXE /NAME="<Initiales>" /PASS="<Mot de passe>" /BATCH="<Nom complet du batch>"
```


En WINDEV Mobile :



```txt
WD17Mobile.EXE /NAME="<Initiales>" /PASS="<Mot de passe>" /BATCH="<Nom complet du batch>"
```


En WEBDEV :



```txt
WEBDEV17.EXE /NAME="<Initiales>" /PASS="<Mot de passe>" /BATCH="<Nom complet du batch>"
```


où

&lt;Initiales&gt; correspond aux initiales utilisées dans la fenêtre de login de WINDEV, WEBDEV et WINDEV Mobile.

&lt;Mot de passe&gt; correspond au mot de passe utilisé dans la fenêtre de login de WINDEV, WEBDEV et WINDEV Mobile.

&lt;Nom complet du batch&gt; correspond au chemin complet du fichier batch à exécuter.


Par exemple :



```txt
WinDev17.EXE /NAME="FP" /BATCH="C:\MesProjets\Test.WDBatch"
```





