


## Code-cible conditionnel
			

<DIV class="specObsolete">
	<IMG style="float:left;margin-right:10px;" src="https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=warning_big.png"><B>Avertissement</B><BR>
	A partir de la version <B>25</B>,  cette fonctionnalité n'est plus disponible. Elle est remplacée par les instructions "[&lt;COMPILE SI&gt;](../Motscles/1510021.md)" et "[SI CibleExécution](../Motscles/1510028.md)".
</DIV><a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000273"></a>
L'éditeur de code permet de saisir un code spécifique pour chaque environnement (WINDEV, WEBDEV et WINDEV Mobile).

De plus, selon la plateforme (Windows ou Linux) et le type de génération (Java, PHP, Application .NET ou Webservice), vous pouvez avoir des cibles différentes pour chaque environnement. Le terme "plateforme" sera utilisé pour distinguer ces différents codes.

Par exemple, un traitement d'impression ne sera pas forcement réalisé de la même manière sous Windows, sous Internet et sur un périphérique mobile à liaison infrarouge.

**Remarque** : Selon les cas, un code-cible conditionnel peut être remplacé par l'instruction de compilation [&lt;COMPILE SI&gt;](../Motscles/1510021.md). 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principe
<a name="principe_ELTTEXTE000297"></a>


### Les différentes plateformes et cibles
<a name="les_differentes_plateformes_cibles_ELTPARAGRAPHE000038"></a>Les plateformes disponibles sont les suivantes :

- Application Windows 32 bits

- Application Windows 64 bits

- Application Java

- Application .Net

- Application Linux 32 bits

- WINDEV Mobile

- WEBDEV Windows

- WEBDEV Linux

- WEBDEV PHP

- Webservice

- Service Windows 32 bits

- Service Windows 64 bits

- Daemon Linux 32 bits

- Daemon Linux 64 bits

- Application Android

- Application Linux 64 bits

- Application Universal Windows Plateform




Selon l'événement dans lequel vous êtes positionné, seules certaines plateformes sont accessibles. Par exemple, vous ne pourrez pas saisir du code PHP dans le code d'un bouton d'une fenêtre WINDEV.

Les plateformes sont accessibles dans les codes suivants :

- code du projet.

- code des classes.

- code des collections de procédures.

- code des états (y compris le code des champs).




Le tableau ci-dessous récapitule les plateformes accessibles selon le code en cours :

| Plate-forme | Code de fenêtre WINDEV | Code de fenêtre WINDEV Mobile | Code de page WEBDEV |
| --- | --- | --- | --- |
| Application Windows 32 bits | x |   |   |
| Application Windows 64 bits | x |   |   |
| Application Java | x |   |   |
| Application .Net | x |   |   |
| WINDEV Mobile |   | x |   |
| WEBDEV Windows |   |   | x |
| WEBDEV Linux |   |   | x |
| WEBDEV PHP |   |   | x |





**Remarque** : La plateforme "Webservice" n'est utilisable que dans le code des classes et des collections de procédures.


<a name="NOTE2_2"></a>


### Fonctionnement
<a name="fonctionnement_ELTPARAGRAPHE000137"></a>Vous pouvez avoir jusqu'à 8 cibles différentes dans un même code : votre code sera divisé en 8 parties "parallèles" (division verticale dans le code). Le code qui sera exécuté dans l'application dépendra de l'environnement, le type de génération et le système d'exploitation.

Dans certains cas, le code à exécuter peut être identique pour plusieurs plateformes. Vous avez donc la possibilité de regrouper plusieurs plateformes.

**Exemple** : lors de la création d'un composant multiplateformes "Login", le code d'initialisation sera différent si le composant est intégré dans un projet WINDEV, un projet WINDEV Mobile ou un projet WEBDEV.

- Dans ce cas, le code pour "Application Windows" et "Application Java" est identique. Ce code est donc saisi dans une même "cible" regroupant ces deux plateformes.

- Le code pour WINDEV Mobile utilise la même fonction que la première cible mais fait appel à une fenêtre différente (fenêtre WINDEV Mobile).

- La troisième cible concerne "WEBDEV Windows", "WEBDEV Linux" et "WEBDEV PHP". Le code est identique pour ces trois plateformes.



<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_1.gif)


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000327"></a>


### Comment mettre en place le code-cible conditionnel ?
<a name="comment_mettre_place_codecible_conditionnel_ELTPARAGRAPHE000156"></a>Pour mettre en place un code-cible conditionnel :

1. Positionnez-vous dans le code où vous désirez insérer un code-cible.

2. Sous le volet "Code", dans le groupe "Code Cible", déroulez "Code cible" et sélectionnez "Nouvelle zone".

3. La fenêtre suivante s'affiche :<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_DescSimple.gif)


4. Cochez les produits concernés par le code en cours : une cible sera créée pour chaque environnement coché. Si par exemple vous êtes positionné dans le code d'initialisation du projet, vous aurez :

	- pour WINDEV : 1 cible avec "WINDEV 32 bits", "WINDEV 64 bits", "Application Java", "Application Linux 32 bits", "Application .Net", "Webservice", "Service Windows 32 bits", "Service Windows 64 bits", "Daemon 32 bits", "Daemon Linux 64 bits". 

	- pour WINDEV Mobile : 1 cible avec "WINDEV Mobile", "Application Android".

	- pour WEBDEV : 1 cible avec "WEBDEV Windows", "WEBDEV Linux" et "WEBDEV PHP". 







Le bouton "Avancé" permet de personnaliser les cibles en choisissant les plateformes disponibles : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_DescAvance.gif)


**Rappel** : La liste des plateformes disponibles dépend du code en cours.

Dans cette fenêtre, vous pouvez visualiser les différentes cibles et ajouter ou supprimer des cibles grâce aux boutons "+" et "-".

- Pour ajouter une plateforme dans une cible :

	- sélectionnez la ou les plateformes (liste multisélection) à intégrer dans la cible.

	- sélectionnez la colonne correspondant à la cible dans laquelle les plateformes doivent être rajoutées.

	- cliquez sur le bouton d'ajout ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_BtnAjout.gif).




- Pour supprimer une plateforme dans une cible :

	- cliquez sur la plateforme concernée.

	- cliquez sur le bouton de suppression ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_BtnSupp.gif).







<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Fonctionnalités du code-cible conditionnel
<a name="fonctionnalites_codecible_conditionnel_ELTTEXTE000351"></a>


### Affichage d'un code-cible
<a name="affichage_codecible_ELTPARAGRAPHE000196"></a>Lorsque vous travaillez sur une des cibles en particulier, vous pouvez afficher celle-ci sur toute la largeur de l'éditeur de code. Les autres cibles sont automatiquement masquées afin d'offrir un affichage optimal.

Pour réaliser cette opération, il suffit de cliquer sur le bouton correspondant à la plateforme à afficher en haut à droite du code-cible.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_2.gif)
Dans notre exemple, le code affiché concerne la cible regroupant "WEBDEV Windows", "WEBDEV Linux" et "WEBDEV PHP". Deux boutons sont disponibles dans la cible pour afficher le code des cibles 1 ("Application Windows" et "Application Java") et 2 (WINDEV Mobile).

Pour chaque cible, vous avez également une icône et un libellé qui sont affichés en haut à gauche pour vous permettre d'identifier facilement les plateformes associées à la cible.
<a name="NOTE4_2"></a>


### Description d'un code-cible
<a name="description_codecible_ELTPARAGRAPHE000209"></a>Chaque cible du code-cible dispose d'un bouton (![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_BtnDesc.gif) en haut à gauche). Ce bouton permet d'éditer la description du code-cible. Il est ainsi possible de modifier à tout instant la description du code-cible : rajouter une cible, modifier les plateformes d'une cible, ...

Le clic sur ce bouton ouvre un menu contextuel : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Code_Cible_Cond_menuctx.gif)


Ce menu contextuel permet d'ajouter une zone de code, de supprimer une zone cible, ...

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Limites
<a name="limites_ELTTEXTE000381"></a>


- La déclaration de variables globales ne peut pas être effectuée dans un code-cible conditionnel.

- Les variables locales doivent avoir des noms uniques pour toutes les zones de code.





