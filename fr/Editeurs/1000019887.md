


## Saisir du code Objective C
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000135"></a>
Il est possible de saisir du code Objective C dans les applications iPhone/iPad générées avec WINDEV Mobile. 

Vous pouvez ainsi créer des procédures globales entièrement en code Objective C.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment créer une procédure en code Objective C ?
<a name="comment_creer_une_procedure_code_objective_ELTTEXTE000159"></a>
Pour saisir le code d'une procédure globale en code Objective C : 

1. Créez une nouvelle procédure globale (par exemple option "Nouvelle procédure globale" du menu contextuel des collections de procédures dans le volet "Explorateur de projet"). Indiquez le nom de cette procédure.
	Attention : le nom de la procédure ne doit pas contenir de caractères accentués. 

2. La procédure est créée sous l'éditeur de code. 

3. Dans l'entête de la procédure, cliquez sur le logo "WL" pour changer le type de code. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IOS_Code_WL.gif)


4. Dans la liste qui s'ouvre, sélectionnez "ObjC". 

5. Le bandeau devient bleu clair et les caractères "ObjC" apparaissent devant le nom de la procédure. Le code existant est mis en commentaires. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IOS_Code.gif)





Remarques : 

- Pour revenir en code WLangage, il suffit de cliquer sur "ObjC" dans le bandeau de la procédure et de sélectionner "WLangage".

- Le nom de la procédure Objective C ne doit pas contenir d'accents. Dans le cas contraire, les accents sont supprimés lors du passage au code Objective C. 



<a name="NOTE2_2"></a>


### Remarques importantes
<a name="remarques_importantes_ELTPARAGRAPHE000040"></a>

- Le passage de paramètres à une procédure Objective C est réalisé automatiquement par valeur.

- Si le paramètre est un pointeur, le passage de paramètres est réalisé par valeur, mais il est possible d'agir sur le contenu du pointeur dans la procédure. 

- Les paramètres des procédures écrites en code Objective C doivent obligatoirement être typées avec un type primitif (entier, réel, chaîne, ...). Les types gérés sont : 

	- char

	- wchar_t

	- float

	- double

	- int

	- long

	- short

	- void

	- bool

	- BOOL




- Evitez les commentaires de type "/\*". Les commentaires WLangage ("//") sont gérés. 



<a name="NOTE2_3"></a>


### Utiliser l'UIView d'une fenêtre
<a name="utiliser_uiview_une_fenetre_ELTPARAGRAPHE000061"></a>Il n'est pas possible d'utiliser directement l'UIView d'une fenêtre. Cependant, la fonction [Handle](../WDLang1/3015005.md) permet d'obtenir un pointeur sur l'UIView actuel. 

Voici un exemple de code Objective C permettant de lire une vidéo : 

```txt
#import <MediaPlayer/MediaPlayer.h>

void LireVideo(void* currentView, NSString* VideoURL)
{
    
	MPMoviePlayerController *moviePlayer;
	NSURL *movieURL;
	UIView *tmpView = (UIView*)currentView;
    
	movieURL = [NSURL URLWithString:VideoURL];
	moviePlayer = [[MPMoviePlayerController alloc] initWithContentURL:movieURL];
	[tmpView addSubview:moviePlayer.view];
	moviePlayer.fullscreen = YES;
	[moviePlayer play];
}
```


et l'appel correspondant en WLangage : 

```wl
LireVideo(Handle(mafenetre, HandleUIViewController), "http://mavideo.com/mavideo.mp4")
```


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Comment appeler des classes Objective C ?
<a name="comment_appeler_des_classes_objective_ELTTEXTE000195"></a>
Si votre procédure en code Objective C utilise des classes Objective C : 

1. Ajoutez les imports correspondants aux classes Objective C utilisées dans le code Objective C natif saisi (grâce au mot-clé "Import"). Il est recommandé d'ajouter ces imports avant la déclaration de la méthode. Par exemple : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IOS_Code_Obj.gif)


2. Si les classes Objective C sont présentes dans des librairies spécifiques, intégrez ces librairies dans l'application lors de la génération de l'application iPhone/iPad, grâce à l'écran suivant de l'assistant : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IOS_Librairie_ext.gif&type=thumb)





Remarque : Ces librairies doivent être accessibles depuis le PC utilisé pour la génération de l'application iPhone/iPad. 


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSysteme.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Système** <br>Cette application est un exemple didactique montrant quelques unes des fonctionnalités de WINDEV Mobile pour Android/iOS.<br>Les fonctions système utilisées sont : <br>- NFC<br>- Champ Multimédia<br>- Luminosité<br>- Volume<br>- WIFI<br>- Bluetooth<br>- Toast<br>- Boussole<br>- Accéléromètre<br>- Champ caméra<br>- LED<br>- Vibrations<br>- Notifications<br>- Fonctions de dessin<br>- Internet


