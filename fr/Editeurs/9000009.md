


## Créer une archive Java
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000271"></a>
Lorsque votre application Java est développée, il est possible de créer une archive Java directement exécutable. Dans ce cas, plusieurs solutions sont possibles :

- [générer une application Java classique](#NOTE2_1).

- [générer une application pour Java Web Start](#NOTE4_1).




Pour lancer la création d'une archive Java : 

- Affichez la configuration de projet Java sous l'éditeur. 

- Sous le volet "Projet", dans le groupe "Génération", cliquez sur "Générer". 




**Note** : La configuration de projet en cours doit correspondre à la configuration de projet Java à générer.

Remarque : **Pour compiler (en Java) un projet Java réalisé avec WINDEV**, il est nécessaire d'installer sur le poste de développement un JDK Java (par exemple OpenJDK).

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Générer une archive Java classique
<a name="generer_une_archive_java_classique_ELTTEXTE000295"></a>
Une archive Java classique permet de lancer l'application directement en double-cliquant sur le fichier .jar généré. Un fichier .bat est également généré si le double-clic ne fonctionne pas.
<a name="NOTE2_2"></a>
Pour créer l'archive Java : 

1. Lancez l'assistant de création de l'archive Java : 

	- Affichez la configuration de projet Java sous l'éditeur. 

	- Sous le volet "Projet", dans le groupe "Génération", cliquez sur "Générer".




2. Sélectionnez l'option "Générer une application Java classique". Passez à l'étape suivante.

3. Indiquez le nom de l'archive et les informations contenues dans le manifeste (Société, Description et Copyright). Passez à l'étape suivante.

4. Indiquez le numéro de version de l'exécutable Java. Deux formats de numéro de version sont disponibles :

	- **Format standard.** Ce format est le format standard géré par Windows. Ce format correspond à un ensemble de 4 nombres séparés par des points. 

		- Le premier groupe de 4 chiffres correspond au nombre de changements majeurs effectués dans l'application.

		- Le second groupe de 4 chiffres correspond au nombre de changements mineurs effectués dans l'application.

		- Le troisième groupe de 4 chiffres correspond au numéro de génération. 
						Il est conseillé d'incrémenter automatiquement ce numéro à chaque génération. Cette incrémentation est réalisée automatiquement si l'option "Incrémentation automatique de la version à chaque génération" est cochée.

		- Le dernier groupe de 4 chiffres correspond au nombre de révisions (branches dans le GDS par exemple).




- **Format pour compatibilité.** Ce format était utilisé jusqu'à la version 12 par défaut.
			**Remarque** : Tous les caractères (chiffre et lettre) sont autorisés. Par exemple : "1.01A".
			Si l'option "Incrémentation automatique de la version à chaque génération" est cochée :

	- le numéro de version "1.01A" deviendra "1.01B".

	- le numéro de version "A14Z" deviendra "A15A".

5. Spécifiez si le framework WINDEV pour Java doit être intégré dans l'archive .jar. Passez à l'étape suivante.

6. Indiquez les autres fichiers à intégrer dans l'archive ".jar". Vous pouvez sélectionner par exemple les drivers JDBC permettant l'accès à une base de données. Passez à l'étape suivante.

7. Indiquez :

	- la commande du compilateur Java à utiliser. Pour personnaliser ce paramètre (par exemple si plusieurs compilateurs sont installés sur le poste), sélectionnez "Personnalisé". Dans cet écran, vous pouvez également spécifier la ligne de commande à utiliser (pour plus de détails, consultez la documentation du compilateur choisi).

	- la commande de création de l'archive. L'option "Personnalisé" permet de définir l'outil de création d'archive à utiliser. Vous pouvez également spécifier la ligne de commande à utiliser (pour plus de détails, consultez la documentation du compilateur choisi) et le contenu du manifeste de l'archive. 

	- la commande d'intégration d'autres archives. L'option "Personnalisé" permet de définir l'outil d'extraction d'archive et sa ligne de commande.




8. La création de l'archive ".jar" est terminée. 


Le fichier correspondant a été créé dans un sous-répertoire correspondant à la configuration de projet Java (sous-répertoire du répertoire EXE du projet). 
Pour ouvrir un explorateur de fichiers sur ce répertoire, sous le volet "Accueil", dans le groupe "Général", déroulez l'option ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Rep_Projet.gif) et sélectionnez "Ouvrir le répertoire de génération". 

L'exécution de l'archive Java est lancée en utilisant la jvm du jdk utilisé pour la compilation.

Vous trouverez également un fichier ".BAT" dans le répertoire de génération de l'archive Java. Ce fichier contient la ligne de commande nécessaire au lancement et peut être exécuté sous un environnement Windows.

**Remarque** : il est possible que plusieurs jvm soient installés sur un même poste (jvm 32 bits et 64 bits par exemple), et que l'explorateur associe les fichiers .jar à une autre jvm. Dans ce cas, l'exécution de l'archive par double-clic sur le .jar peut présenter quelques différences.

**Pour les autres environnements**, il est nécessaire de créer un fichier permettant le lancement du fichier ".jar".

Par exemple pour Linux, vous pouvez créer un fichier ".sh" contenant la ligne de commande suivante :

```txt
"java -jar MonProjet.jar"
```
"MonProjet.jar" correspond ici à l'archive ".jar" générée depuis votre projet.

**Remarque** : Pour plus de détails sur les accès aux bases de données depuis une application Java, consultez [Java et Base de données](../Editeurs/9000008.md)

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Générer une application pour Java Web Start
<a name="generer_une_application_pour_java_web_start_ELTTEXTE000325"></a>
L'application Java est déployée sur un serveur Web, et lancée depuis un navigateur sur les postes client. Elle est cependant exécutée comme une application classique.

La mise à jour de l'application sur le serveur Web provoque la mise à jour sur les postes client.

Cette option de génération permet de simplifier le déploiement et la mise à jour d'une application Java. 
<a name="NOTE4_2"></a>


### Pour générer une application pour Java Web Start : 
<a name="pour_generer_une_application_pour_java_web_start_ELTPARAGRAPHE000145"></a>

1. Lancez l'assistant de création de l'archive Java : 

	- Affichez la configuration de projet Java sous l'éditeur. 

	- Sous le volet "Projet", dans le groupe "Génération", cliquez sur "Générer".




2. Sélectionnez l'option "Générer une application pour Java Web Start". Passez à l'étape suivante.

3. Indiquez le nom de l'archive et les informations contenues dans le manifeste (Société, Description et Copyright). Passez à l'étape suivante.

4. Indiquez le numéro de version de l'exécutable Java. Deux formats de numéro de version sont disponibles :

	- **Format standard.** Ce format est le format standard géré par Windows. Ce format correspond à un ensemble de 4 nombres séparés par des points. 

		- Le premier groupe de 4 chiffres correspond au nombre de changements majeurs effectués dans l'application.

		- Le second groupe de 4 chiffres correspond au nombre de changements mineurs effectués dans l'application.

		- Le troisième groupe de 4 chiffres correspond au numéro de génération. 
						Il est conseillé d'incrémenter automatiquement ce numéro à chaque génération. Cette incrémentation est réalisée automatiquement si l'option "Incrémentation automatique de la version à chaque génération" est cochée.

		- Le dernier groupe de 4 chiffres correspond au nombre de révisions (branches dans le GDS par exemple).




- **Format pour compatibilité.** Ce format était utilisé jusqu'à la version 12 par défaut.
			**Remarque** : Tous les caractères (chiffre et lettre) sont autorisés. Par exemple : "1.01A".
			Si l'option "Incrémentation automatique de la version à chaque génération" est cochée : 

	- le numéro de version "1.01A" deviendra "1.01B".

	- le numéro de version "A14Z" deviendra "A15A".

5. Indiquez les autres fichiers à intégrer dans l'archive ".jar". Vous pouvez sélectionner par exemple les drivers JDBC permettant l'accès à une base de données. Passez à l'étape suivante.

6. Définissez les paramètres de signature de l'archive Java.

	- Fichier des clés.

	- Mot de passe associé.

	- Nom de la clé dans le fichier.

	- Mot de passe de la clé.




7. Définissez les paramètres de déploiement de l'application Java WEB Start :

	- URL de déploiement.

	- Répertoire correspondant à l'URL.




8. Indiquez :

	- la commande du compilateur Java à utiliser. Pour personnaliser ce paramètre (par exemple si plusieurs compilateurs sont installés sur le poste), sélectionnez "Personnalisé". Dans cet écran, vous pouvez également spécifier la ligne de commande à utiliser (pour plus de détails, consultez la documentation du compilateur choisi).

	- la commande de création de l'archive. L'option "Personnalisé" permet de définir l'outil de création d'archive à utiliser. Vous pouvez également spécifier la ligne de commande à utiliser (pour plus de détails, consultez la documentation du compilateur choisi) et le contenu du manifeste de l'archive. 

	- la commande d'intégration d'autres archives. L'option "Personnalisé" permet de définir l'outil d'extraction d'archive et sa ligne de commande.

	- la commande de génération du fichier d'archive. L'option "Personnalisé" permet de définir les outils de génération du fichier des clés.

	- la commande de signature d'archive. L'option "Personnalisé" permet de définir l'outil de signature d'archive et sa ligne de commande.




9. La création de l'applet Java est terminée. 


Le fichier correspondant a été créé dans un sous-répertoire correspondant à la configuration de projet Java (sous-répertoire du répertoire EXE du projet).
Pour ouvrir un explorateur de fichiers sur ce répertoire, sous le volet "Accueil", dans le groupe "Général", déroulez l'option ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Rep_Projet.gif) et sélectionnez "Ouvrir le répertoire de génération". 

Vous pouvez tester directement cette applet en lançant la page HTML de test. Cette page permet d'installer l'application Java cliente.

**Remarque** : Pour plus de détails sur les accès aux bases de données depuis une application Java Web Start, consultez [Java et Base de données](../Editeurs/9000008.md).


