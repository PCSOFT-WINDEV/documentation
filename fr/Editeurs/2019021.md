


## Tester et déboguer un projet WINDEV sur le poste de l'utilisateur
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000240"></a>
WINDEV offre plusieurs possibilités pour tester et déboguer un projet directement sur le poste de développement (voir [Tester et déboguer un exécutable WINDEV sur le poste de développement](../Editeurs/2019017.md)). Mais dans certains cas, il est nécessaire de déboguer directement sur le poste de l'utilisateur final (connecté par réseau ou par Internet).

Il est ainsi possible de déboguer, depuis votre bureau de Paris, une application qui s'exécute à Taïwan. Le débogage est effectué sans se déplacer, directement sur la configuration du client.

Deux fonctionnalités sont disponibles :

- Lancement et débogage de l'exécutable sur une machine distante

- Débogage d'une application en cours d'exécution sur une machine distante.




Pour ces deux fonctionnalités, une configuration spécifique de la machine distante est nécessaire.

**Remarque** : Pour déboguer une application WINDEV à distance, l'application WINDEV doit inclure la librairie wd280cpl.dll dans son framework.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Configuration de la machine distante
<a name="configuration_machine_distante_ELTTEXTE000264"></a>
Pour déboguer une application WINDEV sur une machine distante, il est nécessaire de :

- **ouvrir les ports** 27270 et 27280 si un firewall est utilisé. En effet, la communication entre le poste de développement et le poste de l'utilisateur final est réalisée par sockets. Ces ports peuvent être personnalisés. Consultez le paragraphe ["Paramétrage avancé des ports de débogage"](#NOTE6_1) de cette page.

- **installer et lancer l'application WDDebug** sur le poste de l'utilisateur final. WDDebug peut être livré avec l'application (application disponible dans les modules complémentaires lors de la création de l'installation).
	Remarque : sur un poste 64 bits, l'application WDDebug64 doit être lancée. 




**Remarques** : 

- WDDebug (en version 32 et 64 bits) est une application pouvant être livrée indépendamment. Un pack d'installation est disponible dans le sous-répertoire "Install\\WDDebug" du répertoire d'installation de WINDEV (WX280PACKWDDEBUG.exe). Attention : WDDebug ne peut être utilisé que sur les postes utilisant Windows 2000 ou supérieur.

- Sur une session TSE, WDDebug ne liste pas les exécutables des autres sessions disponibles sur la machine. Il n'est pas possible de tracer un exécutable lancé sur la console depuis une session TSE sur la machine.

- Pour lancer WDDebug sur le poste de développement : 

	- la version 32 bits (WDDebug.exe) est disponible dans le répertoire "\\Programmes" du répertoire d'installation de WINDEV. 

	- la version 64 bits (WDDebug64.exe) est disponible dans le répertoire "\\Programmes\\Framework\\Win64x86" du répertoire d'installation de WINDEV. 




- WDDebug64 doit être lancé en mode "Administrateur" si l'exécutable à déboguer est en mode UAC. 



<a name="NOTE2_2"></a>


### Configurer WDDebug
<a name="configurer_wddebug_ELTPARAGRAPHE000059"></a>Pour déboguer une application WINDEV sur une machine distante, l'utilisateur final doit configurer WDDebug :

- l'option "Autoriser le débogage à distance des applications et des services en cours d'exécution" doit être cochée pour permettre le débogage d'une application (ou d'un service) en cours d'utilisation. La liste des applications WINDEV en cours d'exécution est affichée. Il est nécessaire de sélectionner dans cette liste l'application à déboguer.

- l'option "Autoriser le lancement et le débogage à distance d'une application" autorise le lancement et le déboguage à distance de l'application spécifiée. Dans ce cas, il est nécessaire d'indiquer le nom complet de l'application ainsi que sa ligne de commande (si elle existe).

- le bouton "Autoriser le relancement de l'application" permet de transférer les informations concernant une application en cours d'exécution dans les paramètres pour autoriser le lancement de l'application. En effet, il est souvent courant que le développeur demande de pouvoir relancer l'application pour vérifier le bug trouvé.

- l'option "Autoriser le démarrage et le débogage à distance d'un service" autorise le lancement et le débogage à distance du service spécifié.




**Attention** : Il n'est pas possible de déboguer simultanément plusieurs exécutables ou services sur une même machine depuis plusieurs postes distants (par exemple 2 développeurs voulant déboguer deux applications différentes en même temps, sur un même poste distant).

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Lancement et débogage de l'exécutable sur une machine distante
<a name="lancement_debogage_executable_sur_une_machine_distante_ELTTEXTE000294"></a>
Pour lancer et déboguer un exécutable sur une machine distante :

1. Ouvrez le projet concerné sous WINDEV.

2. Contactez votre client afin de configurer son poste.

3. Sous le volet "Projet", dans le groupe "Mode test", déroulez "Mode test" et dans la zone "A distance", sélectionnez "Le lancer".

4. Dans la fenêtre qui s'affiche, saisissez le nom ou l'adresse IP de la machine distante et cliquez sur le bouton "Rafraîchir". Le nom de l'application à déboguer s'affiche. Ce nom correspond à l'application indiquée par l'utilisateur final.

5. Validez.

6. L'application est lancée en mode débogage sur le poste de l'utilisateur. L'utilisateur peut manipuler l'application et vous pouvez suivre le code exécuté grâce au débogueur (par exemple en plaçant des points d'arrêt dans les parties de code posant problème).


**Remarque** : Le code peut donc être déphasé entre le code du projet en cours sous l'éditeur et le code de l'exécutable : le code déphasé est surligné en rose lors du débogage.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Débogage d'un exécutable déjà lancé sur une machine distante
<a name="debogage_executable_deja_lance_sur_une_machine_distante_ELTTEXTE000318"></a>
Pour déboguer un exécutable déjà lancé sur une machine distante :

1. Ouvrez le projet concerné sous WINDEV.

2. Contactez votre client afin de configurer son poste.

3. Sous le volet "Projet", dans le groupe "Mode test", déroulez "Mode test" et dans la zone "A distance", sélectionnez "S'attacher à un exécutable déjà lancé".

4. Dans la fenêtre qui s'affiche, saisissez le nom ou l'adresse IP de la machine distante et cliquez sur le bouton "Rafraîchir". La liste des applications disponibles sur la machine distante s'affiche.

5. Sélectionnez l'application voulue et validez.

6. L'application est en mode débogage.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Lancer le débogueur et arrêter le test
<a name="lancer_debogueur_arreter_test_ELTTEXTE000342"></a>


### Lancer le débogueur
<a name="lancer_debogueur_ELTPARAGRAPHE000145"></a>Pour lancer le débogueur pendant le test de l'exécutable, utilisez l'éditeur :

- Dans le volet "Code", option "Débogueur", cliquez sur "Pause" (![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=main_debog.gif)
).

- Il est également possible de mettre un point d'arrêt sous l'éditeur de code devant la ligne de code voulue. Le débogueur sera automatiquement affiché lorsque la ligne correspondante sera exécutée.



<a name="NOTE5_2"></a>


### Arrêter le test
<a name="arreter_test_ELTPARAGRAPHE000157"></a>Pour arrêter le test, plusieurs méthodes sont possibles :

- 1ère méthode : Fermez l'application en cours de test. WINDEV affiche l'éditeur en cours au moment du lancement du test.

- 2ème méthode : Dans l'éditeur, arrêtez le débogueur (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=EtatIconeArretTest.gif)
 ou Maj + F5).




<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Paramétrage avancé des ports de débogage
<a name="parametrage_avance_des_ports_debogage_ELTTEXTE000372"></a>
Si vous ne voulez pas utiliser les ports de débogage proposés par défaut, il est possible de paramétrer les ports de débogage utilisés directement dans la base de registre.

Les ports sont à paramétrer sur le poste de développement et sur le poste de débogage.

**Sur le poste de développement** : Dans la base de registre "HKEY_CURRENT_USER\\SOFTWARE\\PC SOFT\\WINDEV\\28.0\\Common", créez la valeur "DWORD 32 Bits" suivante : "DBG_Port_COM". Cette valeur contient le numéro du port de communication du poste serveur.

**Sur le poste où le débogage doit être effectué** :

1. Créez si nécessaire la clé "HKEY_CURRENT_USER\\SOFTWARE\\PC SOFT\\WDDEBUG\\28.0". 

2. Dans la base de registre "HKEY_CURRENT_USER\\SOFTWARE\\PC SOFT\\WDDEBUG\\28.0", créez la valeur "DWORD 32 Bits" suivante : "DBG_Port_COM". Cette valeur contient le numéro du port de communication du poste serveur. Elle doit être identique à la valeur indiquée sur le poste de développement.

3. Dans la base de registre "HKEY_CURRENT_USER\\SOFTWARE\\PC SOFT\\WDDEBUG\\28.0", créez la valeur "DWORD 32 Bits" suivante : "DBG_Port_DBG". Cette valeur contient le numéro du port de débogage. 
	C'est ce port qu'il faudra autoriser dans le pare-feu du poste client.




Note : Ces paramètres sont pris en compte au démarrage de WDDebug.


