
## Leçon 4.12. Surveillez l'évolution de vos applications
<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000205"></a>


- Qu'est-ce que le tableau de bord ?

- Tests automatiques.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 20 mn |



| [Leçon précédente](../TutoWD/1410087526.md) | [Sommaire](../TutoWD/1410087560.md) | [Leçon suivante](../TutoWD/1410087528.md) |
| --- | --- | --- |







<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000252"></a>
Le tableau de bord du projet est un élément indispensable à la gestion de projets WINDEV. Le tableau de bord permet d'avoir une vision globale et synthétique de l'état d'avancement d'un projet.

Le tableau de bord est constitué de différents éléments (Widgets) permettant de voir d'un seul coup d'oeil l'état d'un projet.

Dans cette partie, nous nous limiterons à la manipulation des différents éléments du tableau de bord, à la gestion des tests automatiques et à l'optimisation des requêtes.



- Ré-ouvrez si nécessaire le projet que vous avez manipulé dans la leçon précédente. 

	1. Affichez la page d'accueil de WINDEV (Ctrl + &lt;).

	2. Dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 4 - Application complète avec données", double-cliquez sur "Application complète - Exercice".

	3. WINDEV vous propose d'ouvrir le projet que vous avez manipulé dans la leçon précédente. Vous pouvez ouvrir le projet présent sur votre poste ou ouvrir le projet original. Choisissez "Ouvrir la copie locale". 





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=exemple-WD.png) | Corrigé | **Un projet corrigé est disponible**. Ce projet contient les éléments créés dans cette leçon. Pour ouvrir le projet corrigé, dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 4 - Application complète avec données", double-cliquez sur "Application complète - Corrigé". |









- Pour afficher le tableau de bord du projet (si ce n'est pas déjà fait), sous le volet "Projet", dans le groupe "Projet", cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_TBD_GAF.jpg).




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Le tableau de bord
<a name="tableau_bord_ELTTEXTE000294"></a><br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Tableau%20de%20bord%20du%20projet%20-%20HC%20N%B0001.jpg)
Le tableau de bord du projet est composé de différents Widgets. Chaque Widget affiche une ou plusieurs informations concernant le projet.

Par exemple, le Widget "Performances" permet de lancer directement l'analyseur de performances ou d'ouvrir le dernier rapport de performances effectué.

Le Widget "Audit statique et Compilation" permet de voir rapidement si le projet contient des erreurs de compilation.
A tout moment, il est possible d'activer ou non un Widget, d'en ajouter ou d'en supprimer.

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Tests automatiques
<a name="tests_automatiques_ELTTEXTE000318"></a>
Une des fonctionnalités intéressantes du tableau de bord est de renseigner sur les tests qui ont été réalisés sur l'application.

Nous avons déjà fait de nombreux tests d'utilisation, au fur et à mesure de la conception de notre application.

Les tests automatiques sont une catégorie de tests spécifiques. Les tests automatiques permettent d'automatiser certaines manipulations de vos fenêtres. Ces tests sont enregistrés sous forme de scénarios WLangage, facilement modifiables sous l'éditeur de code. Une fois enregistré, le test automatique peut être réexécuté autant de fois que vous voulez, pour tester par exemple l'impact d'une modification sur une fenêtre, une procédure, etc.

Faisons immédiatement un essai ! Nous allons créer un test automatique sur la fenêtre de saisie que nous avons créée au début de cette leçon.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | Les tests automatiques peuvent être réalisés sur des fenêtres, des procédures, des classes. |







- Pour créer un test automatique sur une fenêtre, il suffit de tester la fenêtre :

	1. Ouvrez la fenêtre "FEN_Menu" sous l'éditeur.

	2. Sous le volet "Tests automatiques", dans le groupe "Tests", déroulez "Nouveau" et sélectionnez "Enregistrer un nouveau scénario".

	3. Dans la fenêtre qui s'affiche, cliquez sur "Commencer l'enregistrement".

	4. Le test de la fenêtre se lance.

	5. Cliquez sur le volet d'onglet "Recherche de commandes".

	6. Choisissez le mode de règlement "Carte bancaire".

	7. Cliquez sur "Rechercher".

	8. Fermez la fenêtre par le menu "Menu .. Quitter" et confirmez la fin de l'application.
			

	9. L'enregistrement du test automatique est terminé.

	10. L'éditeur de tests propose d'enregistrer une description pour le test automatique que nous venons de créer. Saisissez le nom du test automatique : "Test de recherche de commandes". Validez.

	11. L'éditeur de tests affiche le code WLangage du test que vous venez d'enregistrer : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Tests%20automatiques%20-%20HC%20N%B0002.jpg&type=thumb)
Le test est actuellement disponible et n'a pas été exécuté (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Tests%20automatiques%20-%20HC%20N%B0002%201.Jpg) devant le nom du test sous l'éditeur).

	12. Le test peut être lancé à tout moment : 

		- Sélectionnez le nom du test sous l'éditeur de tests. 

		- Dans le menu contextuel (clic droit), sélectionnez "Lancer". 




13. Le test s'exécute automatiquement et l'éditeur de tests affiche le résultat dans le volet "Résultats des tests" (le test est passé avec succès dans notre cas).

14. Enregistrez le test si nécessaire (![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Enregistrer_GAF.jpg) ou Ctrl + S)
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | Les fonctions WLangage permettant de réaliser des tests automatiques sont les fonctions PiloteXXX. |








- Nous allons maintenant faire une modification dans notre fenêtre, puis repasser le test. La modification porte sur le champ Bouton "Rechercher". Nous allons le rendre grisé.

	1. Affichez si nécessaire la fenêtre "FEN_Menu".

	2. Sous l'éditeur, cliquez sur le volet d'onglet "Recherche de commandes" et sélectionnez le champ Bouton "Rechercher".

	3. Affichez la description du champ (option "Description" du menu contextuel).

	4. Dans l'onglet "UI", sélectionnez l'option "Grisé".

	5. Validez la fenêtre de description du champ.

	6. Enregistrez la fenêtre.

	7. Retournez sous l'éditeur de tests (cliquez sur le bouton correspondant dans la barre des documents ouverts). 

	8. Lancez à nouveau le test. 

	9. Le test apparaît de nouveau sous l'éditeur de tests. Le volet "Erreurs de compilation" signale plusieurs erreurs de test. 

	10. Affichez à nouveau la fenêtre "FEN_Menu" sous l'éditeur. 

	11. Affichez la description du champ Bouton "Rechercher" (option "Description" du menu contextuel).

	12. Dans l'onglet "UI", sélectionnez l'option "Actif".

	13. Validez la fenêtre de description du champ.

	14. Retournez sous l'éditeur de tests (cliquez sur le bouton correspondant dans la barre des documents ouverts). 

	15. Relancez le test. Le test passe maintenant correctement.







- Une autre possibilité de l'éditeur de tests est la possibilité de modifier ou d'ajouter du code WLangage dans les scénarios de test. Nous allons par exemple ajouter quelques lignes de code afin de vérifier que le champ Table contient au moins un enregistrement.

	1. Affichez l'éditeur de tests si nécessaire (par exemple double-cliquez sur "TEST_Menu" dans le dossier "Tests" du volet "Explorateur de projet").

	2. Ajoutez le code suivant avant la ligne "PiloteMenu("_Menu","OPT_Quitter") :
			
		```wl
		// Si le champ Table ne contient aucun enregistrement
		SI FEN_Menu.TABLE_REQ_RechercheCommandes.Occurrence = 0 ALORS
			// Il faut remonter une erreur 
			TestEcritRésultat(terErreur, ...
				 "Le champ Table est vide après recherche")
		FIN
		```
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_Tests%20automatiques%20-%20HC%20N%B0003.jpg&type=thumb)


	3. Enregistrez le test (![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Enregistrer_GAF.jpg) ou Ctrl + S)

4. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_GO_Fenetre_WD_GAF.jpg). Le test passe avec succès. En effet, le champ Table contient au moins un enregistrement. 




L'éditeur de tests propose de nombreuses fonctionnalités que nous ne pourrons pas aborder dans ce cours :

- la possibilité d'utiliser un jeu de valeurs de test. 

- la définition de paramètres d'entrée et de sortie du test.

- la possibilité de créer une bibliothèque de tests pour tester un exécutable par exemple sur une machine différente du poste de développement.




Pour plus de détails sur les tests automatiques, nous vous conseillons de consulter [Présentation des tests automatiques](../Editeurs/2019025.md).



- Fermez l'éditeur de tests automatiques.




| [Leçon précédente](../TutoWD/1410087526.md) | [Sommaire](../TutoWD/1410087560.md) | [Leçon suivante](../TutoWD/1410087528.md) |
| --- | --- | --- |




