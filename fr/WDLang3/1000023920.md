


## SOAPVersHTTP (Fonction)

***En anglais : SOAPToHTTP***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Construit la requête HTTP d'appel à une fonction d'un Webservice. Cette requête peut être modifiée pour l'adapter si nécessaire aux attentes du Webservice. Elle pourra ensuite être envoyée grâce à la fonction [HTTPEnvoie](../WDLang3/1000021183.md). 


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple
<a class="notetitle" target="_blank" href="$DOC$=1000024437&name=soapvershttp_fonction&product=WD">Voir des exemples supplémentaires</a>

```wl
// Appel classique utilisant l'appel complet à une méthode de Webservice
stParam1 est un Param1
stParam1.Chaîne = "une chaîne"
stParam1.Entier = 2
stRet est un MonResult
stRet = MaFonction(stParam1)
```

```wl
// Récupération du Buffer pour appel via la fonction SoapExécuteXML
stParam1 est un Param1
stParam1.Chaîne = "une chaîne"
stParam1.Entier = 2
cMaRequête est un httpRequête = SOAPVersHTTP(MaFonction, stParam1)
HTTPEnvoie(cMaRequête)
```



```wl
WSRequete est un wsRequête
UneHTTPRequête est un httpRequête
UneHTTPRéponse est un httpRéponse

WWSdebase.Adresse = ...
	"http://Serveur.mondomaine.com/WWSDEBASE_WEB/awws/WWSdebase.awws"
UneHTTPRequête = SOAPVersHTTP(WWSdebase._Renvoyer__2_Param_type_chaine, 
				WSRequete, "MaChaine1", "MaChaine2")
SI PAS ErreurDétectée() ALORS
	UneHTTPRéponse = HTTPEnvoie(UneHTTPRequête)
	SI PAS ErreurDétectée() ALORS
		Info("HTTPEnvoie(UneHTTPRequête) = '" + UneHTTPRéponse.Contenu + "'")
	SINON	
		Erreur("HTTPEnvoie(UneHTTPRequête).'" + ErreurInfo() + "'")
	FIN
SINON	
	Erreur("SOAPVersHTTP().'" + ErreurInfo() + "'")
FIN
```



<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = SOAPVersHTTP(<Fonction> [, <Requête HTTP à utiliser>] [, <Paramètre 1> [... [, <Paramètre N>]]])`
---

**`<Résultat> : (Variable de type httpRequête)`**

Variable de type [httpRequête](../WDLang3/1000021158.md) correspondant à la requête HTTP générée. 

**`<Fonction> : (Chaîne de caractères)`**

Nom de la fonction pour laquelle la requête SOAP doit être construite. Cette fonction est une fonction du WDSL du Webservice préalablement importé dans le projet. 

**`<Requête HTTP à utiliser> : (Variable optionnelle de type wsRequête)`**

Nom de la variable de type [wsRequête](../WDLang3/1000020577.md) correspondant à une requête HTTP contenant les informations complémentaires à utiliser. 

**`<Paramètre 1> : (Variant optionnel)`**

Premier paramètre attendu par la fonction. 



**`<Paramètre N> : (Variant optionnel)`**

Nième paramètre attendu par la fonction. 



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques
Les Webservices ont un spectre très large et tous ne respectent pas la norme. La facilité d'utilisation d'un Webservice tiers dans une application ou un site dépend de son concepteur. Cette fonction permet de récupérer le contenu de la requête HTTP qui part au serveur tiers de Webservice. Il est ainsi possible de modifier le contenu XML, pour l'adapter aux attentes du Webservice.

<a name="XComposante"></a>

## Composante :
wd280xml.dll
