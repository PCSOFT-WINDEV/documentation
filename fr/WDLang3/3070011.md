
## SocketCrée (Fonction)

***En anglais : SocketCreate***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Créé un socket. Un socket est une ressource de communication utilisée par les applications pour communiquer d'une machine à une autre sans se soucier du type de réseau.

**Remarques** :

- Cette fonction doit être appelée sur le poste serveur utilisé pour la communication. Si le poste client utilise une application WINDEV pour se connecter à cet socket, cette application devra utiliser la fonction [SocketConnecte](../WDLang3/3070016.md).

- **Sockets SSL** : Pour créer un socket de type SSL, utilisez la fonction [SocketCréeSSL](../WDLang3/1000017041.md).

- **Sockets de type UDP** : Pour créer un socket de type UDP, utilisez la fonction [SocketCréeUDP](../WDLang3/3070019.md).











<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple
<a class="notetitle" target="_blank" href="$DOC$=1000003070011&name=socketcree_fonction&product=WD">Voir des exemples supplémentaires</a>

```wl
SI SocketCrée("Serveur", 8000) = Faux ALORS
	Erreur("erreur création " + ErreurInfo(errMessage))
FIN
```



<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = SocketCrée(<Nom du socket> , <Numéro de port> [, <Adresse>])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la fonction a réussi, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. En cas d'erreur, il est possible de connaître le détail de l'erreur grâce à la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Nom du socket> : (Chaîne de caractères)`**

Nom à donner au socket. Ce nom sera utilisé dans toutes les fonctions socket. Attention : le nom du socket est "case-sensitive".

**`<Numéro de port> : (Entier)`**

Numéro de port à donner au socket. Ce numéro doit être compris entre 1 et 65000. Ce numéro sera indiqué lors de la connexion des postes client au poste serveur.
![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) Il est nécessaire d'être "root" pour créer un socket sur un port inférieur ou égal à 1024 (être "root" signifie être l'utilisateur qui a toutes les permissions sur le système). 

**`<Adresse> : (Chaîne de caractères optionnelle)`**

Adresse IP sur laquelle le socket doit être créé sur le poste en cours. Si le poste en cours est associé à plusieurs adresses IP (ou plusieurs cartes réseau), ce paramètre permet de choisir l'adresse IP à associer au socket.

Cette adresse IP peut être donnée sous la forme :

- adresse IP au format XXX.XXX.XXX.XXX ( par exemple 125.5.110.100).

- adresse IP contenant le nom du serveur (par exemple www.pcsoft.fr). Cette syntaxe est conseillée.




![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) L'adresse IP peut également être obtenue par la fonction [NetAdresseIP](../WDLang3/3056023.md).



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Re-création de socket
<a name="recreation_socket_ELTPARAGRAPHE000110"></a>Si un socket n'est pas fermé correctement par la fonction [SocketFerme](../WDLang3/3070015.md) (re-démarrage du poste par exemple), la recréation du socket peut être relativement longue. Il est en effet nécessaire d'attendre que le système libère le socket.


<a name="NOTE0_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Réutilisation d'une adresse déjà utilisée
<a name="reutilisation_une_adresse_deja_utilisee_ELTPARAGRAPHE000123"></a>Par défaut, la fonction **SocketCrée** permet de réutiliser une adresse déjà utilisée (par l'application elle-même ou par une autre application). Pour ne pas autoriser ce fonctionnement, il suffit de saisir le code suivant :


```wl
Socket.Option = SocketAdresseUnique
```


**Remarque** : Cette option permet donc également de savoir si une adresse ou un port est déjà utilisé. Dans ce cas, la fonction **SocketCrée** renvoie une erreur.
<a name="NOTE0_3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Connexion à un port infrarouge
<a name="connexion_port_infrarouge_ELTPARAGRAPHE000142"></a>Pour se connecter au socket utilisant un port infrarouge :

1. Créez un socket utilisant le port infrarouge sur le poste serveur (fonction [SocketCréeInfraRouge](../WDLang3/3070012.md) dans une application WINDEV).

2. Dans l'application cliente (application WINDEV), utilisez la fonction [SocketConnecteInfraRouge](../WDLang3/3070018.md) pour se connecter à ce socket.





<a name="NOTE0_4"></a>
![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Fonctionnalité d'application requise
<a name="fonctionnalite_application_requise_ELTPARAGRAPHE000164"></a>L'utilisation de cette fonction entraîne la déclaration d'une fonctionnalité d'application dans l'assistant de génération de l'application.

Fonctionnalité requise : Réseaux domestiques et professionnels

Cette fonctionnalité permet aux applications d'utiliser des accès entrants et sortants vers des réseaux domestiques et professionnels. 



<a name="XComposante"></a>

## Composante :
wd280com.dll
