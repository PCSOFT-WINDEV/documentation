
## WebserviceParamètre (Fonction)

***En anglais : WebserviceParameter***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Permet de récupérer la valeur d'un paramètre lors de l'appel d'une requête d'un Webservice (SOAP ou REST).

**Remarques** : 

- Les paramètres peuvent être passés à un Webservice REST selon 2 méthodes :

	- Passage dans l'URL (URL de type "http://....?Param1=valeur1&Param2=valeur2..."). Pour récupérer la valeur du paramètre, utilisez la syntaxe 1 ou 2. 

	- Passage dans les données brutes de la requête (méthode POST, PUT, ...). Pour récupérer la valeur du paramètre, utilisez la syntaxe 3. 




- Dans le cas d'un Webservice SOAP, les paramètres sont passées dans les données brutes de la requête (méthode POST, PUT, ...). Pour récupérer la valeur du paramètre, utilisez la syntaxe 3. 



<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Webservice REST : récupère la liste des clients 
// avec un filtre optionnel sur le département.
// GET + /Clients[?departement=xxx]

sDépartement est une chaîne

// Utilisation de la syntaxe 1 
sDépartement = WebserviceParamètre("departement") 

// Utilisation de la syntaxe 2
// sDépartement = WebserviceParamètre(1)

SI sDépartement <> "" ALORS
	HFiltre(Client, Département, sDépartement)
FIN
```
<a name="Exemple2"></a>

```wl
// Webservice REST : récupère la liste des clients 
// selon des filtres indiqués en POST en JSON.
// POST + /Clients

sFiltreClient est une chaîne
vParametres est un Variant 

// Récupère la valeur du paramètre selon la syntaxe 3
sFiltreClient = WebserviceParamètre(paramBuffer)

// Conversion de la valeur du paramètre dans un Variant 
// pour analyse du contenu
vParametres = JSONVersVariant(sFiltreClient)
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

### Récupérer la valeur d'un paramètre identifié par son nom (Webservice REST uniquement)

`<Valeur du paramètre> = WebserviceParamètre(<Nom du paramètre> [, <Encodage>])`
---

**`<Valeur du paramètre> : (Chaîne de caractères)`**

Correspond à : 

- Valeur du paramètre spécifié.

- Chaîne vide ("") si le paramètre n'existe pas ou n'a pas de valeur.




**`<Nom du paramètre> : (Chaîne de caractères)`**

Nom du paramètre dont la valeur doit être renvoyée.

**`<Encodage> : (Constante optionnelle de type Entier)`**

Mode de gestion de l'encodage de la valeur du paramètre :



|   |   |
| --- | --- |
| *paramAvecDécodage*<br>(Valeur par défaut) | La valeur du paramètre est automatiquement décodée par WEBDEV selon la norme d'encodage/décodage des URL. |
| *paramSansDécodage* | La valeur brute du paramètre est renvoyée. Aucun décodage n'est effectué par WEBDEV. Cette constante peut être utilisée lorsque l'encodage de l'URL ne respecte pas les normes utilisées par WEBDEV (par exemple, problème de gestion du signe +, ...) |




<a name="SYNTAXE2"></a>

### Récupérer la valeur d'un paramètre identifié par son indice (Webservice REST uniquement)

`<Valeur du paramètre> = WebserviceParamètre(<Indice du paramètre> [, <Encodage>])`
---

**`<Valeur du paramètre> : (Chaîne de caractères)`**

Correspond à : 

- Valeur du paramètre spécifié. Cette valeur est de la forme &lt;Nom du paramètre&gt; = &lt;Valeur&gt;. 

- Chaîne vide ("") si le paramètre n'existe pas.




**`<Indice du paramètre> : (Entier)`**

Indice du paramètre dont la valeur doit être renvoyée.

**`<Encodage> : (Constante optionnelle de type Entier)`**

Mode de gestion de l'encodage de la valeur du paramètre :



|   |   |
| --- | --- |
| *paramAvecDécodage*<br>(Valeur par défaut) | La valeur du paramètre est automatiquement décodée par WEBDEV selon la norme d'encodage/décodage des URL. |
| *paramSansDécodage* | La valeur brute du paramètre est renvoyée. Aucun décodage n'est effectué par WEBDEV. Cette constante peut être utilisée lorsque l'encodage de l'URL ne respecte pas les normes utilisées par WEBDEV (par exemple, problème de gestion du signe +, ...) |




<a name="SYNTAXE3"></a>

### Récupérer des données spécifiques (données brutes de la requête, envoyées par une méthode POST, PUT, etc.) 

`<Résultat> = WebserviceParamètre(<Type du message>)`
---

**`<Résultat> : (Buffer)`**

Valeur du type de message demandé :

- Données reçues. 

- Buffer vide si aucune donnée. 


Remarque : Une erreur fatale est déclenchée si la requête ne renvoie pas de données (méthode DELETE par exemple).

**`<Type du message> : (Constante de type entier)`**

Type des données à récupérer : 


|   |   |
| --- | --- |
| *paramBuffer* | Récupère les données brutes reçues (envoyées par les méthodes POST, PUT, ...). |





<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Sessions prélancées
<a name="sessions_prelancees_ELTPARAGRAPHE000103"></a>Dans le cas où votre projet utilise les sessions prélancées, cette fonction ne doit pas être utilisée dans l'événement "Initialisation" du projet. Cette fonction doit être utilisée uniquement dans l'événement "Initialisation du projet après connexion au site". 




### Passage de paramètres dans les données brutes de la requête (méthode POST, PUT, ...)
<a name="passage_parametres_dans_les_donnees_brutes_requete_methode_post_put_ELTPARAGRAPHE000109"></a>Pour transmettre des paramètres dans les données brutes de la requête (méthode POST, PUT, ...) depuis une application WINDEV ou WEBDEV, il est par exemple possible d'utiliser la propriété **Contenu** d'une variable de type [restRequête](../WDLang3/1000021481.md). 

<a name="XComposante"></a>

## Composante :
wd280awws.dll
