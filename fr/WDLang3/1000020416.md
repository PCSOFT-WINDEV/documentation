
## NFCLitTag (Fonction)

***En anglais : NFCReadTag***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Déclenche la lecture d'un tag (ou puce) NFC ou active la détection de tags NFC pour la fenêtre en cours.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Lecture d'un tag NFC en mode bloquant
tag est un nfcTag
tag = NFCLitTag()
SI PAS ErreurDétectée ALORS
	Info(ChaîneConstruit("Lecture d'un tag NFC de type %1", tag..Type))
	POUR TOUTE donnée de tag.Donnée
		SELON donnée.Type
			CAS nfcTexte
				Info(donnée.Contenu)
			CAS nfcURI
				SI ChaîneCommencePar(donnée.Contenu, "http") ALORS
					NavigateurLanceAppli(donnée.Contenu)
				FIN	
			CAS nfcMédia
				SI donnée.TypeMIME ~= "image/png" ALORS
					fSauveBuffer(CompleteRep(SysRepCarteStockage()) + ...
						"image.png", donnée.Contenu)
				FIN				
		FIN
	FIN
FIN
```


<a name="Exemple2"></a>

```wl
// Lecture d'un tag NFC en non bloquant
SI PAS NFCLitTag(LectureTagNFC) ALORS
	Erreur("Echec du lancement de la détection NFC.", ErreurInfo())
FIN

PROCEDURE INTERNE LectureTagNFC(tag est un nfcTag)
	Info(ChaîneConstruit("Tag NFC de type %1 détecté.", tag.Type))
	// Arrêt de la détection
	RENVOYER Vrai
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>
<a name="SYNTAXE2"></a>

### Lecture d'un Tag NFC en mode non bloquant

`<Résultat> = NFCLitTag(<Procédure WLangage>)`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la détection de tag NFC a été déclenchée, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. En cas d'erreur, la variable [ErreurDétectée](../WDLang1/3087001.md) est à <u><u><u><u>Vrai</u></u></u></u>. Pour plus de détails sur l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage ("callback") appelée lorsqu'un tag NFC a été lu. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure> (<Tag>)
```


où &lt;Tag&gt; est une variable de type [nfcTag](../WDLang3/1000020411.md) contenant les informations lues dans le tag NFC. 

Remarques :

- Les paramètres de cette procédure sont optionnels. Il n'est pas nécessaire de passer des paramètres à cette procédure. En effet, ces paramètres sont renseignés automatiquement à chaque appel.

- Si la procédure retourne <u><u><u><u>Vrai</u></u></u></u>, la détection de tag NFC sera automatiquement stoppée après la lecture. 

- Si la procédure retourne <u><u><u><u>Faux</u></u></u></u> ou ne retourne pas de valeur, la détection restera active jusqu'à la fermeture de la fenêtre dans laquelle la procédure a été déclenchée.






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques
<a name="NOTE0_2"></a>


### Utilisation en mode non bloquant (Syntaxe 2)
<a name="utilisation_mode_non_bloquant_syntaxe_2_ELTPARAGRAPHE000128"></a>L'appel de la fonction **NFCLitTag** déclenche l'activation de la détection de tags NFC pour la fenêtre en cours au moment de l'appel.

La détection sera active uniquement lorsque cette fenêtre est au premier plan de l'application. 

Si la fenêtre est fermée, la détection sera stoppée et il sera nécessaire de la relancer par un appel à la fonction **NFCLitTag**. 

Si aucune fenêtre n'est en cours au moment de l'appel de la fonction **NFCLitTag**, une erreur fatale sera déclenchée.
<a name="NOTE0_3"></a>


### Remarques diverses
<a name="remarques_diverses_ELTPARAGRAPHE000150"></a>

- Les fonctions NFC ne peuvent pas être utilisées dans le simulateur ou dans l'émulateur.







<a name="NOTE0_4"></a>


### Permissions requises 
<a name="permissions_requises_ELTPARAGRAPHE000163"></a>L'utilisation de cette fonction entraîne la modification des permissions requises par l'application. 

Permissions requises :  

- NFC : Permet aux applications d'effectuer des opérations d'entrée/sortie par la technologie NFC.

- VIBRATE : Permet d'accéder à la fonction vibreur.



<a name="NOTE0_5"></a>
<a name="NOTE0_6"></a>








- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSysteme.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Système** <br>Cette application est un exemple didactique montrant quelques unes des fonctionnalités de WINDEV Mobile pour Android/iOS.<br>Les fonctions système utilisées sont : <br>- NFC<br>- Champ Multimédia<br>- Luminosité<br>- Volume<br>- WIFI<br>- Bluetooth<br>- Toast<br>- Boussole<br>- Accéléromètre<br>- Champ caméra<br>- LED<br>- Vibrations<br>- Notifications<br>- Fonctions de dessin<br>- Internet



<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280android.jar


