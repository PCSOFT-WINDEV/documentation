
## notificationAction (Type de variable)

***En anglais : notificationAction***
				



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Les notifications (décrites par une variable de type [Notification](../WDLang3/1000019441.md)) ont une action par défaut qui s'exécute lorsque l'utilisateur clique sur la notification. Cette action est définie par la propriété **ActionClic** du type [Notification](../WDLang3/1000019441.md). 

A partir d'Android 4.1 (Jelly Bean, api level 16), il est possible d'associer des actions supplémentaires à une notification (propriété **ActionSupplémentaire**). Ces actions se présentent sous la forme de boutons situés en dessous du message de la notification.

Exemple de notification avec deux actions supplémentaires, "Répondre" et "Supprimer" : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=NotifAction.gif)


**Remarques** : 

- Lorsque la notification est affichée sur un objet connecté comme une montre (Android Wear), les actions supplémentaires sont accessibles par un mouvement de balayage vers la gauche sur l'écran. 
	Dans ce cas, chaque action supplémentaire est affichée sur la totalité de l'écran. 

- Sur un téléphone ou une tablette, les boutons correspondant aux actions supplémentaires ne sont visibles que lorsque la notification est déroulée. Les notifications affichées sont automatiquement enroulées ou déroulées par le système en fonction de la place disponible dans la liste. L'utilisateur a toutefois la possibilité d'enrouler ou dérouler une notification en effectuant un geste de balayage vers le haut (enrouler) ou vers le bas (dérouler) à l'aide de deux doigts.

- Si la notification est affichée sur un appareil en version inférieure à Android 4.1, les actions supplémentaires seront ignorées.




Le type **notificationAction** permet de définir toutes les caractéristiques avancées d'une action supplémentaire associée à une notification. Les caractéristiques de cette action supplémentaire peuvent être définies et modifiées à l'aide de différentes propriétés WLangage. 

**Remarque** : Pour plus de détails sur la déclaration de ce type de variable et l'utilisation des propriétés WLangage, consultez [Déclaration d'une variable](../Motscles/1514032.md).
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
n est une notification
n.Titre = "Nouveau message"
n.Message = "Commande n°54781-4551"
n.MessageSecondaire = "client@societe.com"
n.GrandeIcone = "enveloppe.png"
n.ActionSupplémentaire[1].LibelléAction = "Répondre"
n.ActionSupplémentaire[1].Icone = "repondre.png"
n.ActionSupplémentaire[1].ActionClic = "procRepondre"
n.ActionSupplémentaire[2].LibelléAction = "Supprimer"
n.ActionSupplémentaire[2].Icone = "supprimer.png"
n.ActionSupplémentaire[2].ActionClic = "procSupprimer"
NotifAjoute(n)
```

```wl
// Notification avec demande de réponse pour les objets connectés
n est une notification
n.Titre = "Nouveau message"
n.Message = "Commande n°54781-4551"
n.MessageSecondaire = "client@societe.com"
n.GrandeIcone = "enveloppe.png"
n.ActionSupplémentaire[1].LibelléAction = "Répondre"
n.ActionSupplémentaire[1].Icone = "repondre.png"
n.ActionSupplémentaire[1].ActionClic = "procRepondre"
n.ActionSupplémentaire[1].ChoixReponse = notifRéponseLibre + RC + "Merci pour votre commande"
n.ActionSupplémentaire[1].LibelléQuestion = "Quelle est votre réponse ?"
n.ActionSupplémentaire[2].LibelléAction = "Supprimer"
n.ActionSupplémentaire[2].Icone = "supprimer.png"
n.ActionSupplémentaire[2].ActionClic = "procSupprimer"
NotifAjoute(n)
```

```wl
PROCEDURE procRépondre(n est une Notification, sReponse est une chaîne)
Email.Sujet = "RE : " + n.Message
Email.Destinataire[1] = n.MessageSecondaire
Email.NbDestinataire = 1
SI sReponse <> "" ALORS
	Email.Message = sReponse
FIN
EmailLanceAppli()
```





<a name="NOTE0"></a>

## Remarques
<a name="NOTE0_1"></a>


### Propriétés spécifiques à la description des variables de type notificationAction
<a name="proprietes_specifiques_description_des_variables_type_notificationaction_ELTPARAGRAPHE000052"></a>Les propriétés suivantes peuvent être utilisées pour manipuler une action supplémentaire :

| Nom de la propriété | Type manipulé | Effet |
| --- | --- | --- |
| ActionClic | Valeur ou Nom de procédure | Nom de la procédure WLangage appelée lorsque l'utilisateur clique sur le bouton correspondant à l'action. <br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure> (<Notification>, <Réponse>)</code></pre><br><br><br>où : <br><br>- &lt;Notification&gt; est une variable de type [Notification](../WDLang3/1000019441.md) correspondant à la notification associée à l'action sélectionnée. <br>	Si la procédure WLangage retourne <u><u><u><u>Vrai</u></u></u></u> ou ne retourne pas de valeur, la notification sera automatiquement supprimée de la barre système. <br>	Si la procédure retourne <u><u><u><u>Faux</u></u></u></u>, la notification restera affichée. <br>	Si la valeur de la propriété **ActionClic** vaut chaîne vide (""), aucune action ne sera effectuée lors du clic et la notification sera automatiquement effacée après le clic.<br><br>- &lt;Réponse&gt; est une chaîne de caractère renseignée avec la réponse donnée par l'utilisateur si les conditions suivantes sont remplies : <br><br>	- l'action a été exécutée depuis un objet connecté, <br><br>	- la propriété **ChoixRéponse** a été renseignée. <br>			Dans le cas contraire, &lt;Réponse&gt; vaut chaîne vide ("").<br><br><br><br><br><br><br><br>**Remarque** : Il est conseillé d'utiliser des procédures globales. Si la procédure est une procédure locale, il est nécessaire de préfixer le nom de cette procédure par le nom complet de l'objet auquel appartient la procédure. Par exemple, pour une procédure locale de fenêtre : "FEN_Fenêtre1.MaProcedure". |
| ChoixRéponse | Chaîne de caractères | Correspond aux différentes réponses prédéfinies à proposer à l'utilisateur sur du clic sur l'action. Les réponses doivent être séparées par un Retour Chariot (RC).<br><br>Pour autoriser l'utilisateur à saisir une réponse libre, utilisez la constante *notifRéponseLibre*. Cette constante peut être combinée avec une ou plusieurs réponses prédéfinies.<br><br>Remarque : Le choix des réponses n'est proposé à l'utilisateur que lorsque l'action est exécutée depuis un objet connecté fonctionnant sous Android Wear. Si l'action est exécutée depuis un téléphone ou une tablette, la procédure spécifiée dans la propriété **ActionClic** sera directement appelée. |
| Icone | Chaîne de caractères | Chemin de l'icône représentant l'action. **Cette propriété est obligatoire** : l'action sera ignorée si aucune icône n'est associée à l'action.<br><br>**Attention** : A partir d'Android 7.0, les icônes des actions des notifications ne sont plus affichées. |
| LibelléAction | Chaîne de caractères | Libellé décrivant l'action à effectuer. **Cette propriété est obligatoire** : l'action sera ignorée si aucun libellé n'est associé à l'action. |
| LibelléQuestion | Chaîne de caractères | Libellé du message affiché pour demander une réponse à l'utilisateur. Ce libellé est utilisé lorsque la propriété **ChoixRéponse** a été renseignée. <br><br>Si cette propriété n'est pas renseignée, un message système sera affiché. |




<a name="NOTE0_2"></a>


### Divers
<a name="divers_ELTPARAGRAPHE000137"></a>Pour réinitialiser le contenu d'une variable de type **notificationAction**, il est possible d'utiliser la fonction [VariableRAZ](../WDLang1/3013069.md).




