
## Procédure WLangage appelée par la fonction WebSocketClientConnecte



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Procédure WLangage (également nommée "callback") appelée par la fonction [WebSocketClientConnecte](../WDLang3/1410087751.md) lorsque la connexion au serveur a été effectuée. 

Cette procédure est appelée dans les cas suivants : 

- lors de la connexion au serveur, 

- lors de la réception des données, 

- lors de la fermeture du socket, 

- lors d'une erreur. 




ATTENTION : la procédure est appelée dans le thread principal de l'application :

- Il est possible d'accéder aux champs de l'UI depuis la procédure.

- Le traitement ne doit pas être trop long au risque de bloquer l'utilisateur. 



<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
WebSocketClientConnecte("client", WebSocketClientConnecte_Callback, "monserveur.com")

PROCÉDURE INTERNE WebSocketClientConnecte_Callback(nEvénement, sMessage)
	SELON nEvénement
		CAS SocketOuverture
			SocketEcrit("client", "Envoi message depuis le navigateur.")
		
		CAS SocketMessage
			Info("Réception d'un message serveur : " + sMessage)
			
		CAS SocketFermeture
			Info("Fermeture du socket", sMessage)
			
		CAS SocketErreur
			Erreur("Erreur du socket")
	FIN
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`WebSocketClientConnecte_Callback(<Evénement> , <Message>)`
---

**`<Evénement> : (Constante de type Entier)`**

Correspond à une des constantes suivantes :



|   |   |
| --- | --- |
| *SocketErreur* | Une erreur s'est produite durant la communication avec le serveur. Le paramètre &lt;Message&gt; est toujours vide. |
| *SocketFermeture* | Le socket est fermé. Le paramètre &lt;Message&gt; contient un code qui indique la raison de la fermeture. |
| *SocketMessage* | Le socket a reçu un message. Le paramètre &lt;Message&gt; contient les données relatives au message. |
| *SocketOuverture* | Le socket est connecté au serveur. Il est possible d'envoyer des messages.  |



**`<Message> : (Chaîne de caractères)`**

Message reçu en réponse du serveur en fonction de l'&lt;Evénement&gt;.







<a name="XComposante"></a>

## Composante :
wd280com.dll
