
## WebserviceAdresseIPClient (Fonction)

***En anglais : WebserviceClientIPAddress***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Renvoie l'adresse IP du poste utilisant et appelant le Webservice.

Attention : Le Webservice doit être hébergé par le serveur d'application WEBDEV. 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Renvoie l'adresse IP du consommateur
AdresseClient est une chaîne
AdresseClient = WebserviceAdresseIPClient()
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = WebserviceAdresseIPClient([<Type d'adresse>])`
---

**`<Résultat> : (Chaîne de caractères)`**

Adresse IP du poste de l'internaute : 

- Si la connexion est en IPv4, la réponse est au format "xxx.xxx.xxx.xxx" (Par exemple : 195.196.100.1). 

- Si la connexion est en IPv6, la réponse est au format IPv6.




**`<Type d'adresse> : (Booléen optionnel)`**



- <u><u><u><u>Vrai</u></u></u></u> pour récupérer l'adresse originale indiquée dans l'entête HTTP, 

- <u><u><u><u>Faux</u></u></u></u> (valeur par défaut) pour récupérer l'adresse IP dans la variable d'environnement "REMOTE_ADDR" définie par le serveur Web.






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Gestion du type d'adresse
<a name="gestion_type_adresse_ELTPARAGRAPHE000046"></a>L'adresse renvoyée par la fonction **WebserviceAdresseIPClient** peut ne pas correspondre à l'adresse du client (par exemple si un proxy non transparent ou un Load Balancer est utilisé). Dans ce cas, la fonction **WebserviceAdresseIPClient** renvoie l'adresse IP du proxy ou du Load Balancer.

Si l'adresse originale est demandée, la fonction **WebserviceAdresseIPClient** tente de lire l'adresse indiquée dans les entêtes HTTP. En effet, la majorité des proxy fournissent l'adresse originale dans les entêtes HTTP. Cependant, cette adresse est à manipuler avec précaution car elle n'est pas fiable et peut être totalement erronée.
<a name="NOTE0_2"></a>


### Cas particuliers
<a name="cas_particuliers_ELTPARAGRAPHE000064"></a>

- Si l'adresse originale n'est pas trouvée ou invalide (adresse trop longue par exemple), l'adresse "normale" est envoyée.

- L'adresse IP du serveur peut être obtenue grâce à la fonction [NetAdresseIP](../WDLang3/3056023.md).




<a name="XComposante"></a>

## Composante :
wd280awws.dll
