
## SocketEcrit (Fonction)

***En anglais : SocketWrite***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Ecrit un message destiné à un autre socket. Cette fonction peut être utilisée sur un poste client ou un poste serveur.

**Rappel** : Un socket est une ressource de communication utilisée par les applications pour communiquer d'une machine à une autre sans se soucier du type de réseau.






<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
SI SocketEcrit("Serveur", "hello world") = Vrai ALORS
	Message("message envoyé")
FIN
```




<a name="Exemple2"></a>


![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 
```wl
SI SocketEcrit("Serveur", "hello world", "www.info.fr", 2005) = Vrai ALORS
	Message("Message envoyé")
FIN
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

### Écrire dans un socket

`<Résultat> = SocketEcrit(<Nom du socket> , <Message>)`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la fonction a réussi, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. En cas d'erreur, il est possible de connaître le détail de l'erreur grâce à la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Nom du socket> : (Chaîne de caractères)`**

Nom du socket qui a reçu le message. 
**Dans une application WINDEV, ce nom a été défini sur le serveur** :

- soit par la fonction [SocketCrée](../WDLang3/3070011.md), [SocketCréeSSL](../WDLang3/1000017041.md) ou [SocketCréeInfraRouge](../WDLang3/3070012.md) (cas d'un serveur simplifié)

- soit par la fonction [SocketAccepte](../WDLang3/3070004.md) (cas d'un serveur standard).

- soit par la fonction [SocketConnecte](../WDLang3/3070016.md) (site WEBDEV).




**Dans une application WINDEV, sur le client**, ce nom a été défini par la fonction [SocketConnecte](../WDLang3/3070016.md), [SocketConnecteSSL](../WDLang3/1000017042.md) ou [SocketConnecteInfraRouge](../WDLang3/3070018.md).

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Attention le nom du socket est "case-sensitive".

**`<Message> : (Chaîne de caractères ou buffer)`**

Message à transmettre. Le format du message peut être défini avec la fonction [SocketChangeModeTransmission](../WDLang3/3070005.md).  


<a name="SYNTAXE2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 
### Écrire dans un socket UDP

`<Résultat> = SocketEcrit(<Nom du socket> , <Message> , <Adresse de destination> , <Numéro de port>)`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la fonction a réussi, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. En cas d'erreur, il est possible de connaître le détail de l'erreur grâce à la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Nom du socket> : (Chaîne de caractères)`**

Nom du socket qui a reçu le message. Ce nom a été défini par la fonction [SocketCréeUDP](../WDLang3/3070019.md).

**`<Message> : (Chaîne de caractères)`**

Message à transmettre. Le format du message peut être défini avec la fonction [SocketChangeModeTransmission](../WDLang3/3070005.md).

**`<Adresse de destination> : (Chaîne de caractères)`**

Adresse du poste destination. Cette adresse peut être donnée sous la forme :

- adresse IP au format XXX.XXX.XXX.XXX ( par exemple 125.5.110.100).

- URL contenant le nom du serveur (par exemple www.pcsoft.fr). Cette syntaxe est conseillée.

- adresse IP obtenue par la fonction [NetAdresseIP](../WDLang3/3056023.md).




**Socket UDP** : Le protocole UDP est un protocole "non connecté". Il est nécessaire de préciser la destination pour chaque envoi. Cette adresse peut être un masque de sous-réseau ce qui permet de diffuser le message sur tous les postes connectés avec ce masque de sous-réseau.

**`<Numéro de port> : (Entier)`**

Numéro de port du socket destination. 
Si vous utilisez un socket associé à un protocole prédéfini, utilisez le numéro de port associé au protocole. 
Si ce paramètre n'est pas spécifié, le numéro pris en compte correspond au dernier numéro de port destination utilisé pour l'écriture pour ce socket.  



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Communication avec des automates ou des applications non WINDEV
<a name="communication_avec_des_automates_des_applications_non_windev_ELTPARAGRAPHE000180"></a>Pour simplifier les échanges des données par socket, un mode de transmission est initialisé par défaut. 

Dans le cas d'une communication avec un module externe (application non WINDEV, automate, ...), ce mode de transmission peut empêcher le bon fonctionnement des communications. 

La fonction [SocketChangeModeTransmission](../WDLang3/3070005.md) permet de changer ce mode de transmission : la constante *SocketSansMarqueurFin* permet de ne pas modifier les trames lues et écrites.
<a name="NOTE0_2"></a>


### Transmission entre deux postes utilisant des formats de chaînes de caractères différents (UNICODE et ANSI)
<a name="transmission_entre_deux_postes_utilisant_des_formats_chaines_caracteres_differents_unicode_ansi_ELTPARAGRAPHE000194"></a>Lors de la transmission de messages entre deux postes utilisant un format de chaînes de caractères différent (par exemple Windows (ANSI) et Windows Mobile (UNICODE)), certaines conversions peuvent être nécessaires. Ces conversions peuvent être effectuées grâce aux fonctions [AnsiVersUnicode](../WDLang1/3024002.md) et [UnicodeVersAnsi](../WDLang1/3024025.md). 

<a name="XComposante"></a>

## Composante :
wd280com.dll
