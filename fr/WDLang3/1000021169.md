


## Dialoguer avec un serveur SSH (syntaxe préfixée)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Principe
<a name="principe_ELTTEXTE000070"></a>
Secure Shell (SSH) est un protocole de communication sécurisé. Les données échangées sont sécurisées à l'aide de clés de chiffrement.

Un serveur peut supporter le protocole sécurisé SSH pour recevoir des commandes à distance. 

WINDEV et WEBDEV proposent des fonctions permettant de se connecter, d'ouvrir une session, de transmettre des commandes à exécuter et de récupérer le résultat de ces commandes.

Le protocole géré est SSH-2. 

Il existe deux méthodes pour communiquer avec un serveur SSH :

- Envoyer directement des commandes Shell,

- Dialoguer avec un serveur SSH.






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000131"></a>


### Envoi direct de commandes
<a name="envoi_direct_commandes_ELTPARAGRAPHE000154"></a>L'envoi directe de commandes se fait à l'aide de la fonction [SSHCommande](../WDLang3/1000021143.md). Les paramètres de connexion au serveur SSH doivent être décrits dans une variable de type [sshSession](../WDLang3/1000021157.md).

Exemple : 

```wl
cMaSession est une sshSession
buffSortie est un Buffer
cMaSession.Adresse = "127.0.0.1"
cMaSession.Port = 22
cMaSession.Utilisateur = "login"
cMaSession.MotDePasseUtilisateur = "pass"
nExitCode est un entier
sSortie est une chaîne ANSI
sSortieErr est une chaîne ANSI
(nExitCode, sSortie, sSortieErr) = SSHCommande(cMaSession, SAI_Commande)
SI ErreurDétectée ALORS
	Erreur(ErreurInfo(errComplet))
	RETOUR
FIN
SAI_ExitCode = nExitCode
SAI_StdOut = UTF8VersChaîne(sSortie)
SAI_StdErr = UTF8VersChaîne(sSortieErr)
```

<a name="NOTE2_2"></a>


### Dialogue avec un serveur SSH
<a name="dialogue_avec_serveur_ssh_ELTPARAGRAPHE000173"></a>Le dialogue avec le serveur SSH se fait à l'aide des fonctions suivantes :



|   |   |
| --- | --- |
| [&lt;Variable sshSession&gt;.ConnecteShell](../WDLang3/1000021163.md) | Ouvre une nouvelle session SSH de type "Shell". |
| [&lt;Variable sshSession&gt;.DéconnecteShell](../WDLang3/1000021164.md) | Ferme une session SSH précédemment ouverte grâce à la fonction [&lt;Variable sshSession&gt;.ConnecteShell](../WDLang3/1000021163.md). |
| [&lt;Variable sshSession&gt;.Ecrit](../WDLang3/1000021166.md) | Ecrit des données dans la session SSH spécifiée. |
| [&lt;Variable sshSession&gt;.Lit](../WDLang3/1000021167.md) | Lit les données présentes sur le buffer de sortie de la session SSH. |



Les paramètres de connexion au serveur SSH doivent être décrits dans une variable de type [sshSession](../WDLang3/1000021157.md).

Exemple :

```wl
cMaSession est une sshSession
cMaSession.Adresse = "127.0.0.1"
cMaSession.Port = 22
cMaSession.Utilisateur = "login"
cMaSession.MotDePasseUtilisateur = "pass"
SI cMaSession.ConnecteShell ALORS
	Info("Session Ouverte")
	bufSortie est un Buffer = "data"
	cMaSession.Ecrit(bufSortie)
	cMaSession.DéconnecteShell
FIN
```



