


## GPSSuitDéplacement (Fonction)

***En anglais : GPSFollowMovement***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Demande à être notifié périodiquement de la position courante du périphérique.




<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Branche une procédure pour recevoir régulièrement la position du périphérique
GPSSuitDéplacement(ProcDeplacement)
```

```wl
// Procédure
PROCEDURE ProcDeplacement(pos est une géoPosition)
	
Info(" Latitude : " + pos.Latitude)  
Info(" Longitude : " + pos.Longitude)
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>
![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 
### Activer le mécanisme de notification (sous un mobile)

`GPSSuitDéplacement(<Procédure WLangage> [, <Délai> [, <Distance>]])`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage appelée à chaque notification.

Cette procédure est de la forme :

```txt
PROCEDURE <Nom de la Procédure>(<Position>)
```
Le paramètre &lt;Position&gt; est une variable de type [géoPosition](../WDLang3/1000019191.md) contenant les informations sur la position de l'appareil au moment de la notification.

**`<Délai> : (Entier optionnel ou Durée optionnelle)`**

Délai minimal (en centièmes de seconde) entre deux notifications. Si ce paramètre n'est pas spécifié, le délai minimal sera de 60 secondes.
Remarque : Ce paramètre peut correspondre à : 

- un entier correspondant au nombre de centièmes de seconde, 

- une variable de type Durée, 

- l'indication directe de la durée (par exemple 1 s ou 10 ms).




![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Ce paramètre n'est pas pris en compte.

**`<Distance> : (Réel optionnel)`**

Distance minimale (en mètres) entre deux notifications.

Si ce paramètre n'est pas spécifié, la distance minimale sera de 5 mètres.


<a name="SYNTAXE2"></a>
<a name="SYNTAXE3"></a>

### Désactiver le mécanisme de notification

`GPSSuitDéplacement()`
---



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques
![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Propriétés récupérées
<a name="proprietes_recuperees_ELTPARAGRAPHE000164"></a>

- Pour savoir si les propriétés [Vitesse](../WDLang3/1000019191.md), [Précision](../WDLang3/1000019191.md), [Direction](../WDLang3/1000019191.md) ou [Altitude](../WDLang3/1000019191.md) d'une variable de type [géoPosition](../WDLang3/1000019191.md) ont été renseignées lors de la récupération de la position, utilisez les propriétés [VitesseValide](../WDLang3/1000019191.md), [PrécisionValide](../WDLang3/1000019191.md), [DirectionValide](../WDLang3/1000019191.md) et [AltitudeValide](../WDLang3/1000019191.md).

- Pour réinitialiser une variable de type géoPosition, utilisez la fonction [VariableRAZ](../WDLang1/3013069.md).

- Les informations de positionnement récupérées correspondent à la dernière position connue du périphérique : elles peuvent donc ne pas correspondre à la position actuelle du périphérique si par exemple le périphérique a été déplacé alors que le signal GPS n'était pas valide. Il est possible de connaître la date et l'heure à laquelle la position a été calculée grâce à la propriété [DateMesure](../WDLang3/1000019191.md) de la variable [géoPosition](../WDLang3/1000019191.md).

- Les propriétés [Vitesse](../WDLang3/1000019191.md), [Précision](../WDLang3/1000019191.md), [Direction](../WDLang3/1000019191.md) et [Altitude](../WDLang3/1000019191.md) seront renseignées uniquement si le fournisseur de localisation le permet (dans le cas contraire, elles prendront leur valeur par défaut). 
	



![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Notes
<a name="notes_ELTPARAGRAPHE000235"></a>

- Les fonctions de géolocalisation peuvent consommer beaucoup de ressources sur le périphérique (batterie, bande passante, etc.). Il est conseillé de ne pas fixer de valeurs trop petites pour les paramètres de délai et de distance minimale entre deux notifications.

- Pour ne plus recevoir de notifications, appelez la fonction **GPSSuitDéplacement** sans paramètre ou appelez la fonction [GPSTermine](../WDLang3/1000019210.md).



![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Fonctionnalité d'application requise
<a name="fonctionnalite_application_requise_ELTPARAGRAPHE000536"></a>L'utilisation de cette fonction entraîne la déclaration d'une fonctionnalité d'application dans l'assistant de génération de l'application.

Fonctionnalité requise : Géolocalisation

Cette fonctionnalité permet aux applications d'accéder aux données de géolocalisation de l'appareil ou de l'ordinateur. 

Attention : Spécificité Android 12 : Pour que la procédure appelée par la fonction **GPSSuitDéplacement** soit exécutée lorsque l'application est en arrière-plan, il est nécessaire de lancer un thread persistant (fonction [ThreadPersistant](../WDLang1/1000020584.md)). 


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=AndroidGPS.gif) ***Android (WINDEV Mobile)*** : **Android GPS** <br>Cet exemple montre l'utilisation des fonctions GPS du WLangage dans une application Android.<br>Il permet de récupérer à intervalle régulier : <br>- La latitude<br>- La longitude<br>- L'altitude<br>- La vitesse<br>- la direction
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSports.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Sports** <br>Cet exemple est une application de sport vous permettant d'enregistrer vos performances.<br>L'application calcule la distance parcourue, le temps, la vitesse moyenne et le nombre de calories dépensées en fonction du sport pratiqué. <br>Le parcours réalisé est affiché sur un champ carte grâce à des marqueurs et un tracé d'itinéraire. <br>Si vous disposez d'une montre Apple Watch, vous pourrez piloter WM Sports avec votre montre !<br><br>L'exemple dispose aussi d'une partie serveur qui sert à la synchronisation des données des utilisateurs.<br>Ce webservice est disponible dans l'exemple WEBDEV "WW_Sports".

<a name="XComposante"></a>

## Composante :
wd280java.dll
