


## &lt;Variable httpRequête&gt;.Envoie (Fonction)

***En anglais : &lt;httpRequest variable&gt;.Send***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Envoie une requête HTTP et attend la réponse du serveur HTTP. 


<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

### Syntaxe utilisant une variable de type httpRequête

`<Réponse HTTP> = <Requête HTTP>.Envoie()`
---

**`<Réponse HTTP> : (Variable de type httpRéponse)`**

Nom de la variable de type [httpRéponse](../WDLang3/1000021165.md) contenant la réponse reçue du serveur HTTP.

**`<Requête HTTP> : (Variable de type httpRequête)`**

Nom de la variable de type [httpRequête](../WDLang3/1000021158.md) contenant les caractéristiques de la requête HTTP à envoyer au serveur.


<a name="SYNTAXE3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 
### Syntaxe asynchrone utilisant une variable de type httpRequête

`Envoie(<Requête HTTP> , <Procédure WLangage>)`
---

**`<Requête HTTP> : (Variable de type httpRequête)`**

Nom de la variable de type [httpRequête](../WDLang3/1000021158.md) contenant les caractéristiques de la requête HTTP à envoyer au serveur.

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage appelée lors de la réponse du serveur HTTP. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Réponse> est une httpRéponse)
```
où &lt;Réponse&gt; est une variable de type [httpRéponse](../WDLang3/1000021165.md) contenant la réponse reçue du serveur HTTP.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Notes
<a name="notes_ELTPARAGRAPHE000201"></a>

- Pour connaître les erreurs d'exécution de cette fonction, utilisez les fonctions [ErreurDétectée](../WDLang1/3087001.md) et [ErreurInfo](../WDLang1/3013008.md).

- Si la gestion des cookies est mise en place pour la requête spécifiée (fonction [&lt;Variable httpRequête&gt;.GèreCookie](../WDLang3/1000021608.md)), après l'appel de la fonction **&lt;Variable httpRequête&gt;.Envoie** les cookies reçus sont mis à jour dans la variable [httpRequête](../WDLang3/1000021158.md). Ainsi, lors du prochain appel de la fonction **&lt;Variable httpRequête&gt;.Envoie** avec cette requête, les cookies seront pris en compte. 

- A partir de la version 21, les redirections dans les requêtes HTTP sont automatiquement prises en compte. Pour traiter manuellement les redirections dans les requêtes HTTP, il est nécessaire d'utiliser la propriété **IgnoreErreur** de la variable de type [httpRequête](../WDLang3/1000021158.md) avec la constante *httpIgnoreRedirection*. 



<a name="NOTE0_2"></a>


### Erreur de sécurité dans une transaction sécurisée
<a name="erreur_securite_dans_une_transaction_securisee_ELTPARAGRAPHE000245"></a>Lors d'une transaction sécurisée, certaines erreurs de sécurité peuvent faire échouer la requête :

- certificat invalide ou ne provenant pas d'une société connue.

- nom du site figurant dans le certificat ne correspond pas à un serveur.

- date du certificat non-valide ou expiré.

- renvoi vers un serveur non sécurisé.




Ces erreurs sont renvoyées par la fonction [ErreurInfo](../WDLang1/3013008.md).

Si une de ces erreurs est rencontrée, il est possible d'exécuter à nouveau la requête en ignorant ces erreurs. Pour cela, il suffit de modifier la propriété **IgnoreErreur** de la variable de type [httpRequête](../WDLang3/1000021158.md) :

| Erreur renvoyée par la fonction [ErreurInfo](../WDLang1/3013008.md)<br> (avec la constante *errCode*) | Valeur de la propriété **IgnoreErreur** de la variable de type [httpRequête](../WDLang3/1000021158.md)<br>(ces valeurs peuvent être combinées) | Description |
| --- | --- | --- |
| *httpErreurCertificatInvalide*<br>Certificat invalide ou ne provenant pas d'une société connue | *httpIgnoreCertificatInvalide* | Le certificat est ignoré. |
| *httpErreurNomCertificatInvalide*<br>Nom du site figurant dans le certificat ne correspond pas à un serveur | *httpIgnoreNomCertificatInvalide* | Le nom du site figurant dans le certificat est ignoré. |
| *httpErreurCertificatExpiré*<br>Date du certificat non-valide ou expiré | *httpIgnoreCertificatExpiré* | La date du certificat est ignorée |
| *httpErreurRenvoiHTTP*<br>Renvoi vers un serveur non sécurisé | *httpIgnoreRenvoiHTTP* | Le renvoi vers un serveur non sécurisé est autorisé. |
| *httpErreurRenvoiHTTPS*<br>Renvoi vers un serveur sécurisé | *httpIgnoreRenvoiHTTPS* | Le renvoi vers un serveur sécurisé est autorisé. |
|   | *httpIgnoreRévocation* | Le contrôle du certificat dans la liste des certificats révoqués n'est pas effectué. |

Remarques : 

- Lorsque des requêtes HTTP sont faites dans plusieurs threads, la variable **HTTP.IgnoreErreur** possède une valeur spécifique par thread.



<a name="NOTE0_7"></a>

<a name="XComposante"></a>

## Composante :
wd280com.dll
