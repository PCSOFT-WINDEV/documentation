
## Notification Push : Configuration iOS
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000110"></a>
Pour utiliser les notifications Push en iOS, il est nécessaire de posséder un compte Apple et d'effectuer une configuration spécifique. 

Cette page d'aide présente les différentes manipulations à effectuer. 

Attention : Il n'est pas possible de tester les Notifications Push avec une application iOS exécutée avec WMDev. En effet, l'application WINDEV Mobile doit être compilée sous Mac pour avoir le certificat nécessaire aux notifications Push. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Les différentes étapes
<a name="les_differentes_etapes_ELTTEXTE000134"></a>
Les différentes étapes sont les suivantes : 

**1. Activation des notifications push**

Pour activer les notifications Push, il suffit de se connecter au "provisioning portal" d'iOS et de récupérer les certificats associés au push. 

Il suffit de se connecter au portail et de cliquer sur le "+" en haut à droite : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Push_IOS_1.gif)


Le portail propose la création d'un certificat : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Push_IOS_2.gif)


Il faut créer deux certificats : 

- un certificat pour les notifications de test ("SandBox"). 

- un certificat pour les notifications en production.




Il est alors possible de récupérer les deux fichiers ".cer" générés. 

**2. Installation des certificats**

Ces certificats doivent être installés sur le Mac servant à la génération de l'application iOS. Ce poste recevra également les notifications push. 

Pour installer les certificats : 

- Double-cliquez sur le nom du fichier. Le certificat est automatiquement ajouté dans le trousseau d'accès : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Push_IOS_3.gif)





- Exportez les certificats : Sélectionnez l'option "Exporter" du menu contextuel (clic droit) des certificats. Une fenêtre s'affiche : 


![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Push_IOS_4.gif)


Remarques : 

- Il est important d'exporter au format "p12" pour que la clé privée soit bien placée à l'intérieur du certificat.

- Il est possible de fournir un mot de passe pour protéger le certificat exporté.




**3. Programmation de l'application**

Une fois le certificat exporté, il est possible de l'utiliser :


```wl
// TopicID correspond à l'identifiant du Bundle spécifié à l'étape "Informations générales"
// de l'assistant de génération du projet Xcode
TopicID est une chaîne = "fr.pcsoft.monprojetios"
t est un tableau de Buffers
MaNotif est une Notification
MaNotif.Message = "Notification de test"

ListeReponse est un WDPushServer.ListeIdentifiantsAPNResponse

ListeReponse = WDPushServer.ListeIdentifiantsAPN()

POUR i = 1 _A_ ListeReponse.ListeIdentifiantsAPNResult..Occurrence
	bufTest est Buffer = ListeReponse.ListeIdentifiantsAPNResult[i]
	Ajoute(t, bufTest)
	Trace(bufTest)	
FIN

NotifPushEnvoie(MaNotif, t, "C:\Mes Certificats\aps_production.p12", "mdp", 
							TopicID, typeServiceIOSTest)
```



