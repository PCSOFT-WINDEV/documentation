


## URIVersFichier (Fonction)

***En anglais : URIToFile***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Enregistre en arrière-plan le contenu d'une ressource (image, texte, etc.) identifiée par son URI dans un fichier externe.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple

<a name="Exemple2"></a>

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`URIVersFichier(<URI> , <Chemin> , <Procédure> [, <Type MIME>])`
---

**`<URI> : (Variable de type URI ou chaîne de caractères)`**

Variable de type [URI](../WDLang3/1000024027.md) ou chaîne de caractères identifiant la ressource à sauver.

**`<Chemin> : (Chaîne de caractères)`**

Correspond :

- Soit à un chemin de répertoire (ce répertoire doit exister) : la ressource sera enregistrée dans ce répertoire. Le nom du fichier créé correspondra au nom d'origine de la ressource et son extension dépendra du format utilisé pour la sauvegarde (voir notes). 

- Soit à un chemin complet ou relatif de fichier. Si le fichier existe déjà, il sera écrasé. 
	**Attention** : l'extension du fichier ne sera pas modifiée même si la ressource a dû être convertie dans un autre format pour l'enregistrement.




Le chemin complet du fichier de sauvegarde sera passé en paramètre de la procédure appelée à la fin de l'enregistrement.

**`<Procédure> : (Nom de procédure WLangage)`**

Nom de la procédure WLangage (également nommée "callback") appelée à la fin de l'enregistrement. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Résultat>, <Chemin>)
```
 où : 

- &lt;Résultat&gt; est un booléen : 

	- <u><u><u><u>Vrai</u></u></u></u> si l'enregistrement a été effectué,

	- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. Pour récupérer le détail de l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md) avant tout autre appel à une fonction WLangage (ce qui réinitialiserait l'erreur).




- &lt;Chemin&gt; est une chaîne de caractères correspondant au chemin complet du fichier utilisé pour l'enregistrement.




**`<Type MIME> : (Chaîne de caractères optionnelle)`**

Type MIME correspondant au format dans lequel la ressource doit être enregistrée (voir Remarques). 
Si ce paramètre n'est pas précisé ou correspond à une chaîne vide (""), la ressource sera enregistrée dans son format d'origine si possible ou bien elle sera préalablement convertie dans un format par défaut.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


- Pour sélectionner une ressource et obtenir son URI, utilisez par exemple la fonction [URISélecteur](../WDLang3/1000024026.md). 

- Lorsque la ressource à enregistrer ne provient pas du système de fichier de l'appareil, le fournisseur de contenu (Content Provider) qui gère la ressource peut avoir besoin de convertir cette ressource. C'est en général le cas si aucune application de l'appareil ne sait gérer le format d'origine de la ressource. Il est possible de préciser le format de conversion de la ressource en renseignant le paramètre &lt;Type MIME&gt;. Pour connaître le type MIME dans lequel une ressource peut être convertie, utilisez la fonction [URIRécupèreInfo](../WDLang3/1000024037.md) avec la constante *uriInfoTypeConversion*. Si cette fonction renvoie une chaîne vide (""), la ressource ne peut pas être enregistrée. Dans ce cas, il ne faut pas appeler la fonction **URIVersFichier** sur cette ressource car elle échouera. 
	Exemple : 
	un fichier Microsoft Word (.doc ou .docx) est sélectionné avec la fonction [URISélecteur](../WDLang3/1000024026.md). Ce fichier se trouve sur Google Drive et aucune application sur l'appareil ne sait gérer ce type de document. Lors de l'enregistrement de cette ressource le fournisseur de contenu convertira automatiquement cette ressource au format PDF. Dans ce cas, la fonction [URIRécupèreInfo](../WDLang3/1000024037.md) utilisée avec la constante *uriInfoTypeConversion* renverra la chaîne "application/pdf + TAB + .pdf".




<a name="XComposante"></a>

## Composante :
wd280android.aar
