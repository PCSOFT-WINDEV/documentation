
## Téléphonie : Gérer les appels sortants
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Les différentes étapes
<a name="les_differentes_etapes_ELTTEXTE000099"></a>
Pour gérer les appels sortants dans une application WINDEV :

1. Déterminez si nécessaire le périphérique TAPI sur lequel la composition des appels doit être effectuée. Utilisez les fonctions :
	


|   |   |
| --- | --- |
| [telCapacité](../WDLang3/3076014.md) | Renvoie les caractéristiques d'un périphérique de téléphonie. |
| [telListePériphérique](../WDLang3/3076024.md) | Liste les périphériques de téléphonie compatibles TAPI 2.0 et TAPI 3.1 installés sur le poste en cours. |
| [telPériphérique](../WDLang3/3076032.md) | Sélectionne le périphérique TAPI qui sera utilisé lors des opérations de téléphonie suivantes : <br><br>	- [telCompose](../WDLang3/3076013.md),<br><br>	- [telDémarreDétectionAppel](../WDLang3/3076029.md).<br><br><br> |

2. Composez le numéro de téléphone à l'aide du modem (fonction [telCompose](../WDLang3/3076013.md)).

3. Cette fonction appelle une procédure WLangage spécifique permettant de gérer la progression de l'appel. Dans cette procédure, il est possible de connaître l'état de la ligne grâce aux variables suivantes :

	- *telLigneOccupée* : La ligne est actuellement occupée. 

	- *telLigneDécrochée* : La ligne est connectée

	- *telLigneNumérote* : Numérotation en cours

	- *telLigneTonalité* : La ligne reçoit la tonalité

	- *telLigneRaccrochée* : Le correspondant a raccroché

	- *telLigneAttendRéponse* : L'appel est composé : recherche du correspondant

	- *telLigneSonnerie* : Sonnerie en cours chez le correspondant




4. Décrochez le combiné du téléphone pour communiquer.

5. Pendant la communication, il est possible d'utiliser les fonctions WLangage permettant de manipuler l'appel (voir ci-dessous). Il n'est pas nécessaire de préciser d'identifiant d'appel car l'appel traité sera l'appel en cours c'est-à-dire l'appel sortant.

6. A la fin de l'appel, fermez la ligne avec la fonction [telRaccroche](../WDLang3/3076030.md).

7. Raccrochez le combiné téléphonique.






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Manipuler un appel sortant
<a name="manipuler_appel_sortant_ELTTEXTE000147"></a>
Les manipulations pouvant être réalisées sur les appels sortants sont les suivantes :

- obtenir les caractéristiques de l'appel sortant:
	


|   |   |
| --- | --- |
| [telAppelDébut](../WDLang3/3076006.md) | Renvoie la date et l'heure du début de l'appel (entrant ou sortant). |
| [telAppelEstOccupé](../WDLang3/3076017.md) | Permet de savoir si le numéro appelé est occupé. |
| [telAppelEstTerminé](../WDLang3/3076003.md) | Permet de savoir si l'appel (sortant ou entrant) est terminé. |
| [telAppelFin](../WDLang3/3076002.md) | Renvoie la date et l'heure de la fin de l'appel. |
| [telAppelPasDeRéponse](../WDLang3/3076008.md) | Permet de savoir si une réponse a été donnée à l'appel. |
| [telDuréeAppel](../WDLang3/3076004.md) | Renvoie la durée de l'appel (différence entre la date et l'heure du début de l'appel et la date et l'heure de fin de l'appel). |
| [telNuméroAppelant](../WDLang3/3076010.md) | Permet de connaître le numéro de téléphone appelant (qui appelle). |
| [telNuméroAppelé](../WDLang3/3076025.md) | Permet de connaître le numéro de téléphone appelé. |

- effectuer des opérations spécifiques :
	


|   |   |
| --- | --- |
| [telArrête](../WDLang3/3076007.md) | Force l'arrêt de la lecture d'un message pré-enregistré (fonction [telJoue](../WDLang3/3076023.md)). |
| [telEnregistre](../WDLang3/3076019.md) | Enregistre la communication en cours sous forme d'un fichier ".WAV". |
| [telJoue](../WDLang3/3076023.md) | Joue un fichier sonore (.WAV) pour la ligne spécifiée. |
| [telNumérote](../WDLang3/3076018.md) | Permet de simuler l'utilisation des touches du clavier téléphonique. |
| [telToucheEnfoncée](../WDLang3/3076027.md) | Permet de connaître l'historique des touches enfoncées sur le clavier téléphonique depuis la dernière utilisation de la fonction telToucheEnfoncée. |





- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDTelephonie.gif) ***Exemples complets (WINDEV)*** : **WD Téléphonie** <br>Cet exemple illustre les fonctions téléphonie de WINDEV.<br>Dans cet exemple, nous abordons deux thèmes principaux :<br>1/ Comment composer un numéro de téléphone<br>2/ Détecter et identifier des appels entrants<br>Résumé de l'exemple livré avec WINDEV :	<br>Cet exemple présente les différentes fonctions de téléphonie fournies en standard avec WINDEV. Après avoir saisi quelques contacts dans la fenêtre principale (la table est en saisie), vous pourrez les appeler directement à partir de l'application (à condition que votre ordinateur soit équipé d'un modem correctement installé). Vous pourrez également avoir une notification des appels entrants et obtenir l'identité de l'appelant


