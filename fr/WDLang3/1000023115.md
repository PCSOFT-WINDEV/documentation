
## BeaconDétectePrécis (Fonction)

***En anglais : BeaconDetectPrecise***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Permet de trouver les balises Beacon à proximité de l'appareil.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Dans un musée, on souhaite afficher sur l'appareil du visiteur les informations 
// sur l'oeuvre qu'il est en train de regarder. On associe à chaque balise Beacon 
// le même UUID correspondant au musée et des numéros Major et Minor 
// permettant d'identifier chaque balise de manière unique. 
// On dispose une balise Beacon à côté de chaque oeuvre du musée. 
// L'application doit appeler la fonction BeaconDétectePrécis avec une variable 
// BeaconGroupe correspondant aux balises du musée. 
// La procédure callback passée en paramètre à la fonction sera appelée à chaque fois 
// qu'une nouvelle liste de balises Beacon sera détectée. Il suffit ensuite de trouver 
// la balise la plus proche pour en déduire l'oeuvre que regarde le visiteur et afficher 
// les informations correspondantes dans l'application.

// UUID du musée
sUUID est une chaîne = "f4231ab6-5ef2-6c99-4229-af6c72e0446e"
// Création d'une variable beaconGroupe correspondant aux balises du musée
groupeMusée est un beaconGroupe
groupeMusée.UUID = sUUID
// Lancement de la détection
BeaconDétectePrécis(groupeMusée, ProcDétection)
PROCEDURE INTERNE ProcDétection(tabInfo est un tableau de beaconInfoDétection)
	nDistanceMin est un entier 
	BaliseLaPlusProche est un beaconInfoDétection	
	POUR TOUT Information de tabInfo
		SI nDistanceMin = 0 _OU_ Information.Distance < nDistanceMin
			BaliseLaPlusProche = Information
		FIN
	FIN
	// Affichage des informations sur l'oeuvre associée à la balise
	AfficheInfoOeuvre(BaliseLaPlusProche.Major, BaliseLaPlusProche.Minor)
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = BeaconDétectePrécis(<Groupe de balises> , <Procédure WLangage>)`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la détection a bien été démarrée, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. Pour plus de détails sur l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Groupe de balises> : (Variable de type beaconGroupe)`**

Nom d'une variable de type [beaconGroupe](../WDLang3/1000023105.md) décrivant le groupe de balises Beacon recherchées.

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") appelée en cas de détection d'une nouvelle liste de balises Beacon. 

Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la Procédure>(<Tableau des infos de détection>)
```


où &lt;Tableau des infos de détection&gt; est une variable de type [beaconInfoDétection](../WDLang3/1000023109.md) décrivant les informations sur les balises Beacon détectées (identifiants, numéros Major/Minor, distance, etc.)



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


- Cette fonction effectue une analyse minutieuse des émissions Bluetooth autour de l'appareil enfin de détecter les balises Beacon et d'estimer leur distance. Cette analyse est consommatrice d'énergie : il est donc recommandé d'appeler uniquement cette fonction si au moins une balise du groupe se trouve à proximité. 
	Pour cela, il est possible d'appeler la fonction [BeaconDétecteEnArrièrePlan](../WDLang3/1000023112.md) puis d'appeler la fonction **BeaconDétectePrécis** depuis la procédure callback exécutée lorsque l'application a détecté l'entrée dans la zone d'émission des balises du groupe. 
	De plus, il est conseillé d'arrêter la détection précise dès que possible. La fonction [BeaconArrêteDétectionPrécise](../WDLang3/1000023116.md) permet d'arrêter la détection en cours : elle peut par exemple être appelée dans la procédure WLangage exécutée lorsque l'application a détecté la sortie de la zone d'émission des balises du groupe.

- La détection précise des balises Beacon est effectuée uniquement lorsque l'application se trouve au premier plan. Lorsque l'application passe en arrière-plan, la détection est automatiquement suspendue et reprendra dès que l'application repassera au premier plan. La détection est stoppée définitivement lorsque l'application est arrêtée. Pour effectuer une détection en arrière-plan, utilisez la fonction [BeaconDétecteEnArrièrePlan](../WDLang3/1000023112.md).

- Il n'est pas possible de lancer plusieurs détections précises simultanément. Si la fonction **BeaconDétectePrécis** est appelée alors qu'une détection est déjà en cours, la détection en cours sera arrêtée et une nouvelle détection sera lancée.



<a name="NOTE0_2"></a>
<a name="NOTE0_3"></a>
<a name="NOTE0_4"></a>

<a name="XComposante"></a>

## Composante :
wd280android.aar
