


## inAppListeInfoProduit (Fonction)

***En anglais : inAppListProductInfo***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Récupère à partir du store les informations sur les produits "In-App" associés à l'application.  
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
tabIdentifiant est un tableau de chaînes 

SI EnModeAndroid() ALORS
	tabIdentifiant = ["produit1", "produit2", "produit3", "produit4", "produit inconnu"]
SINON
	tabIdentifiant = ["IDProduit1", "IDProduit2", "IDProduit3", ...
		"IDProduit4", "IDProduit5", "produit inconnu"]
FIN

SI inAppListeInfoProduit(tabIdentifiant, ListeInfoProduits) ALORS
	 ToastAffiche("Demande de la liste des produits envoyée.")
SINON
	Erreur("ERREUR : " + ErreurInfo)
FIN
```

```wl
// --------------------
// Procédure ListeInfoProduits
PROCEDURE ListeInfoProduits(bSuccès est un booléen, ...
		tabProduits est un tableau de inAppProduit)
SI PAS bSuccès ALORS
	Erreur("Erreur : " + ErreurInfo())
	RETOUR
FIN

ZoneRépétéeSupprimeTout(ZR_InfoProduit)
POUR i = 1 _A_ tabProduits.Occurrence
	ZoneRépétéeAjouteLigne(ZR_InfoProduit, ...
		tabProduits[i].Libellé, tabProduits[i].Description, ...
		tabProduits[i].Identifiant, tabProduits[i].Prix)
FIN
// Copie dans le tableau global à la fenêtre
gtabProduit <= tabProduits
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = inAppListeInfoProduit(<Identifiants des produits> , <Procédure WLangage>)`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la demande de récupération des informations produit a été effectuée,

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. Pour plus de détails sur l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Identifiants des produits> : (Tableau de chaînes de caractères)`**

Identifiants des produits à manipuler. Ces identifiants sont ceux définis lors de la création des produits : 






Remarque : Si un identifiant ne correspond pas à un produit existant, il est ignoré. 

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") exécutée lors de la réception des informations sur les produits. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure> (<Succès> est un booléen, 
	<Informations Produits> est un tableau de inAppProduit)
```
où 


- &lt;Succès&gt; est un booléen : 

	- <u><u><u><u>Vrai</u></u></u></u> si les informations sur les produits ont été récupérées, 

	- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. Pour plus de détails sur l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md) avant tout autre appel à une fonction WLangage (ce qui réinitialiserait l'erreur).




- &lt;Informations Produits&gt; est un tableau de variables de type [inAppProduit](../WDLang3/1000020868.md) contenant les informations sur chacun des produits existants dont l'identifiant a été spécifié. Si l'identifiant ne correspond pas à un produit existant, il est ignoré. 
	Si &lt;Succès&gt; = <u><u><u><u>Faux</u></u></u></u> alors le tableau sera vide. 






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


- La demande d'informations est asynchrone afin de ne pas bloquer l'application pendant la récupération des informations sur les produits. Cette opération peut en effet être longue car elle nécessite d'effectuer des requêtes réseau.

- Pour connaître la liste des produits achetés par l'utilisateur et non consommés et la liste des abonnements actifs, utilisez la fonction [inAppListeAchat](../WDLang3/1000020888.md).




<a name="XComposante"></a>

## Composante :
wd280android.aar
