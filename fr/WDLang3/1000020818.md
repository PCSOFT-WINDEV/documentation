
## NotifPushProcédure (Fonction)

***En anglais : NotifPushProcedure***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Spécifie la procédure WLangage appelée lorsqu'une notification push est reçue par une application WINDEV Mobile (Android ou iOS). 

**Remarque** : Cette fonction doit être appelée dans l'événement "Initialisation" du projet car les notifications peuvent être reçues à n'importe quel moment de la vie de l'application ou en cas de lancement de l'application suite à la réception de la notification.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Initialisation du projet
NotifPushProcédure(appelNotif)
```



```wl
PROCEDURE appelNotif(MaNotif est une Notification)
Info("Notification reçue : " + MaNotif..Message)
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`NotifPushProcédure(<Procédure WLangage>)`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure qui sera appelée lorsqu'une notification push est reçue. Cette procédure doit être une procédure globale de l'application de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Notification> est une Notification)
```


où &lt;Notification&gt; est une variable de type [Notification](../WDLang3/1000019441.md) correspondant à la notification envoyée avec la fonction [NotifPushEnvoie](../WDLang3/1000020819.md).







<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Comportement lors de la réception d'une notification
<a name="comportement_lors_reception_une_notification_ELTPARAGRAPHE000046"></a>Le comportement lors de la réception d'une notification est le suivant :

1. **Si l'application est fermée**, le système affiche la notification dans la barre de notification. L'utilisateur peut alors choisir de valider la notification. S'il le fait, l'application est lancée. 
	
	Une fois l'application lancée, il y a deux cas de figures :

	- Si la fonction **NotifPushProcédure** a été appelée dans le code d'initialisation du projet, la procédure globale passée en paramètre à cette fonction est appelée et la première fenêtre de l'application n'est pas ouverte. 
			Remarque : La fonction [OuvreFenêtreMobile](../WDLang1/1000021018.md) doit être appelée dans la procédure. 

	- Si la fonction **NotifPushProcédure** n'a pas été appelée, la première fenêtre de l'application est ouverte.  




2. **Si l'application est déjà lancée** :







Remarques :

- La constante *exeLancement* de la fonction [ExeInfo](../WDLang1/3035001.md) permet de savoir si l'application a été lancée automatiquement par le système suite à la réception d'une notification push : 
	
	```wl
	ExeInfo(exeLancement) = exeNotificationPush
	```


- La fonction [FenEtat](../WDLang1/3038030.md) permet de tester si besoin l'existence d'une fenêtre afin de l'ouvrir : 
	
	```wl
	// Résumé : Procédure appelée lors du clic sur une notification PUSH
	PROCÉDURE onPush(maNotif est un Notification)
	
	SI FenEtat("FEN_Main") <> Inexistant ALORS
		// FEN_Main est déjà ouverte ou affichée
		RéceptionNotifPush(maNotif, Vrai)
	SINON
		// On ouvre la fenêtre d'accueil
		OuvreFenêtreMobile(FEN_Main, maNotif)
	FIN
	```












- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMPush.gif) ***Exemples multiplateforme*** : **WM Push** <br>Cet exemple montre comment recevoir des notifications Push.<br>Il appelle la fonction NotifPushActive et envoie l'identifiant obtenu à l'exemple WINDEV "WD Serveur Push" afin qu'il le stocke.<br>Cet identifiant est ensuite lu par l'exemple WINDEV "Envoi Push" afin qu'il envoie les notifications en push à cet exemple.


<a name="XComposante"></a>

## Composante :
wd280android.aar