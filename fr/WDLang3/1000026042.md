
## WebSocketExécuteServiceGlobal (Fonction)

***En anglais : WebSocketExecuteGlobalService***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Exécute une procédure globale dans le contexte du service global du serveur de WebSocket.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Le client vient de se connecter.
// Il se déclare dans le tableau des clients disponibles pour jouer.
WebSocketExécuteServiceGlobal(ConnexionClient, clClient)

//=======================
// Procédure globale
PROCEDURE ConnexionClient(clClient est un websocketClient)
	// Utilise le client.
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`WebSocketExécuteServiceGlobal(<Procédure WLangage> [, <Paramètres>])`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure globale WLangage à exécuter dans le contexte du service global. 

**`<Paramètres> : (Liste de valeurs entre parenthèses et séparées par des virgules)`**

Paramètres de la procédure. Cette liste de paramètres est de la forme : 

```txt
(<Paramètre 1>, ..., <Paramètre N>)
```
où : 

- &lt;Paramètre 1&gt; : Premier paramètre de la procédure.

- ...

- &lt;Paramètre N&gt; : Nième paramètre de la procédure.




**Attention** : 

- Les paramètres sont passés par valeur. 

- Seuls les types simples sont autorisés : Booléen, entier, ... Il n'est par exemple pas possible d'avoir un paramètre correspondant à une instance de classe. 








<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Contextes d'exécution
<a name="contextes_execution_ELTPARAGRAPHE000048"></a>Le service global du serveur de WebSocket et les clients connectés s'exécutent indépendamment. Chacun s'exécute dans son propre contexte avec :

- sa propre copie des variables globales.

- son propre contexte de base de données. 

- etc.


Il n'est donc pas possible de manipuler directement le contexte global ou le contexte d'un autre client.

La fonction **WebSocketExécuteServiceGlobal** permet d'exécuter la procédure globale WLangage passée en paramètre dans le contexte du service global. Pendant l'exécution de la procédure globale, les variables globales vues seront celles du service global.

La procédure globale est appelée entre deux appels de l'événement "Service global" (appelé en boucle). L'intervalle de lancement de cet événement doit donc laisser assez de temps sinon la procédure ne sera jamais appelée. Cet intervalle peut être paramétré via l'attribut d'extension &lt;intervalle=&lt;Durée&gt;&gt;. Pour plus de détails, consultez [Utilisez les Websockets grâce au serveur de Websocket](../WDLang3/1000017218.md).  
<a name="NOTE0_2"></a>


### Fonctionnement asynchrone
<a name="fonctionnement_asynchrone_ELTPARAGRAPHE000198"></a>Le fonctionnement est asynchrone : la fonction ne fait que demander l'exécution de la procédure. L'exécution effective de la procédure peut intervenir ultérieurement (et en particulier après la sortie de la fonction **WebSocketExécuteServiceGlobal**). La fonction **WebSocketExécuteServiceGlobal** ne renvoie jamais d'erreur (par exemple si le client s'est/a été déconnecté entre temps).

<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280awws.dll
