
## AppleTrackingDemandeAutorisationAsynchrone (Fonction)

***En anglais : AppleRequestTrackingAuthorizationAsynchronous***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Affiche la demande de permission concernant le suivi de l'activité de l'utilisateur (iOS uniquement). <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=AppleATT.gif)


Cette autorisation est nécessaire pour utiliser la fonction [AppleIdentifiantPublicitaire](../WDLang3/1410087936.md).

Remarque : si l'utilisateur ne donne pas sa permission, l'application doit fonctionner normalement : seul le suivi d'activité de l'utilisateur ne sera pas possible. 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
SELON AppleTrackingEtatAutorisation()
     CAS ateaIndéterminé
             AppleTrackingDemandeAutorisationAsynchrone(...
			AppleTrackingDemandeAutorisationAsynchrone_Callback)
     CAS ateaAutorisé
             PisteUtilisateur()
FIN

PROCEDURE INTERNE AppleTrackingDemandeAutorisationAsynchrone_Callback(EtatAutorisation)
	 SI EtatAutorisation = ateaAutorisé ALORS
                     PisteUtilisateur()
       FIN
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`AppleTrackingDemandeAutorisationAsynchrone(<Procédure WLangage>)`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") appelée lors de la réponse de l'utilisateur. Cette procédure est de la forme : 

```txt
<Nom de la procédure>(<Etat>)
```

où &lt;Etat&gt; est une constante de type Entier qui peut prendre une des valeurs suivantes : 


|   |   |
| --- | --- |
| *ateaAutorisé* | L'utilisateur consent au suivi de son activité ou à celui de son appareil. |
| *ateaIndéterminé* | L'utilisateur n'a pas encore donné son consentement ou son opposition. |
| *ateaInterdit* | L'utilisateur refuse le suivi de son activité ou celui de son appareil. |
| *ateaRestreint* | L'appareil est géré par un "Profil de gestion des appareils" qui interdit le tracking. |









<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Personnaliser la fenêtre de demande de permission
<a name="personnaliser_fenetre_demande_permission_ELTPARAGRAPHE000061"></a>Le texte de la demande d'autorisation n'est pas paramétrable. 

Il est cependant possible d'ajouter un court texte explicatif dans la fenêtre. Ce message peut être saisi dans l'étape "Permissions" de l'assistant de génération de l'application iOS. Il suffit de saisir un texte spécifique pour la permission "Tracking Usage Description". 


### Configurer manuellement le suivi publicitaire
<a name="configurer_manuellement_suivi_publicitaire_ELTPARAGRAPHE000068"></a>Pour configurer le suivi publicitaire d'une application : 

- Avant iOS 14, le suivi publicitaire est commun à toutes les applications. Il peut être configuré dans les options "Réglages &gt;&gt; Confidentialité &gt;&gt; Publicité". 

- A partir de iOS 14, le suivi publicitaire est paramétrable : 

	- au niveau du périphérique et des applications : "Réglages &gt;&gt; Confidentialité &gt;&gt; Publicité". 

	- au niveau des applications : "Réglages &gt;&gt; "Nom de l'application" &gt;&gt; Autoriser le suivi". 











<a name="XComposante"></a>

## Classification Métier / UI :
Code neutre


