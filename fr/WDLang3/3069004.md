


## Créer une application serveur SOAP WINDEV
			

<DIV class="specObsolete">
	<IMG style="float:left;margin-right:10px;" src="https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=warning_big.png"><B>Avertissement</B><BR>
	A partir de la version <B>20</B>,  cette fonctionnalité n'est plus disponible. Pour plus de détails, consultez [Importation/consommation de Webservices](../WDLang3/3086001.md)
</DIV><a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000184"></a>
L'application serveur SOAP est une application contenant toutes les procédures à exécuter. Ces procédures sont exécutées par l'application cliente SOAP.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principe
<a name="principe_ELTTEXTE000208"></a>
Le principe est le suivant : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Soap_Serveur.gif)


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Comment créer une application Serveur SOAP ?
<a name="comment_creer_une_application_serveur_soap_ELTTEXTE000232"></a>


### Créer une application Serveur SOAP
<a name="creer_une_application_serveur_soap_ELTPARAGRAPHE000031"></a>Pour créer une application Serveur SOAP : 

1. Créez un projet WINDEV.

2. Créez des procédures globales. Chaque procédure globale pourra être exécutée par le poste Client SOAP. 
	Attention : l'application serveur ne doit pas avoir une interface (pas de fenêtres, d'états, de fenêtre de trace ou de boîtes de dialogue). Cette application est également limitée par les droits définis pour le serveur Web.

3. Saisissez si nécessaire le code d'initialisation et de fermeture du projet. Ces deux codes seront respectivement exécutés au chargement et au déchargement de la bibliothèque sur le serveur.

4. Créez la bibliothèque de votre projet (fichier .WDL). Ce fichier contient toutes les procédures du projet.




Remarque : Dans l'application Cliente SOAP, pour préciser le nom de la bibliothèque utilisée (WDL), il suffit de préciser ce nom dans le **namespace** (voir fonction [SOAPExécute](../WDLang3/3069013.md)).

**Attention** : Actuellement, les transferts ne sont pas sécurisés (pas de cryptage des données transférées). Il est recommandé de ne pas utiliser le protocole SOAP pour transférer des données sensibles.
<a name="NOTE3_2"></a>


### Faire cohabiter des serveurs SOAP WINDEV de versions différentes
<a name="faire_cohabiter_des_serveurs_soap_windev_versions_differentes_ELTPARAGRAPHE000052"></a>Sur un serveur HTTP IIS, il est possible de faire cohabiter des services Web WINDEV de versions différentes : il suffit de définir 2 extensions différentes dans le programme Inetmgr.exe (par exemple ".soap12" et ".soap17").

Sur un serveur Apache, il n'est pas possible de faire cohabiter deux versions différentes.
<a name="NOTE3_3"></a>


### Tester votre application serveur SOAP sur le poste de développement
<a name="tester_votre_application_serveur_soap_sur_poste_developpement_ELTPARAGRAPHE000061"></a>Pour tester votre application serveur SOAP sur le poste de développement : 

1. Créez la bibliothèque (fichier .WDL) de votre application Serveur. Créez une configuration de projet pour générer la bibliothèque si nécessaire.

2. Configurez le serveur Internet installé sur votre poste pour votre application WINDEV :

	- [Configuration pour Apache](../WDLang3/3086004.md)

	- [Configuration pour IIS](../WDLang3/3086005.md)

	- [Configuration pour Netscape iPlanet 4.1.](../WDLang3/3086006.md)




3. Configurez l'administrateur SOAP (application WDSOAPConfig.EXE dans le répertoire "Données" de WINDEV). Pour plus de détails, consultez [Configurer l'administrateur](../WDLang3/3086007.md).

4. Redémarrez votre serveur Web.

5. Lancez le test de votre application cliente SOAP.



<a name="NOTE3_4"></a>


### Installer votre application sur un poste serveur SOAP
<a name="installer_votre_application_sur_poste_serveur_soap_ELTPARAGRAPHE000084"></a>Pour installer votre application sur un poste serveur SOAP : 

1. Créez la bibliothèque (fichier .WDL) de votre application Serveur. Créez une configuration de projet pour générer la bibliothèque si nécessaire. 
	Attention : Il ne faut pas renommer les DLL WINDEV.

2. Créez le programme d'installation de votre application : sous le volet "Projet", dans le groupe "Génération", déroulez "Procédure d'installation" et sélectionnez "Créer la procédure d'installation".
	Les fichiers devant être sélectionnés pour l'installation sont les suivants :

	- Application WDSOAPConfig.EXE présente dans le répertoire "Données" du répertoire d'installation de WINDEV.

	- les DLL WINDEV nécessaires à l'exécution de votre application. Vérifiez que les DLL suivantes sont sélectionnées : wdxxxobj.dll, wdxxxpnt.dll, wdxxxstd.dll et wdxxxvm.dll.

	- les DLL WINDEV spécifiques au serveur HTTP utilisé : wdxxxsapa.dll pour Apache 1.3, wdxxxsapa2.dll pour Apache 2.0, wdxxxsiis pour IIS, ...




3. Installez l'application sur le poste serveur.  

4. Configurez le serveur Internet pour votre application WINDEV :

	- [Configuration pour Apache](../WDLang3/3086004.md)

	- [Configuration pour IIS](../WDLang3/3086005.md)

	- [Configuration pour Netscape iPlanet 4.1.](../WDLang3/3086006.md)




5. Configurez l'administrateur SOAP. Pour plus de détails, consultez [Configurer l'administrateur](../WDLang3/3086007.md).

6. Pour que le client SOAP puisse contacter le serveur, l'adresse du serveur utilisée dans la fonction [SOAPExécute](../WDLang3/3069013.md) doit être de la forme :
	
	```txt
	<Adresse IP du serveur>\Serveur.soap
	```





**Remarque** : Si plusieurs applications serveur SOAP sont installées sur le même poste, il est obligatoire d'installer :

- toutes les bibliothèques (WDL) dans le même répertoire.

- toutes les DLL WINDEV utilisées dans le même répertoire.




Un seul administrateur SOAP sera installé et utilisé.

**Attention** : Les droits définis pour l'utilisateur du site http sont très importants. Si un serveur SOAP WINDEV doit écrire dans un fichier, il est nécessaire que l'utilisateur du site (invité Internet) ait les droits d'écriture.


