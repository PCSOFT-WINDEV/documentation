


## inAppRestaureAchats (Fonction)

***En anglais : inAppRestorePurchases***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Restaure les achats de produits non consommables précédemment effectués par l'utilisateur dans une application iOS. 

**Remarque** : Cette fonction est utile notamment si l'utilisateur a réinstallé l'application. Il est recommandé de placer l'appel à cette fonction dans un bouton accessible par l'utilisateur. 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
TableauSupprimeTout(gtabRecu_iOS)
SablierRéseau(Vrai)
inAppRestaureAchats(ProcRestauration)
```

```wl
// -----------------------------------------
PROCEDURE ProcRestauration(bSuccès est un booléen, ...
		ProduitAcheté est un inAppProduit, nQuantité est un entier)
SI bSuccès ALORS
	stRecu est un ST_Recu_iOS
	stRecu.nQuantité = nQuantité
	stRecu.prodProduit = ProduitAcheté
	TableauAjoute(gtabRecu_iOS, stRecu)
	// Rafraîchissement du champ Zone répétée
	ZRAfficheRecu_iOS()
	SablierRéseau(Faux)
SINON
	Erreur("Erreur lors de la restauration des achats : " + ErreurInfo())
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`inAppRestaureAchats(<Procédure WLangage>)`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") exécutée lorsqu'un achat est restauré par le store. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Succès> est un booléen, 
	<Produit> est un inAppProduit, <Quantité> est un entier)
```
où : 

- &lt;Succès&gt; est un booléen : 

	- <u><u><u><u>Vrai</u></u></u></u> si le produit a été restauré,

	- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. Pour récupérer le détail de l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md) avant tout autre appel à une fonction WLangage (ce qui réinitialiserait l'erreur).




- &lt;Produit&gt; est une variable de type [inAppProduit](../WDLang3/1000020868.md) correspondant au produit à restaurer. 

- &lt;Quantité&gt; est la quantité du produit à restaurer. 









