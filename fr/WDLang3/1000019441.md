


## Notification (Type de variable)

***En anglais : Notification***
				



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Le type **Notification** permet de manipuler 

- **les notifications en push**.




Les caractéristiques de cette notification peuvent être définies et modifiées à l'aide de différentes propriétés WLangage. 

**Remarque** : Pour plus de détails sur la déclaration de ce type de variable et l'utilisation des propriétés WLangage, consultez [Déclaration d'une variable](../Motscles/1514032.md).


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Notification simple
// --------------------
notif est une Notification
notif.Titre = "Nouveau message reçu"
notif.Message = "Cliquez pour afficher le message"
NotifAjoute(notif)
```


<a name="Exemple2"></a>

<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Utilisation du type Notification
<a name="utilisation_type_notification_ELTPARAGRAPHE000058"></a>Le type **Notification** est utilisé pour la gestion des notifications locales et pour la gestion des notifications push. 

Cette page d'aide présente : 

- [les propriétés spécifiques à la description des variables de type Notification pour une notification push.](#NOTE0_4)



<a name="NOTE0_2"></a>


### Exemple de notification sous Android
<a name="exemple_notification_sous_android_ELTPARAGRAPHE000081"></a>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=NotifActiondetail.gif)


Les différents éléments de cette notification sont configurables grâce au type Notification : 

- **1.** Grande icône de la notification (propriété **GrandeIcone**).

- **2.** Titre de la notification (propriété **Titre**).

- **3.** Message de la notification (propriété **Message**).

- **4.** Message secondaire (propriété **MessageSecondaire**).

- **5.** Heure de réception de la notification (propriété **Chronomètre**).

- **6.** Icône de l'application (propriété **Icone**).

- **7.** Actions supplémentaires de la notification (propriété **ActionSupplémentaire**).



<a name="NOTE0_3"></a>
<a name="NOTE0_4"></a>


### Propriétés spécifiques à la description des variables de type Notification pour une notification push
<a name="proprietes_specifiques_description_des_variables_type_notification_pour_une_notification_push_ELTPARAGRAPHE000642"></a>Les propriétés suivantes peuvent être utilisées pour manipuler une notification :

| Nom de la propriété | Type manipulé | Effet |
| --- | --- | --- |
| ActiveApplication | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si l'application doit être mise au premier plan lors du clic sur la notification. <br><br>- <u><u><u><u>Faux</u></u></u></u> (valeur par défaut) dans le cas contraire.<br><br><br> |
| AffichageLED | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si la LED de l'appareil doit être allumée lors de l'affichage de la notification, <br><br>- <u><u><u><u>Faux</u></u></u></u> (valeur par défaut) dans le cas contraire. <br><br><br>La couleur et la fréquence d'allumage de la LED peuvent varier d'un appareil à l'autre.<br><br><br><br> |
| Badge | Entier | Numéro affiché par l'icône de l'application. <br><br> |
| Catégorie | [notificationCatégorie](../WDLang3/1000023981.md) | Catégorie associée à la notification. Les catégories de notification sont disponibles à partir d'Android 8.0 (API level 26). Si l'application s'exécute sur une version plus ancienne la propriété **Catégorie** sera ignorée.<br>Il est conseillé de toujours associer une catégorie à une notification<br><br>- Si la catégorie n'existe pas au moment de l'ajout de la notification, elle sera automatiquement créée, <br><br>- Si la catégorie existe déjà pour l'application, la notification sera associée à la catégorie existante. <br><br>- Si aucune catégorie n'a été spécifiée, la notification sera automatiquement associée à une catégorie prédéfinie en fonction de son niveau de priorité. Les catégories prédéfinies sont les suivantes : <br><br>	- Priorité min.<br><br>	- Priorité faible<br><br>	- Priorité normale<br><br>	- Priorité élevée<br><br>	- Priorité max.<br><br><br> La catégorie prédéfinie sera créée lors du premier ajout d'une notification sans catégorie avec le niveau de priorité correspondant et utilisera les paramètres visuels et auditifs de cette notification (vibreur, son, led, ...). Ces paramètres pourront ensuite être modifiés par l'utilisateur final. Si la catégorie prédéfinie existe déjà, la notification héritera des propriétés de cette catégorie.<br><br><br><br><br> |
| Chronomètre | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> pour afficher un chronomètre à la place de l'heure de la notification. Le chronomètre démarrera automatiquement lors de la réception de la notification et son affichage sera mis à jour automatiquement. <br><br>- <u><u><u><u>Faux</u></u></u></u> (valeur par défaut) pour ne pas afficher de chronomètre. L'heure associée à la notification sera affichée. <br><br><br><br><br>**Attention** : L'affichage d'un chronomètre dans les notifications est disponible à partir de Android 4.1 (Jelly Bean, api level 16). Sur des appareils en version inférieure, le chronomètre sera ignoré et l'heure associée à la notification sera affichée.<br><br> |
| Contenu | Chaîne de caractères | Données personnalisées de la notification. Ces données ne sont pas affichées dans la notification. |
| CouleurLED | Entier | Couleur de la LED lors de l'affichage de la notification. <br><br>La valeur de cette propriété est prise en compte uniquement si la propriété **AffichageLED** vaut <u><u><u><u>Vrai</u></u></u></u>. <br><br>Par défaut, la couleur d'affichage de la LED est verte. <br><br>Cette couleur peut correspondre à :<br><br>- une couleur RVB (obtenue avec la fonction [RVB](../WDLang1/3029012.md)),<br><br>- une composante TSL de la couleur (obtenue avec la fonction [TSL](../WDLang1/3029057.md)),<br><br>- [une couleur prédéfinie du WLangage](../WDLang5/3010002.md).<br><br><br>**Attention** : Certains appareils ne permettent pas de modifier la couleur de la LED ou ne proposent que certaines couleurs. Si la couleur spécifiée n'est pas supportée par l'appareil, une couleur par défaut sera utilisée.<br><br><br> |
| Format | [notificationFormat](../WDLang3/1000021301.md) | Format d'affichage de la notification lorsque celle-ci est déroulée. <br><br>Attention : L'affichage des notifications en mode "déroulé" est disponible uniquement à partir de Android 4.1 (Jelly Bean, api level 16). Sur des appareils en version inférieure, le format d'affichage sera ignoré. <br><br> |
| GrandeIcone | Chaîne de caractères | Chemin de l'image correspondant à la grande icône associée à la notification. Cette icône sera affichée à gauche du titre et du message de la notification. <br><br>Si aucune image n'est spécifiée, l'icône spécifiée par la propriété **Icone** sera utilisée. Si cette dernière n'est pas spécifiée, l'icône de l'application sera utilisée.<br><br>Attention : L'affichage de cette image dans les notifications est possible uniquement pour les appareils disposant d'Android 3.0 ou supérieure (Honeycomb, api level 11). Sur des appareils en version inférieure, cette image sera ignorée. <br><br> |
| Groupe | Chaîne de caractères | Nom du groupe auquel est associée la notification push. <br><br>Si plusieurs notifications push appartenant au même groupe sont envoyées avec un contenu identique alors que l'appareil destination ne peut être joint, lorsque l'appareil sera à nouveau contacté par le serveur Google Cloud Messaging, seule la dernière notification du groupe sera envoyée. <br><br> |
| Icone | Chaîne de caractères | Chemin de l'image correspondant à l'icône associée à la notification. <br><br>Si aucune icône n'est spécifiée, l'icône de l'application sera utilisée. |
| LibelléAction | Chaîne de caractères | Libellé du bouton d'action de la notification. <br><br> |
| Locale | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si la notification est locale à l'appareil qui la reçoit : cette notification ne doit pas être transmise aux objets fonctionnant sous Android Wear connectés à l'appareil (par exemple, une montre). <br><br>- <u><u><u><u>Faux</u></u></u></u> (valeur par défaut) si la notification doit être transmise automatiquement aux objets connectés. <br><br><br><br><br> |
| Message | Chaîne de caractères | Message de la notification. |
| MessageSecondaire | Chaîne de caractères | Message secondaire affiché en dessous du message principal de la notification.<br><br>**Attention** : L'affichage d'un message secondaire dans les notifications est disponible à partir de Android 4.1 (Jelly Bean, api level 16). Sur des appareils en version inférieure, le message secondaire sera ignoré.<br><br> |
| Priorité | Constante de type Entier | Priorité de la notification. <br><br>Le changement de priorité d'une notification permet de modifier sa position d'affichage dans la liste des notifications de l'appareil afin que l'utilisateur puisse voir les notifications les plus importantes en premier. Une notification avec une priorité élevée sera affichée au début de la liste alors qu'une notification avec une priorité faible sera affichée en fin de liste. <br><br>Dans certaines situations, une notification avec une priorité faible peut être masquée à l'utilisateur si d'autres notifications avec des priorités plus élevées sont reçues.<br><br>Cette propriété peut prendre les valeurs suivantes  : <br><br>- *notifPrioritéMax* : priorité maximale (exemple : appel entrant). <br><br>- *notifPrioritéElévée* : priorité élevée (exemple : réception d'un email urgent). <br><br>- *notifPrioritéDéfaut* (valeur par défaut) : priorité normale (exemple  : réception d'un SMS). <br><br>- *notifPrioritéFaible* : priorité faible  (exemple  : notification de mise à jour).<br><br>- *notifPrioritéMin* : priorité minimale (exemple  : information commerciale).<br><br><br><br><br>La modification des priorités des notifications est possible uniquement à partir de Android 4.1 (Jelly Bean, api level 16). Sur des appareils en version inférieure, la priorité sera ignorée : toutes les notifications ont la même priorité.<br><br><br><br> |
| Son | Chaîne de caractères | Chemin du fichier son à jouer lors de l'affichage de la notification. <br><br>Pour jouer le son par défaut des notifications, utilisez la constante *notifSonDéfaut*. Ce son par défaut peut varier d'un appareil à l'autre. <br><br>Il est possible de jouer un son issu d'un fichier audio intégré à l'application (via l'assistant de génération) : il suffit d'indiquer le nom de fichier et son extension.<br><br>Pour ne pas associer de son à la notification, utilisez la valeur chaîne vide ("", valeur par défaut).<br><br> |
| Supprimable | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> (valeur par défaut) si la notification peut être supprimée par l'utilisateur, <br><br>- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. <br><br><br>Si cette propriété vaut <u><u><u><u>Faux</u></u></u></u>, la notification sera effacée uniquement dans les cas suivants : <br><br>- Fermeture de l'application. <br><br>- Appel de la fonction [NotifSupprime](../WDLang3/1000019444.md). <br><br>- Si la procédure WLangage exécutée lors du clic (propriété **ActionClic**) a retourné <u><u><u><u>Vrai</u></u></u></u> ou n'a pas retourné de valeur.<br><br><br> |
| TexteDéroulant | Chaîne de caractères | Texte déroulant affiché furtivement dans la barre système lors de l'affichage de la notification. <br><br>Si cette propriété vaut chaîne vide ("", valeur par défaut), aucun message ne sera affiché.<br><br> |
| Titre | Chaîne de caractères | Titre de la notification. <br><br>Si aucun titre n'est spécifié, le nom de l'application sera utilisé.<br><br> |
| Vibration | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si l'appareil doit vibrer lors de l'affichage de la notification, <br><br>- <u><u><u><u>Faux</u></u></u></u> (valeur par défaut) dans le cas contraire. <br><br><br>Remarque : La durée et la puissance des vibrations peuvent varier d'un appareil à l'autre.<br><br><br><br> |




<a name="NOTE0_5"></a>


### Fonctions utilisant le type Notification
<a name="fonctions_utilisant_type_notification_ELTPARAGRAPHE001026"></a>Les fonctions suivantes manipulent les variables de type **Notification** pour une notification locale : 



|   |   |
| --- | --- |
| [NotifAjoute](../WDLang3/1000019442.md) | Ajoute une notification dans la barre système de l'appareil (Android) ou dans le centre de notification (iOS). |
| [NotifModifie](../WDLang3/1000019443.md) | Modifie une notification actuellement affichée dans la barre système de l'appareil. |
| [NotifPushEnvoie](../WDLang3/1000020819.md) | Envoie une notification push (distante) à un appareil mobile (iOS ou Android). |
| [NotifSupprime](../WDLang3/1000019444.md) | Supprime une notification affichée dans la barre système de l'appareil. |
| [ThreadPersistant](../WDLang1/1000020584.md) | Rend un thread persistant. |




<a name="NOTE0_6"></a>


### Réinitialisation
<a name="reinitialisation_ELTPARAGRAPHE001034"></a>Pour réinitialiser le contenu d'une variable de type **Notification**, il est possible d'utiliser la fonction [VariableRAZ](../WDLang1/3013069.md).


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMPush.gif) ***Exemples multiplateforme*** : **WM Push** <br>Cet exemple montre comment recevoir des notifications Push.<br>Il appelle la fonction NotifPushActive et envoie l'identifiant obtenu à l'exemple WINDEV "WD Serveur Push" afin qu'il le stocke.<br>Cet identifiant est ensuite lu par l'exemple WINDEV "Envoi Push" afin qu'il envoie les notifications en push à cet exemple.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WD_Serveur_Push.gif) ***Exemples multiplateforme*** : **WD_Serveur_Push** <br>Cet exemple est un webservice servant à stocker les identifiants nécessaires au Push sur mobiles.<br>L'application WINDEV Mobile WM Push stockent les identifiants Push dans la base de cet exemple.<br>Ces identifiants sont ensuite lus par l'exemple "WD Envoi Push" afin qu'il envoie les notifications.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=EnvoiPush.gif) ***Exemples multiplateforme*** : **Envoi Push** <br>Cet exemple permet d'envoyer des notifications en push sur des appareils Android et iOS.<br>Il récupère les identifiants des mobiles dans la base HFSQL de l'exemple "WD Serveur Push", et leur envoie ensuite les notifications grâce à la fonction NotifPushEnvoie.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSysteme.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Système** <br>Cette application est un exemple didactique montrant quelques unes des fonctionnalités de WINDEV Mobile pour Android/iOS.<br>Les fonctions système utilisées sont : <br>- NFC<br>- Champ Multimédia<br>- Luminosité<br>- Volume<br>- WIFI<br>- Bluetooth<br>- Toast<br>- Boussole<br>- Accéléromètre<br>- Champ caméra<br>- LED<br>- Vibrations<br>- Notifications<br>- Fonctions de dessin<br>- Internet


