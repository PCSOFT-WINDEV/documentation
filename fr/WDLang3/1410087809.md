
## Webservices REST : Importation d'une API OpenAPI
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000166"></a>
Un Webservice REST peut documenter ses API par l'intermédiaire d'un fichier à la norme OpenAPI.
Ce fichier de documentation peut être importé dans le projet : les API décrites dans ce fichier sont alors reconnues par l'éditeur de code.
L'appel de ces API se fait alors en mode "natif".

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Importer des webservices REST via leur documentation OpenAPI
<a name="importer_des_webservices_rest_via_leur_documentation_openapi_ELTTEXTE000190"></a>
Pour importer un Webservice REST via sa documentation OpenAPI : 

1. Dans le volet "Explorateur de projet", sélectionnez "Webservices importés". 

2. Faites un clic droit et sélectionnez l'option "Utiliser une API". L'assistant d'importation se lance. 

3. Dans l'assistant, localisez la description OpenAPI de l'API : 

	- via une adresse Internet : dans ce cas, il est possible de spécifier : 

		- si les erreurs de sécurité HTTPS doivent être ignorées, 

		- les paramètres d'authentification si nécessaire. 




- via un fichier local (fichier JSON ou YAML). 

4. Le webservice est alors importé dans le projet. Sa description est visible dans le volet "Explorateur de projet". Le Webservice REST peut être manipulé dans le projet. 




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Utiliser un Webservice REST importé via sa documentation OpenAPI
<a name="utiliser_webservice_rest_importe_via_documentation_openapi_ELTTEXTE000214"></a>
Pour manipuler un Webservice par programmation, il suffit d'utiliser le nom du Webservice (présent dans le volet "Explorateur de projet") dans l'éditeur de code : toutes les procédures associées seront alors proposées.

**Remarque** : Il est possible de faire un glisser-déposer directement depuis le volet "Explorateur de projet" vers l'éditeur de code pour insérer le nom du Webservice et de ses fonctions.



### Configurer les options d'appel d'une fonction du Webservice
<a name="configurer_les_options_appel_une_fonction_webservice_ELTPARAGRAPHE000043"></a>Dans certains cas, il peut être nécessaire de définir des pré-requis à l'exécution d'une fonction de l'API, notamment la définition d'entêtes particuliers. Il est également possible de définir le certificat utilisé (et son mot de passe) et le timeout de la requête.  

Il est possible de définir ces paramètres grâce à une variable de type [apiRequête](../WDLang3/1410088935.md). 

La variable de type [apiRequête](../WDLang3/1410088935.md) doit être utilisée en premier paramètre de l'appel de la fonction du Webservice. 


### Propriétés associées au Webservice
<a name="proprietes_associees_webservice_ELTPARAGRAPHE000058"></a>Plusieurs propriétés sont directement utilisables sur le nom du webservice. Ces propriétés sont disponibles en lecture et en écriture.



| Nom | Type manipulé | Effet |
| --- | --- | --- |
| Adresse | Chaîne de caractères | Permet de remplacer l'adresse d'appel du Webservice décrite dans le document OpenAPI par une autre URL. Cette propriété est notamment utile si le Webservice est hébergé sur des serveurs différents.<br><br>Cette propriété est de la forme : "http://serveur:port/chemin_du_webservice".<br><br>Dans le cas d'un Webservice généré avec WINDEV et déployé sur un Serveur d'Application WEBDEV, il s'agit de l'URL du fichier d'extension "awws".<br><br>**Remarques** :<br><br>- La modification de cette propriété remplace toutes les URL décrites dans le document OpenAPI.<br><br>- Si cette propriété correspond à une chaîne vide (""), les URL décrites dans le document OpenAPI seront de nouveau utilisées.<br><br><br> |
| MotDePasse | Chaîne de caractères | Mot de passe utilisé pour réaliser l'authentification lors des requêtes HTTP au Webservice. Ce nom est utilisé uniquement dans le cas où une authentification est nécessaire pour accéder au serveur sur lequel est hébergé le Webservice. |
| Port | Chaîne de caractères | Nom du port défini dans le document OpenAPI. Il s'agit du port utilisé pour communiquer avec le serveur hébergeant le Webservice. Consultez votre administrateur réseau ou le propriétaire du Webservice. |
| Utilisateur | Chaîne de caractères | Nom d'utilisateur utilisé pour réaliser l'authentification lors des requêtes HTTP au Webservice. Ce nom est utilisé uniquement dans le cas où une authentification est nécessaire pour accéder au serveur sur lequel est hébergé le Webservice.<br>Avec la  méthode d'authentification Negotiate, suivant la configuration il faut ajouter à l'utilisateur le domaine : <br><pre><code>monWebservice..Utilisateur = "DOMAINE\Utilisateur"</code></pre><br> ou <br><pre><code>monWebservice..Utilisateur = "Utilisateur@DOMAINE"</code></pre><br> |
| VersionHTTP | Constante de type Entier | Version du protocole HTTP utilisée par le serveur : <br><br>- *httpVersion2* : Protocole HTTP version 2.0. Si le serveur ne gère pas cette version, une version plus ancienne est utilisée. <br><br>- *httpVersion2Uniquement* : Protocole HTTP version 2.0 forcée : si le serveur ne gère pas cette version, une erreur fatale est affichée. <br><br>- *httpVersion1_1* : Protocole HTTP version 1.1.<br><br>- *httpVersion1_0* : Protocole HTTP Version 1.0. <br><br>- *httpVersionDéfaut* : Protocole HTTP Version 1.0. <br><br><br> |






