


## RESTEnvoie (Fonction)

***En anglais : RESTSend***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Envoie une requête REST et attend la réponse du serveur.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
cMaRequete est un restRequête
cMaRequete.URL = "<adresse serveur>"
cMaReponse est un restRéponse = RESTEnvoie(cMaRequete)
SI ErreurDétectée ALORS
	Erreur(ErreurInfo(errComplet))
SINON
	Info(cMaReponse.Contenu)
FIN
```

```wl
// L'exemple de code ci-dessous montre comment appeler un Webservice REST WINDEV avec paramètres.
// La procédure dans le Webservice est de cette forme :
// PROCEDURE PRIVÉE UpdateBandeauhaut(bModeTest est un booléen)

// L'URL de test est alors de la forme suivante :
// http://<IP du serveur>/<composante commune>
// ?test#/<composante commune>/UpdateBandeauhaut/{bModeTest}|GET

// Code WLangage permettant de l'appeler en passant le paramètre
cMaRequete est un restRequête
cMaRequete.Méthode = httpGet
cMaRequete.URL = "http://<IP du serveur>/CDM/UpdateBandeauhaut/1" 
//Où CDM est la composante commune et 1 la valeur du paramètre

cMaReponse est un restRéponse = RESTEnvoie(cMaRequete)
SI ErreurDétectée ALORS
	Erreur(ErreurInfo(errComplet))
SINON
	SI cMaReponse.Contenu = Vrai ALORS
		Info("Le site a bien été mis à jour.")
	SINON
		Erreur(cMaReponse.Contenu)
	FIN
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

### Syntaxe utilisant une variable de type restRequête

`<Réponse REST> = RESTEnvoie(<Requête REST>)`
---

**`<Réponse REST> : (Variable de type restRéponse)`**

Nom de la variable de type [restRéponse](../WDLang3/1000021477.md) contenant la réponse reçue du serveur REST.

**`<Requête REST> : (Variable de type restRequête)`**

Nom de la variable de type [restRequête](../WDLang3/1000021481.md) contenant les caractéristiques de la requête REST à envoyer au serveur.


<a name="SYNTAXE2"></a>

### Syntaxe simplifiée d'envoi d'une requête 

`<Réponse REST> = RESTEnvoie(<URL>)`
---

**`<Réponse REST> : (Variable de type restRéponse)`**

Nom de la variable de type [restRéponse](../WDLang3/1000021477.md) contenant la réponse reçue du serveur REST.

**`<URL> : (Chaîne de caractères)`**

URL à interroger.


<a name="SYNTAXE3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 
### Syntaxe asynchrone utilisant une variable de type restRequête

`RESTEnvoie(<Requête HTTP> , <Procédure WLangage>)`
---

**`<Requête HTTP> : (Variable de type restRequête)`**

Nom de la variable de type [restRequête](../WDLang3/1000021481.md) contenant les caractéristiques de la requête REST à envoyer au serveur.

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage appelée lors de la réponse du serveur REST. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Réponse> est une restRéponse)
```
où &lt;Réponse&gt; est une variable de type [restRéponse](../WDLang3/1000021477.md) contenant la réponse reçue du serveur REST.


<a name="SYNTAXE4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 
### Syntaxe asynchrone simplifiée d'envoi d'une requête 

`RESTEnvoie(<URL> , <Procédure WLangage>)`
---

**`<URL> : (Chaîne de caractères)`**

URL à interroger. 

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage appelée lors de la réponse du serveur REST. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Réponse> est une restRéponse)
```
où &lt;Réponse&gt; est une variable de type [restRéponse](../WDLang3/1000021477.md) contenant la réponse reçue du serveur REST.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


- ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) Pour connaître les erreurs d'exécution de cette fonction, utilisez les fonctions [ErreurDétectée](../WDLang1/3087001.md) et [ErreurInfo](../WDLang1/3013008.md).




<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280com.dll
