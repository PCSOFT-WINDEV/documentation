
## Marqueur (Type de variable)

***En anglais : Marker***
				



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Le type **Marqueur** permet de définir les caractéristiques d'un marqueur à placer sur une carte affichée dans un champ Carte. 

Un marqueur est défini par un nom et une position géographique (latitude et longitude) et peut être complété par une description et une action sur le clic. 

Les caractéristiques de ce marqueur peuvent être définies et modifiées à l'aide de différentes propriétés WLangage.

**Remarque** : Pour plus de détails sur la déclaration de ce type de variable et l'utilisation des propriétés WLangage, consultez [Déclaration d'une variable](../Motscles/1514032.md).




<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Affiche un marqueur avec exécution d'une procédure lors du clic sur ce marqueur 
MaPosition est une géoPosition
MaPosition.Latitude = 43.613708 
MaPosition.Longitude = 3.876972
MonMarqueur est un Marqueur
MonMarqueur.Position = MaPosition
MonMarqueur.ActionClic = ProcClicMarqueur

CarteAjouteMarqueur("ChampCarte", MonMarqueur)
```

```wl
//------------------------------------------

PROCEDURE ProcClicMarqueur(m est un marqueur)
ToastAffiche(ChaîneConstruit("Position : %1 N, %2 E ", ...
	m.Position.Latitude, m.Position.Longitude))
```

<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Propriétés spécifiques à la description des variables de type Marqueur
<a name="proprietes_specifiques_description_des_variables_type_marqueur_ELTPARAGRAPHE000065"></a>Les propriétés suivantes peuvent être utilisées pour manipuler une variable de type **Marqueur** :

| Nom de la propriété | Type manipulé | Effet |
| --- | --- | --- |
| ActionClic | Nom de procédure | Nom de la procédure WLangage appelée lorsque l'utilisateur clique sur le marqueur affiché dans le champ Carte. <br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Marqueur>)</code></pre><br><br><br>où &lt;Marqueur&gt; est une variable de type **Marqueur** correspondant au marqueur sur lequel l'utilisateur a cliqué. <br><br>Si cette propriété correspond à une chaîne vide (""), aucune action ne sera effectuée lors du clic.<br><br>Remarque : il est conseillé d'utiliser des procédures globales. Si la procédure est une procédure locale, il est nécessaire de préfixer le nom de cette procédure par le nom complet de l'objet auquel appartient la procédure (exemple pour une procédure locale de fenêtre : "FEN_Fenêtre1.MaProcedure").<br><br> |
| ActionClicPopup | Chaîne de caractères | Nom de la procédure WLangage appelée lorsque l'utilisateur clique sur la popup du marqueur. <br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Marqueur>)</code></pre><br><br><br>où &lt;Marqueur&gt; est une variable de type **Marqueur** correspondant au marqueur associé à la popup. <br><br>Si cette propriété correspond à une chaîne vide (""), aucune action ne sera effectuée lors du clic.<br><br><br><br> |
| ActionDéplacement | Chaîne de caractères | Nom de la procédure WLangage appelée lorsque l'utilisateur déplace le marqueur affiché dans le champ Carte (si la propriété **Déplaçable** est à <u><u><u><u>Vrai</u></u></u></u>). <br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Marqueur>)</code></pre><br><br><br>où &lt;Marqueur&gt; est une variable de type **Marqueur** correspondant au marqueur déplacé. <br><br>Cette procédure est appelée au moment où l'utilisateur relâche le marqueur. <br><br>Si cette propriété correspond à une chaîne vide (""), aucune action ne sera effectuée.<br><br><br><br><br><br> |
| Alignement | Constante de type Entier | Mode d'alignement du marqueur lorsqu'il est affiché sur une carte : <br><br>- *mqBas* : Marqueur affiché en bas de la position. <br><br>- *mqCentre* : Marqueur affiché sur la position. <br><br>- *mqDroite* : Marqueur affiché à droite de la position. <br><br>- *mqGauche* : Marqueur affiché à gauche de la position. <br><br>- *mqHaut* : Marqueur affiché en haut de la position. <br><br><br> |
| Altitude | Entier | Altitude du marqueur par rapport aux autres marqueurs présents dans le champ Carte. Permet de gérer les superpositions. <br><br>Un marqueur avec une altitude élevée sera dessiné par-dessus un marqueur avec une altitude inférieure. <br><br>Par défaut, cette propriété vaut 0. <br><br> |
| AvecPopup | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si une popup peut être affichée lors du clic sur le marqueur, <br><br>- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. <br><br><br>La popup affiche le nom (propriété **Nom**) et la description du marqueur (propriété **Description**). <br>Il est possible de personnaliser la popup avec la propriété [PageInternePopup](../Proprietes/1000026257.md) ou [FenêtreInternePopup](../Proprietes/1000025608.md). <br><br><br><br> |
| Cluster | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si le marqueur doit être regroupé en cluster si nécessaire, <br><br>- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. <br><br><br><br><br>Remarque : Un nouvel événement optionnel est disponible : "Regroupement de marqueurs". <br><br>- Cet événement est exécuté à chaque fois qu'un cluster de marqueurs est créé ou modifié sur le champ Carte. <br><br>- Il reçoit en paramètre un tableau de variables de type **Marqueur** correspondant aux marqueurs présents dans le cluster. <br><br>- Cet événement peut renvoyer une image ou une variable de type [MarqueurImage](../WDLang3/1000025796.md) qui sera utilisée pour représenter le cluster sur la carte. Si cet événement ne renvoie pas de valeur (ou renvoie une chaîne vide), l'affichage par défaut des clusters sera utilisé.<br><br><br><br><br> |
| Déplaçable | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si le marqueur peut être déplacé par l'utilisateur (via Drag and Drop), <br><br>- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. <br><br><br><br><br>Remarque : Si le marqueur est déplaçable, un nouvel événement optionnel est disponible : "Déplacement d'un marqueur". Cet événement reçoit en paramètre la variable Marqueur associée au marqueur déplacé. La position géographique associée au marqueur est automatiquement mise à jour.  <br><br> |
| Description | Chaîne de caractères | Description du marqueur, utilisée par exemple pour stocker l'adresse correspondant à la position du marqueur. <br><br>Le texte de cette description est utilisée dans la popup du marqueur.<br><br>Cette propriété est optionnelle. |
| Image | Chaîne de caractères ou variable de type [MarqueurImage](../WDLang3/1000025796.md) | <br><br>- Chemin de l'image correspondant à l'icône associée au marqueur. <br><br>- Variable de type [MarqueurImage](../WDLang3/1000025796.md) permettant de personnaliser l'image du marqueur. <br><br><br>Si cette propriété n'est pas spécifiée, l'image par défaut du champ Carte sera utilisée. Cette image est spécifiée dans l'onglet "Général" de la fenêtre de description du champ. <br><br>**Remarque** : Sur la carte, l'icône associée au marqueur sera affichée juste au-dessus de la position spécifiée. |
| Nom | Chaîne de caractères | Nom du marqueur. <br><br>**Remarques** : <br><br>- Cette propriété n'est pas obligatoire : si aucun nom n'est précisé, un nom aléatoire est associé au marqueur. <br><br>- Si une popup est affichée, cette popup affiche ce nom et la description du marqueur.<br><br>- Lors de l'ajout sur une carte d'un marqueur portant le même nom qu'un marqueur existant, la fonction [CarteAjouteMarqueur](../WDLang3/1000019794.md) échoue : le marqueur n'est pas ajouté. <br><br><br> |
| Note | Tout type | Permet de mémoriser des informations additionnelles sur le marqueur qui ne seront pas visibles par l'utilisateur. <br><br> |
| Opacité | Entier | Pourcentage d'opacité de l'affichage du marqueur sur le champ Carte. <br><br><br><br> |
| Position | Variable de type [géoPosition](../WDLang3/1000019191.md) | Position géographique (latitude et longitude) à laquelle doit être affiché le marqueur. <br><br>Si aucune position n'est associée au marqueur, la propriété **Position** retournera NULL. |




<a name="NOTE0_2"></a>




### Fonctions utilisant les variables de type Marqueur
<a name="fonctions_utilisant_les_variables_type_marqueur_ELTPARAGRAPHE000348"></a>


|   |   |
| --- | --- |
| [CarteAjouteMarqueur](../WDLang3/1000019794.md) | Ajoute un nouveau marqueur sur une carte affichée dans un champ Carte. |
| [CarteModifieMarqueur](../WDLang3/1000019796.md) | Modifie un marqueur affiché dans un champ Carte. |
| [CarteSupprimeMarqueur](../WDLang3/1000019795.md) | Supprime un marqueur d'une carte affichée par un champ Carte. |




<a name="NOTE0_3"></a>


### Réinitialisation
<a name="reinitialisation_ELTPARAGRAPHE000355"></a>Pour réinitialiser le contenu d'une variable de type **Marqueur**, il est possible d'utiliser la fonction [VariableRAZ](../WDLang1/3013069.md).


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMGeolocalisation.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Geolocalisation** <br>Cet exemple présente comment gérer des recherches de proximité avec géolocalisation :<br>- recherche autour de moi<br>- recherche dans une ville, à une adresse donnée, proche d'une adresse.<br>Les résultats apparaissent dans une zone répétée et dans une carte avec des marqueurs.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSports.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Sports** <br>Cet exemple est une application de sport vous permettant d'enregistrer vos performances.<br>L'application calcule la distance parcourue, le temps, la vitesse moyenne et le nombre de calories dépensées en fonction du sport pratiqué. <br>Le parcours réalisé est affiché sur un champ carte grâce à des marqueurs et un tracé d'itinéraire. <br>Si vous disposez d'une montre Apple Watch, vous pourrez piloter WM Sports avec votre montre !<br><br>L'exemple dispose aussi d'une partie serveur qui sert à la synchronisation des données des utilisateurs.<br>Ce webservice est disponible dans l'exemple WEBDEV "WW_Sports".
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDCarteEtendue.gif) ***Exemples didactiques (WINDEV)*** : **WD Carte Etendue** <br>Cet exemple montre de manière didactique les différentes fonctionnalités du champ Carte en version desktop (Windows) et mobile (Android, IOS) avec notamment l'utilisation des clusters, marqueurs et fonctions de dessin sur carte.


