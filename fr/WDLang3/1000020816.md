
## NotifPushActive (Fonction)

***En anglais : NotifPushEnable***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Active la gestion des notifications push dans une application WINDEV Mobile (Android ou iOS).


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Activation des notifications push
NotifPushActive(EnregistreNotifPush)
```

```wl
// Gestion de l'enregistrement
PROCEDURE EnregistreNotifPush(Token est un Buffer, ErreurNotif est une chaîne)
SI Taille(Token) > 0 ALORS
	// Informe le serveur d'application du nouvel identifiant
	EnvoieIDSurServeur(Token)
SINON
	// Traitement de l'erreur
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`NotifPushActive(<Procédure WLangage> [, <Options>])`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage appelée lorsque l'application reçoit l'identifiant d'enregistrement du service de notification.

**`<Options> : (Combinaison de constantes optionnelle de type Entier)`**

Options d'enregistrement. Peut correspondre à une ou plusieurs des constantes suivantes : 


|   |   |
| --- | --- |
| *notifPushToutesNotif*<br>(Valeur par défaut) | L'application mobile acceptera toutes les types de notifications push. |
| *notifPushTypeAlerte* | L'application mobile acceptera les notifications push sous forme d'alerte. <br><br> |
| *notifPushTypePastille* | L'application mobile acceptera les notifications push sous forme de pastille. <br><br> |
| *notifPushTypeSon* | L'application mobile acceptera les notifications push sonores. <br><br> |


Attention : Ces options sont prises en compte à la première installation de l'application. L'utilisateur peut ensuite modifier les notifications acceptées dans le Centre de notifications de l'appareil. 



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Procédure WLangage appelée
<a name="procedure_wlangage_appelee_ELTPARAGRAPHE000073"></a>La procédure WLangage appelée par la fonction **NotifPushActive** doit être de la forme :


```txt
PROCEDURE EnregistreNotifPush(<Identifiant> est un Buffer, <Erreur> est une chaîne)
```


Cette procédure est rappelée lorsque l'enregistrement auprès du service de notification s'est terminé.

Les paramètres de cette procédure sont les suivants : 

- &lt;Identifiant&gt; : Buffer "token" correspondant à l'identifiant d'enregistrement retourné par le service de notification. Ce buffer doit ensuite être transmis au serveur d'application afin qu'il puisse envoyer des notifications push à l'application. 
	**Attention** : Ce buffer doit être transmis au serveur d'application :

	- lorsque sa valeur a changé par rapport à la précédente exécution de l'application. Il faut pour cela mémoriser sa valeur dans un fichier de données de l'application ou dans un buffer sur disque créé avec les fonctions [fSauveBuffer](../WDLang1/1000019412.md) ou [SauveParamètre](../WDLang1/3025046.md).

	- si l'application est lancée par l'utilisateur (et non par l'arrivée d'une notification push). La fonction [ExeInfo](../WDLang1/3035001.md) permet de savoir si l'application est lancée par l'arrivée d'une notification.


 Ce buffer peut être vide si une erreur d'enregistrement s'est produite lors de la demande d'enregistrement. Dans ce cas, le paramètre &lt;Erreur&gt; sera renseigné avec le message d'erreur.
	
	

- &lt;Erreur&gt; : Chaîne de caractères décrivant une erreur d'enregistrement. Ce paramètre est renseigné uniquement si une erreur est survenue durant la demande d'enregistrement.



<a name="NOTE0_2"></a>


### Cas particuliers
<a name="cas_particuliers_ELTPARAGRAPHE000124"></a>

- La fonction **NotifPushActive** est asynchrone car elle exécute une requête : 








- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMPush.gif) ***Exemples multiplateforme*** : **WM Push** <br>Cet exemple montre comment recevoir des notifications Push.<br>Il appelle la fonction NotifPushActive et envoie l'identifiant obtenu à l'exemple WINDEV "WD Serveur Push" afin qu'il le stocke.<br>Cet identifiant est ensuite lu par l'exemple WINDEV "Envoi Push" afin qu'il envoie les notifications en push à cet exemple.


<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280android.jar