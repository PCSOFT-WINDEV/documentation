
## inAppVérifieAbonnement (Fonction)

***En anglais : inAppCheckSubscription***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Vérifie au démarrage de l'application iOS si les abonnements In-App ont été renouvelés. 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Code d'initialisation du projet
inAppVérifieAbonnement(VérifAbonnement)
```

```wl
PROCEDURE VérifAbonnement(bSuccès est un booléen, Produit est un inAppProduit)
SI PAS bSuccès ALORS
	ToastAffiche(ErreurInfo())
	RETOUR
SINON	
	// Appel de la fonction inAppListeAchat 
	// pour vérifier la date de début et fin de l'abonnement
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`inAppVérifieAbonnement(<Procédure WLangage>)`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") exécutée si un des abonnements a été renouvelé. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Succès> est un booléen, <Produit> est un inAppProduit)
```
où : 

- &lt;Succès&gt; est un booléen : 

	- <u><u><u><u>Vrai</u></u></u></u> si l'abonnement a été renouvelé, 

	- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire.




- &lt;Produit&gt; est une variable de type [inAppProduit](../WDLang3/1000020868.md) correspondant au produit pour lequel le renouvellement de l'abonnement est vérifié. 






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Principe et mise en place
<a name="principe_mise_place_ELTPARAGRAPHE000051"></a>Sous iOS, il est possible de créer des abonnements auto-renouvelables pour les achats in-App.

Lorsque ce type d'abonnement arrive à terme, l'AppStore renouvelle automatiquement l'abonnement. Une nouvelle transaction d'achat est automatiquement créée et est transmise au démarrage suivant de l'application. Cette transaction doit donc être gérée par l'application pour prendre en compte le renouvellement de l'abonnement.

La fonction **inAppVérifieAbonnement** doit être appelée le plus tôt possible dans l'événement "Initialisation" du projet, afin de traiter les renouvellements d'abonnement. La procédure sera appelée autant de fois qu'il y a d'abonnements à renouveler. 

<a name="XComposante"></a>



