
## Notification Push : Configuration Android (Firebase)
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000149"></a>
A partir de WINDEV Mobile 22 Update 1 (version 220052), les notifications Push en Android utilisent la plateforme Firebase (et non Google Cloud Messaging). 

Pour utiliser la plateforme Firebase, il est nécessaire de posséder un compte Google et d'effectuer une configuration spécifique. 

Cette page d'aide présente les différentes manipulations à effectuer. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Les différentes étapes
<a name="les_differentes_etapes_ELTTEXTE000173"></a>
Les différentes étapes sont les suivantes : 

**1. Création d'un projet Firebase**

La création de projet Firebase se fait depuis la console Firebase accessible à l'adresse suivante : [https://console.firebase.google.com/](https://console.firebase.google.com/)
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase1.gif&type=thumb)


Remarque : Il est possible également d'importer un projet Google API Project (utilisé pour les envois de notifications push par GCM) depuis cette console.

**2. Ajouter Firebase à l'application Android**

- Cliquez sur le bouton "Ajouter Firebase à votre application Android". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase2.gif&type=thumb)


- Renseignez le nom de package de l'application avec celui saisi dans l'assistant de génération Android. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase3.gif)


- Cliquez sur le bouton "Enregistrer l'application". 

- L'étape suivante permet de télécharger le fichier "google-services.json".  <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase4.gif&type=thumb)


- Cliquez sur "Suivant" puis sur "Accéder à la console".




**3. Téléchargez le fichier "google-services.json".**  
Si vous n'avez pas téléchargé le fichier "google-services.json" précédemment :  

- Affichez les paramètres de votre application : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase5.gif&type=thumb)


- Dans la partie concernant l'application Android, téléchargez le fichier "google-services.json". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase5B.gif&type=thumb)



Ce fichier doit être fourni dans l'assistant de génération de l'application : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Push_Android_firebase%20-%20HC%20N%B0001.gif)


4. Récupérez les informations nécessaires à la fonction **NotifPushEnvoie**. 
Deux types d'API Cloud Messaging sont disponibles : 

- API Firebase Cloud Messaging (V1) : Par défaut, cette API est activée sur les nouveaux projets. 

- API Cloud Messaging (ancienne version) : Cette API est désactivée par défaut sur les nouveaux projets. 




Jusqu'à la version 28, seule "API Cloud Messaging (ancienne version)" était gérée. 

**Pour gérer l'API Cloud Messaging (ancienne version)** : 

- Cliquez sur l'onglet "Cloud Messaging". 

- Activez si nécessaire la gestion de l'API Cloud Messaging (ancienne version) dans les paramètres du projet Firebase. 

- Copiez l'identifiant de la clé serveur. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase6.gif&type=thumb)
 Ce numéro de clé doit être fourni en paramètre à la fonction [NotifPushEnvoie](../WDLang3/1000020819.md). 




**Pour gérer l'API Cloud Messaging V1** : 

- Cliquez sur l'onglet "Cloud Messaging". 

- Activez si nécessaire la gestion de l'API Firebase Cloud Messaging dans les paramètres du projet Firebase. 

- Cliquez sur l'onglet "Comptes de services", puis cliquez sur "Générer une nouvelle clé privée". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Notif_FireBase7.gif&type=thumb)


- Validez le message d'avertissement en cliquant sur "Générer la clé". 

- Un fichier JSON est téléchargé sur le poste en cours. Le contenu de ce fichier JSON doit être fourni en paramètre à la fonction [NotifPushEnvoie](../WDLang3/1000020819.md) (il est par exemple possible d'utiliser la fonction [fChargeTexte](../WDLang1/3036006.md), pour obtenir le contenu du fichier JSON).









