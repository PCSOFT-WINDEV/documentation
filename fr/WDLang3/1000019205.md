


## GPSRécupèrePosition (Fonction)

***En anglais : GPSGetPosition***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Récupère les informations sur la position actuelle du périphérique.

![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) La fonction **GPSRécupèrePosition** doit être exécutée dans un thread. 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
MaPosition est une géoPosition
MaPosition = GPSRécupèrePosition()
// Vérifie validité de la position avec ErreurDétectée
SI ErreurDétectée ALORS RETOUR
Info(" Latitude : " + MaPosition.Latitude)  
Info(" Longitude : " + MaPosition.Longitude)
```
<a name="Exemple2"></a>

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 
### Récupération des informations sur un périphérique (mobile, ...)

`<Résultat> = GPSRécupèrePosition([<Timeout> [, <Message>]])`
---

**`<Résultat> : (Variable de type géoPosition)`**

Variable de type [géoPosition](../WDLang3/1000019191.md) contenant les informations sur la position du périphérique. Si la position est invalide, la variable [ErreurDétectée](../WDLang1/3087001.md) vaut <u><u><u><u>Vrai</u></u></u></u> et le détail de l'erreur peut être obtenu avec la fonction [ErreurInfo](../WDLang1/3013008.md).



**`<Timeout> : (Entier optionnel ou Durée optionnelle)`**

Délai maximal (en centièmes de seconde) d'attente pour la mise à jour de la position du périphérique.

- Si ce délai est écoulé avant que la position du périphérique n'ait été mise à jour, une erreur se produit. Cette erreur peut être détectée grâce à la variable [ErreurDétectée](../WDLang1/3087001.md) et le détail de l'erreur peut être obtenu avec la fonction [ErreurInfo](../WDLang1/3013008.md).

- Si ce paramètre n'est pas spécifié, le délai est de 1 minute.


Remarque : Ce paramètre peut correspondre à : 

- un entier correspondant au nombre de centièmes de seconde, 

- une variable de type Durée, 

- l'indication directe de la durée (par exemple 1 s ou 10 ms). 




**`<Message> : (Chaîne de caractères optionnelle)`**

Message du sablier affiché pendant la mise à jour de la position.

**Remarque** : Ce paramètre est pris en compte uniquement si l'appel est effectué dans le thread principal de l'application.
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Ce paramètre n'est pas pris en compte.


<a name="SYNTAXE2"></a>

<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Gestion des blocages
<a name="gestion_des_blocages_ELTPARAGRAPHE000207"></a>La fonction **GPSRécupèrePosition** est bloquante jusqu'à ce que la position actuelle de l'appareil ait pu être déterminée ou que le délai d'attente fixé par le paramètre &lt;Timeout&gt; ait expiré. 

Si la fonction est appelée dans le thread principal de l'application, un sablier sera affiché durant l'exécution de la fonction. Le message affiché par le sablier peut être spécifié grâce au paramètre &lt;Message&gt;. 
Dans le cas contraire, l'exécution du thread secondaire sera bloquée durant l'exécution de la fonction et aucun sablier ne sera affiché.



**Remarque** : Pour connaître la dernière position connue de l'appareil sans délai d'attente, utilisez la fonction [GPSDernièrePosition](../WDLang3/1000019239.md). Attention, les informations de positionnement récupérées peuvent ne pas correspondre à la position actuelle du périphérique si par exemple le périphérique a été déplacé alors que le signal GPS n'était pas valide. Il est possible de connaître la date et l'heure à laquelle la position a été calculée grâce à la propriété **DateMesure** de la variable de type [géoPosition](../WDLang3/1000019191.md).
![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Propriétés récupérées
<a name="proprietes_recuperees_ELTPARAGRAPHE000233"></a>

- Pour savoir si les propriétés [Vitesse](../WDLang3/1000019191.md), [Précision](../WDLang3/1000019191.md), [Direction](../WDLang3/1000019191.md) ou [Altitude](../WDLang3/1000019191.md) d'une variable de type [géoPosition](../WDLang3/1000019191.md) ont été renseignées lors de la récupération de la position, utilisez les propriétés [VitesseValide](../WDLang3/1000019191.md), [PrécisionValide](../WDLang3/1000019191.md), [DirectionValide](../WDLang3/1000019191.md) et [AltitudeValide](../WDLang3/1000019191.md).

- Pour réinitialiser une variable de type géoPosition, utilisez la fonction [VariableRAZ](../WDLang1/3013069.md).

- Les informations de positionnement récupérées correspondent à la dernière position connue du périphérique : elles peuvent donc ne pas correspondre à la position actuelle du périphérique si par exemple le périphérique a été déplacé alors que le signal GPS n'était pas valide. Il est possible de connaître la date et l'heure à laquelle la position a été calculée grâce à la propriété [DateMesure](../WDLang3/1000019191.md) de la variable [géoPosition](../WDLang3/1000019191.md).

- Les propriétés [Vitesse](../WDLang3/1000019191.md), [Précision](../WDLang3/1000019191.md), [Direction](../WDLang3/1000019191.md) et [Altitude](../WDLang3/1000019191.md) seront renseignées uniquement si le fournisseur de localisation le permet (dans le cas contraire, elles prendront leur valeur par défaut). 
	



![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Fonctionnalité d'application requise
<a name="fonctionnalite_application_requise_ELTPARAGRAPHE000547"></a>L'utilisation de cette fonction entraîne la déclaration d'une fonctionnalité d'application dans l'assistant de génération de l'application.

Fonctionnalité requise : Géolocalisation

Cette fonctionnalité permet aux applications d'accéder aux données de géolocalisation de l'appareil ou de l'ordinateur. 

<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280java.dll
