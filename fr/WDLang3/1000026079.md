


## &lt;modbusSession&gt;.LitFlottant (Fonction)

***En anglais : &lt;modbusSession&gt;.ReadFloat***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Lit un ou plusieurs flottants "simple précision" à partir d'une adresse précise dans un esclave Modbus.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Crée une session et connexion à un serveur Modbus
Session est un modbusSession
Session = ModbusConnecteTCP("192.168.1.7")

tabRéponse est un tableau de 5 réels sur 4 octets

// Si la connexion échoue, affiche l'erreur
SI ErreurDétectée = Vrai ALORS
	Trace(ErreurInfo())
SINON
	// Lit une séquence de 5 flottants en mode ABCD
	// en lecture-écriture à partir de l'adresse 0x42.
	tabRéponse = Session.LitFlottant(0x42, 5, Faux, modbusABCD)
	// Si il y a eu une erreur on l'affiche.
	SI ErreurDétectée = Vrai ALORS
		Trace(ErreurInfo())	
	FIN
FIN

// Déconnexion
Session.Déconnecte()
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

### Lire 1 flottant simple précision sur un esclave Modbus

`<Résultat> = <Session>.LitFlottant(<Adresse> , <Lecture seule> , <Boutisme>)`
---

**`<Résultat> : (Réel)`**

Valeur du flottant lue.

**`<Session> : (Variable de type modbusSession)`**

Nom de la variable de type [modbusSession](../WDLang3/1000025924.md) correspondant à la session de communication vers l'esclave Modbus.

**`<Adresse> : (Entier)`**

Adresse de lecture du flottant dans l'esclave (comprise entre 0 et 65 535).

**`<Lecture seule> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si les flottants à lire font partie des données en lecture seule (correspond au code fonction Modbus 4 (Read Input Registers)). 

- <u><u><u><u>Faux</u></u></u></u> si les flottants à lire font partie des données en lecture-écriture (correspond au code fonction Modbus 3 (Read Multiple Holding Registers)).




**`<Boutisme> : (Constante de type Entier)`**

Mode de stockage du flottant dans la mémoire de l'esclave. Les octets sont identifiés de A à D, avec A l'octet de poids fort et D l'octet de poids faible (norme flottant IEEE-754).


|   |   |
| --- | --- |
| *modbusABCD* | Les octets envoyés conservent le même ordre dans la mémoire de l'esclave. |
| *modbusBADC* | Les octets envoyés sont inversés 2 à 2 dans la mémoire de l'esclave. |
| *modbusCDAB* | Les octets envoyés sont inversés 2 à 2 dans la mémoire de l'esclave. |
| *modbusDCBA* | Les octets envoyés sont inversés dans la mémoire de l'esclave. |




<a name="SYNTAXE2"></a>

### Lire plusieurs flottants simple précision sur un esclave Modbus

`<Résultat> = <Session>.LitFlottant(<Adresse> , <Nombre de flottants> , <Lecture seule> , <Boutisme>)`
---

**`<Résultat> : (Tableau)`**

Tableau de réels contenant la valeur des flottants lus.

**`<Session> : (Variable de type modbusSession)`**

Nom de la variable de type [modbusSession](../WDLang3/1000025924.md) correspondant à la session de communication vers l'esclave Modbus.

**`<Adresse> : (Entier)`**

Adresse de début de lecture des flottants dans l'esclave (comprise entre 0 et 65 535).

**`<Nombre de flottants> : (Entier)`**

Nombre de flottants à lire (que l'esclave va envoyer).

**`<Lecture seule> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si les flottants à lire font partie des données en lecture seule (correspond au code fonction Modbus 4 (Read Input Registers)). 

- <u><u><u><u>Faux</u></u></u></u> si les flottants à lire font partie des données en lecture-écriture (correspond au code fonction Modbus 3 (Read Multiple Holding Registers)).




**`<Boutisme> : (Constante de type Entier)`**

Mode de stockage du flottant dans la mémoire de l'esclave. Les octets sont identifiés de A à D, avec A l'octet de poids fort et D l'octet de poids faible (norme flottant IEEE-754).


|   |   |
| --- | --- |
| *modbusABCD* | Les octets envoyés conservent le même ordre dans la mémoire de l'esclave. |
| *modbusBADC* | Les octets envoyés sont inversés 2 à 2 dans la mémoire de l'esclave. |
| *modbusCDAB* | Les octets envoyés sont inversés 2 à 2 dans la mémoire de l'esclave. |
| *modbusDCBA* | Les octets envoyés sont inversés dans la mémoire de l'esclave. |





<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


- L'exécution de cette fonction est bloquante tant que l'esclave n'a pas répondu au message ou tant que le délai d'attente de la session n'est pas dépassé. 

- Après l'appel de la fonction **&lt;modbusSession&gt;.LitFlottant**, il est conseillé de vérifier la variable [ErreurDétectée](../WDLang1/3087001.md) pour s'assurer qu'il n'y a pas d'erreur.




<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280com.dll
