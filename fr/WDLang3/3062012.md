
## sLit (Fonction)

***En anglais : sRead***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Lit une chaîne de caractères dans le buffer d'entrée du port série spécifié. Le port doit être préalablement ouvert (fonction [sOuvre](../WDLang3/3062013.md)).

**Remarques** : 

- Cette fonction ne peut pas être utilisée avec un port parallèle.

- ![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) La gestion des ports infrarouges n'est pas disponible.

- ![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) Seuls les ports séries sont gérés.  











<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 
```wl
// Lecture dans la variable Message de 20 caractères dans
// le buffer d'entrée de COM1
Mess est une chaîne
Mess = sLit(1, 20)
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

### Lire un nombre d'octets et récupérer une chaîne

`<Résultat> = sLit(<Numéro de port> , <Nombre d'octets à lire>)`
---

**`<Résultat> : (Chaîne de caractères)`**



- Chaîne de caractères lue dans le buffer d'entrée, 

- 0 si la lecture n'a pas été effectuée.




**`<Numéro de port> : (Entier)`**



- Numéro du port série concerné : 1, 2, 3, ... 32 pour COM1, COM2, COM3, ... COM32. 

- Identifiant du port série renvoyé par la fonction [sOuvre](../WDLang3/3062013.md) (si cette fonction a été appelée avec un nom de port série). 
	![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) Seul ce type de paramètre est disponible.




**`<Nombre d'octets à lire> : (Entier)`**

Nombre d'octets à lire dans le buffer d'entrée du port série. Le nombre d'octets à lire peut être obtenu avec la fonction [sDansFileEntrée](../WDLang3/3062004.md).  



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Divers 
<a name="divers_ELTPARAGRAPHE000102"></a>

- Si le port n'a pas été ouvert par la fonction [sOuvre](../WDLang3/3062013.md), la fonction **sLit** n'a aucune action.

- La fonction **sLit** vide la file d'entrée du nombre d'octets réellement lus.

- Une application 32 bits est bloquée pendant la durée du transfert. Pour éviter ce blocage, il faut préciser le temps d'attente entre deux lectures dans la fonction [sOuvre](../WDLang3/3062013.md). Lorsque le temps d'attente est terminé et si la lecture n'a pas pu être réalisée, **sLit** renvoie 0.

- Le WLangage ne permet pas de gérer les signaux de contrôle.

- La durée d'attente accordée pour la lecture ou l'écriture d'un caractère est spécifiée avec la fonction [sOuvre](../WDLang3/3062013.md). 

	- Si cette durée vaut 1s avec une lecture de 1024 octets, la durée d'attente effective sera de 1024s. 

	- Si cette durée vaut "-1s" avec une lecture de 1024 octets, la durée d'attente effective sera de 1s.


 Il est ainsi possible d'éviter un blocage lors d'un problème de lecture ou d'écriture sur le port d'impression.





<a name="NOTE0_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Transmission entre deux postes utilisant des formats de chaînes de caractères différents (UNICODE et ANSI)
<a name="transmission_entre_deux_postes_utilisant_des_formats_chaines_caracteres_differents_unicode_ansi_ELTPARAGRAPHE000140"></a>

Lors de la transmission de messages entre deux postes utilisant un format de chaînes de caractères différent (par exemple Windows (ANSI) et Windows Mobile (UNICODE)), certaines conversions sont nécessaires :


|   |   |   |   |
| --- | --- | --- | --- |
| **Format des chaînes de caractères sur le poste en cours** | **Ecriture**<br>(fonction [sEcrit](../WDLang3/3062009.md)) | **Lecture**<br>(fonction **sLit**) |
| **Buffer contenant une chaîne au format ANSI** | **Buffer contenant une chaîne au format UNICODE** |
| ANSI<br>(PC sous Windows par exemple) | La chaîne de caractères sera au format ANSI | Aucune conversion nécessaire | Conversion nécessaire (fonction [UnicodeVersAnsi](../WDLang1/3024025.md)) |
| UNICODE | La chaîne de caractères sera au format UNICODE | Conversion nécessaire (fonction [AnsiVersUnicode](../WDLang1/3024002.md)) | Aucune conversion nécessaire |




![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) **Cas particulier sous Linux** : 

- Seuls les ports série peuvent être ouverts et initialisés. 

- Par défaut, l'utilisateur n'a pas accès aux ports série. Il est nécessaire de lui accorder des droits spécifiques pour manipuler les ports série. 



![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) 

### Utilisation d'une librairie externe : RXTX
<a name="utilisation_une_librairie_externe_rxtx_ELTPARAGRAPHE000371"></a>En Java, l'utilisation des fonctions de manipulation des ports séries et parallèles (fonctions [sOuvre](../WDLang3/3062013.md), [sEcrit](../WDLang3/3062009.md), [sLit](../WDLang3/3062012.md), ...) nécessite la présence d'une librairie externe : RXTX. 

Cette librairie est composée d'une archive Jar et d'une ou plusieurs librairies natives dépendantes du système d'exploitation sur lequel s'exécute l'application.
 
Pour utiliser ces fonctions : 

- l'archive jar (RXTXComm.jar) doit : 

	- soit se trouver dans le même répertoire que l'application Java générée par WINDEV, 

	- soit se trouver dans le classpath d'exécution de l'application, 

	- soit être directement intégrée dans l'application générée (depuis l'assistant de génération Java). 




- la ou ou les librairies natives correspondant au système d'exploitation sur lequel s'exécute l'application doivent se trouver: 

	- soit  dans le même répertoire que l'application Java générée par WINDEV, 

	- soit dans le chemin des librairies de l'application (librarypath).







Il est possible de télécharger la librairie RXTX et sa documentation grâce au lien suivant : [http://users.frii.com/jarvi/rxtx/index.html](http://users.frii.com/jarvi/rxtx/index.html) (lien valide lors de l'écriture de cette documentation). 

**Attention** : La gestion des ports infrarouges n'est pas disponible en Java. 
<a name="NOTE0_3"></a>

<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280com.dll
