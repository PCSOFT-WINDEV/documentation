
## Services REST : Procédure prologue (exécutée avant chaque appel)
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000089"></a>
Il est possible d'indiquer dans la description d'un Webservice qu'une procédure sera appelée (et exécutée automatiquement) à chaque appel d'un Webservice. Cela permet par exemple de mettre en place des systèmes de sécurité ou de facturation, comme une vérification d'un token passé dans l'entête.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Caractéristiques
<a name="caracteristiques_ELTTEXTE000113"></a>
Cette procédure est exécutée à chaque appel à un point d'entrée juste avant la procédure associée à ce point d'entrée.

Cette procédure permet d'exécuter un code qui doit être exécuté pour tous les points d'entrée. Par exemple vérifier que le client est bien authentifié et a bien le droit d'appeler ces points d'entrée.

Pendant l'appel de cette procédure toutes les fonctions de la famille Webservice sont disponibles.

Il est possible de refuser l'appel du point d'entrée de la façon suivante :

1. Un appel de la fonction [WebserviceEcritCodeHTTP](../WDLang3/1000022785.md) pour donner le code de retour et le contenu éventuel de la réponse.

2. Suivi de la ligne de code "RENVOYER Faux" pour indiquer que l'appel doit être refusé.





### Cas avancés
<a name="cas_avances_ELTPARAGRAPHE000031"></a>Cette procédure est exécutée à chaque appel à un point d'entrée de la description de Webservice REST. Mais un Webservice REST peut être constitué de plusieurs descriptions de Webservice REST. Chacune des descriptions a sa propre procédure prologue (qui peuvent être la même, différente ou même aucune).

Exemple : un Webservice avec authentification :

- Une première description "REST_Authentification", sans procédure prologue, avec les points d'entrée pour authentifier l'utilisateur. 
	Cette description peut être partagée entre plusieurs projets.

- Une seconde description avec procédure prologue qui vérifie l'authentification.
	Cette description est spécifique à ce Webservice REST.





