
## SocketAttendConnexion (Fonction)

***En anglais : SocketWaitForConnection***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Exécutée sur le poste serveur, cette fonction permet d'attendre une demande de connexion provenant de sockets clients.

**Remarques** :

- Si le poste client utilise une application WINDEV pour se connecter à ce socket, la demande de connexion est effectuée par la fonction [SocketConnecte](../WDLang3/3070016.md).

- **Socket de type UDP** : La fonction **SocketAttendConnexion** ne peut pas être utilisée avec des sockets de type UDP.








**Rappel** : Un socket est une ressource de communication utilisée par les applications pour communiquer d'une machine à une autre sans se soucier du type de réseau.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 
```wl
// Crée un socket sur le poste serveur
SI SocketCrée("Serveur", 8000) = Faux ALORS
	Erreur("Erreur de création " + ErreurInfo(errMessage))
SINON
	// Gestion des connexions des postes clients dans un thread
	ThreadExécute("Thread1", threadNormal, ProcédureAttente)
FIN


PROCEDURE INTERNE ProcédureAttente()
	SI SocketAttendConnexion("Serveur") ALORS
		Canal est une chaîne
		// Si la connexion est acceptée, 
		// la gestion de cette connexion est réalisée dans un thread spécifique
		Canal = SocketAccepte("Serveur")
		ThreadExécute(Canal, threadNormal, ProcédureGestion, Canal)
	SINON
		SI PAS SocketExiste("Serveur") ALORS 
      		  	SORTIR
		FIN
	FIN
FIN
```



<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = SocketAttendConnexion(<Nom du socket> [, <Durée maximale>])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> : une nouvelle demande de connexion est en attente.

- <u><u><u><u>Faux</u></u></u></u> : aucune demande de connexion n'a été détectée.




**`<Nom du socket> : (Chaîne de caractères)`**

Nom du socket serveur qui attend la connexion.

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Attention : Le nom du socket est "case-sensitive".

**`<Durée maximale> : (Entier optionnel ou Durée optionnelle)`**

Durée d'attente maximale (en millisecondes). 

- Cette fonction est bloquante pendant la durée indiquée ou jusqu'à la détection d'une demande de connexion.

- Si ce paramètre n'est pas précisé, la fonction est bloquante jusqu'à la prochaine tentative de connexion. 


**Remarque** : si cette fonction est utilisée en multi-thread, la fonction ne bloque que le thread dans lequel elle est appelée.  

Ce paramètre peut correspondre à : 

- un entier correspondant au nombre de millisecondes, 

- une variable de type Durée, 

- l'indication directe de la durée (par exemple 1 s ou 10 ms). 









## Remarques
<a name="XComposante"></a>

## Composante :
wd280com.dll
