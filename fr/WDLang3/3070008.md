
## Gestion des sockets avec WINDEV, WEBDEV et WINDEV Mobile
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000186"></a>
WINDEV, WEBDEV et WINDEV Mobile mettent à votre disposition des fonctions qui permettent de réaliser une gestion avancée des sockets.

Un socket est une ressource de communication utilisée par les applications pour communiquer d'une machine à une autre sans se soucier du type de réseau.

Ce mode de communication peut par exemple être utilisé pour établir une communication entre des postes reliés par Internet.



WINDEV, WEBDEV et WINDEV Mobile permettent de gérer :

- Les sockets standard.

- Les sockets UDP.

- Les sockets par infra-rouge.

- Les sockets SSL.




Quelques exemples d'utilisation des sockets :

- gestion d'une messagerie en temps réel.

- accès à un serveur de news (forum).








<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Différentes possibilités
<a name="differentes_possibilites_ELTTEXTE000210"></a>
Une application WINDEV ou WEBDEV peut gérer les sockets selon différents modes :

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) [Application WINDEV/WEBDEV Cliente](../WDLang3/3070017.md) : l'application se connecte à un serveur quelconque et échange des données par un socket.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) [Application WINDEV "Serveur simplifié"](../WDLang3/3070001.md) : l'application WINDEV est un serveur, échangeant des informations par un socket avec **un seul poste** client (socket WINDEV conseillé sur le poste client mais non obligatoire).

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) [Application WINDEV "Serveur standard"](../WDLang3/3070003.md) : l'application WINDEV est un serveur, échangeant des informations par sockets avec **plusieurs postes** client quelconques.








<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Modification du comportement général des sockets
<a name="modification_comportement_general_des_sockets_ELTTEXTE000234"></a>


### Optimisation des trames réseau
<a name="optimisation_des_trames_reseau_ELTPARAGRAPHE000078"></a>Par défaut, dans Windows, les trames réseau sont optimisées selon l'algorithme Nagle.

Pour communiquer avec un système qui ne supporte pas cette optimisation (certains automates industriels par exemple), il est nécessaire de désactiver cette optimisation.

Pour cela, il suffit de saisir le code suivant :


```wl
Socket.Option = SocketNagleOff
```



<a name="NOTE3_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Optimisation des connexions dans le cas d'une adresse IP
<a name="optimisation_des_connexions_dans_cas_une_adresse_ELTPARAGRAPHE000094"></a>Lorsqu'une adresse IP est passée à la fonction [SocketConnecte](../WDLang3/3070016.md), il est possible d'optimiser la connexion en utilisant le code suivant :  


```wl
Socket.Option = SocketOptimiseConnexionIP
```


Cette option n'est pas activée par défaut car la connexion peut échouer dans certaines configurations. Cependant, elle peut être intéressante dans certaines applications où les performances sont critiques.
<a name="NOTE3_3"></a>


### Réutilisation d'une adresse déjà utilisée
<a name="reutilisation_une_adresse_deja_utilisee_ELTPARAGRAPHE000110"></a>Par défaut, la fonction [SocketCrée](../WDLang3/3070011.md) permet de réutiliser une adresse déjà utilisée (par l'application elle-même ou par une autre application). Pour ne pas autoriser ce fonctionnement, il suffit de saisir le code suivant :


```wl
Socket.Option = SocketAdresseUnique
```


**Remarque** : Par extension, cette option permet donc de savoir si une adresse ou un port est déjà utilisé. Dans ce cas, la fonction [SocketCrée](../WDLang3/3070011.md) renvoie une erreur.


<a name="NOTE3_4"></a>


### Utilisation des paramètres par défaut
<a name="utilisation_des_parametres_par_defaut_ELTPARAGRAPHE000130"></a>Pour retrouver le paramétrage par défaut, il suffit de saisir le code suivant :


```wl
Socket.Option = SocketOptionDéfaut
```



- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDMessagerieInstantanee.gif) ***Exemples complets (WINDEV)*** : **WD Messagerie Instantanée** <br>Cet exemple illustre les fonctions "Socket" de WINDEV.<br>Dans cet exemple, nous abordons deux thèmes principaux :<br>1/ Comment se connecter à une socket<br>2/ Comment créer une socket<br>Résumé de l'exemple livré avec WINDEV :	<br>Cet exemple présente les différentes fonctions de gestion des sockets livrées en standard avec WINDEV. Pour utiliser cet exemple, vous devez entrer dans votre carnet d'adresse une liste de contacts en les identifiant par un nom et l'adresse IP de leur machine. Lors du lancement de l'application, le programme recherche les contacts accessibles (donc qui ont lancé cette application sur leur poste). En double-cliquant sur un contact "connecté" une fenêtre de discussion instantanée s'ouvre et permet de communiquer avec le contact
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDUtilisationdessockets.gif) ***Exemples didactiques (WINDEV)*** : **WD Utilisation des sockets** <br>Cet exemple illustre les fonctions "Socket" de WINDEV dans une utilisation de type client/serveur.<br>Dans cet exemple, nous abordons deux thèmes principaux :<br>1/ Comment se connecter à une socket<br>2/ Comment accepter une demande de connexion<br>3/ Comment écrire ou lire sur une socket<br>Résumé de l'exemple livré avec WINDEV :	<br>Cet exemple présente les différentes fonctions de gestion des sockets livrées en standard avec WINDEV. Pour utiliser cet exemple, il est nécessaire de lancer une première instance de l'exemple en mode "serveur". Ensuite, en donnant le nom de la machine faisant office de serveur et un pseudonyme, vous pouvez vous connecter à cette application en mode "client". Il est alors possible d'envoyer des messages à tous les utilisateurs connectés. Dans cet exemple, à chaque connexion est associée : un thread et une socket .
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDSockets.gif) ***Composants (WINDEV)*** : **WD Sockets** <br>Cet exemple propose un composant pour faire dialoguer facilement deux applications en utilisant des sockets.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDTraceSocket.gif) ***Composants (WINDEV)*** : **WD Trace Socket** <br>Le principe de cet exemple est de tracer tout ce qui passe sur une communication via socket, sur une adresse donnée, sur un port donné. Cela permet de comprendre ce qu'il se passe dans un dialogue via socket entre deux applications.<br>Ainsi, dans des applications qui dialoguent via socket, même si les développeurs n'ont pas prévu d'option de trace, il sera possible de voir l'ensemble des échanges effectués sur la socket.<br>Cet exemple peut également permettre de mieux comprendre le fonctionnement des protocoles réseau basés sur les sockets : POP3, SMTP, FTP, HTTP, etc.<br>Note pour les utilisateurs avertis en communication réseau : <br>Cet exemple ne permet de tracer que les communications TCP, mais ne permet pas de tracer les paquets UDP.




