
## Procédure WLangage appelée par la fonction iCloudCléValeurSurveille



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Procédure WLangage (également nommée "callback") appelée par la fonction [iCloudCléValeurSurveille](../WDLang3/1410088760.md) lors de la surveillance d'une clé. Cette procédure permet de connaître la cause de la modification.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
SI iCloudCléValeurSurveille(Callback_Surveillance) = Vrai ALORS
	Trace("Lancement de la surveillance")
FIN

PROCÉDURE INTERNE Callback_Surveillance(nEvénement, tabClés)
	sLibelléEvénement, sListeClé est une chaîne
		
	SELON nEvénement
		CAS iccvModificationServeur : sLibelléEvénement = "Modification serveur"
		CAS iccvModificationSynchronisationInitiale : sLibelléEvénement = "Synchronisation initiale"
		CAS iccvViolationQuota : sLibelléEvénement = "Dépassement de quota"
		CAS iccvChangementCompte : sLibelléEvénement = "Changement de compte"
		CAS iccvEchecSynchronisation : sLibelléEvénement = "Échec de synchronisation"
		AUTRE CAS
				sLibelléEvénement = "Non géré"
	FIN
		
	Trace("------------------>>> " + sLibelléEvénement)
		
	POUR TOUT sClé DE tabClés
		Trace(sClé)
		sListeClé += [" / "] + sClé
	FIN
	gsCompteRenduSurveillance += [RC] + sLibelléEvénement + TAB + sListeClé
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`iCloudCléValeurSurveille_Callback(<Événement> , <Clés>)`
---

**`<Événement> : (Constante de type Entier)`**

Cause de l'événement : 



|   |   |
| --- | --- |
| *iccvChangementCompte* | L'utilisateur a changé de compte.  |
| *iccvEchecSynchronisation* | Erreur lors de la tentative de synchronisation entre le périphérique et le serveur Apple iCloud. |
| *iccvModificationServeur* | Les clés ont été modifiées depuis le serveur Apple iCloud. |
| *iccvModificationSynchronisationInitiale* | Synchronisation initiale avec le serveur Apple iCloud.  |
| *iccvViolationQuota* | Le quota concernant les clés a été dépassé (Nombre de clés, espace de stockage, etc.). |



**`<Clés> : (Tableau)`**

Tableau des clés concernées par le problème. Ce paramètre possède une valeur uniquement si l'événement concerne des clés. 



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


- Le nom de la clé doit faire moins de 64 octets en encodage UTF8.

- Une application peut utiliser au maximum 1024 clés.

- L'espace total pour le stockage des clés ne peut pas dépasser un 1 MégaOctets.

- Le partage des clés/valeurs s'effectue pour une même application sur des appareils utilisant le même compte iCloud.

- La synchronisation entre appareils peut prendre plusieurs minutes.




<a name="XComposante"></a>



