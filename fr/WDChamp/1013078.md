


## Les plans (dans une fenêtre ou un état)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000378"></a>
Les plans permettent de regrouper les champs d'une fenêtre. Un plan est une "couche" d'une fenêtre. Chaque fenêtre peut être constituée de plusieurs plans.

Les champs peuvent être placés sur différents plans. Un seul plan peut être affiché à la fois aussi bien dans l'éditeur de fenêtres que lors de l'exécution du programme.

Chaque champ de la fenêtre peut :

- n'appartenir à aucun plan : il sera toujours affiché, quel que soit le plan en cours

- appartenir à un plan. Ce champ ne sera affiché que lorsque le plan correspondant sera actif (c'est-à-dire visible).

- appartenir à plusieurs plans. Ce champ sera affiché lorsque un des plans associés au champ sera actif (c'est-à-dire visible).




Remarques : 

- Les plans sont également disponibles dans les états. Les plans dans les états permettent notamment de remplacer les blocs de substitution : il suffit de placer les champs sur plusieurs plans et d'activer le plan voulu lors de l'impression.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) L'éditeur de fenêtres propose une gestion des plans avancée permettant notamment de nommer les plans. Pour plus de détails, consultez [Edition des plans sous l'éditeur de fenêtres](#NOTE3_1_Nommage).








<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Affecter un ou plusieurs champs à un ou plusieurs plans
<a name="affecter_plusieurs_champs_plusieurs_plans_ELTTEXTE000402"></a>
Pour affecter un ou plusieurs champs à un ou plusieurs plans : 

1. Sélectionnez le ou les champs. 

2. Sélectionnez :

	- Pour un champ d'une fenêtre, l'option "Associer .. à un plan" du menu contextuel du champ ou de la sélection de champs. 

	- Pour un champ d'un état, l'option "Associer à un plan" du menu contextuel du champ ou de la sélection de champs. 




3. Dans la fenêtre qui s'affiche, choisissez : 

	- "Aucun plan" si le champ ne doit pas être associé à un plan,

	- un des plans disponibles.

	- plusieurs plans (pour cela, maintenez la touche Ctrl enfoncée pendant la sélection des plans). 







Remarques : 

- Le nombre de plans est illimité. Cependant, l'éditeur de fenêtres ou d'états peut empêcher de sélectionner les plans supérieurs à 98.

- Un champ peut aussi être affecté à un plan depuis la fenêtre de description du champ : 

	- sous l'éditeur de fenêtres : onglet "Détail", option "Plan".

	- sous l'éditeur d'états : onglet "UI", option "Plan". 




- Lors de l'affectation d'un champ à un plan, le champ peut ne plus apparaître dans la fenêtre ou l'état en cours : le plan en cours est différent du plan affecté au champ.

- La fenêtre d'affectation à un plan liste les plans utilisés puis les plans vierges. Les boutons au bas de cette fenêtre permettent de simplifier le déplacement entre les différents types de plans. 




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Sélectionner le plan affiché sous l'éditeur
<a name="selectionner_plan_affiche_sous_editeur_ELTTEXTE000426"></a>
Pour afficher un plan spécifique sous l'éditeur, vous pouvez :

- **Sous l'éditeur de fenêtres** : sous le volet "Fenêtre", dans le groupe "Associer", déroulez "Plans". Dans la fenêtre qui s'affiche, il suffit de choisir le plan à afficher dans la section "Navigation". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=plan18.gif&type=thumb)


- **Sous l'éditeur d'états** : sous le volet "Modification", dans le groupe "Plans", déroulez "Plans". Dans la fenêtre qui s'affiche, il suffit de choisir le plan à afficher dans la section "Navigation". 

- Utiliser les touches Pg Prec et Pg Suiv. Ces touches permettent d'afficher les différents plans de la fenêtre ou de l'état en cours. 

- Utiliser les touches Ctrl + Pg Prec et Ctrl + Pg Suiv. Ces touches permettent d'afficher les différents plans contenant des champs (plans non vides) de la fenêtre ou de l'état en cours. 

- Saisir directement le numéro du plan à afficher dans la barre de message de l'éditeur de fenêtres ou d'états. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=PlanFenetre.gif)





<a name="NOTE3_Nommage"></a>
<a name="NOTE3_1_Nommage"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

## Edition des plans sous l'éditeur de fenêtres
<a name="edition_des_plans_sous_editeur_fenetres_ELTTEXTE000450"></a>


### Gestion des plans
<a name="gestion_des_plans_ELTPARAGRAPHE000158"></a>La gestion des plans peut être réalisée depuis l'éditeur de fenêtres. Il est possible de : 

- [Visualiser les différents plans](#NOTE3_2_Nommage),

- [Nommer les plans](#NOTE3_3_Nommage), 

- [Modifier l'ordre des plans](#NOTE3_4_Nommage), 

- [Ajouter ou supprimer des plans vides](#NOTE3_5_Nommage).  



<a name="NOTE3_2_Nommage"></a>


### Afficher la fenêtre de gestion des plans
<a name="afficher_fenetre_gestion_des_plans_ELTPARAGRAPHE000178"></a>**Pour afficher la fenêtre de gestion des plans** (et visualiser les différents plans de la fenêtre) : 

1. Sous le volet "Fenêtre", dans le groupe "Associer", déroulez "Plans" et sélectionnez l'option "Editer les plans" (ou les touches de raccourcis Alt + Page suiv). <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Les_plans-nommage%20-%20HC%20N%B0001.gif)


2. La fenêtre affichée présente un aperçu (une vignette) de tous les plans de la fenêtre. Ces vignettes sont classées selon leur numéro d'ordre. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Les_plans-nommage%20-%20HC%20N%B0002.gif&type=thumb)





Remarque : Tous les plans contenant des champs sont affichés. Les plans vides présents entre deux plans contenant des champs sont également affichés : ils apparaissent grisés.  
<a name="NOTE3_3_Nommage"></a>


### Nommer les plans
<a name="nommer_les_plans_ELTPARAGRAPHE000204"></a>Par défaut, les plans sont numérotés. Si un plan est supprimé, tous les plans suivants sont automatiquement renumérotés. Pour ne pas dépendre du numéro du plan, l'éditeur de fenêtres permet de nommer et de réorganiser les plans d'une fenêtre. 

Pour nommer les plans : 

1. Dans la fenêtre de gestion des plans, sélectionnez la vignette du plan à renommer. 

2. Cliquez sur l'icône "Crayon" : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Les_plans-nommage%20-%20HC%20N%B0002%201.gif)


3. Saisissez le nom du plan dans la zone qui s'affiche : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Les_plans-nommage%20-%20HC%20N%B0003.gif)


4. Validez. Le plan est nommé. Le nom apparaît au-dessus de la vignette du plan. 

5. Validez la fenêtre de gestion des plans. Le nom du plan apparaît dans l'éditeur de fenêtres, sous le numéro du plan. 




**Remarque : Cas des modèles de fenêtres** : Il est possible de nommer des plans dans des modèles de fenêtres. Si une fenêtre utilisant un modèle surcharge le nommage des plans du modèle, le nommage des plans ne sera plus mis à jour lors de la mise à jour du modèle. 
<a name="NOTE3_4_Nommage"></a>


### Modifier l'ordre des plans
<a name="modifier_ordre_des_plans_ELTPARAGRAPHE000223"></a>Par défaut, les plans sont affichés selon leur ordre de création. La fenêtre de gestion des plans permet de modifier l'ordre des plans. 

**Pour modifier l'ordre des plans** : 

1. Dans la fenêtre de gestion des plans, sélectionnez la vignette du plan à déplacer. 

2. Réalisez un "Drag and Drop" de la vignette vers la nouvelle position voulue : les vignettes représentant les autres plans se déplacent afin de visualiser la position finale du plan déplacé. 

3. Lâcher la vignette du plan déplacé à son nouvel emplacement. En cas de doute, le numéro du plan d'insertion est demandé. 

4. Tous les plans concernés sont renumérotés. Les noms des plans restent inchangés. 

5. Validez la fenêtre de gestion des plans pour prendre en compte les modifications. 




**Pour échanger la position de deux plans** : 

1. Dans la fenêtre de gestion des plans, sélectionnez les vignettes des deux plans dont les positions doivent être échangées (utilisez la touche Ctrl pour effectuer une multisélection). 

2. Affichez le menu contextuel de la sélection (clic droit) et sélectionnez l'option "Echanger". 

3. Les vignettes des deux plans sont échangées et la renumérotation des plans est réalisée si nécessaire. 

4. Validez la fenêtre de gestion des plans pour prendre en compte les modifications. 



<a name="NOTE3_5_Nommage"></a>


### Ajouter ou supprimer des plans
<a name="ajouter_supprimer_des_plans_ELTPARAGRAPHE000245"></a>La fenêtre de gestion des plans permet d'ajouter ou de supprimer des plans vides.  

**Pour ajouter un plan vide** : 

1. Dans la fenêtre de gestion des plans, sélectionnez la vignette du plan devant lequel un plan vide doit être inséré. 

2. Affichez le menu contextuel de la sélection (clic droit) et sélectionnez l'option "Insérer un plan vide". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Les_plans-nommage%20-%20HC%20N%B0005.gif)


3. Le plan vide est inséré et tous les plans concernés sont renumérotés. Les noms des plans restent inchangés. 

4. Validez la fenêtre de gestion des plans pour prendre en compte les modifications. 




**Pour ajouter un ensemble de plans vides** : 

1. Dans la fenêtre de gestion des plans, sélectionnez la vignette du plan devant lequel des plans vides doivent être insérés. 

2. Affichez le menu contextuel de la sélection (clic droit) et sélectionnez l'option "Commencer au plan". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Les_plans-nommage%20-%20HC%20N%B0005%201.gif)


3. Dans la fenêtre qui s'affiche, indiquez à quel numéro ce plan doit être positionné.

4. Validez. Autant de plans vides que nécessaire sont inséré devant le plan sélectionné. Tous les plans concernés sont renumérotés. Les noms des plans restent inchangés. 

5. Validez la fenêtre de gestion des plans pour prendre en compte les modifications.  




Remarque : Si plus de 6 plans vides sont affichés à la suite, seul le premier et le dernier plan vide sont affichés dans la fenêtre de gestion des plans. 

**Pour supprimer un plan vide** : 

1. Dans la fenêtre de gestion des plans, sélectionnez la vignette du plan vide à supprimer. 

2. Affichez le menu contextuel de la sélection (clic droit) et sélectionnez l'option "Supprimer". 

3. Le plan vide est supprimé et tous les plans concernés sont renumérotés. Les noms des plans restent inchangés. 

4. Validez la fenêtre de gestion des plans pour prendre en compte les modifications. 




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Changer de plan par programmation
<a name="changer_plan_par_programmation_ELTTEXTE000498"></a>
La propriété [Plan](../Proprietes/2510094.md) permet de :

- connaître et changer le plan actif d'une fenêtre ou d'un état.

- connaître et changer le plan associé à un champ.



<a name="NOTE4_2"></a>


### Changer de plan dans une fenêtre
<a name="changer_plan_dans_une_fenetre_ELTPARAGRAPHE000290"></a>Le changement de plan dans une fenêtre peut être réalisé à tout moment. Souvent, un bouton permet de changer de plan. 

Exemple : 

```wl
// Passage sur le plan 4 ajout de commande
FEN_CRM.Plan = 4
```
Le changement de plan est immédiat : seuls les champs associés au plan sont affichés. 

Remarque : Si les plans ont été nommés sous l'éditeur de fenêtres, il est possible d'utiliser le nom du plan au lieu du numéro du plan.
<a name="NOTE4_3"></a>


### Changer de plan dans un état
<a name="changer_plan_dans_etat_ELTPARAGRAPHE000307"></a>Le changement de plan dans un état doit être fait pendant l'impression de l'état. Il est conseillé d'utiliser la propriété [Plan](../Proprietes/2510094.md) dans un des événements associés à l'état, aux blocs ou aux champs. 

```wl
// Ouverture de l'état
// Affichage du plan 2
MonEtat.Plan = 2
```
Le changement de plan est immédiat : seuls les champs associés au plan sont imprimés. 

**Remarque** : Remplacer les blocs de substitution par les plans : 
Jusqu'en version 18, les blocs de substitution permettaient de remplacer un bloc par un autre durant l'impression. Cependant, pour éviter les problèmes d'impression, il était recommandé de créer des blocs de substitution de même hauteur que le bloc à remplacer. 
A partir de la version 19, les plans peuvent facilement remplacer un bloc de substitution. En effet, il suffit : 

- sous l'éditeur : de positionner les champs du bloc de substitution dans le bloc voulu et de les affecter à un plan. 

- par programmation : de remplacer l'appel à la fonction [iSubstBloc](../WDLang5/3046048.md) par l'appel à la propriété [Plan](../Proprietes/2510094.md) pour afficher le plan voulu.





- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDAssistant.gif) ***Exemples didactiques (WINDEV)*** : **WD Assistant** <br>Cet exemple illustre la réalisation d'une fenêtre "Assistant" avec les fonctions WLangage.<br>Dans cet exemple, nous abordons les principaux thèmes suivants :<br>1/ la gestion des plans<br>2/ la modification dynamique d'un libellé<br><br>Résumé de l'exemple livré avec WINDEV :	<br>Cet exemple montre comment gérer facilement un "Assistant" dans une même fenêtre grâce au concept de plans. L'utilisateur est guidé étape par étape en cliquant sur les boutons "Suivant", "Précédent" et "Terminer"


