


## Etat composite
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000191"></a>
L'éditeur d'états offre la possibilité de créer des états de type "Composite". L'état est alors constitué de plusieurs sous-états. Chaque sous-état peut afficher des données différentes et utiliser une orientation spécifique. Les différents sous-états sont imprimés l'un après l'autre.

Par exemple :

- Sous l'éditeur : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Etat_composite_Editeur.gif&type=thumb)


- En exécution : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=etatcomposite.gif&type=thumb)



**Remarque** : L'éditeur d'états propose plusieurs méthodes pour imprimer simultanément plusieurs états dans un seul document :

- les états internes, qui permettent notamment d'imprimer des états les uns à côté des autres. Pour plus de détails, consultez [Champ Etat interne](../WDChamp/1013044.md).

- l'enchaînement d'états qui peut être réalisé par programmation. Cette méthode est très simple à mettre en oeuvre. Pour plus de détails, consultez [Enchaîner des états](../WDChamp/9000128.md). 

- les états imbriqués qui permettent de réaliser des enchaînements d'états complexes, avec notamment la gestion des pieds de pages. Pour plus de détails, consultez [Etats imbriqués](../WDChamp/1011001.md).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Créer un état composite
<a name="creer_etat_composite_ELTTEXTE000215"></a>
Pour créer un état de type "Composite" : 

1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_nouveau.gif) parmi les boutons d'accès rapide. 

	- La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Etat" puis sur "Etat".  

	- L'assistant de création d'un état se lance.   




2. Sélectionnez le type d'état "Etat composite". Passez à l'étape suivante de l'assistant grâce aux boutons fléchés. 

3. Spécifiez dans l'assistant le nombre de sous-états qui va composer l'état composite. Passez à l'étape suivante de l'assistant. 

4. Donnez un nom à votre état et validez. 

5. L'état composite apparaît en création sous l'éditeur d'états. Il est nécessaire de définir les caractéristiques de chaque sous-état. 




**Pour chaque sous-état** : 
Cliquez sur le lien "&lt;Cliquer ici pour définir le sous-état&gt;". L'assistant de définition du sous-état s'affiche. Vous pouvez :

- **Créer un nouveau sous-état**.

	1. Sélectionnez : 

		- le type de sous-état à créer (fiche, tableau, ...). Pour plus de détails, consultez [Types d'états](../WDChamp/1011054.md).

		- la source de données du sous-état (fichier de données, requête, ...). Pour plus de détails, consultez [Source de données d'un état](../WDChamp/1011055.md).

		- les éléments du sous-état (champs, conditions de tri, ruptures, ...).




2. Donnez un nom au sous-état et validez la création du sous-état.

- **Utiliser un état existant**.

	1. Sélectionnez l'état à afficher dans le sous-état.

	2. Donnez un nom au sous-état et validez la création du sous-état. Par défaut, le nom du sous-état est : "S&lt;NomEtat&gt;".







<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Caractéristiques des états composites et de leurs sous-états
<a name="caracteristiques_des_etats_composites_leurs_sousetats_ELTTEXTE000239"></a>


### Caractéristiques spécifiques aux états composites
<a name="caracteristiques_specifiques_aux_etats_composites_ELTPARAGRAPHE000095"></a>

- L'état composite est composé de plusieurs sous-états. Tous les sous-états sont visualisés directement sous l'éditeur d'états. 

- L'état composite a un nom, ainsi que chaque sous-état. Dans le volet "Explorateur de projet", les différents sous-états de l'état composite sont listés. 

- Pour visualiser la fenêtre de description de l'état composite, plusieurs possibilités : 

	- Sous le volet "Modification", cliquez sur le bouton de regroupement ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_regroup.gif) du groupe "Etat composite". 

	- Sélectionnez l'option "Description de l'état composite" du menu contextuel de l'état. 




- La fenêtre de description de l'état composite permet de : 

	- Définir le libellé de l'état et son nom (onglet "Général").

	- Définir les boutons d'export présents dans le visualisateur de rapports (onglet "UI").

	- Définir le comportement si les sous-états sont vides (onglet "UI").

	- Rendre l'état modifiable sous le logiciel Etats & Requêtes (onglet "Détail").

	- Définir les langues gérées par l'état (onglet "Langue").

	- **Gérer les sous-états** (onglet "Sous-états") : il est possible d'ajouter, de supprimer des sous-états, de modifier leur ordre d'impression, ...






<a name="NOTE2_3"></a>


### Caractéristiques des sous-états
<a name="caracteristiques_des_sousetats_ELTPARAGRAPHE000121"></a>

- Les sous-états ne sont accessibles sous l'éditeur qu'en ouvrant l'état composite.  

- Pour visualiser la fenêtre de description du sous-état : 

	1. Cliquez dans le sous-état. 

	2. Sous le volet "Modification", cliquez sur le bouton de regroupement ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_regroup.gif) du groupe "Etat". Il est également possible de sélectionner l'option "Description du sous-état" du menu contextuel de l'état.




- La fenêtre de description du sous-état permet de sélectionner l'état à afficher.

- Les sous-états peuvent être des états paramétrés. Dans ce cas, pour initialiser les paramètres du sous-état, il est nécessaire d'utiliser la fonction [iInitSousEtat](../WDLang5/1000019503.md). 

- Il est possible de modifier l'état affiché par un sous-état par programmation en utilisant la fonction [iChangeSousEtatSource](../WDLang5/1000019621.md).





- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDEtats.gif) ***Exemples didactiques (WINDEV)*** : **WD Etats** <br>Cet exemple montre les différentes méthodes pour réaliser un état :<br> <br>- impressions basées sur différentes sources de données (requêtes, variables, ...)<br>- impressions basées sur des champs (Table, Tableur, TCD, ...)<br>- impression d'états composés<br>- impressions spécifiques (portrait / paysage, état avec filigrane, état avec code-barres, ...)


