


## Le champ Planning
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000434"></a>


### Champ d'une fenêtre, d'une page ou d'un état
<a name="champ_une_fenetre_une_page_etat_ELTPARAGRAPHE000011"></a>Le champ Planning permet d'afficher et de manipuler des plannings automatiquement. Il permet de gérer l'affichage de ressources multiples et trouve sa place dans de nombreuses applications ou sites. 

L'affichage s'effectue : 

- à la journée, à la semaine, au mois, 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) sur 6 mois ou sur 1 an.


La plage horaire, le premier jour de la semaine, le nombre de jours à afficher sont paramétrables. Ces paramètres se définissent simplement depuis la fenêtre de description du champ. 

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Remarque** : Les champs Planning sont également disponibles dans les états de type Planning. Pour plus de détails sur le fonctionnement des plannings dans les états, consultez [Etat de type Planning](../WDChamp/1011078.md).

<a name="NOTE2_Creation"></a>
<a name="NOTE2_1_Creation"></a>


## Création d'un champ Planning (Editeur de fenêtres et de pages)
<a name="creation_champ_planning_editeur_fenetres_pages_ELTTEXTE000458"></a>
**Pour créer un champ Planning** : 

1. Sous le volet "Création", dans le groupe "Champs graphiques", déroulez "Temps" et sélectionnez "Planning".

2. Cliquez dans la fenêtre ou la page à la position où le champ doit être créé. 

3. ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) L'assistant de création du champ Planning se lance. Répondez aux différentes questions et validez. 

4. Le champ apparaît en création.


Remarque : Les dimensions du champ créé sont optimisées pour occuper l'espace disponible à la position indiquée. Si la taille du champ ne vous convient pas, utilisez la combinaison de touches Ctrl + Z : le champ retrouvera sa taille par défaut.

Pour afficher les caractéristiques du champ, sélectionnez l'option "Description" dans le menu contextuel du champ.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Description d'un planning (Editeur de fenêtres et de pages)
<a name="description_planning_editeur_fenetres_pages_ELTTEXTE000486"></a>


### Les options du champ (éditeur de fenêtres et de pages)
<a name="les_options_champ_editeur_fenetres_pages_ELTPARAGRAPHE000080"></a>Le champ Planning peut être paramétré directement sous l'éditeur grâce à la fenêtre de description.

Dans l'onglet "Général", il est possible de spécifier la fenêtre ou la page interne à utiliser pour personnaliser l'affichage des rendez-vous. Pour plus de détails, consultez [Champ Planning : Personnalisation des rendez-vous](../WDChamp/1000019658.md). 

Dans l'onglet "Détail", les paramètres du champ Planning sont les suivants : 

- **Avec boutons de changement de période** : Cette option permet d'afficher des boutons afin que l'utilisateur puisse faire défiler les différentes périodes du planning. Ces boutons sont affichés en haut à gauche du planning. 
	

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Affichage** : Par défaut, l'affichage est réalisé au mois, avec des granularités de déplacement et de durée d'un jour. En cliquant sur les options d'affichage, une fenêtre s'affiche permettant de définir les différentes options d'affichage : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Planning_Affichage_WD%20-%20HC%20N%B0002.gif&type=thumb)
Il est possible de définir les éléments suivants : 

	- Plage totale du planning : journée, semaine (sur 5 ou 7 jours), selon le nombre de rendez-vous, selon le nombre de jours, 6 mois, un an.

	- Granularité des rendez-vous : Correspond à la précision d'affichage du planning. Les rendez-vous peuvent commencer sur un multiple de XX minutes, heures, ... et avoir une durée multiple de XX minutes, heures, ... Le bouton fléché permet de saisir des valeurs prédéfinies. Le verrou permet de lier ou non les valeurs. 

	- Plage visualisée : La plage visualisée est calculée à partir de la taille du champ sous l'éditeur. En saisissant la plage à visualiser, vous obtenez la dimension minimale de l'élément selon l'unité choisie. 




- A la validation de cette fenêtre, les caractéristiques sélectionnées sont résumées dans la fenêtre de description du champ.  

- **Mode d'affichage des ressources** : Par défaut, les ressources sont affichées en ligne. 
	![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Il est également possible de les afficher en colonne. 

- **Affichage du temps** : Permet de définir :

	- le format de la date affichée pour les colonnes (ou les lignes) "jour" du planning.

	- si l'heure doit être affichée ou non dans le champ. 

	- le format de l'heure affichée pour les colonnes (ou les lignes) "jour" du planning.

	- si le numéro de semaine doit être affiché ou non, ainsi que son format. Dans le format, la chaîne '%1' correspond au numéro de semaine. Exemple de format : "Sem. %1". 




- **Plage horaire** : Permet de définir : 

	- **la plage horaire visible** : Plage horaire qui sera affichée dans le champ. 

	- **la plage horaire ouvrable** : Plage horaire pour laquelle un rendez-vous pourra être défini. 


![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Pour définir des plages horaires spécifiques, utilisez les fonctions [PlanningHeureOuvrable](../WDLang1/1000022404.md) et [PlanningHeureOuvrableRessource](../WDLang1/1000022403.md).

- **Rendez-vous** : Permet de spécifier les caractéristiques des rendez-vous : 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Chevauchement** : Gestion des chevauchements des rendez-vous. Les rendez-vous peuvent être affichés côte à côte ou légèrement décalés. 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Affichage continu si plusieurs jours** : Permet d'afficher un rendez-vous sur plusieurs jours comme un seul rendez-vous. Si cette option est décochée, les rendez-vous sur plusieurs jours correspondront à autant de rendez-vous qu'il y a de jours.




- Autres paramètres : 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Autoriser la sélection de périodes** : Permet à l'utilisateur de sélectionner une période à l'aide de la souris. 

	- **Autoriser la saisie directe d'un rendez-vous** : Permet à l'utilisateur d'ajouter directement un rendez-vous. 
			![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Il suffit de cliquer dans le champ Planning pour créer le rendez-vous et de saisir directement son libellé au clavier. 
			

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Afficher et autoriser les rendez-vous à la journée entière** : Permet d'indiquer qu'un rendez-vous peut correspondre à une journée entière. Dans ce cas, une zone spécifique est affichée dans le champ Planning. Cette zone permet de saisir les rendez-vous à la journée.
			![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Il est possible de spécifier la hauteur de la zone. 
			Exemples : 

		- si le planning est affiché avec les ressources en ligne : 

			- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) En WINDEV : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Planning_journee_ligne.gif)







Les options d'édition à la souris sont les suivantes : 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Modification de la durée**. Il est possible d'autoriser ou non l'utilisateur à modifier la durée d'un rendez-vous.

- **Déplacement**. Il est possible d'autoriser ou non l'utilisateur à déplacer un rendez-vous. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Autoriser le changement de ressource par l'utilisateur**. Si cette option est cochée, l'utilisateur pourra lors du déplacement d'un rendez-vous l'associer à une ressource différente. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Autoriser le chevauchement par l'utilisateur**. Si cette option est cochée, l'utilisateur pourra lors du déplacement de rendez-vous les faire se chevaucher. Dans ce cas, les options définies pour le chevauchement des rendez-vous (décalage ou côte à côte) seront prises en compte. 




Les options concernant la dimension des zones sont les suivantes : 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) si les ressources sont affichées en ligne : 

	- Hauteur minimale d'une ressource.

	- Largeur de l'entête des ressources.




- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) si les ressources sont affichées en colonne : 

	- Largeur minimale d'une ressource.

	- Hauteur de la rupture (pour le changement de journée)





La plupart de ces paramètres sont modifiables par programmation. Pour plus de détails, consultez [Propriétés associées au champ Planning](../WDChamp/1000019502.md).
<a name="NOTE2_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Un menu contextuel proposé automatiquement
<a name="menu_contextuel_propose_automatiquement_ELTPARAGRAPHE000326"></a>Le champ Planning peut afficher un menu contextuel spécifique proposant des fonctionnalités automatiques à l'utilisateur. Ce menu est proposé par les FAA (Fonctionnalités Automatiques de vos Applications). 

A partir du moment où au moins une ressource est présente dans le planning, ce menu permet à l'utilisateur de : 

- Modifier le mode d'affichage du planning : affichage au jour, à la semaine, au mois ou encore affichage uniquement de la journée en cours. 

- Ajouter, supprimer ou modifier un rendez-vous lors de la sélection d'une plage horaire. 

- Copier le contenu d'un rendez-vous. 

- Imprimer le contenu du champ Planning.




Pour plus de détails sur les fonctionnalités de ce menu contextuel (notamment l'impression), consultez [Fonctionnalités automatiques du champ Planning](../WDChamp/1000019561.md). 
<a name="NOTE2_3"></a>
<a name="NOTE2_5"></a>


### Modes de remplissage d'un champ Planning
<a name="modes_remplissage_champ_planning_ELTPARAGRAPHE000363"></a>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Un champ Planning peut être rempli : 

- [par programmation à l'aide des différents événements associés et des fonctions WLangage](../WDChamp/1000019505.md). 

- [directement par une liaison fichier](../WDChamp/1000019543.md).

- [directement par data binding (liaison avec une variable)](../WDChamp/1000019543.md). 







- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDPlanning.gif) ***Exemples complets (WINDEV)*** : **WD Planning** <br>Cet exemple illustre la gestion d'un planning graphique.<br><br>Dans cet exemple, nous abordons les principaux thèmes suivants :<br>1/ le champ planning<br>2/ les fonctions Google agenda
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampPlanning.gif) ***Exemples unitaires (WEBDEV)*** : **Le champ Planning** <br>Utilisation du champ Planning. Deux utilisations sont présentées : <br>- Remplissage du planning par programmation,<br>- Remplissage du planning par databinding à partir d'une variable du code.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WW_Planning.gif) ***Exemples complets (WEBDEV)*** : **WW_Planning** <br>Cet exemple permet d'afficher de façon dynamique les tâches des différents collaborateurs.<br>Il est possible d'ajouter, de modifier ou de supprimer des tâches dans le planning, simplement en cliquant sur les éléments du planning.<br>Toutes les manipulations sont effectuées grâce à AJAX.<br>Cet exemple utilise également le déplacement de champ par programmation.




