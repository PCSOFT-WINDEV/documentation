


## Changement du contenu d'une fenêtre par balayage
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000335"></a>
Dans les applications Windows, toutes les manipulations sont réalisées grâce à la souris ou au clavier. Les écrans tactiles permettent également de réaliser certaines manipulations directement avec les mains. 

Dans les applications pour les appareils mobiles, de nombreuses fonctionnalités sont disponibles à partir de mouvements de doigts. 

Les fenêtres internes proposent un défilement par balayage : 

- ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) Dans les applications Windows : le défilement des fenêtres sera effectué à l'aide de la souris.

- ![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Dans les applications Universal Windows : le défilement des fenêtres sera effectué par exemple à l'aide de boutons (seul le balayage par programmation est disponible). 








<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principe
<a name="principe_ELTTEXTE000359"></a>


### Pour faire défiler des fenêtres internes, le principe est simple
<a name="pour_faire_defiler_des_fenetres_internes_principe_est_simple_ELTPARAGRAPHE000053"></a>

- Un champ "Fenêtre interne" est créé sous l'éditeur. Ce champ "Fenêtre interne" autorise le balayage. 

- Par programmation, une liste de fenêtres internes est associée au champ "Fenêtre interne". 

- En exécution, lorsque l'utilisateur modifiera l'élément affiché (via les doigts, la souris ou des boutons spécifiques), les différentes fenêtres internes de la liste seront affichées. 




Il est également possible de créer un défilement de fenêtres internes basées sur un fichier de données ou sur une requête. Dans ce cas, le principe est le suivant : 

- Une fenêtre interne est créée. Les champs de cette fenêtre sont associés à un fichier de données ou à une requête. 

- Un champ "Fenêtre interne" est créé sous l'éditeur. Ce champ "Fenêtre interne" autorise le balayage et est associé au fichier de données ou à la requête de la fenêtre interne. 

- En exécution, lorsque l'utilisateur modifiera l'élément affiché (via les doigts, la souris ou des boutons spécifiques), le fichier de données (ou la requête) sera parcouru et affiché dans la fenêtre interne.  




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mise en place
<a name="mise_place_ELTTEXTE000383"></a>


### Parcours de fenêtres internes : Parcours programmé
<a name="parcours_fenetres_internes_parcours_programme_ELTPARAGRAPHE000070"></a>Pour mettre en place un parcours de fenêtres internes : 

1. Créez les fenêtres internes qui devront être affichées lors du parcours. Ces fenêtres internes peuvent prendre des paramètres lors de leur ouverture si nécessaire. 

2. Créez un champ de type "Fenêtre interne" dans votre fenêtre : sous le volet "Création", dans le groupe "Conteneurs", cliquez sur "Fenêtre interne". 

3. Affichez la fenêtre de description du champ "Fenêtre interne". Dans l'onglet "UI" : 

	- Cochez l'option "Autoriser le changement de contenu par balayage". 

	- Indiquez : 

		- la taille du cache. La taille du cache correspond au nombre de fenêtres internes qui seront conservées en mémoire (3 par défaut). 
						Le cache ne permet pas de charger les fenêtres à l'avance. Le chargement effectif d'une fenêtre se fait lorsque la fenêtre est affichée avec la fonction [FIListePosition](../WDLang1/1000020562.md) ou lorsqu'une fenêtre est la suivante ou la précédente d'une fenêtre affichée.
						Plus ce nombre est petit, et plus la consommation mémoire sera faible. Par contre, le chargement des fenêtres sera effectué plus souvent. 

		- l'orientation du balayage : vertical ou horizontal.

		- si nécessaire l'animation à effectuer lors du balayage. Cliquez sur "Configurer l'animation". 
						L'onglet "Style" du champ apparaît positionné sur l'élément "Animation de champ". Il est possible de sélectionner l'animation voulue puis de configurer ses paramètres via le bouton "Paramètres". 
						Si l'option "Définie par le projet" est choisie, l'animation effectuée sera celle configurée dans les options du projet. Pour plus de détails, consultez [Animation de champs](../WDLang1/3038060.md). 




4. Par programmation, construisez la liste des fenêtres internes à afficher dans le champ "Fenêtre interne". Pour cela, utilisez la fonction [FIListeAjoute](../WDLang1/1000020558.md) autant de fois que nécessaire.




Remarques : 

- Les fenêtres doivent être ajoutées dans l'ordre de parcours voulu. 

- Il est possible d'indiquer dans la fonction [FIListeAjoute](../WDLang1/1000020558.md) les paramètres à passer aux fenêtres internes ajoutées. 

- Il est possible d'ajouter plusieurs fois la même fenêtre interne avec des paramètres différents. 

- ![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Dans vos applications Universal Windows 10 App, pour que l'utilisateur puisse faire défiler les fenêtres internes, créez les boutons nécessaires et utilisez les fonctions [FIListePrécédent](../WDLang1/1000020565.md) et [FIListeSuivant](../WDLang1/1000020564.md).



<a name="NOTE3_2"></a>


### Parcours de fenêtres internes : parcours automatique sur un fichier de données ou une requête
<a name="parcours_fenetres_internes_parcours_automatique_sur_fichier_donnees_une_requete_ELTPARAGRAPHE000142"></a>Pour mettre en place un parcours de fenêtres internes basé sur un fichier de données ou sur une requête : 

1. Créez la fenêtre interne qui doit afficher les différents enregistrements. Les différents champs de cette fenêtre interne doivent être liés à des rubriques du fichier ou de la requête parcourue. 

2. Créez un champ de type "Fenêtre interne" dans votre fenêtre : sous le volet "Création", dans le groupe "Conteneurs", cliquez sur "Fenêtre interne". 

3. Affichez la fenêtre de description du champ "Fenêtre interne". 

	- Dans l'onglet "Général", associez la fenêtre interne précédemment créée au champ "Fenêtre interne". 

	- Dans l'onglet "UI" : 

		- Cochez l'option "Autoriser le changement de contenu par balayage".  




- Indiquez : 

	- la taille du cache. La taille du cache correspond au nombre de fenêtres internes qui seront conservées en mémoire (3 par défaut). 
						Le cache ne permet pas de charger les fenêtres à l'avance. 
						Plus ce nombre est petit, et plus la consommation mémoire sera faible. Par contre, le chargement des fenêtres sera effectué plus souvent. 

	- l'orientation du balayage : vertical ou horizontal.

	- si nécessaire l'animation à effectuer lors du balayage. Cliquez sur "Configurer l'animation". 
						L'onglet "Style" du champ apparaît positionné sur l'élément "Animation de champ". Il est possible de sélectionner l'animation voulue puis de configurer ses paramètres via le bouton "Paramètres". 
						Si l'option "Définie par le projet" est choisie, l'animation effectuée sera celle configurée dans les options du projet. Pour plus de détails, consultez [Animation de champs](../WDLang1/3038060.md). 

	- Cochez si nécessaire l'option "Se positionner sur l'enregistrement courant lors de l'ouverture de la fenêtre interne". Cette option permet de positionner les données de la fenêtre interne automatiquement sur l'enregistrement courant. Cette option est prise en compte uniquement si le changement de contenu est réalisé par balayage et si le contenu correspond à une source de données (fichier, requête, ...). 




![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Remarque : Dans vos applications Universal Windows 10 App, pour que l'utilisateur puisse faire défiler les fenêtres internes, créez les boutons nécessaires et utilisez les fonctions [FIListePrécédent](../WDLang1/1000020565.md) et [FIListeSuivant](../WDLang1/1000020564.md).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Programmation avancée
<a name="programmation_avancee_ELTTEXTE000413"></a>


### Fonctions WLangage disponibles pour manipuler les fenêtres internes
<a name="fonctions_wlangage_disponibles_pour_manipuler_les_fenetres_internes_ELTPARAGRAPHE000210"></a>Plusieurs fonctions WLangage sont disponibles pour gérer les parcours de fenêtres internes : 



|   |   |
| --- | --- |
| [ChangeFenêtreSource](../WDLang1/3038053.md) | Change dynamiquement la fenêtre affichée dans un champ fenêtre interne.<br><br>**Cas des défilements de fenêtres internes** : Modifie la fenêtre actuellement affichée. Cette modification est enregistrée dans la liste des fenêtres internes à faire défiler. |
| [FIListeAffiche](../WDLang1/1000020567.md) | Rafraîchit l'affichage d'un champ "Fenêtre interne" avec parcours automatique sur un fichier de données ou une requête. |
| [FIListeAjoute](../WDLang1/1000020558.md) | Ajoute une nouvelle fenêtre interne à la liste des fenêtres internes parcourue par un champ Fenêtre Interne. |
| [FIListeInsère](../WDLang1/1000020945.md) | Insère une nouvelle fenêtre interne à la liste des fenêtres internes parcourue par un champ Fenêtre Interne. |
| [FIListeOccurrence](../WDLang1/1000020563.md) | Renvoie le nombre de fenêtres internes actuellement présentes dans la liste des fenêtres internes parcourue par un champ Fenêtre Interne. |
| [FIListePosition](../WDLang1/1000020562.md) | Affiche la fenêtre interne correspondant à la position spécifiée (dans la liste des fenêtres internes parcourues par un champ Fenêtre Interne) ou renvoie la position de la fenêtre interne actuellement affichée (dans la liste des fenêtres internes parcourues par un champ Fenêtre Interne). |
| [FIListePrécédent](../WDLang1/1000020565.md) | Affiche la fenêtre interne précédente de la liste des fenêtres internes parcourue par un champ Fenêtre Interne. |
| [FIListeSuivant](../WDLang1/1000020564.md) | Affiche la fenêtre interne suivante dans la liste des fenêtres internes parcourue par un champ Fenêtre Interne. |
| [FIListeSupprime](../WDLang1/1000020559.md) | Supprime une fenêtre interne présente dans la liste des fenêtres internes parcourue par un champ Fenêtre Interne. |
| [FIListeSupprimeTout](../WDLang1/1000020561.md) | Supprime toutes les fenêtres internes ajoutées par programmation dans la liste des fenêtres internes parcourue par un champ Fenêtre Interne. |





Remarques : 

- Lors d'un parcours automatique sur un fichier de données ou une requête, les fonctions [ChangeFenêtreSource](../WDLang1/3038053.md), [FIListeAjoute](../WDLang1/1000020558.md), [FIListeInsère](../WDLang1/1000020945.md), [FIListeSupprime](../WDLang1/1000020559.md), [FIListeSupprimeTout](../WDLang1/1000020561.md) ne peuvent pas être utilisées. 

- La fonction [ChangeFenêtreSource](../WDLang1/3038053.md) permet de modifier la fenêtre actuellement affichée. Cette modification est enregistrée dans la liste des fenêtres internes à faire défiler.

- Seuls les champs de la fenêtre interne actuellement affichée sont accessibles par programmation. Par exemple, pour changer le libellé du bouton dans la fenêtre interne actuellement affichée, le code utilisé est le suivant : 
	
	```wl
	MonChampFenêtreInterne.BTN_Bouton = "Nouveau libellé"
	```


- La propriété [BalayageActif](../Proprietes/1000021612.md) permet d'activer ou de désactiver le parcours des fenêtres internes à l'aide du doigt. Il est ainsi possible de désactiver temporairement le balayage pour réaliser une opération spécifique.
	![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette propriété n'est pas disponible.

- La propriété [BalayageVertical](../Proprietes/1000022460.md) permet de connaître et modifier l'orientation du balayage.
	![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette propriété n'est pas disponible.





### Evénements exécutés lors du défilement des fenêtres internes
<a name="evenements_executes_lors_defilement_des_fenetres_internes_ELTPARAGRAPHE000262"></a>Lors de la mise en place du défilement des fenêtres internes, il est possible de paramétrer la taille du cache, c'est-à-dire le nombre de fenêtres internes chargées en mémoire. 

Lors de l'exécution d'une fenêtre permettant de faire défiler une liste de fenêtres internes : 

- Les fenêtres internes présentes dans la liste et correspondant au nombre spécifié dans la taille du cache sont chargées. Pour chacune, les événements suivants sont exécutés : 

	- Déclarations globales de la fenêtre interne

	- Initialisation des champs présents dans la fenêtre interne

	- Initialisation de la fenêtre interne

	- Après chargement de la fenêtre interne. 




- Lorsque l'utilisateur change par balayage le contenu de la fenêtre interne, les événements suivants sont exécutés : 

	- Sélection par balayage. 

	- Chargement de la prochaine fenêtre interne (les événements exécutés sont ceux du paragraphe précédent). 

	- Déchargement d'une des fenêtres internes (selon la taille du cache). Dans ce cas, les événements "Avant déchargement de la fenêtre interne" et "Fermeture" sont exécutés. 







Remarques : 

- L'événement "Sélection par balayage" n'est pas exécuté si le changement de fenêtre interne est exécuté par programmation. 

- Pour connaître la liste des événements associés à une fenêtre interne, consultez [Evénements associés à une fenêtre interne](../WDChamp/1013257.md). 





- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMCRM.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM CRM** <br>WM CRM est un projet multi-plateformes Android et iOS.<br>Il présente comment on peut réaliser une application de CRM destinée aux tablettes Android et iPad.


