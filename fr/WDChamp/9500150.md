


## Manipuler un champ de saisie de type Jetons de texte
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Champ de saisie de type Jetons de texte
<a name="champ_saisie_type_jetons_texte_ELTTEXTE000226"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000011"></a>Les interfaces utilisant des champs à jetons sont courantes. Un champ à jetons contient des informations en nombre variable dans une zone limitée.

Lorsqu'un grand nombre de possibilités de choix multiples (par exemple sélectionner plusieurs couleurs parmi des dizaines) est offert à l'utilisateur final, le champ à jetons est un moyen aisé de présenter ces choix de manière synthétique.

Quand l'utilisateur choisit un nouveau critère, ce critère s'ajoute dans le champ.

Si l'utilisateur décide de supprimer un critère de choix, il lui suffit de cliquer sur la croix à côté du critère.

Dans WINDEV, WEBDEV, WINDEV Mobile, pour gérer un champ à jetons, il suffit de créer un champ de saisie de type "Jetons de texte". Les différents jetons peuvent être saisis : 

- directement par l'utilisateur final, 

- par programmation. 




Attention : Les champs de saisie de type "Jetons de texte" ne peuvent pas être utilisés dans un champ Table ou un champ Zone répétée. 


### Fonctionnement du champ de saisie à jetons (en exécution)
<a name="fonctionnement_champ_saisie_jetons_execution_ELTPARAGRAPHE000029"></a>

- Un jeton est automatiquement ajouté dans le champ lorsque l'utilisateur utilise la touche Entrée ou un des caractères séparateur spécifié. 

- Si la zone de saisie a le focus : 

	- Le clic sur un jeton supprime le curseur de saisie. 

	- L'utilisation des flèches permet de sélectionner un jeton et supprime le curseur de saisie.




- Si un jeton est sélectionné :  

	- l'utilisation des flèches du clavier et des touches Origine et Fin permet de sélectionner et de se déplacer parmi les jetons. 

	- l'utilisation de la touche Suppr permet de supprimer le jeton sélectionné. 

	- la touche Retour Arr permet de supprimer le jeton précédent. 




- L'utilisation de la croix permet de supprimer le jeton voulu.

- Si l'utilisateur n'a pas encore le focus dans la zone de saisie : 

	- La touche Tabulation donne le focus à la zone de saisie si le champ de saisie est actif. 

	- La touche Tabulation donne le focus au premier jeton si le champ de saisie est en affichage. 




- La prise de focus par un autre champ fait perdre le focus à la zone de saisie et/ou au jeton sélectionné.




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Caractéristiques du champ de saisie de type Jetons de texte
<a name="caracteristiques_champ_saisie_type_jetons_texte_ELTTEXTE000256"></a>


### Créer un champ de saisie de type Jetons de texte
<a name="creer_champ_saisie_type_jetons_texte_ELTPARAGRAPHE000053"></a>Pour créer un champ de saisie de type Jetons de texte : 

1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_saisie.gif).

2. Cliquez dans la fenêtre ou la page à la position où le champ doit être créé. Le champ apparaît en création.

3. Dans la fenêtre de description du champ de saisie, sélectionnez le type "Jetons de texte" et validez. 




**Remarque** : Il est également possible de créer un champ de saisie de type Jetons de texte à partir d'une liste de champs prédéfinis livrés en standard en déroulant "Saisie" (sous l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_saisie.gif)). La liste des champs disponibles avec leur aperçu au gabarit du projet apparaît. Il suffit de cliquer sur "Saisie jetons" ou "Saisie eMail à jetons" pour créer un champ de saisie de type Jetons de texte dans l'éditeur.


### Options spécifiques au champ de saisie de type Jetons de texte
<a name="options_specifiques_champ_saisie_type_jetons_texte_ELTPARAGRAPHE000076"></a>La fenêtre de description du champ de saisie de type Jetons de texte permet de définir : 

- les options de gestion du champ et des jetons (onglet "Général"). 

- le style des jetons (Onglet "Style"). 




L'onglet "Général" de la fenêtre de description du champ propose les options suivantes : 

- **Masque de saisie** : Lorsque la saisie directe des jetons est autorisée, il est possible de choisir un masque de saisie, comme pour tout champ de saisie. L'utilisateur final est ainsi guidé : email, majuscules, valeurs numériques, code postal, ...

- **Séparateurs de saisie (en plus de &lt;RC&gt;)** : Liste des caractères considérés comme un séparateur de jetons. Lorsque l'utilisateur saisira un de ces caractères, un jeton sera créé avec le contenu de la zone de saisie et l'utilisateur passera à la saisie du jeton suivant. Cette liste est manipulable par programmation grâce à la propriété [JetonListeSéparateur](../Proprietes/1000023783.md). 

- **Unicode** : Autorise la saisie de caractères unicode. 

- **Autoriser les doublons** : Autorise la saisie de doublons dans les jetons. Si cette option est sélectionnée, l'utilisateur pourra saisir plusieurs fois le même texte pour le jeton. Cette option est manipulable par programmation grâce à la propriété [JetonAutoriseDoublon](../Proprietes/1000023784.md). 

- **Retour à la ligne automatique** : Permet de gérer le fonctionnement en cas de saisie de nombreux jetons : il est possible d'afficher les jetons sur plusieurs lignes (option cochée) ou bien d'afficher un ascenseur horizontal pour visualiser tous les jetons. 

- **Jetons supprimables** : Permet d'autoriser l'utilisateur à supprimer les jetons du champ de saisie. Dans ce cas, une croix sera affichée dans le jeton. Cette option est manipulable par programmation grâce à la propriété [JetonSupprimable](../Proprietes/1000024025.md). 




L'onglet "Style" de la fenêtre de description du champ permet de définir : 

- le style du libellé du jeton (élément "Jetons : Libellé"). 

- le style du jeton (élément "Jetons : Cadre"). Dans ce cas, il est possible de sélectionner : 

	- le picto utilisé pour la croix du jeton. L'image utilisée doit avoir les dimensions suivantes : 12 pixels x 12 pixels (dans chaque état).  

	- la couleur de fond et de cadre du jeton. 

	- le type de cadre du jeton. 




- le style du jeton sélectionné (élément "Jetons : Sélection"). Il est alors possible de sélectionner la couleur du jeton sélectionné. La couleur "Automatique" permet d'adapter automatiquement la couleur du jeton sélectionné en fonction de la couleur du texte. Le texte du jeton est ainsi toujours lisible.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Manipuler un champ de saisie de type Jetons de texte par programmation
<a name="manipuler_champ_saisie_type_jetons_texte_par_programmation_ELTTEXTE000286"></a>


### Evénements associés
<a name="evenements_associes_ELTPARAGRAPHE000126"></a>En exécution, l'utilisateur peut ajouter, supprimer ou sélectionner des jetons dans un champ de saisie. 

Plusieurs événements permettent de gérer ces actions : 

- Ajout d'un jeton. 

- Suppression d'un jeton. 

- Clic sur un jeton. 




Ces événements sont des événements avec procédure, permettant de récupérer le jeton en cours dans une variable de type [Jeton](../WDLang1/1000023942.md).

Pour plus de détails sur ces événements, consultez [Evénements associés aux champs de saisie](../WDChamp/1013229.md). 


### Fonctions et propriétés WLangage associées
<a name="fonctions_proprietes_wlangage_associees_ELTPARAGRAPHE000147"></a>Pour manipuler un champ de saisie de type Jetons de texte par programmation, le WLangage met à votre disposition : 

- le type de variable [Jeton](../WDLang1/1000023942.md), permettant de connaître et de définir toutes les caractéristiques du jeton. 

- les fonctions de gestion des jetons : 

	- syntaxe classique : 
			


|   |   |
| --- | --- |
| [SaisieAjouteJeton](../WDLang1/1000023953.md) | Ajoute un jeton dans un champ de saisie de type "Jetons de texte". |
| [SaisieInsèreJeton](../WDLang1/1000023954.md) | Insère un jeton dans un champ de saisie de type "Jetons de texte". |
| [SaisieOccurrenceJeton](../WDLang1/1000023955.md) | Renvoie le nombre de jetons présent un champ de saisie de type "Jetons de texte". |
| [SaisieSupprimeJeton](../WDLang1/1000023956.md) | Supprime un jeton dans un champ de saisie de type "Jetons de texte". |
| [SaisieSupprimeToutJeton](../WDLang1/1000023957.md) | Supprime tous les jetons d'un champ de saisie de type "Jetons de texte". |

- syntaxe préfixée : 
			

- les propriétés permettant de manipuler les jetons et leurs caractéristiques : 
	


|   |   |
| --- | --- |
| [Jeton](../Proprietes/1000023976.md) | La propriété **Jeton** permet de manipuler les différents jetons associés à un champ de saisie de type "Texte avec jetons". |
| [JetonActif](../Proprietes/1000023782.md) | La propriété **JetonActif** permet de savoir si un champ de saisie est un champ de saisie de type "Jetons de texte". |
| [JetonAutoriseDoublon](../Proprietes/1000023784.md) | La propriété **JetonAutoriseDoublon** permet de : <br><br>	- Autoriser ou non la saisie de doublons dans un champ de saisie de type "Jetons de texte". <br><br>	- Savoir si les doublons sont autorisés dans un champ de saisie de type "Jetons de texte".<br><br><br> |
| [JetonListeSéparateur](../Proprietes/1000023783.md) | La propriété **JetonListeSéparateur** récupère ou modifie les séparateurs qui déclenchent la création de nouveaux jetons durant la saisie dans un champ de saisie de type  "Jetons de texte". |
| [JetonSaisieEnCours](../Proprietes/1000024224.md) | La propriété **JetonSaisieEnCours** permet de lire ou modifier la valeur en cours de saisie dans un champ de saisie de type "Jetons de texte". |
| [JetonSupprimable](../Proprietes/1000024025.md) | La propriété **JetonSupprimable** permet de : <br><br>	- Savoir si la suppression des jetons par l'utilisateur final est autorisée ou non dans un champ de saisie de type "Jetons de texte". <br><br>	- Autoriser ou non la suppression des jetons par l'utilisateur final dans un champ de saisie de type "Jetons de texte".<br><br><br> |
| [ValeurMémorisée](../Proprietes/2510127.md) | La propriété **ValeurMémorisée** permet de connaître la valeur actuellement mémorisée par : <br><br>	- une ligne d'un champ Liste (y compris Liste image) ou d'un champ Combo. <br><br>	- un champ de saisie de type "Jetons de texte".<br><br>	- une ligne d'un champ Table. <br><br>	- une ligne de la saisie assistée d'un champ de saisie (si la ligne est sélectionnée).<br><br><br> |





### Ajouter des jetons dans la saisie assistée
<a name="ajouter_des_jetons_dans_saisie_assistee_ELTPARAGRAPHE000168"></a>Il est possible d'ajouter une liste de jetons dans la saisie assistée grâce à la fonction [SaisieAssistéeAjoute](../WDLang1/1000020043.md). 

Exemple : 

```wl
MonJeton est un Jeton
MonJeton.Libellé = "abc"
MonJeton.Valeur = "abc"
MonJeton.Bulle = "bulle"
MonJeton.Couleur = RougeFoncé
MonJeton.CouleurFond	= RougePastel
MonJeton2 est un Jeton
MonJeton2.Libellé = "def"
MonJeton2.Valeur = "def"
MonJeton2.Bulle = "bulle"
MonJeton2.Couleur = RougeFoncé
MonJeton2.CouleurFond = RougePastel
SaisieAssistéeAjoute(SAI_ChampAJetons, MonJeton)
SaisieAssistéeAjoute(SAI_ChampAJetons, MonJeton2)
```



- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampJeton.gif) ***Exemples unitaires (WINDEV)*** : **Le champ Jeton** <br>Utilisation d'un champ de saisie "Jetons de texte".
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampJeton.gif) ***Exemples unitaires (WEBDEV)*** : **Le champ Jeton** <br>Utilisation d'un champ de saisie "Jetons de texte".
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampJeton.gif) ***Exemples unitaires (WINDEV Mobile)*** : **Le champ Jeton** <br>Utilisation d'un champ de saisie "Jetons de texte".


