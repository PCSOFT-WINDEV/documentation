


## Champs d'un état
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Les différents types de champs
<a name="les_differents_types_champs_ELTTEXTE000629"></a>
<a name="Types_de_champs"></a>
Plusieurs types de champs peuvent être manipulés dans un état réalisé avec l'éditeur d'états :

- [Champ Libellé (de type texte, monétaire, Markdown, RTF, HTML, Date, Heure)](#NOTE2).
	

- [Champ calculé](#NOTE2_3).

- [Champ Image](#NOTE2_4).

- [Champ Code-Barres](#NOTE2_5).

- [Champ prédéfini](#NOTE2_7).

- [Champ Graphe](#NOTE2_8).
	

- [Champ Forme](#NOTE2_9).

- [Champ Interrupteur](#NOTE2_10).

- [Champ Etat interne](#NOTE2_11) (champ de type avancé).

- [Champ Signature](#NOTE2_15). 
	

- [Champ Lien URL](#NOTE2_12).
	


**Remarques** : 

- Pour plus de détails sur un type de champ particulier (caractéristiques spécifiques, propriétés et fonctions associées, etc.), consultez directement l'aide de ce type de champ en cliquant sur son nom.

- Pour permettre  des interactions avec les utilisateurs, l'éditeur d'états propose également plusieurs champs spécifiques : 

	- [Champ de saisie](#NOTE2_13).
			

	- Champ Interrupteur. 

	- Champ Combo.


 Pour plus de détails, consultez [Etats avec saisie](../WDChamp/1011074.md).






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Description rapide des différents types de champs
<a name="description_rapide_des_differents_types_champs_ELTTEXTE000653"></a>


### Champ Libellé
<a name="champ_libelle_ELTPARAGRAPHE000105"></a>Le champ "Libellé" permet d'afficher différents types de données : 

- texte, RTF, HTML, Markdown,
	

- numérique, monétaire, monétaire + Euro, 

- date,

- heure, durée. 




Pour spécifier le type des données affichées dans le champ : 

1. Affichez l'onglet "Général" de la fenêtre de description du champ Libellé (option "Description" du menu contextuel du champ).

2. Sélectionnez le type d'information affiché (combo "Type").

3. Validez.




Les données affichées peuvent contenir : 

- soit le contenu d'une rubrique (ou d'une variable) de la source de données de l'état.
	Remarque : La rubrique ou la variable liée au champ est définie dans l'onglet "Liaison" de la fenêtre de description du champ. 

- soit le contenu d'un autre champ de l'état.

- soit une valeur déterminée par programmation.




**Pour insérer la valeur d'une rubrique ou d'un champ de l'état dans le texte du champ Libellé**, saisissez le nom de la rubrique ou du champ entre les caractères [% et %].

Par exemple, le libellé du champ peut correspondre à : Le fournisseur [%NomFournisseur%] vend le produit [%NomProduit%] pour [%PrixTTC%]. Les rubriques NomFournisseur, NomProduit et PrixTTC seront remplacées par leur valeur à l'exécution de l'état.

**Remarque** : Si le champ Libellé doit afficher un texte sur plusieurs lignes, il suffit de choisir le type "Texte multiligne". Dans ce cas, la taille du champ doit être suffisante. 
**Rappel** : L'option "Auto-extensible" (onglet "UI" de la fenêtre de description du champ) permet d'augmenter automatiquement la taille du champ en fonction de son contenu lors de l'impression.

Exemples :

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_Libelle_1.gif&type=thumb)


**Modifier le libellé d'un champ Libellé**
Le libellé d'un champ "Libellé" peut être modifié :

- soit par programmation (propriété [Libellé](../Proprietes/2510053.md)).

- soit sous l'éditeur d'états. Dans ce cas, deux méthodes sont possibles :

	- Méthode 1 :

		1. Sélectionnez le champ. Les poignées de sélection apparaissent autour du champ.

		2. Cliquez une nouvelle fois sur le champ. Le curseur de la souris se transforme en curseur de saisie.

		3. Saisissez le nouveau libellé du champ.

		4. Modifiez si nécessaire la mise en forme du libellé :

			- dans le cas d'un libellé de type texte : grâce aux options de mise en forme présentes sous le volet "Modification", dans le groupe "Édition rapide" du ruban :
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Etat_EditionRapide.gif)


			- dans le cas d'un libellé de type RTF : grâce à la barre de mise en forme qui s'affiche au-dessus du champ :
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Etat_BarreRTF.gif)

- Méthode 2 :

	1. Sélectionnez le champ.

	2. Affichez la fenêtre de description du champ (option "Description" du menu contextuel du champ).

	3. Saisissez le nouveau libellé dans chaque langue gérée par le champ.

	4. Modifiez si nécessaire la mise en forme du libellé dans l'onglet "Style".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Etat_LibelleStyle.gif)




**Champ Libellé multilingue**
Si votre application ou votre site est multilingue, il est possible de saisir un libellé différent pour chaque langue gérée par l'état.
Selon la langue d'exécution du projet, le libellé correspondant sera imprimé.

**Champ Libellé de type "Monétaire + Euro"**
Si le champ Libellé est de type "Monétaire + Euro", il est possible de gérer :

- la devise mémorisée : devise des données présentes dans la source de données de l'état. Si le champ est manipulé par programmation, la devise de la valeur sera la devise mémorisée.

- la devise affichée : devise utilisée pour afficher la valeur lors de l'impression de l'état. Cette devise peut être différente de la devise mémorisée. La conversion est automatiquement réalisée.

- le double-affichage : il est possible de relier deux champs de type "Monétaire + Euro" entre eux. Dans ce cas, l'éditeur d'états distingue deux types de champs :

	- le champ de base : ce champ contient la valeur présente dans la source de données de l'état.

	- le champ suiveur : ce champ permet d'afficher la valeur du champ de base dans la devise voulue.





. 
<a name="NOTE2_3"></a>


### Champ Calculé
<a name="champ_calcule_ELTPARAGRAPHE000240"></a>Le champ "Calculé" permet de réaliser des calculs dans un état. Ces calculs peuvent être réalisés :

- sur une rubrique de la source de données.

- sur un champ présent dans l'état.

- par programmation.




Exemples :

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_Calcule.gif)
**Champ "Calculé" spécifique : "Monétaire + Euro"**
Si le champ "Calculé" est de type "Monétaire + Euro", il est possible de gérer :

- la devise mémorisée : devise des données présentes dans la source de données de l'état. Si le champ est manipulé par programmation, la devise de la valeur sera la devise mémorisée.

- la devise affichée : devise utilisée pour afficher la valeur lors de l'impression de l'état. Cette devise peut être différente de la devise mémorisée. La conversion est automatiquement réalisée.

- le double-affichage : il est possible de relier deux champs de type "Monétaire + Euro" entre eux. Dans ce cas, l'éditeur d'états distingue deux types de champs :

	- le champ de base : ce champ contient la valeur présente dans la source de données de l'état.

	- le champ suiveur : ce champ permet d'afficher la valeur du champ de base dans la devise voulue.







Pour plus de détails, consultez le [type Monétaire + Euro](../WDLang1/3033007.md) et le [champ Calculé](../WDChamp/1013212.md).
<a name="NOTE2_4"></a>


### Champ Image
<a name="champ_image_ELTPARAGRAPHE000272"></a>Le champ "Image" permet d'afficher une image dans l'état. L'image affichée dans le champ peut :

- être sélectionnée directement depuis la fenêtre de description du champ (onglet "Général") en cliquant sur le bouton ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Menu_Image_Editeur%20-%20HC%20N%B0001.gif)
 : 

	- L'option "Parcourir" permet de sélectionner un fichier image disponible depuis votre poste. 

	- L'option "Catalogue" permet de choisir une image présente dans le catalogue d'images de WINDEV.




- correspondre au contenu d'une rubrique de la source de données (par exemple, si la source de données est un fichier HFSQL, la rubrique peut être de type mémo Image ou de type chaîne de caractères contenant le chemin complet de l'image). Le champ "Image" est alors lié à cette rubrique.
	Remarque : La rubrique (ou la variable) liée au champ est définie dans l'onglet "Liaison" de la fenêtre de description du champ. 




**Images multilingues**
Si votre application ou votre site est multilingue, il est possible de sélectionner une image différente pour chaque langue gérée par l'état. Cette option est intéressante par exemple lorsque les images contiennent du texte.
Selon la langue d'exécution du projet, l'image correspondante sera imprimée.
Pour sélectionner une image par langue, cliquez sur le bouton ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Menu_Image_Editeur%20-%20HC%20N%B0001.gif)
 et sélectionnez l'option "Multilingue". 

Pour plus de détails, consultez [Le champ Image](../WDChamp/1013218.md).
<a name="NOTE2_5"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Champ Code-barres
<a name="champ_codebarres_ELTPARAGRAPHE000307"></a>Le champ "Code-barres" permet d'imprimer très simplement des codes-barres dans vos états.

La valeur d'un champ "Code-barres" correspond à une chaîne alphanumérique. 

Le champ "Code-barres" peut être associé à une rubrique de la source de données de l'état ou être affecté par programmation. Remarque : Il est également possible de spécifier une valeur initiale dans l'onglet "Général" de la fenêtre de description du champ.

L'éditeur d'états propose de nombreux types de code-barres et permet aussi bien de les imprimer horizontalement que verticalement.

Exemple : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_CodeBarres.gif)


**Remarque** : La rubrique ou la variable liée au champ est définie dans l'onglet "Liaison" de la fenêtre de description du champ. 

Pour plus de détails, consultez [Le champ Code-barres](../WDChamp/1013109.md).
<a name="NOTE2_7"></a>


### Champ Pré-défini
<a name="champ_predefini_ELTPARAGRAPHE000333"></a>Le champ "Pré-défini" permet d'afficher des informations courantes sans avoir à les programmer. Il est ainsi possible d'insérer dans un état un champ "Pré-défini" pour afficher les informations suivantes :

- Date système,

- Heure système,

- Numéro de la page en cours,

- Nombre de pages total de l'état,

- Numéro de la page en cours par rapport au nombre de pages total de l'état.




Exemple :
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Etat_Champ_Predefini.gif)
**Pour modifier le type d'information affiché dans un champ "Pré-défini" :**

1. Affichez l'onglet "Général" de la fenêtre de description du champ "Pré-défini" (option "Description" du menu contextuel du champ).

2. Sélectionnez le type d'information affiché (combo "Type").

3. Validez.




Pour plus de détails, consultez [Champ prédéfini](../WDChamp/1013058.md).
<a name="NOTE2_8"></a>


### Champ Graphe
<a name="champ_graphe_ELTPARAGRAPHE000359"></a>Le champ "Graphe" permet de visualiser et d'imprimer un graphe dans vos états. Les types de graphes disponibles sont les suivants :

- Secteur (Camembert), beignet, hémicycle.

- Histogramme (groupé ou empilé, vertical ou horizontal).

- Courbe, aire. 

- Nuage de points, radar. 

- Graphe à bulles.

- Graphe boursier (Chandelier, MinMax ou BarCharts).




Remarques : 

- Les différentes séries du champ Graphe peuvent être liées à une variable de type Tableau. 




Exemple : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Etat_graphe.gif&type=thumb)


**Informations spécifiques à la création du graphe**

Lors de la création d'un graphe, un assistant est automatiquement exécuté. Cet assistant permet de saisir les informations nécessaires à la création du champ Graphe. Ces informations sont les suivantes :

- le type du graphe (boursier, camembert, histogramme, ...).

- les paramètres du graphe : titre, légende, graphe en relief, affichage des étiquettes, ...

- les paramètres des axes : titres, quadrillage, ...

- les caractéristiques des séries : 

	- la source et les données affichées par les étiquettes de catégorie (programmation, fichier de données, requête, tableau WLan­gage, source de données de l'état). ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=EtiquetteCategorie.gif)


	- le libellé de la série (utilisé pour les étiquettes de séries) : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=EtiquetteSerie.gif)




**Remarque** : si la source de données correspond à la source de données de l'état, il est possible de définir : 

- le bloc d'alimentation,

- le champ ou la rubrique correspondant à la série, 

- le mode de sélection des données. 




Pour plus de détails, consultez [Champ Graphe](../WDChamp/1013006.md).
<a name="NOTE2_9"></a>


### Champ Forme
<a name="champ_forme_ELTPARAGRAPHE000423"></a>Un champ "Forme" permet d'insérer des formes géométriques dans un état. Il est ainsi possible d'insérer par exemple :

- des lignes horizontales ou verticales,

- des cercles,

- des rectangles (à bords droits ou arrondis).




Le style, l'épaisseur et la couleur du trait sont entièrement paramétrables.
<a name="NOTE2_10"></a>


### Champ Interrupteur
<a name="champ_interrupteur_ELTPARAGRAPHE000436"></a>Un champ "Interrupteur" correspond à une case à cocher.

Si la valeur du champ est à <u><u><u><u>Vrai</u></u></u></u>, la case est cochée : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Interrupteur_CaseCochee.gif)


Si la valeur du champ est à <u><u><u><u>Faux</u></u></u></u>, la case est décochée : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Interrupteur_CaseDecochee.gif)


Un champ "Interrupteur" peut être lié à une rubrique ou une variable de la source de données de l'état. Par exemple, si la source de données correspond à un fichier HFSQL, la rubrique peut être de type booléen ou de type interrupteur.

La taille, la couleur de fond et la couleur de la case à cocher sont entièrement paramétrables.

Exemple :
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_Interrupteur-Etat.gif)
**Remarque** : La rubrique ou la variable liée au champ est définie dans l'onglet "Liaison" de la fenêtre de description du champ. 
<a name="NOTE2_11"></a>


### Champ Etat Interne
<a name="champ_etat_interne_ELTPARAGRAPHE000465"></a>Grâce aux champs de type "Etat interne", il est possible d'imprimer plusieurs états (états secondaires) dans un seul état (état principal) sans programmation.

Par exemple, l'état principal suivant est composé de deux états secondaires imprimés côte à côte :

- un état affichant les données sous forme de tableau.

- un état affichant les données sous forme de graphe. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=EtatInterne.gif&type=thumb)







**Avantages des états internes par rapport aux états imbriqués**
L'éditeur d'états permet également d'imprimer simultanément plusieurs états grâce aux états imbriqués. Cependant, les états imbriqués sont moins simples d'utilisation. En effet, les états imbriqués nécessitent :

- l'utilisation de la fonction [iImprimeEtat](../WDLang5/3046032.md) pour lancer l'impression de l'état secondaire.

- l'obligation d'imprimer l'état imbriqué à la suite de l'état principal. Il n'est pas possible d'imprimer ces états côte à côte.




Les états internes permettent d'imprimer sans programmation plusieurs états :

- soit les uns en dessous des autres,

- soit les uns à côté des autres.




Pour plus de détails sur les états imbriqués, consultez [Etats imbriqués](../WDChamp/1011001.md).
<a name="NOTE2_12"></a>


### Champ Lien URL
<a name="champ_lien_url_ELTPARAGRAPHE000508"></a>Un champ "Lien URL" permet d'insérer des liens dans un état. Il est ainsi possible d'insérer par exemple :

- un lien vers une adresse email,

- un lien vers une adresse de site Internet,

- ...




Le champ "Lien URL" est actif uniquement si l'état est imprimé dans un fichier HTML. Dans les autres cas, le champ "Lien URL" est visible mais inactif. Dans le cas d'une impression au format PDF, seuls les liens correspondant à une adresse d'un site ou d'une page sont actifs. 

Exemple : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_Lien.gif&type=thumb)


**Remarque** : La rubrique ou la variable liée au champ est définie dans l'onglet "Liaison" de la fenêtre de description du champ. 
<a name="NOTE2_13"></a>


### Champ de saisie
<a name="champ_saisie_ELTPARAGRAPHE000526"></a>Un champ de saisie permet de saisir et d'afficher du texte dans un état. Il est ainsi possible d'utiliser un champ de saisie :

- pour permettre à l'utilisateur de saisir des informations à imprimer,

- pour permettre à l'utilisateur de modifier les informations à imprimer,

- ...




Le champ de saisie  est actif uniquement si l'état est affiché en mode "Aperçu avant impression" ou si il est imprimé dans un fichier PDF. Dans les autres cas, le champ de saisie est visible mais inactif.

**Caractéristiques des champs de saisie**
Lors de la création d'un champ de saisie dans un état, il est possible de définir :

- le type du champ (texte, numérique, date, heure),

- le masque associé : les masques proposés sont les masques gérés par le format PDF. Ils sont disponibles pour les numériques, les dates et les heures.

- la taille de saisie, c'est-à-dire le nombre maximum de caractères autorisé dans le champ. Si ce paramètre correspond à 0, il n'y a aucune limite.

- le cadrage horizontal,

- la valeur initiale,

- le style du libellé et de la zone de saisie.




**Remarques** :

- Champ de saisie multiligne : si l'utilisateur saisit plus de lignes que ce qui est visible, les lignes non visibles ne seront pas imprimées. Lors de la saisie, les champs de saisie gèrent un ascenseur vertical.

- Style de la zone de saisie : Dans cette version, seule la police "Arial" est utilisable.

- Le champ de saisie n'est pas lié à une rubrique d'un fichier ou d'une requête. Pour afficher des informations provenant d'un fichier ou d'une requête, il est nécessaire de réaliser une affectation du champ par programmation.

- Le cadre de la zone de saisie n'est pas paramétrable (épaisseur, couleur, ...).

- Il n'est pas possible d'utiliser un type monétaire (le symbole Euro n'est pas géré). 


Pour plus de détails, consultez [Etats avec saisie](../WDChamp/1011074.md).

<a name="NOTE2_15"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) 

### Champ Signature
<a name="champ_signature_ELTPARAGRAPHE000570"></a>Le champ "Signature" permet de signer les états imprimés au format PDF. Deux types de signatures sont disponibles : 

- Signature d'approbation, 

- Signature de certification. 




Pour plus de détails, consultez [Champ Signature](../WDChamp/1410087013.md).

- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDEtats.gif) ***Exemples didactiques (WINDEV)*** : **WD Etats** <br>Cet exemple montre les différentes méthodes pour réaliser un état :<br> <br>- impressions basées sur différentes sources de données (requêtes, variables, ...)<br>- impressions basées sur des champs (Table, Tableur, TCD, ...)<br>- impression d'états composés<br>- impressions spécifiques (portrait / paysage, état avec filigrane, état avec code-barres, ...)


