


## Manipuler un état (sous l'éditeur)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000419"></a>
Après la création d'un état, il est possible à tout moment de modifier toute la description de cet état :

- source de données,

- champs présents dans l'état,

- mise en page, ...




Seul le type de l'état n'est pas modifiable. En effet, trop de paramètres spécifiques sont mis en jeu. Pour changer le type de l'état, il suffit de créer un nouvel état.

Cette page d'aide présente :

- [comment visualiser et modifier la description de l'état (définie lors de la création de l'état)](#NOTE2).

- [comment ouvrir, fermer et enregistrer un état](#NOTE3).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Visualiser et modifier la description d'un état
<a name="visualiser_modifier_description_etat_ELTTEXTE000443"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000033"></a><a name="Description_manip"></a>
Les principales options de l'état sont accessibles dans la description de l'état (option "Description de l'état" du menu contextuel).

Voici une présentation rapide des différents onglets de la description de l'état.

**Remarque** : Les principales options de l'état sont également accessibles via le [volet "Modifieur"](../Editeurs/2027006.md). 
<a name="NOTE2_2"></a>


### Gestion de la source de données
<a name="gestion_source_donnees_ELTPARAGRAPHE000048"></a>A tout moment, il est possible de paramétrer et de modifier la source de données d'un état. Ces manipulations se font principalement à partir de la fenêtre de description de l'état.

Il est possible de :

- modifier la source de données de l'état (onglet "Données" de la description de l'état) :

	- soit en changeant le type de la source d'alimentation de l'état (passer par exemple d'un état sur requête à un état sur fichier de données ou sur une zone mémoire).

	- soit en changeant les paramètres de la source de données sélectionnée (modification de la requête, modification du tri, mise en place de bornes de parcours, ...).




- paramétrer le fonctionnement de l'état si la source de données est vide (onglet "UI" de la description de l'état). En effet, si la source de données est vide, l'éditeur d'états offre la possibilité soit d'imprimer l'état, soit d'afficher un message d'avertissement sans imprimer l'état. Le message d'avertissement est paramétrable.




**Remarque** : Si l'état est basé sur une requête, l'option "Editer la requête" du menu contextuel permet d'éditer directement la requête dans l'éditeur de requêtes. Il est alors possible de modifier cette requête.
<a name="NOTE2_3"></a>


### Options d'affichage dans le visualisateur de rapports
<a name="options_affichage_dans_visualisateur_rapports_ELTPARAGRAPHE000065"></a>Le paramétrage des options d'affichage dans le visualisateur de rapports est réalisé dans l'onglet "UI" de la description de l'état. Il est possible de :

- spécifier les formats d'export proposés par le visualisateur de rapports. Les formats cochés seront disponibles pour l'utilisateur.

- paramétrer le message affiché si la source de données est vide.

- paramétrer le message d'attente affiché lors de la sélection et du tri des enregistrements.
	



<a name="NOTE2_4"></a>


### Gestion des blocs
<a name="gestion_des_blocs_ELTPARAGRAPHE000082"></a>La gestion des blocs d'un état peut aussi bien être réalisée dans l'état en édition que dans la fenêtre de description de l'état.

La gestion des blocs peut être réalisée :

- soit directement depuis les différentes options du menu contextuel des blocs (clic droit sur l'intitulé des blocs).

- soit grâce à la fenêtre de description de l'état (option "Description de l'état" du menu contextuel), onglet "Blocs".




Pour plus de détails sur la gestion des blocs, consultez [Blocs d'un état](../WDChamp/1011040.md).
<a name="NOTE2_5"></a>


### Format
<a name="format_ELTPARAGRAPHE000099"></a>L'onglet "Format" de la fenêtre de description de l'état permet de configurer :

- le format de la page (ou de la planche d'étiquettes).

- le retrait interne des champs (pour ne pas coller le texte du champ au cadre du champ).

- les marges.

- l'orientation de la page (portrait ou paysage).

- le format des étiquettes si l'état est de type étiquette.

- le nombre de colonnes. 
	 Il est également possible de créer des [états multicolonnes](../WDChamp/1011076.md). 

- le nombre de pages en largeur. Dans ce cas, un état de grande taille (supérieur à une feuille de papier) pourra s'imprimer sur plusieurs pages. L'utilisateur final devra simplement assembler les pages. 



<a name="NOTE2_6"></a>


### Options
<a name="options_ELTPARAGRAPHE000132"></a>L'onglet "Options" de la fenêtre de description de l'état permet de configurer :

- le fonctionnement de l'état si le format de la page n'est pas supporté par l'imprimante.

- la position des blocs lors de l'impression de l'état.

- le style du tableau si l'état contient un tableau.

- la liste des modèles utilisés par l'état. 

- le style des étiquettes si l'état est de type étiquette.

- l'affichage des erreurs pour l'export au format PDF/A-1b et PDF/A-3b. Pour plus de détails, consultez [Imprimer au format PDF](../WDChamp/1011091.md).




Cet onglet permet également de : 

- configurer l'état pour l'utilisation du logiciel Etats et Requêtes. Pour plus de détails, consultez [Logiciel Etats & Requêtes](../Presentation/3088003.md).

- spécifier si le code compilé doit être intégré. Cette option est nécessaire dans des cas très rares.

- configurer certains paramètres spécifiques : 

	- Si chaque page doit être envoyée séparément au spooler d'impression (impression effectuée page après page). Dans ce cas, l'impression est envoyée au spooler d'impression après chaque page imprimée.

	- S'il est nécessaire de tenir compte des espaces qui complètent les rubriques. Cette option concerne uniquement les champs auto-extensibles associés à une rubrique texte complétée par des espaces (compatibilité avec WINDEV 5.5).

	- Si la première page est une page de couverture. Dans ce cas, la première page sera affichée à droite dans le visualisateur de rapports (en mode d'affichage par pages doubles). 

	- Si le code des champs clonés doit être exécuté. Par défaut, cette option est cochée. En décochant cette option, le comportement de l'état correspondra à celui des versions 21 et inférieures : le code des champs clonés ne sera pas exécuté.

	- Surcharger la norme de programmation définie au niveau du projet (via le bouton "Norme de programmation"). Pour plus de détails, consultez [Description du projet : Onglet Compilation](../Editeurs/9500218.md). 






<a name="NOTE2_7"></a>


### Image de fond
<a name="image_fond_ELTPARAGRAPHE000175"></a>La majorité des types d'états peuvent être réalisés à partir d'un formulaire. L'onglet "Fond" permet de définir l'image utilisée en tant que formulaire dans l'état. Cette image pourra au choix être imprimée ou non avec l'état.

Cette option est très utile pour les états devant s'imprimer sur un formulaire pré-imprimé. L'intégration du formulaire dans l'état permet de simplifier le positionnement des champs à imprimer par rapport au formulaire. Finis les dizaines d'essais pour réaliser une impression correcte.

Il est également possible de configurer la couleur du papier qui sera utilisée dans le visualisateur de rapports et lors de l'export au format PDF. 

Pour plus de détails sur l'utilisation d'un formulaire dans un état, consultez [Etat sur formulaire](../WDChamp/1011067.md). 
<a name="NOTE2_8"></a>


### Langue
<a name="langue_ELTPARAGRAPHE000191"></a>Un état peut être multilingue, c'est-à-dire qu'à l'exécution cet état pourra être affiché et imprimé dans plusieurs langues.

L'onglet "Langue" permet de configurer : 

- les différentes langues gérées par l'état en cours. 

- la langue visualisée sous l'éditeur d'états : c'est cette langue qui sera utilisée par défaut pour afficher l'état sous l'éditeur.




Les informations d'un état pouvant être saisies en plusieurs langues sont :

- tous les messages affichés lors de l'impression de l'état. La traduction de ces messages est réalisée directement dans les différentes fenêtres de description.

- le libellé des champs de type Libellé ou RTF : Pour traduire ces libellés, il suffit de : 

	- modifier la langue affichée de l'état : sous le volet "Affichage", dans le groupe "Options", déroulez "Langue affichée" et sélectionnez la langue voulue. 

	- saisir directement les traductions dans l'état en édition.




- le masque d'affichage des champs de type rubrique, calculé ou prédéfini.

- les différents fichiers image utilisés dans l'état.

- le formulaire de l'état.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Ouvrir, fermer et enregistrer un état
<a name="ouvrir_fermer_enregistrer_etat_ELTTEXTE000509"></a>


### Ouvrir un état
<a name="ouvrir_etat_ELTPARAGRAPHE000228"></a>**Pour ouvrir un état**, il est possible d'utiliser une des méthodes suivantes :

- sous le volet "Accueil", dans le groupe "Général", déroulez "Ouvrir" et sélectionnez "Ouvrir". Sélectionnez ensuite le fichier de type "WDE" à ouvrir. 

- cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_ouvrir.gif) parmi les boutons d'accès rapide et sélectionnez "Ouvrir". Sélectionnez ensuite le fichier de type "WDE" à ouvrir. 

- double-cliquez directement sur un fichier de type "WDE".

- double-cliquez sur le nom d'un état dans le [volet "Explorateur de projet"](../Editeurs/2027029.md).



<a name="NOTE3_2"></a>


### Fermer un état
<a name="fermer_etat_ELTPARAGRAPHE000257"></a>**Pour fermer l'état en cours**, utilisez une des méthodes suivantes : 

- cliquez sur la croix en haut à droite de la barre de titre de l'état en cours d'édition. 

- sous le volet "Accueil", dans le groupe "Général", déroulez "Fermer" et sélectionnez "Fermer". 


Si l'état contient des modifications non sauvegardées, l'éditeur d'états propose automatiquement d'enregistrer l'état.
<a name="NOTE3_3"></a>


### Enregistrer un état
<a name="enregistrer_etat_ELTPARAGRAPHE000281"></a>**Pour enregistrer l'état en cours**, utilisez une des méthodes suivantes : 

- sous le volet "Accueil", dans le groupe "Général", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_Enregistrer.gif).

- utilisez le raccourci clavier Ctrl + S. 

- cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_Enregistrer.gif) parmi les boutons d'accès rapide.




**Remarque** : Pour enregistrer un état en le renommant, sous le volet "Accueil", dans le groupe "Général", déroulez "Enregistrer" et sélectionnez "Enregistrer sous".
<a name="NOTE3_4"></a>


### Récupération automatique
<a name="recuperation_automatique_ELTPARAGRAPHE000320"></a>Pour éviter tout problème lors d'un blocage du système (coupure de courant par exemple), WINDEV, WEBDEV et WINDEV Mobile proposent un système de récupération automatique des éléments ouverts sous les différents éditeurs

Lorsque ce système est activé :

- un enregistrement automatique des éléments ouverts est automatiquement effectué à une période donnée (toutes les 10 minutes par défaut).

- lors de la ré-ouverture d'un état après un blocage système, une fenêtre de récupération automatique apparaît. Cette fenêtre propose de récupérer :

	- soit l'état tel qu'il était lors de la dernière sauvegarde réalisée depuis l'éditeur d'états. 

	- soit l'état sauvegardé automatiquement. 
			La version sélectionnée est automatiquement ouverte sous l'éditeur d'états. La version non sélectionnée est disponible dans la fenêtre de gestion des versions et peut être ouverte à tout moment. Pour plus de détails sur la gestion des versions, consultez la [gestion des versions](../Editeurs/2021002.md).







Pour activer le système de récupération automatique : 

1. Sous le volet "Accueil", dans le groupe "Environnement", déroulez "Options" et sélectionnez "Options générales de xxx".

2. Affichez l'onglet "Général" et cochez l'option "Enregistrement pour la récupération automatique".

3. Précisez le délai de l'enregistrement automatique. 

4. Validez. 




Pour récupérer une version dans la fenêtre de gestion des versions : 

1. Sous le volet "Accueil", dans le groupe "Général", déroulez "Enregistrer" et sélectionnez "Versions".

2. Sélectionnez la version à récupérer. 

3. Validez. 





