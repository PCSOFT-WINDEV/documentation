


## Impression d'un état (iPhone/iPad, Android ou Universal Windows App)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000148"></a>
Lors de la création d'un état, il est possible de tester directement cet état depuis l'éditeur d'états.

Il est également possible d'intégrer cet état à vos applications. L'utilisateur pourra ainsi lancer l'impression de l'état directement depuis un bouton, une option de menu, ... par exemple.

Dans les applications iPhone ou iPad ou dans les applications en mode Universal Windows App, l'état peut être imprimé uniquement au format PDF. Ce fichier PDF pourra ensuite être imprimé, visualisé, envoyé par email, ...

![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Il est désormais possible d'imprimer des états depuis une application en mode Universal Windows App.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principe d'impression dans une application iPhone/iPad ou en mode Universal Windows App
<a name="principe_impression_dans_une_application_iphoneipad_mode_universal_windows_app_ELTTEXTE000172"></a>
Le principe d'impression d'un état est très simple : un fichier PDF est créé lors de l'impression de l'état. Il suffit alors d'ouvrir ce fichier PDF dans le logiciel approprié puis de l'imprimer sur l'imprimante configurée sur le poste utilisé. 

Quel que soit le type d'état à imprimer, le principe de lancement d'un état est le suivant  :

1. Spécifier le mode d'impression de l'état (génération d'un fichier PDF) avec la fonction [iDestination](../WDLang5/3046074.md).

2. Lancer l'impression au format PDF avec la fonction [iImprimeEtat](../WDLang5/3046032.md).

3. Selon vos besoins, vous pourrez ensuite :

	- afficher le fichier généré sur le poste de l'utilisateur (fonction [LanceAppliAssociée](../WDLang1/3035007.md)).

	- ...







**Attention** : Vérifiez les points suivants :

- Vous devez disposer des droits d'écriture dans le répertoire dans lequel le document va être généré.
	Si vous générez un état au format PDF, ce fichier peut être enregistré dans le répertoire des données (chemin connu avec la fonction [fRepDonnées](../WDLang1/3036001.md)).

- Utilisez un nom spécifique pour chaque document généré. Dans le cas contraire, plusieurs impressions simultanées écraseraient les impressions déjà réalisées. 




Ce principe doit être adapté et complété selon la source de données utilisée dans chaque état.

Exemple : 


```wl
// Impression du bon de commande
NomFichier = fRepDonnées() + [fSep()] + ChaîneConstruit("BDC_%1.PDF", NuméroCommande)
iDestination(iPDFGénérique, NomFichier)
iImprimeEtat(ETAT_BonDeCommande, NuméroCommande, NuméroCommande)

// Test de l'existence du fichier
SI fFichierExiste(NomFichier) = Faux ALORS
	Erreur("Le fichier PDF n'a pas été généré")
	RETOUR
FIN

// Confirmation pour afficher le PDF
SI OuiNon(Oui, "Afficher le bon de commande généré (format PDF) ?") = Oui ALORS	
	// Affichage du bon de commande généré
	LanceAppliAssociée(NomFichier)
SINON
	iImprimePDF(NomFichier)
FIN
```


Les paragraphes suivants présentent :

- [l'impression par programmation d'un état sur fichier de données.](../WDChamp/1011052.md)

- [l'impression par programmation d'un état sur une requête.](../WDChamp/1011013.md)

- [l'impression par programmation d'un état sur une vue HFSQL](../WDChamp/1011064.md). 

- [l'impression par programmation d'un état sur un fichier texte.](../WDChamp/1011011.md)




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Limitations
<a name="limitations_ELTTEXTE000198"></a>
Dans les applications iPhone/iPad ou dans les applications en mode Universal Windows App, les limitations pour les états créés avec l'éditeur d'états sont les suivantes : 

- Le RTF n'est pas géré : pas de champs au format RTF, ...

- Seuls les champs Graphe créés à partir de la version 17 sont disponibles.

- Les champs suivants ne sont pas disponibles : 

	- Les champs de saisie.  

	- Les champs HTML. 

	- Les champs Tableur. 

	- Les champs Signature. 

	- Les champs Agenda et Planning. 

	- Les champs Diagramme de Gantt. 

	- Les champs Tableau croisé dynamique. 








- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMCRM.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM CRM** <br>WM CRM est un projet multi-plateformes Android et iOS.<br>Il présente comment on peut réaliser une application de CRM destinée aux tablettes Android et iPad.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMNotedefrais.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Note de frais** <br>Cet exemple permet de gérer vos notes de frais.<br><br>Voici les principales fonctionnalités de cette application :<br>- La saisie des factures<br>- Gestion des devises étrangères<br>- Ajout de justificatif photo pour les factures<br>- Envoi par mail de la note de frais<br>- Suivi des notes de frais<br>- ...
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMGestionContacts.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Gestion Contacts** <br>Cet exemple illustre la gestion de contacts pour Android et iOS.<br>Il permet de :<br>- lister les contacts du téléphone<br>- appeler les contacts<br>- envoyer des sms aux contacts<br>- ...
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMGestiondeCommandes.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Gestion de Commandes** <br>L'exemple WM Gestion de commandes est une gestion de commandes et factures simplifiée.<br>Cet exemple permet de :<br>- créer/modifier/supprimer un produit,<br>- créer/modifier/supprimer un client,<br>- contacter un client par email,<br>- voir l'historique des actions effectuées auprès d'un client,<br>- effectuer une commande, imprimer un bon de commande,<br>- facturer une commande, imprimer une facture.


