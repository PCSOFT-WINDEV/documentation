
## Android : Conditions d'utilisation du champ Carte (avant la version 180056)
			




	<B><B>Avertissement</B></B>

	A partir de la version <B><B>18 (56)</B></B>,  les conditions d'utilisation du champ Carte ont évolué. Pour plus de détails, consultez [Conditions d'utilisation d'un champ Carte à partir de la version 180056](../WDChamp/1000019823.md). 



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000133"></a>
**Jusqu'à la version 180046 de WINDEV Mobile**, l'utilisation d'un champ Carte dans une application Android nécessitait l'utilisation de la librairie Google Maps API v1. 
Cette librairie est préinstallée sur la plupart des téléphones et des tablettes. Il suffit d'obtenir une clé générée à partir du certificat utilisé pour signer l'application pour pouvoir utiliser cette librairie dans l'application. Cette page d'aide présente les différentes étapes nécessaires à la génération de la clé. 

La version 1 de cette librairie a été dépréciée par Google le 3 décembre 2012. A partir de 3 Mars 2013 il ne sera plus possible de générer de nouvelles clés pour pouvoir utiliser la librairie en version 1. Toutefois les applications existantes continueront de fonctionner et il sera possible de réutiliser les clés précédemment générées dans d'autres applications à condition qu'elles soient signées avec le même certificat que celui utilisé pour la génération de la clé.

**A partir de la version 180056 de WINDEV Mobile** : A partir du 3 mars 2013, pour les applications ne disposant pas d'une clé Google Maps API v1, il sera donc nécessaire d'utiliser la version 2 de la librairie.
 
La marche à suivre pour l'utilisation de cette nouvelle librairie dans une application Android est assez différente et plus complexe. Pour plus de détails, consultez [Conditions d'utilisation d'un champ Carte à partir de la version 180056](../WDChamp/1000019823.md).





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Conditions d'utilisation
<a name="conditions_utilisation_ELTTEXTE000157"></a>
**En Android, le champ Carte utilise la librairie Google Maps API.**
Pour pouvoir utiliser un champ Carte, cette librairie doit donc être présente sur l'appareil et/ou l'émulateur sur lequel est installée l'application. Dans le cas contraire, une erreur fatale WLangage sera déclenchée à l'ouverture des fenêtres contenant un champ Carte.

**Le champ Carte affiche des données provenant du service Google Maps.**
Pour afficher des données provenant du service Google Maps, il est nécessaire de s'enregistrer auprès ce service et d'accepter les conditions d'utilisation afin d'obtenir une clé permettant d'accéder aux données cartographiques. 
**Cet enregistrement est gratuit.**

Pour obtenir une clé, un compte Google est nécessaire. 

La procédure détaillée d'obtention de cette clé est détaillée ici : [http://code.google.com/android/add-ons/google-apis/mapkey.html](http://code.google.com/android/add-ons/google-apis/mapkey.html)

Toutefois, un plan consacré à cet enregistrement est affiché dans l'assistant de génération Android afin de simplifier cette procédure.



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Assistant de génération Android
<a name="assistant_generation_android_ELTTEXTE000181"></a>
Si votre application contient un ou plusieurs champs Carte, l'assistant de génération de l'application Android propose de simplifier les manipulations nécessaires au respect des conditions d'utilisation. 

1. Si vous possédez une clé Google Maps API, saisissez-la. Dans le cas contraire, cliquez sur "Obtenir une clé". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Android_Carte1.gif)


2. Pour obtenir la clé, 3 étapes sont nécessaires : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Android_Carte2.gif)


	- Copiez l'empreinte MD5 du certificat utilisé pour signer l'application dans le presse-papiers. 

	- Générez la clé sur le site [https://developers.google.com/maps/documentation/android/v1/maps-api-signup?hl=fr](https://developers.google.com/maps/documentation/android/v1/maps-api-signup?hl=fr). 




3. Saisissez la clé générée et validez la fenêtre. 

4. La clé Google Maps API est automatiquement reportée dans l'assistant. Si vous utilisez un SDK version 2.1 ou supérieur, l'assistant propose le comportement à adopter si la librairie Google Maps n'est pas présente sur l'appareil d'installation. Il est possible de : 

	- Autoriser l'installation de l'application. Dans ce cas, si la fenêtre contenant le champ Carte est ouverte, l'application affichera une erreur fatale. 

	- Bloquer l'installation de l'application. 




5. Passez au plan suivant. La génération de l'archive est effectuée.
	**Attention** : Si la librairie Google Maps API n'est pas installée sur le poste, une erreur est affichée. L'installation de cette librairie est possible via le manager du SDK Android. 







