


## Conception d'un superchamp
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000343"></a>
Un superchamp est un type de champ avancé. Un superchamp regroupe un ensemble de champs dans un but précis. Le fonctionnement de ces champs sont indépendants des traitements réalisés dans la fenêtre ou dans la page les accueillant.

Pour manipuler un superchamp, il est possible de distinguer deux types d'utilisateurs :

- Le **créateur du superchamp** : personne qui conçoit le superchamp et la fonctionnalité que ce superchamp doit apporter. 

- L' **utilisateur du superchamp** : personne qui va intégrer le superchamp dans sa fenêtre (ou sa page) et qui va le manipuler par programmation. Pour plus de détails, consultez : [Intégrez un superchamp dans une fenêtre ou une page](../WDChamp/1013092.md).






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Création d'un superchamp sous l'éditeur
<a name="creation_superchamp_sous_editeur_ELTTEXTE000367"></a>
Deux méthodes sont disponibles pour créer un superchamp :

- Création d'un superchamp vide, puis création des champs composant le superchamp.

- Création d'un superchamp à partir de champs existants.




**Remarque** : Il n'est pas possible d'ajouter des superchamps personnels aux superchamps proposés par défaut par WINDEV, WEBDEV et WINDEV Mobile.
<a name="NOTE2_2"></a>


### Méthode 1
<a name="methode_1_ELTPARAGRAPHE000058"></a>

1. Sous l'éditeur de fenêtres ou de pages, sous le volet "Création", dans le groupe "Conteneurs", cliquez sur "Superchamp".

2. Cliquez dans la fenêtre (ou la page) à la position où le champ doit être créé. Le contour du superchamp apparaît.

3. Affichez la description du champ (option "Description" du menu contextuel).

4. Ajoutez les différents champs composant le superchamp (bouton "Ajouter').




**Attention** : Les champs associés au superchamp doivent appartenir à la zone du superchamp définie sous l'éditeur. Dans le cas contraire, le champ sera grisé sous l'éditeur et non-affiché en exécution.
<a name="NOTE2_3"></a>


### Méthode 2
<a name="methode_2_ELTPARAGRAPHE000082"></a>

1. Sous l'éditeur de fenêtres ou de pages, créez les différents champs composant le superchamp.

2. Sélectionnez les champs (touche Ctrl + clic de souris ou utilisation du lasso).

3. Sous le volet "Modification", dans le groupe "Transformations", déroulez "Refactoring et permutations" et sélectionnez "Créer un superchamp avec la sélection".




**Remarque** : Les champs qui sont associés au superchamp sont ancrés par rapport au superchamp (et non par rapport à la fenêtre ou la page).
<a name="NOTE2_4"></a>


### Ajouter un champ dans un superchamp
<a name="ajouter_champ_dans_superchamp_ELTPARAGRAPHE000105"></a>Pour ajouter un champ dans un superchamp : 

1. Créez si nécessaire le champ à ajouter au superchamp.

2. Positionnez le champ dans la zone du superchamp. La zone du superchamp est alors encadrée d'un trait vert. 
	Le champ est automatiquement ajouté au superchamp.



<a name="NOTE2_5"></a>


### Superchamps et ascenseurs
<a name="superchamps_ascenseurs_ELTPARAGRAPHE000117"></a>Un superchamp est constitué d'une zone affichée (poignées noires) et d'une zone affichable (poignées rouges).

Pour modifier une des deux zones, déplacez les poignées en maintenant la touche Maj enfoncée.

Si la zone affichée est plus petite que la zone affichable, des ascenseurs sont automatiquement affichés.

Il est ainsi possible de créer des superchamps avec des ascenseurs permettant de faire défiler le contenu du superchamp.



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Programmation d'un superchamp
<a name="programmation_superchamp_ELTTEXTE000415"></a>


### Déclaration des variables globales au superchamp
<a name="declaration_des_variables_globales_superchamp_ELTPARAGRAPHE000140"></a>Le superchamp possède un code de déclaration des globales (voir [Evénements associés au superchamp](../WDChamp/1013082.md)). Ce code permet de déclarer toutes les variables globales au superchamp. Ces variables peuvent être de n'importe quel type. Elles pourront être utilisées dans n'importe quel événement associé au superchamp ou à un des champs composant le superchamp.
<a name="NOTE3_2"></a>


### Déclaration des fonctions et procédures liées au superchamp
<a name="declaration_des_fonctions_procedures_liees_superchamp_ELTPARAGRAPHE000150"></a>Pour créer une procédure locale au superchamp :

1. Affichez la description du superchamp.

2. Cliquez sur le bouton "Ajouter" placé sous le champ "Procédures locales". Une nouvelle procédure est créée.

3. Cliquez sur le bouton "Code" pour éditer le code de la procédure.




**Astuce** : Pour créer des procédures locales liées au superchamp, il est possible de réaliser les manipulations suivantes :

1. Sélectionnez votre fenêtre (ou page) puis le superchamp dans le volet "Explorateur de projet".

2. Cliquez sur la flèche noire à côté du nom du superchamp dans l'explorateur de projet. Les procédures locales apparaissent. 

3. Sélectionnez "Procédures locales". Les procédures locales affichées sont celles du superchamp. Vous pouvez ajouter, renommer ou supprimer des procédures locales au superchamp.



<a name="NOTE3_3"></a>


### Accès au superchamp et aux champs du superchamp
<a name="acces_superchamp_aux_champs_superchamp_ELTPARAGRAPHE000167"></a>Lors de la programmation du superchamp, il est nécessaire d'accéder :

- Au superchamp : 
	Le traitement devant être indépendant du nom du superchamp, pour connaître le nom du superchamp, il est conseillé d'utiliser soit le mot-clé [MonParent](../Motscles/1511016.md), soit les fonctions du type [ChampContextuel](../WDLang1/3025012.md), [ChampEnCours](../WDLang1/3025019.md), ...

- Aux champs du superchamp : 
	Il suffit d'utiliser directement la variable du champ dans le code. Depuis l'extérieur du superchamp (code d'un menu contextuel d'un champ du superchamp par exemple), il est nécessaire d'utiliser la notation suivante :
	
	```txt
	<Nom du superchamp>.<Nom du champ>
	```



**Remarque** : La fonction [EnumèreChamp](../WDLang1/3025005.md) permet d'énumérer les champs appartenant à un superchamp.

**Exemple**
L'exemple suivant correspond au code d'une option d'un menu contextuel. Ce menu est associé à un champ d'un superchamp, et permet de modifier les champs "DateDébut" et "DateFin" du superchamp.
Dans ce code, le nom du superchamp en cours est obtenu avec la fonction [ChampContextuel](../WDLang1/3025012.md). Les différents champs du superchamp sont manipulés grâce aux opérateurs d'indirection.


```wl
// Récupère le superchamp courant
sSuperChamp est une chaîne
sSuperChamp = ExtraitChaîne(ChampContextuel(), 1, ".")
dDate est une Date     // Date du jour par défaut 
// Passe au jour précédent
dDate..Jour--
// Affiche la date du jour précédent 
{sSuperChamp+".DateDébut"}..Valeur = dDate
{sSuperChamp+".DateFin"}..Valeur = dDate
```

<a name="NOTE3_4"></a>


### Valeur d'un superchamp
<a name="valeur_superchamp_ELTPARAGRAPHE000208"></a>Un superchamp est composé de plusieurs champs et peut renvoyer une valeur. Cette valeur peut correspondre à la valeur d'un champ du superchamp ou à toute autre information. Par défaut, cette valeur est une chaîne vide. Vous pouvez la modifier par la propriété [Valeur](../Proprietes/2510130.md) ou par affectation directe.

**Exemple** : Un superchamp permet de sélectionner un fichier. Il est composé d'un champ de saisie et d'un bouton ouvrant le sélecteur de fichier. La valeur du superchamp doit correspondre au nom du fichier sélectionné. Pour cela, il est nécessaire d'affecter la valeur du superchamp :

- dans le code de modification du champ de saisie,

- dans le code de clic du bouton de sélection.


Dans ce code, le mot-clé **MonParent** permet de désigner le superchamp dans le code d'un des champs le composant.

```wl
// Code de modification du champ de saisie
MonParent = MoiMême
```



```wl
// Code du bouton de sélection 
NomFichier = fSélecteur(fExtraitChemin(NomFichier, fRépertoire), ...
	fExtraitChemin(NomFichier, fFichier + fExtension), ...
	"Sélectionner un fichier", ...
	"Tous les fichiers (*.*)" + TAB + "*.*", "")
MonParent = NomFichier
```


<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Fonctions et propriétés spécifiques aux superchamps
<a name="fonctions_proprietes_specifiques_aux_superchamps_ELTTEXTE000457"></a>


### Fonctions spécifiques aux superchamps
<a name="fonctions_specifiques_aux_superchamps_ELTPARAGRAPHE000230"></a>Les fonctions suivantes sont spécifiques à la gestion des caractéristiques d'un superchamp par programmation.


|   |   |
| --- | --- |
| [EnumèreChamp](../WDLang1/3025005.md) | Renvoie le nom du Nème champ du superchamp considéré. |
| [FenTailleUtile](../WDLang1/1000017089.md) | Indique la taille utile des superchamps avec ascenseurs.<br><br><br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette fonction n'est pas disponible. |
| [RAZ](../WDLang1/3025026.md) | Ré-initialise les champs présents dans un superchamp. |


<a name="NOTE4_2"></a>


### Propriétés spécifiques aux superchamps
<a name="proprietes_specifiques_aux_superchamps_ELTPARAGRAPHE000267"></a>Les propriétés suivantes sont spécifiques à la gestion des caractéristiques d'un superchamp par programmation.


|   |   |
| --- | --- |
| [Hauteur](../Proprietes/2510050.md) | Permet de connaître et de modifier la hauteur du superchamp. |
| [Largeur](../Proprietes/2510059.md) | Permet de connaître et de modifier la largeur du superchamp. |
| [Nom](../Proprietes/2510082.md) | Permet de connaître le nom du superchamp. |
| [Valeur](../Proprietes/2510130.md) | Permet de connaître et de modifier la valeur du superchamp. |


Pour connaître la liste complète des propriétés du WLangage pouvant être utilisées avec un superchamp, consultez [Propriétés associées à un superchamp](../WDChamp/1013066.md).


