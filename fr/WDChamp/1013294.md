
## Caractéristiques d'un champ Zone répétée dans une fenêtre
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000447"></a>
Pour afficher les caractéristiques du champ, sélectionnez l'option "Description" dans le menu contextuel du champ. Dans une fenêtre, les attributs n'étant pas proposés par défaut, seules les caractéristiques du champ Zone répétée sont affichées. 

Les caractéristiques importantes du champ sont regroupées dans les onglets suivants : 

- L'onglet "Général" affiche la liste des champs présents dans le champ Zone répétée. 

- L'onglet "UI" permet de sélectionner : 

	- l'état initial, 

	- [le mode de sélection](#NOTE2_1), 

	- le menu contextuel, ...




- L'onglet "Détail" permet de sélectionner : 

	- [le mode d'affichage du champ](#NOTE3_1).

	- [les paramètres de saisie](#NOTE4_1_Saisie)

	- [les paramètres de l'ascenseur](#NOTE4_1_Ascenseur).

	- [les paramètres de déplacements et gestures](#NOTE4_1_Gesture).

	- ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) [le remplissage du champ Zone répétée par programmation (affichage d'une jauge ou d'une fenêtre, ...)](#NOTE5_Remplissage).

	- ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) [le paramétrage du champ de recherche](#NOTE4_1_Recherche). 




- L'onglet "Contenu" permet de définir les paramètres concernant : 

	- le mode de remplissage du champ.

	- [la gestion de la zone répétée infinie](../WDChamp/1013307.md) (champ Zone répétée manipulée par programmation uniquement). 

	- [l'affichage d'un contenu différent par ligne/répétition](#NOTE6_Contenu_different_par_ligne) (en utilisant des fenêtres internes).

	- les [ruptures](../WDChamp/1013287.md). 




- L'onglet "Style" permet de définir le style des différents éléments du champ. 




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Mode de sélection (onglet "UI" de la fenêtre de description)
<a name="mode_selection_onglet_fenetre_description_ELTTEXTE000471"></a>


### Modes de sélection
<a name="modes_selection_ELTPARAGRAPHE000068"></a>Dans un champ Zone répétée, les modes de sélection proposés sont les suivants : 

- **Sans sélection** : Le bandeau de sélection ne s'affiche pas sur la répétition (ou ligne) sélectionnée. Cependant, l'événement "Sélection d'une ligne" est exécuté lors de la sélection de la répétition (ligne).  

- **Sélection simple** : Le bandeau de sélection s'affiche sur la répétition (ligne) sélectionnée. Le code de 'événement "Sélection d'une ligne" est exécuté. 

- **Sélection multiple** : Le bandeau de sélection s'affiche sur les répétitions (lignes) sélectionnées. Pour sélectionner plusieurs répétitions (lignes), il suffit de maintenir la touche Maj ou Ctrl enfoncée. A chaque répétition (ligne) sélectionnée, l'événement "Sélection d'une ligne" est exécuté. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Sélection multiple par simple clic** : Cette option permet de réaliser une multisélection à la souris. Si cette option est sélectionnée, il suffit de cliquer sur une ligne pour que celle-ci soit ajoutée ou enlevée de la multisélection. 




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mode d'affichage (onglet "Détail" de la fenêtre de description)
<a name="mode_affichage_onglet_detail_fenetre_description_ELTTEXTE000495"></a>


### Les différents modes disponibles
<a name="les_differents_modes_disponibles_ELTPARAGRAPHE000109"></a>Plusieurs modes d'affichage sont disponibles :

- Standard (grille) : Mode d'affichage correspondant au champ Zone répétée standard. Dans ce cas, le champ Zone répétée peut être horizontal ou vertical. 

- Galerie en ligne : Mode d'affichage correspondant au champ Galerie en ligne. Pour plus de détails, consultez [Champ Zone répétée 'Galerie d'images'](../WDChamp/1013319.md). 

- Galerie en colonne : Mode d'affichage correspondant au champ Galerie en colonne. Pour plus de détails, consultez [Champ Zone répétée 'Galerie d'images'](../WDChamp/1013319.md). 




Ces modes sont choisis dans l'onglet "Détail" de la fenêtre de description du champ Zone répétée. 




### Mode standard vertical ou mode galerie en colonne : Ancrage des colonnes
<a name="mode_standard_vertical_mode_galerie_colonne_ancrage_des_colonnes_ELTPARAGRAPHE000131"></a><br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_ZR_NbColWD.GIF)


Les options disponibles sont les suivantes : 

- **Largeur de colonnes variable** : Si la largeur de la zone répétée permet l'affichage d'une colonne supplémentaire, le nombre de colonnes n'est pas modifié. Seule la largeur des colonnes est modifiée. 

- **Largeur et nombre de colonnes variables** : Si la largeur de la zone répétée permet l'affichage d'une colonne supplémentaire, alors elle est ajoutée. Avant d'ajouter la colonne, les répétitions sont étirées horizontalement. 

- **Nombre de colonnes variable (à gauche)** :  Si la largeur de la zone répétée permet l'affichage d'une colonne supplémentaire, alors elle est ajoutée.  Avant d'ajouter la colonne, les colonnes sont alignées à gauche et une zone vide peut apparaître à droite. 

- **Nombre de colonnes variable (centrées)** :  Si la largeur de la zone répétée permet l'affichage d'une colonne supplémentaire, alors elle est ajoutée. Avant d'ajouter une colonne, les colonnes sont centrées dans le champ et une zone vide peut apparaître de part et d'autre des colonnes centrées.

- **Largeur et nombre de colonnes fixes (à gauche)** : Le nombre de colonnes et la largeur des colonnes ne sont pas modifiés. Les colonnes sont alignées à gauche. 

- **Largeur et nombre de colonnes fixes (centrées)** : Le nombre de colonnes et la largeur des colonnes ne sont pas modifiés. Les colonnes sont centrées.


![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Il n'est pas possible de sélectionner un mode d'affichage spécifique : les champs Zone répétée affichent uniquement une seule colonne. 
<a name="NOTE3_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Mode standard horizontal : Ancrage des lignes**<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_ZR_NbColWD_H.GIF)


Plusieurs modes d'affichage sont disponibles :

- **Hauteur de lignes variable**. Il suffit d'indiquer le nombre de lignes à afficher. La hauteur de chaque ligne évoluera en fonction de la hauteur du champ. 
	Si la hauteur du champ est modifiée, la hauteur de chaque ligne augmentera ou diminuera de façon proportionnelle.

- **Hauteur et nombre de lignes variables**. Si la hauteur du champ permet l'affichage d'une ligne supplémentaire, cette ligne sera ajoutée. Si cette ligne ne peut être ajoutée, la hauteur de la ligne sera modifiée. Il est nécessaire d'indiquer la hauteur de ligne minimale à afficher. Cette hauteur minimale sera utilisée pour chacune des lignes du champ Zone répétée.

- **Nombre de lignes variable (en haut)**. Il suffit d'indiquer la hauteur des lignes . Cette hauteur sera utilisée pour chacune des lignes du champ Zone répétée. Le nombre de lignes évoluera en fonction de la hauteur du champ. 
	Lors de la modification de la hauteur du champ, le nombre de lignes augmentera ou diminuera. Si il n'est pas possible d'ajouter une ligne, une zone vide sera visible en bas de la zone répétée. 

- ***Nombre de lignes variable (centrées)***. Il suffit d'indiquer la hauteur des lignes. Cette hauteur sera utilisée pour chacune des lignes du champ Zone répétée. Le nombre de lignes évoluera en fonction de la hauteur du champ. 
	Lors de la modification de la hauteur du champ, le nombre de lignes augmentera ou diminuera. Si il n'est pas possible d'ajouter une ligne, une zone vide sera visible de part et d'autre des répétitions. 

- **Hauteur et nombre de lignes fixes (en haut)** : Il suffit d'indiquer le nombre de lignes à afficher et la hauteur des lignes. 
	Lors de la modification de la hauteur du champ, ni le nombre de lignes, ni la hauteur des lignes ne seront modifiés. Une zone vide apparaîtra en bas des colonnes. 
	

- **Hauteur et nombre de lignes fixes (centrées)** : Il suffit d'indiquer le nombre de lignes à afficher et la hauteur des lignes. 
	Lors de la modification de la hauteur du champ, ni le nombre de lignes, ni la hauteur des lignes ne seront modifiés. Une zone vide apparaîtra de part et d'autre des répétitions.
	




**Limitation** : il n'est pas possible d'utiliser des ruptures dans un champ Zone répétée horizontale. 


<a name="NOTE3_3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Redimensionnement des cellules d'un champ Zone répétée
<a name="redimensionnement_des_cellules_champ_zone_repetee_ELTPARAGRAPHE000191"></a>Il est possible de permettre le redimensionnement des cellules d'un champ Zone répétée à l'utilisateur. Dans l'onglet "Détail" de la description du champ, il suffit de cocher l'option "Redimensionnable" présente devant les options suivantes : 

- "Hauteur de ligne". 

- "Largeur de colonne". 


Remarque : La hauteur par défaut d'une ligne peut être spécifiée. 

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Autres paramètres de l'onglet "Détail"
<a name="autres_parametres_onglet_detail_ELTTEXTE000537"></a>
<a name="NOTE4_1_Saisie"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Paramètres de saisie
<a name="parametres_saisie_ELTPARAGRAPHE000209"></a>Les paramètres de saisie permettent de spécifier le comportement des champs Zone répétée fichier en saisie. Les options possibles sont les suivantes : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_ZR_NbColWD%202.gif)


- **Saisie en cascade** : L'utilisation de la touche Entrée dans un champ de saisie permet de saisir automatiquement une nouvelle répétition. 
	![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette option n'est pas disponible.

- **Enregistrer en sortie de ligne** ou **Enregistrer en sortie de colonne** : L'enregistrement en cours de modification ou de création sera automatiquement sauvegardé dans le fichier de données correspondant dès que la répétition ne sera plus sélectionnée. Si cette option n'est pas sélectionnée, la sauvegarde de l'enregistrement doit être programmée avec la fonction [ZoneRépétéeEnregistre](../WDLang2/3083028.md). 

- **Blocage enregistrement en modification** : Lors de la modification d'une répétition, l'enregistrement correspondant dans le fichier de données sera automatiquement bloqué jusqu'à la validation de la modification. 



<a name="NOTE4_1_Ascenseur"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Ascenseur
<a name="ascenseur_ELTPARAGRAPHE000230"></a>L'affichage de l'ascenseur horizontal/vertical peut être : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_ZR_NbColWD%203.gif)


- automatique : l'ascenseur sera affiché uniquement en cas de besoin. 

- toujours visible : l'ascenseur sera toujours affiché.

- jamais visible : l'ascenseur ne sera jamais affiché. 




Il est possible d'afficher ou non une bulle d'aide sur l'ascenseur vertical. Cette bulle d'aide affiche le numéro de la répétition en cours par rapport au nombre total de répétitions. 
![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette option n'est pas disponible.
<a name="NOTE4_1_Gesture"></a>


### Déplacements et gestures
<a name="deplacements_gestures_ELTPARAGRAPHE000248"></a>Les options suivantes sont disponibles : 

- Scroll au pixel : selon la position de l'ascenseur, une répétition peut ne pas être affichée complètement.

- Scroll au doigt : permet de manipuler l'ascenseur par un écran tactile.





<a name="NOTE4_1_Recherche"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) 

### Champ de recherche
<a name="champ_recherche_ELTPARAGRAPHE000277"></a>Le champ Zone Répétée peut proposer d'effectuer une recherche dans les données affichées. Les options proposées sont : 

- **En utilisant le menu des F.A.A.** : La recherche sera effectuées via l'option "Rechercher" du menu des FAA (Fonctionnalités automatiques de votre application). 

- **Toujours visible** : un champ de recherche sera toujours affiché au dessus du champ Zone répétée. 

- **Jamais** : Aucune recherche ne pourra être effectuée dans le champ Zone Répétée. 







<a name="NOTE5_Remplissage"></a>
![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) 

### Pendant le remplissage d'un champ Zone répétée par programmation
<a name="pendant_remplissage_champ_zone_repetee_par_programmation_ELTPARAGRAPHE000293"></a>Pendant le remplissage d'un champ Zone répétée manipulée par programmation, il est possible d'afficher des informations spécifiques : 

- Jauge de progression, 

- Fenêtre d'information, ...




Pour afficher une information pendant le remplissage d'un champ Zone répétée par programmation : 

1. Affichez la fenêtre de description du champ Zone répétée. 

2. Dans l'onglet "Détail" de la fenêtre de description du champ, cochez l'option "Afficher une Fenêtre interne par dessus les lignes".<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Champ_ZR_NbColWD%201.gif)


3. Spécifiez si nécessaire la fenêtre interne à utiliser. Il est possible de : 

	- utiliser la fenêtre proposée par défaut par WINDEV (option "Aucune"). 

	- importer dans le projet la fenêtre prédéfinie proposée par WINDEV pour la personnaliser (option "Fenêtre prédéfinie"). 
			Si cette option est sélectionnée, le composant interne WDFAA est immédiatement ajouté dans le projet en cours. La fenêtre interne "FI_EtatChargementTable" est associée à la fonctionnalité. 
			Remarque : Si le composant WDFAA existe déjà, seule la fenêtre est ajoutée au composant.  




4. Validez si nécessaire la fenêtre de description du champ. 

5. Pour activer ce mécanisme, utilisez les fonctions [ZoneRépétéeDébutRemplissage](../WDLang2/1000022370.md) et [ZoneRépétéeFinRemplissage](../WDLang2/1000022371.md) pour entourer le code de remplissage du champ Zone répétée. 




Remarques : 

- Par défaut, le message "Aucune donnée disponible" est affiché dans le champ Zone répétée vide. Lors du remplissage, une jauge infinie est affichée en bas du champ Zone répétée. 

- La fenêtre interne proposée par défaut contient 3 plans : 

	- Plan 1 contenant une jauge infinie.

	- Plan 2 contenant le libellé affiché si le champ Zone répétée est vide. Le libellé affiché par défaut est "Aucune donnée disponible". 

	- Plan 3 contenant le libellé affiché avant l'appel de la fonction [ZoneRépétéeDébutRemplissage](../WDLang2/1000022370.md). 




- La fenêtre interne "FI_EtatChargementTable" est également utilisée pour gérer le remplissage des champs Table par programmation. 




<a name="NOTE6_Contenu_different_par_ligne"></a>


## Contenu de chaque ligne variable (Onglet "Contenu")
<a name="contenu_chaque_ligne_variable_onglet_contenu_ELTTEXTE000585"></a>
Les champs Zone répétée offrent la possibilité de personnaliser totalement l'apparence des répétitions : mise en page, contenu, ... Il est ainsi possible par exemple d'imbriquer des zones répétées dans des zones répétées. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=278-WM-ZR%20Variable.jpg)



### Mise en place
<a name="mise_place_ELTPARAGRAPHE000348"></a>Pour créer un champ Zone répétée avec un contenu variable : 

1. Créez un champ Zone répétée rempli par programmation. Ce champ doit être un champ Zone répétée verticale constitué d'une seule colonne. 

2. Affichez la fenêtre de description du champ Zone répétée. 

3. Dans l'onglet "Contenu" de la description du champ : 

	- Cochez l'option "Utiliser une Fenêtre interne par ligne (fonction ZoneRépétéeAjouteFI)". 

	- Indiquez le mode de déchargement des fenêtres internes : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Caracteristiques_ZR_WD%20-%20HC%20N%B0002.gif)


		- **Jamais** : Le chargement des fenêtres internes est effectué quand la répétition associée est visible dans le champ. Le déchargement n'est jamais effectué lors de la manipulation du champ. Il est uniquement effectué à la fermeture de la fenêtre. Ce mode est conseillé si les fenêtres internes sont peu nombreuses et contiennent peu de champs. 
						Avantage : Toutes les données sont toujours disponibles
						Inconvénient : Consommation mémoire importante. 

- **Lorsque la ligne n'est plus visible** (option sélectionnée par défaut) : Le chargement des fenêtres internes est effectué quand la répétition associée est visible dans le champ. Le déchargement est effectué lorsque la ligne n'est plus visible. Ce mode est conseillé pour les champs Zone répétée ne permettant pas de saisie. En effet, si une fenêtre interne permet une saisie, lorsque cette fenêtre interne n'est plus visible, le contenu saisi par l'utilisateur est perdu. 
						Avantage : Consomme peu de mémoire. 
						Inconvénient : Perte des informations saisies par l'utilisateur. 

- **Ligne non visible + FI ne contenant que des champs d'affichage** : Le chargement des fenêtres internes est effectué quand la répétition associée est visible dans le champ. Le déchargement est effectué en fonction du type de la ligne : 

	- Si la ligne ne contient pas de champs permettant la saisie par l'utilisateur, la fenêtre interne associée est déchargée lorsqu'elle n'est plus visible. 

	- Si la ligne permet une saisie, la fenêtre interne associée n'est jamais déchargée. 

4. Validez la fenêtre de description du champ. 

5. Créez les différentes fenêtres internes correspondant aux lignes / répétitions du champ Zone répétée. 

6. Ajoutez les fenêtres internes dans le champ Zone répétée grâce aux fonctions suivantes : 


|   |   |
| --- | --- |
| [ZoneRépétéeAjouteFI](../WDLang2/1000023439.md) | Ajoute une répétition sous forme d'une fenêtre interne à la fin d'un champ Zone répétée par programmation. |
| [ZoneRépétéeInsèreFI](../WDLang2/1000023440.md) | Insère une répétition sous forme d'une fenêtre interne dans un champ Zone répétée par programmation. |
| [ZoneRépétéeModifieFI](../WDLang2/1000023441.md) | Modifie une répétition correspondant à une fenêtre interne dans un champ Zone répétée par programmation. |





### Caractéristiques des fenêtres internes
<a name="caracteristiques_des_fenetres_internes_ELTPARAGRAPHE000384"></a>Les caractéristiques de largeur et de hauteur des fenêtres internes sont les suivantes : 

- Hauteur : La hauteur de la répétition utilisant une fenêtre interne correspond exactement à la hauteur de la fenêtre interne définie en édition. La fenêtre interne ne peut pas être plus haute que le champ Zone répétée. 

- Largeur : 

	- Si la largeur de la fenêtre interne est plus petite que celle du champ Zone répétée, la largeur de la fenêtre interne est automatiquement augmentée et les ancrages sont appliqués. 

	- Si la largeur de la fenêtre interne est plus grande que celle du champ Zone répétée, la fenêtre interne est automatiquement tronquée. 


 En règle générale, il est conseillé de réaliser la fenêtre interne avec la plus petite largeur possible et d'utiliser les ancrages. 




Remarque : Si la fenêtre interne possède des champs adaptés au contenu, la hauteur de la répétition sera augmentée ou diminuée en fonction du contenu. 








- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampZonerepetee.gif) ***Exemples unitaires (WINDEV)*** : **Le champ Zone répétée** <br>Utilisation du champ Zone répétée.<br>Il est possible d'ajouter une ligne grâce à la fonction ZoneRépétéeAjouteLigne.<br>Il est également possible de récupérer les valeurs saisies grâce à la syntaxe :<br>   	NomAttribut[Indice]
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMGestionContacts.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Gestion Contacts** <br>Cet exemple illustre la gestion de contacts pour Android et iOS.<br>Il permet de :<br>- lister les contacts du téléphone<br>- appeler les contacts<br>- envoyer des sms aux contacts<br>- ...
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMInscrits.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Inscrits** <br>Cette application est un gestionnaire de présence. Elle permet de noter les personnes présentes lors d'un séminaire.<br>La base de données est préalablement renseignée avec la liste des personnes inscrites.<br>Il est possible de rechercher une personne par son nom.<br>Dans cet exemple, nous abordons les principaux thèmes suivants :<br>1/ l'utilisation d'une zone répétée fichier basée sur une requête<br>2/ l'utilisation d'une base de données au format HFSQL.




