


## Ancrage des champs dans un état
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000290"></a>
Les ancrages permettent de définir le comportement des champs lors d'un redimensionnement. 

Dans un état, l'ancrage permet d'adapter intelligemment le document quand l'utilisateur passe du mode Portrait au mode Paysage ou encore quand il change le format du papier (A4, A3, ...). 

Par exemple, une impression au format A4 un peu "serrée" (et donc moyennement lisible) sera parfaitement lisible au format A3. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ancrage_Etat_Portrait.gif&type=thumb)

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ancrage_Etat_Paysage.gif&type=thumb)
La gestion de l'ancrage d'un champ est constituée de deux paramètres :

- L'ancrage du champ : ce paramètre permet de définir la modification à appliquer au champ en fonction du changement de la taille de l'état. Le champ peut se déplacer vers la gauche, s'agrandir en largeur.

- Le taux d'ancrage : ce paramètre permet de gérer le pourcentage de déplacement ou d'étirement du champ. Grâce à ce paramètre, il est possible par exemple de :

	- laisser un champ centré en largeur dans l'état quel que soit sa taille,

	- agrandir proportionnellement certains champs de l'état.







Ces paramètres peuvent être configurés sous l'éditeur d'états.

**Remarques** : 

- Par programmation, diverses propriétés WLangage sont disponibles pour connaître les caractéristiques d'ancrage définies sous l'éditeur. Ces propriétés ne permettent pas de modifier les ancrages définis sous l'éditeur. 

- L'ancrage est disponible uniquement sur les champs (il n'est pas disponible sur les blocs). 




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000314"></a>


### Ancrer un champ dans un état
<a name="ancrer_champ_dans_etat_ELTPARAGRAPHE000038"></a>Pour ancrer un champ dans un état : 

1. Sélectionnez un ou plusieurs champs à ancrer. 

2. Définissez l'ancrage du ou des champs : 

	- soit dans l'onglet "UI" de la fenêtre de description du champ (option "Description" du menu contextuel du champ), 

	- soit grâce à l'option "Ancrage" du menu contextuel du champ. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ancrage_Etat_20.gif)
Remarque : Si le mode d'impression de l'état n'est pas adapté aux ancrages, il est possible de changer directement le mode d'impression depuis cette fenêtre. 




3. Dans cette fenêtre, choisissez le type d'ancrage à utiliser. Les options les plus courantes sont présentées sous forme d'icônes : 
	


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=SansAncrage.gif)<br> | Aucun ancrage | Le champ n'est pas modifié lorsque la taille de l'état est modifiée. Aucune option d'ancrage n'est sélectionnée. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Largeur.gif)<br> | Largeur | Le champ s'étire vers la droite lorsque l'état s'agrandit. Pour faire varier la vitesse d'étirement du champ par rapport à l'état, utilisez le taux d'ancrage en largeur. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Droite.gif)<br> | Droite | Le champ se déplace vers la droite lorsque l'état s'agrandit. Pour que le champ se déplace plus ou moins vite, utilisez le taux d'ancrage à droite. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=centre_Largeur.gif)<br> | Centré en largeur | Le champ reste centré en largeur dans l'état quelle que soit la largeur de l'état. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Hauteur.gif)<br> | Hauteur | Le champ s'étire vers le bas lorsque la hauteur de l'état s'agrandit. Pour faire varier la vitesse d'étirement du champ par rapport à l'état, utilisez le taux d'ancrage en hauteur. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Largeur_Hauteur.gif)<br> | Largeur et Hauteur | Le champ s'étire vers la droite et vers le bas lorsque l'état s'agrandit. Pour faire varier la vitesse d'étirement du champ par rapport à l'état, utilisez le taux d'ancrage en hauteur et le taux d'ancrage en largeur. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Droite_Hauteur.gif)<br> | Hauteur et Droite | Le champ s'étire vers le bas et se déplace vers la droite lorsque l'état s'agrandit. <br>Pour que le champ se déplace plus ou moins vite, utilisez le taux d'ancrage à droite. <br>Pour faire varier la vitesse d'étirement du champ par rapport à l'état, utilisez le taux d'ancrage en hauteur. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Bas.gif)<br> | Bas | Le champ se déplace vers le bas lorsque l'état est agrandi vers le bas. Pour que le champ se déplace plus ou moins vite, utilisez le taux d'ancrage en bas. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Largeur_Bas.gif)<br> | Largeur et Bas | Le champ s'étire vers la droite et se déplace vers le bas lorsque l'état s'agrandit. <br>Pour que le champ se déplace plus ou moins vite, utilisez le taux d'ancrage en bas. <br>Pour faire varier la vitesse d'étirement du champ par rapport à l'état, utilisez le taux d'ancrage en largeur. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=A_Droite_Bas.gif)<br> | Droite et Bas | Le champ se déplace vers la droite et vers le bas lorsque l'état s'agrandit. Pour que le champ se déplace plus ou moins vite, utilisez le taux d'ancrage en bas et le taux d'ancrage à droite. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Centre_Hauteur_A_Bas.gif)<br> | Centré horizontal en bas | Le champ reste centré en largeur dans l'état quelle que soit la largeur de l'état. Cependant, le champ est ancré en bas, et se déplace vers le bas lorsque l'état s'agrandit. <br>Pour que le champ se déplace plus ou moins vite, utilisez le taux d'ancrage en bas. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=centre_Hauteur.gif)<br> | Centré en hauteur | Le champ reste centré en hauteur dans l'état quelle que soit la hauteur de l'état. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=centre_Vertical_Droite.gif)<br> | Centré vertical à droite | Le champ reste centré en hauteur dans l'état quelle que soit la hauteur de l'état. Cependant, le champ est ancré à droite, et se déplace vers la droite lorsque l'état est élargi. <br>Pour que le champ se déplace plus ou moins vite, utilisez le taux d'ancrage à droite. |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=centre_Hauteur_Largeur.gif)<br> | Centré | Le champ reste centré en hauteur et en largeur dans l'état quelle que soit la taille de l'état. |



4. Définissez si nécessaire les différents taux d'ancrage.

5. Validez. 


Pour afficher les signes d'ancrage dans le champ (flèches rouges), sous le volet "Affichage", dans le groupe "Visualisation", cochez l'option "Ancrages et Auto-extensibilité".

Remarques : 

- Les champs auto-extensibles sont affichés sous l'éditeur d'états avec un signe spécifique : un trait avec une flèche vers le bas. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Etat_chp_autoext.gif)


- A l'exécution, un champ auto-extensible s'agrandira automatiquement en hauteur si sa taille est trop petite pour afficher en entier son contenu. 



<a name="NOTE2_2"></a>


### Mode d'impression d'un état et ancrage
<a name="mode_impression_etat_ancrage_ELTPARAGRAPHE000194"></a>Par défaut, les ancrages ne sont pas automatiquement activés dans les états. 

Un état peut s'imprimer selon trois modes d'impression : 

- Imprimer l'état tel quel : Dans ce cas, le contenu qui déborde de l'état ne sera pas imprimé. 

- Étirer ou réduire automatiquement au format supporté : L'état s'étire ou se réduit automatiquement pour s'adapter au format du papier. 

- Étirer ou réduire en appliquant les ancrages : L'état s'adapte au format choisi en utilisant les ancrages définis. 




Ces modes d'impression peuvent être sélectionnés ou modifiés dans l'onglet "Options" de la fenêtre de description de l'état. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ancrage_Etat_Description.gif)


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Visualisateur de rapports : état avec ancrage
<a name="visualisateur_rapports_etat_avec_ancrage_ELTTEXTE000344"></a>
Lorsque des ancrages sont définis dans un état, le visualisateur de rapports propose automatiquement une liste permettant de choisir le mode d'affichage de l'état. 

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ancrage_Choix_format20.gif)
Choix présent dans le volet "Imprimer" du ruban

Les choix proposés correspondent : 

- au format de papier par défaut de l'état proposé en mode portrait et en mode paysage. 

- aux formats de papier gérés par l'imprimante par défaut du poste. 




Rappel : Les fonctions WLangage iGroupeXXX permettent de personnaliser la combo du visualisateur de rapports en proposant plusieurs états. Pour plus de détails, consultez [Visualisateur de rapports : Proposer plusieurs états](../WDChamp/1011060.md). 

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Connaître les caractéristiques de l'ancrage par programmation
<a name="connaitre_les_caracteristiques_ancrage_par_programmation_ELTTEXTE000368"></a>
Par programmation, il est possible de connaître les caractéristiques d'ancrage des champs grâce à diverses propriétés WLangage : 



|   |   |
| --- | --- |
| [Ancrage](../Proprietes/2510001.md) | La propriété **Ancrage** permet de gérer l'ancrage d'un champ dans une fenêtre, une page ou un état. |
| [TauxAncrageBas](../Proprietes/2510113.md) | La propriété **TauxAncrageBas** permet de :<br><br>- Connaître le taux d'ancrage en déplacement d'un champ sur l'axe vertical.<br><br>- Modifier le taux d'ancrage en déplacement d'un champ sur l'axe vertical.<br><br><br> |
| [TauxAncrageDroite](../Proprietes/2510114.md) | La propriété **TauxAncrageDroite** permet de :<br><br>- Connaître le taux d'ancrage en déplacement d'un champ sur l'axe horizontal.<br><br>- Modifier le taux d'ancrage en déplacement d'un champ sur l'axe horizontal.<br><br><br> |
| [TauxAncrageHauteur](../Proprietes/2510119.md) | La propriété **TauxAncrageHauteur** permet de :<br><br>- Connaître le taux d'ancrage en hauteur d'un champ.<br><br>- Modifier le taux d'ancrage en hauteur d'un champ.<br><br><br> |
| [TauxAncrageLargeur](../Proprietes/2510120.md) | La propriété **TauxAncrageLargeur** permet de :<br><br>- Connaître le taux d'ancrage en agrandissement d'un champ (ou d'une colonne de table) sur l'axe horizontal.<br><br>- Modifier le taux d'ancrage en agrandissement d'un champ (ou d'une colonne de table) sur l'axe horizontal.<br><br><br> |






