


## Afficher une page AWP
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000248"></a>
Une page AWP peut être affichée :

- depuis une page statique ou une page en mode Session d'un site WEBDEV.

- directement par une adresse saisie sous le navigateur.

- depuis n'importe quelle page de n'importe quel site.




Cette page peut être affichée directement ou prendre en compte des paramètres.

Cette page d'aide présente :

- [comment afficher une page AWP sans paramètre](#NOTE2_1).

- [comment afficher une page AWP en lui passant des paramètres](#NOTE3_1).

- [comment récupérer les paramètres passés à une page AWP](#NOTE4_1).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Afficher une page AWP sans paramètre
<a name="afficher_une_page_awp_sans_parametre_ELTTEXTE000272"></a>


### Afficher une page AWP depuis une page WEBDEV
<a name="afficher_une_page_awp_depuis_une_page_webdev_ELTPARAGRAPHE000036"></a>Une page AWP peut être affichée depuis une autre page WEBDEV :

- directement depuis l'interface de la page : il suffit de sélectionner la page AWP à ouvrir dans la description du lien.

- par programmation (en code serveur ou en code navigateur) grâce à la fonction [PageAffiche](../WDLang2/3058008.md) : 
	
	```wl
	PageAffiche(PAGE_MaPage)
	```



Remarque : En code navigateur, les pages AWP ne sont pas proposées lors de la saisie assistée.
<a name="NOTE2_2"></a>


### Afficher une page AWP dans un navigateur ou depuis n'importe quel site
<a name="afficher_une_page_awp_dans_navigateur_depuis_nimporte_quel_site_ELTPARAGRAPHE000053"></a>Pour afficher une page AWP depuis un navigateur ou directement depuis un site, il suffit d'utiliser la syntaxe suivante :

```txt
http://www.monsite.com/mapageAWP.awp
```
ou si la page se situe dans le répertoire MonRep :

```txt
http://www.monsite.com/MonRep/mapageAWP.awp
```


<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Afficher une page AWP en lui passant des paramètres
<a name="afficher_une_page_awp_lui_passant_des_parametres_ELTTEXTE000302"></a>


### Afficher une page AWP paramétrée depuis une page WEBDEV (depuis l'interface)
<a name="afficher_une_page_awp_parametree_depuis_une_page_webdev_depuis_interface_ELTPARAGRAPHE000065"></a>Une page AWP avec paramètres peut être affichée depuis une autre page WEBDEV directement depuis l'interface de la page : il suffit d'indiquer la page AWP à ouvrir dans la description du lien. Le nom de la page doit alors être suivi des différents paramètres à passer.

**Exemple** : Lien vers MaPage.awp en lui passant des paramètres.
Dans la définition du lien :

1. Cliquez sur le bouton "Autres actions", puis sélectionnez l'option "Autres actions : saisissez un lien".

2. Indiquez la page à afficher suivie des paramètres nécessaires.




Remarque : Si le lien est de type "Aucun" (option "Opération sur les champs"), les paramètres doivent être nommés P1, P2, ..., P256.

```txt
PAGE_mapageAWP.awp?P1=Instruments&P2=350
```

<a name="NOTE3_2"></a>


### Afficher une page AWP paramétrée depuis une page WEBDEV (par programmation)
<a name="afficher_une_page_awp_parametree_depuis_une_page_webdev_par_programmation_ELTPARAGRAPHE000082"></a>![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) **Code serveur** : Pour afficher une page AWP paramétrée depuis une page WEBDEV par programmation, utilisez la fonction [PageAffiche](../WDLang2/3058008.md) :
Chaque paramètre de la page correspond à un paramètre de la fonction [PageAffiche](../WDLang2/3058008.md).

```wl
// Affiche dans la page "MaPage.AWP", le 350ème élément 
// de la catégorie "Instruments"
PageAffiche(PAGE_MaPage, "Instruments", 350)
```

<a name="NOTE3_3"></a>


### Afficher une page AWP dans un navigateur ou depuis n'importe quel site
<a name="afficher_une_page_awp_dans_navigateur_depuis_nimporte_quel_site_ELTPARAGRAPHE000126"></a>Pour afficher une page AWP depuis un navigateur ou directement depuis un site et en lui passant des paramètres, il suffit d'utiliser la syntaxe suivante :

```txt
http://www.monsite.com/PAGE_mapage.awp?P1=Instruments&P2=350
```
Ce code affiche dans la page "PAGE_MaPage.AWP", le 350ème élément de la catégorie "Instruments". 

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Récupérer les paramètres passés à une page AWP
<a name="recuperer_les_parametres_passes_une_page_awp_ELTTEXTE000345"></a>


### Récupérer les paramètres passés à la page
<a name="recuperer_les_parametres_passes_page_ELTPARAGRAPHE000137"></a>Plusieurs méthodes permettent de récupérer les paramètres passés à une page AWP :

1. [Récupération des paramètres dans le code de déclaration des globales de la page](#NOTE4_2).

2. [Récupération des paramètres grâce à la fonction PageParamètre](#NOTE4_3).



<a name="NOTE4_2"></a>


### Récupération des paramètres dans le code de déclaration des globales de la page
<a name="recuperation_des_parametres_dans_code_declaration_des_globales_page_ELTPARAGRAPHE000151"></a>Pour récupérer directement les paramètres passés à la page dans le code d'initialisation de la page, il suffit de déclarer une procédure dans ce traitement. Le nom de cette procédure doit être identique au nom de la page. Les paramètres de cette procédure correspondent aux paramètres à passer à la page (en respectant l'ordre des paramètres passés à la page). Ces paramètres peuvent être des chaînes, des réels ou des entiers.

Les paramètres récupérés dans le code de déclaration des globales de la page sont des chaînes de caractères.

**Exemple** :

1. Code permettant d'afficher la page en lui passant des paramètres : 
	
	```wl
	// Affiche dans la page "MaPage.AWP", le 350ème élément 
	// de la catégorie "Instruments"
	PageAffiche(PAGE_MaPage, "Instruments", 350)
	```


2. Code permettant de récupérer les paramètres :
	
	```wl
	// -- Déclaration globales de la page PAGE_MaPage // --
	PROCEDURE PAGE_MaPage(Categorie="Jouets", ID="1")
	// Dans notre exemple : Categorie vaudra "Instruments"
	// ID vaudra "350"
	```



Remarques : 

- Il est conseillé de donner une valeur par défaut aux paramètres définis dans le code de déclaration des globales de la page. Ces valeurs permettent de gérer le cas où la page est appelée sans paramètres.

- Si la page est affichée depuis un code navigateur, le nom des paramètres utilisés dans le code de déclaration des globales doit être P1, ..., P256. Dans ce cas, la page ne doit pas contenir des champs ayant pour nom P1, P2, ..., P256.



<a name="NOTE4_3"></a>


### Récupération des paramètres grâce à la fonction PageParamètre
<a name="recuperation_des_parametres_grace_fonction_pageparametre_ELTPARAGRAPHE000174"></a>La fonction [PageParamètre](../WDLang2/3058026.md) permet de récupérer la valeur d'un des paramètres passés à la page :

**Cas 1 : Récupération selon le nom du paramètre :**

Par défaut, les paramètres sont automatiquement nommés par WEBDEV (P1, P2, ... , P256). Dans ce cas, la page ne doit pas contenir des champs ayant pour nom P1, P2, ..., P256.

**Exemple** :

1. Code permettant d'afficher la page en lui passant des paramètres :
	
	```wl
	// Affiche dans la page "MaPage.AWP", le 350ème élément 
	// de la catégorie "Instruments"
	PageAffiche(PAGE_MaPage, "Instruments", 350)
	```


2. Code permettant de récupérer les paramètres :
	
	```wl
	// Récupération des paramètres
	CategorieRecherchée est une chaîne = PageParamètre("P1")
	IDRecherché est un entier = PageParamètre("P2")
	```





**Cas 2 : Récupération selon l'indice du paramètre :**

1. Code permettant d'afficher la page en lui passant des paramètres : 
	
	```wl
	// Affiche dans la page "MaPage.AWP", le 350ème élément 
	// de la catégorie "Instruments"
	PageAffiche(PAGE_MaPage, "Instruments", 350)
	```


2. Code permettant de récupérer les paramètres :
	
	```wl
	// Récupération des paramètres
	CategorieRecherchée est une chaîne = PageParamètre(1) 
	// CategorieRecherchée = "P1=Instruments"
	CategorieRecherchée = Droite(Taille(CatégorieRecherchée)-3)
	IDRecherché est un entier = PageParamètre(2)
	// IDRecherché = "P2=350"
	IDRecherché = Droite(Taille(IDRecherché)-3)
	```






