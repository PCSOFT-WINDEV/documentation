


## Evénements associés aux champs Zone répétée
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Evénements gérés par défaut
<a name="evenements_geres_par_defaut_ELTTEXTE000421"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) 

### Evénements gérés par WINDEV et WINDEV Mobile
<a name="evenements_geres_par_windev_windev_mobile_ELTPARAGRAPHE000013"></a>WINDEV et WINDEV Mobile gèrent par défaut les événements suivants (ordre d'apparition sous l'éditeur de code) : 


| Evénement | Condition d'exécution |
| --- | --- |
| Initialisation | Exécuté à l'ouverture de la fenêtre.\*<br><br>**Cas particulier : Champ Zone répétée fichier rempli automatiquement** :<br>Lors de l'exécution de ce code, le champ Zone répétée n'est pas encore rempli. Il est possible de forcer le remplissage du champ Zone répétée dans ce code avec : <br><br><br>- soit la fonction [ZoneRépétéeAffiche](../WDLang2/3083001.md)<br><br>- soit les propriétés de gestion des champs Table fichier : propriétés [FichierParcouru](../Proprietes/2510040.md), [RubriqueParcourue](../Proprietes/2510111.md) ou [Filtre](../Proprietes/2510042.md).<br><br><br>Il est également possible de filtrer les enregistrements avec la fonction [HFiltre](../WDLang4/3044100.md). |
| Fin d'initialisation | **Evénement présent uniquement pour les champs Zone répétée fichier remplis automatiquement** :<br>Exécuté après le remplissage du champ Zone répétée. Ce code permet par exemple d'ajouter ou de modifier un élément du champ Zone répétée. |
| Entrée du champ Zone répétée | Exécuté lorsqu'un des champs de la zone répétée prend le focus. |
| Sortie du champ Zone répétée | Exécuté lors du changement de champ (touche TAB, changement de champ par la souris, ...). |
| A chaque modification du champ Zone répétée | Exécuté lorsque l'utilisateur modifie le contenu du champ Zone répétée.<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cet événement n'est pas exécuté. |
| Entrée en saisie dans une ligne du champ Zone répétée | Exécuté lorsque l'utilisateur sélectionne une répétition pour effectuer une saisie dans cette répétition.<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cet événement n'est pas exécuté. |
| Sortie d'une ligne du champ Zone répétée | Exécuté lors du changement de répétition ou lors du changement de champ (touche TAB, changement de champ par la souris, ...) à partir d'une répétition.<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cet événement n'est pas exécuté. |
| Affichage d'une ligne du champ Zone répétée | Exécuté lorsque une nouvelle répétition doit être affichée dans le champ Zone répétée : ré-affichage du champ Zone répétée, ...<br><br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cet événement n'est pas exécuté.<br><br> |
| Sélection d'une ligne du champ Zone répétée | Exécuté lorsque l'utilisateur sélectionne une répétition (sans saisie). |
|   | Cet événement est automatiquement ajouté lorsque la fonctionnalité "Rafraîchissement par tirer/relâcher (Pull to refresh)" a été activée (onglet "Détail" de la fenêtre de description du champ Zone répétée).<br>Cet événement est exécuté lors de la détection de la gesture de rafraîchissement sur le champ Zone répétée. <br><br>A la fin de l'exécution de cet événement, le bandeau de rafraîchissement sera automatiquement masqué sauf si la fonction [ZoneRépétéeRafraîchissementVisible](../WDLang2/1000021195.md) a été appelée.<br><br>Pour plus de détails, consultez [Pull to Refresh sur les champs Table et Zone répétée (Android/iOS)](../WDChamp/9000156.md). |
|   | **Evénement présent uniquement si une suppression automatique a été définie lors du balayage d'une ligne** (onglet "Détail" de la description du champ)<br><br>Exécuté avant la suppression automatique de l'enregistrement affiché dans la ligne. Cet événement permet par exemple de réaliser différents tests. Si cet événement renvoie <u><u><u><u>Faux</u></u></u></u>, la suppression n'est pas effectuée.<br><br>Pour plus de détails, consultez [Déplacements et gestures dans un champ Zone répétée](../WDChamp/1013295.md). |
|   | **Evénement présent uniquement si une suppression automatique a été définie lors du balayage d'une ligne** (onglet "Détail" de la description du champ)<br><br>Exécuté après la suppression effective de l'enregistrement. Cet événement permet par exemple de réafficher les données.<br><br>Pour plus de détails, consultez [Déplacements et gestures dans un champ Zone répétée](../WDChamp/1013295.md). |
|   | **Evénement présent uniquement si une action a été définie lors du balayage d'une ligne** (onglet "Détail" de la description du champ)<br><br>- Cas d'une suppression automatique : Cet événement est exécuté AVANT l'événement "Avant suppression d'une ligne". Si cet événement renvoie <u><u><u><u>Faux</u></u></u></u>, l'événement "Avant suppression automatique d'une ligne" n'est pas exécuté et l'enregistrement n'est pas supprimé.<br><br>- Cas d'une action par programmation : Cet événement est exécuté lors du balayage de la ligne par l'utilisateur. Cet événement permet de programmer l'action voulue.<br><br><br><br><br>Pour plus de détails, consultez [Déplacements et gestures dans un champ Zone répétée](../WDChamp/1013295.md). |
|   | Exécuté au début du Glisser/Déplacer de l'élément. Cet événement permet par exemple de réaliser différents tests. Si cet événement renvoie <u><u><u><u>Faux</u></u></u></u>, le déplacement n'est pas effectué. |
|   | Exécuté lorsque l'utilisateur termine le Glisser/Déplacer de l'élément. Si cet événement renvoie <u><u><u><u>Faux</u></u></u></u>, le déplacement n'est pas effectué. |
| Filtrage des enregistrements | **Code optionnel présent uniquement pour les champs Zone répétée fichier remplis automatiquement** :<br>Exécuté juste avant l'affichage d'une ligne. Cet événement permet de filtrer les enregistrements à afficher dans le champ Zone répétée. Cet événement est détaillé à la fin de cette page.<br><br> |
| Evénements de défilement (événements optionnels) | Ces événements permettent de simplifier la gestion du déplacement de l'ascenseur vertical du champ. Les événements disponibles sont :<br><br>- Début de défilement : Exécuté lors début du défilement de l'ascenseur vertical du champ. <br><br>- Pendant le défilement : Exécuté lors du défilement de l'ascenseur vertical du champ.  <br><br>- Fin de défilement : Exécuté à la fin du défilement de l'ascenseur vertical du champ. <br><br><br><br><br>Remarque : La fonction [AscenseurPosition](../WDLang1/1000021057.md) permet de connaître la position de l'ascenseur. |


(\*) Par défaut, l'événement "Initialisation" de chaque champ est exécuté selon l'ordre de création des différents champs dans la fenêtre. Pour modifier cet ordre d'exécution : 

1. Sous le volet "Fenêtre", dans le groupe "Ordre", cliquez sur "Initialisation". 

2. Dans la fenêtre qui s'affiche, utilisez les flèches situées sur la droite pour modifier l'ordre d'initialisation des champs.




<a name="FiltrageEnregistrements"></a>


## Filtrage des enregistrements (Zone répétée fichier uniquement)
<a name="filtrage_des_enregistrements_zone_repetee_fichier_uniquement_ELTTEXTE000451"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) L'événement "Filtrage des enregistrements" est exécuté juste après l'affichage d'une ligne du champ Zone répétée. Il est donc exécuté :

- lors de l'initialisation du champ Zone répétée.

- à chaque nouvel affichage d'une ligne du champ Zone répétée.




Cet événement permet de filtrer les enregistrements affichés dans le champ Zone répétée. 

Pour mettre en place un filtre, l'événement "Filtrage des enregistrements" doit renvoyer une valeur :

- <u><u><u><u>Vrai</u></u></u></u> pour signifier que l'enregistrement respecte le filtre et qu'il doit être affiché.

- <u><u><u><u>Faux</u></u></u></u> pour signifier que l'enregistrement ne respecte pas le filtre et qu'il ne doit pas être affiché.

- <u><u><u><u>Annuler</u></u></u></u> pour arrêter la lecture de la source de données du champ Zone répétée (cas très rare).




Exemple :

```wl
// -- Filtrage des enregistrements --
// Affiche uniquement les clients dont commandes sont supérieures à 3000 euros
SI Commande.TotalTTC >= 3000 ALORS 
	RENVOYER Vrai
SINON
	RENVOYER Faux
FIN
```
Dans ce code, les données manipulées concernent l'enregistrement en cours de lecture par le champ Zone répétée. Ces données proviennent du fichier de données ou de la requête liés au champ Zone répétée.

Remarque : Sous WINDEV et WINDEV Mobile, l'événement "Filtrage des enregistrements" est un événement optionnel. Sous WEBDEV, cet événement est proposé par défaut.

<a name="Clicnav"></a>


## Clic sur un champ Zone répétée (code navigateur uniquement)
<a name="clic_sur_champ_zone_repetee_code_navigateur_uniquement_ELTTEXTE000475"></a>
L'événement "Clic sur la zone répétée" est exécuté lorsque l'utilisateur clique sur une répétition du champ Zone répétée. 
Cet événement permet de sélectionner la répétition. Cet événement renvoie les valeurs des attributs correspondant à la répétition. Par exemple, le code de clic suivant permet de connaître la valeur de l'attribut ATT_Titre pour la répétition cliquée : 

```wl
Trace(ATT_Titre)
```


<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Evénements optionnels
<a name="evenements_optionnels_ELTTEXTE000499"></a>
Plusieurs événements optionnels peuvent être gérés.
Pour ajouter un événement optionnel :

1. Sélectionnez le champ voulu.

2. Affichez la fenêtre de code de ce champ (touche F2).

3. Cliquez sur le lien "Ajouter d'autres événements à xxx" situé à la fin de la fenêtre de code, après le dernier événement.  ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Traitements_optionnels_WD_OK%20-%20HC%20N%B0001.gif)


4. La totalité des événements optionnels disponibles pour le champ est affichée. 

5. Cochez l'événement optionnel à ajouter et validez. 
	Remarque : Il est possible de sélectionner plusieurs événements optionnels. 

6. L'événement optionnel sélectionné est automatiquement ajouté dans les événements gérés par le champ.




Pour désactiver un événement optionnel, il suffit d'effectuer les mêmes manipulations pour afficher la liste des événements optionnels. Il suffit ensuite de décocher les événements optionnels à supprimer. 
Remarque : Si le code désactivé contient du code WLangage, ce code est automatiquement supprimé.Il est ainsi possible de gérer par exemple :

- le bouton gauche enfoncé, relâché, avec un double-clic,

- le bouton droit enfoncé, relâché, ...




Pour plus de détails, consultez les [Evénements optionnels](../WDChamp/1014004.md).


