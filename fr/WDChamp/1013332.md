


## Colonne de champ Table de type Conteneur (syntaxe préfixée)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000104"></a>
Une cellule de table peut contenir un ensemble de champs. De nombreux types de champs peuvent être inclus dans une colonne Conteneur : 

- champ Libellé, 

- champ de saisie, 

- champ Image, 

- champ Bouton,

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) champ Graphe,

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) champ Table,

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) champ Fenêtre interne,

- ...




Il est possible de définir un champ principal pour la cellule. Ce champ sera celui utilisé par exemple :

- pour les ajouts réalisés par programmation,

- pour les tris,

- pour la liaison avec les données (liaison avec une rubrique ou avec une variable), ...




![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Grâce aux fenêtres internes, tous les champs de la colonne conteneur peuvent avoir un contenu différent pour chaque ligne du champ Table. 





![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Les colonnes de type Conteneur sont disponibles pour les champs Table hiérarchique.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment créer une colonne de table de type Conteneur ?
<a name="comment_creer_une_colonne_table_type_conteneur_ELTTEXTE000193"></a>


### Les différentes étapes
<a name="les_differentes_etapes_ELTPARAGRAPHE000216"></a>Pour créer une colonne d'un champ Table de type Conteneur : 

1. Créez si nécessaire un champ Table (Table fichier, Table par programmation ou Table sur variable).

2. Créez une colonne de type Conteneur (soit par le menu contextuel du champ Table, soit depuis la fenêtre de description du champ Table).

3. Agrandissez si nécessaire la hauteur des lignes du champ Table avec la souris.

4. Positionnez les champs voulus dans la cellule Conteneur de la première ligne du champ Table. Il est possible de :

	- déplacer des champs existants dans la fenêtre vers la colonne Conteneur.

	- faire un glisser/déplacer des rubriques de l'analyse affichée dans le volet "Explorateur de projet".




5. Dans la description de la colonne Conteneur, indiquez si nécessaire le champ principal de la colonne (onglet "Général") et validez.



<a name="NOTE2_2"></a>


### Champ principal d'une colonne Conteneur
<a name="champ_principal_une_colonne_conteneur_ELTPARAGRAPHE000235"></a>Le champ principal d'une colonne Conteneur correspond au champ manipulé par défaut dans la colonne. Par exemple :

- Le tri de la colonne Conteneur sera réalisé sur le champ principal.

- Les recherches réalisées dans une colonne Conteneur seront réalisées sur le champ principal. 

- Les ajouts, modifications, ... réalisés par programmation : la valeur de la colonne indiquée par exemple dans la fonction [&lt;Table&gt;.AjouteLigne](../WDLang1/1000023404.md) sera affectée au champ principal.

- Les exports réalisés à partir du champ Table (exports vers Excel, Open Office, Word, ...) prendront en compte la valeur du champ principal de la colonne.

- Si la colonne de type Conteneur est liée à un fichier de données ou à une variable, le champ effectivement lié sera le champ principal.




La définition d'un champ principal dans une colonne de type Conteneur n'est pas obligatoire.
<a name="NOTE2_3"></a>


### Limitations
<a name="limitations_ELTPARAGRAPHE000258"></a>

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Dans les colonnes de type Conteneur, les champs Interrupteur doivent être affectés avec une chaîne au format "&lt;Vrai/Faux&gt;;&lt;Vrai/Faux&gt;;&lt;Vrai/Faux&gt;...". 
	De la même façon, la valeur renvoyée par ces champs Interrupteur est une chaîne au format "&lt;Vrai/Faux&gt;;&lt;Vrai/Faux&gt;;&lt;Vrai/Faux&gt;...". 

- Il n'est pas possible de personnaliser le libellé des options des champs Sélecteur et Interrupteur pour chaque ligne dans une colonne de type Conteneur.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Pour utiliser un champ avec une valeur différente à chaque ligne dans une colonne de type Conteneur, il suffit de mettre ce champ dans une fenêtre interne et d'insérer un champ fenêtre interne dans la colonne. Cette astuce peut être utilisée par exemple pour les champs de type Sélecteur, Interrupteur, ...



<a name="NOTE2_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Remarques : Fenêtre interne, champ Graphe et champ Table dans une colonne de type Conteneur** :

- Décochez l'option "Contenu identique pour toutes les lignes" (onglet "UI" de la fenêtre de description du champ) afin d'obtenir un affichage différent à chaque ligne. 

- Les champs de la fenêtre interne, les champs Graphe et les champs Table doivent être alimentés par programmation.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Utilisation d'une colonne de type Conteneur
<a name="utilisation_une_colonne_type_conteneur_ELTTEXTE000292"></a>


### Champ Table fichier ou champ Table sur variable
<a name="champ_table_fichier_champ_table_sur_variable_ELTPARAGRAPHE000315"></a>Un champ Table fichier peut contenir une ou plusieurs colonnes de type Conteneur. Les champs de cette colonne Conteneur peuvent par exemple afficher les enregistrements du fichier de données.

Dans ce cas, le champ Table est lié au fichier de données.

Les champs présents dans la colonne de type Conteneur sont chacun liés à la rubrique correspondante.

**Si un champ principal est défini sur le champ Table**, il est conseillé de :

- **solution 1** : conserver la liaison du champ principal à la rubrique du fichier de données. La colonne Conteneur n'est liée à aucune rubrique.

- **solution 2** : lier la colonne Conteneur à la rubrique associée au champ principal et supprimer la liaison au niveau du champ.





- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDDecouverteLienbasededonnees.gif) ***Exemples découverte (WINDEV)*** : **WD Découverte Lien base de données** <br>Cet exemple est une application simplifiée de gestion de contacts. <br><br>Cet exemple montre :<br>- le remplissage d'un champ Table à partir d'un fichier de données,<br>- le remplissage d'un champ Zone répétée à partir d'une requête SQL,<br>- la création d'un formulaire.


<a name="NOTE3_2"></a>


### Champ Table par programmation
<a name="champ_table_par_programmation_ELTPARAGRAPHE000336"></a>Un champ Table par programmation peut contenir une ou plusieurs colonnes de type Conteneur. Le champ principal de la colonne Conteneur sera directement manipulé par les fonctions de programmation du champ Table.

Par exemple, lors de l'ajout d'une ligne avec la fonction [&lt;Table&gt;.AjouteLigne](../WDLang1/1000023404.md), seul le champ principal de la colonne sera affecté avec la valeur définie par la colonne. Si plusieurs champs doivent être initialisés dans la colonne, il est nécessaire d'utiliser la syntaxe décrite dans le paragraphe suivant. Par exemple :

```wl
NumLigne est un entier 
NumLigne = TABLE_Table2.AjouteLigne("Moulain")
COL_Colonne1[NumLigne].SAI_Prenom = "Florence"
```

<a name="NOTE3_3"></a>


### Manipuler les champs de la colonne Conteneur
<a name="manipuler_les_champs_colonne_conteneur_ELTPARAGRAPHE000359"></a>Les champs d'une colonne Conteneur peuvent être manipulés grâce à la syntaxe suivante :

```txt
<Nom de la colonne>[<Numéro de Ligne>].<Nom du champ>
```
Quelques exemples :

- Affectation d'une valeur à un champ :
	
	```wl
	COL_Colonne1[NumLigne].SAI_Prenom = "Florence"
	```


- Affectation d'éléments à un champ Combo d'un conteneur :
	
	```wl
	COL_Colonne1[NumLigne].COMBO_Combo1.Contenu = "Elément 1" + RC + "Elément 2"
	```


- Modification d'une propriété d'un champ :
	
	```wl
	COL_Colonne1[NumLigne].PrixHT.Couleur = RougeClair
	```


- Indirection sur un champ se trouvant dans une colonne Conteneur :
	
	```wl
	sNomChampDansColoneConteneur est une chaîne
	sNomChampDansColoneConteneur = "TABLE_AvecColConteneur.COL_Conteneur[" + ...
			nIndiceLigne + "].SAI_DansColConteneur"
	//ou
	//sNomChampDansColoneConteneur = "TABLE_AvecColConteneur[" + ...
	// 	nIndiceLigne + "].COL_Conteneur.SAI_DansColConteneur"
	
	Info({sNomChampDansColoneConteneur})
	```


- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Ajout d'une ligne dans un champ Table contenu dans une colonne Conteneur :
	
	```wl
	TABLE_AVEC_TABLE_INTEGREE[NumLigne].TABLE_Dans_Conteneur.AjouteLigne("Contenu_Col1", "Contenu_Col2")
	```





- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Manipulation d'un champ Interrupteur inséré dans une fenêtre interne : 
	
	```wl
	TABLE_SansNom1[NumLigne].FI_SansNom1.INT_Interrupteur[Indice] = Vrai
	```





- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Changer la fenêtre interne contenue dans un champ Fenêtre interne d'une colonne Conteneur : 
	
	```wl
	// Charge la fenêtre interne FI_FenêtreInterne1, à la ligne NumLigne d'un champ Fenêtre interne
	// nommé CFI_ChampFenêtreInterne contenu dans une colonne de type conteneur d'un champ Table
	// Attention : le champ CFI_ChampFenêtreInterne doit avoir 
	// l'option "contenu identique pour toutes les lignes" non cochée 
	// (onglet "UI" de la fenêtre de description)
	ChangeFenêtreSource(TABLE_SansNom1[NumLigne].CFI_ChampFenêtreInterne, FI_FenêtreInterne1)
	```



**Remarque** : Pour un champ Table fichier, il est conseillé de manipuler les champs d'une colonne Conteneur dans l'événement "Affichage d'une ligne".

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Limite : Type de champs non disponibles
<a name="limite_type_champs_non_disponibles_ELTTEXTE000410"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Dans une colonne de type Conteneur, tous les champs peuvent être utilisés, soit directement, soit via une fenêtre interne. 




