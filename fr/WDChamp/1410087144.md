
## Traitements associés à un champ d'affichage HTML
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000207"></a>
WINDEV et WINDEV Mobile proposent différents événements WLangage associés au Champ d'affichage HTML.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Evénements gérés par défaut
<a name="evenements_geres_par_defaut_ELTTEXTE000231"></a>


### Evénements gérés par WINDEV et WINDEV Mobile
<a name="evenements_geres_par_windev_windev_mobile_ELTPARAGRAPHE000031"></a>Les événements suivants sont proposés par défaut (ordre d'apparition sous l'éditeur de code) :

| Evénement | Condition d'exécution |
| --- | --- |
| Initialisation | Exécuté à l'ouverture de la fenêtre. \* |
| Clic sur un lien | Exécuté lors du clic sur un lien présent dans le champ d'affichage HTML. Seuls les liens externes (vers une autre page) déclenchent cet événement. Les liens internes (par exemple vers une ancre de la même page) ne déclenchent pas cet événement. <br><br>Cet événement est un événement acceptant des paramètres : <br><br><pre><code>PROCÉDURE ClicLien(sUrl est chaîne, bDansNouvelleFenetre est un booléen, <br>	sDestination est une chaîne)</code></pre><br>où &lt;sURL&gt; est une chaîne de caractères optionnelle contenant l'URL du lien cliqué dans le champ d'affichage HTML. <br><br>Si cet événement renvoie <u><u><u><u>Faux</u></u></u></u>, l'action associée au lien ne sera pas effectuée.<br> <br>Attention : le code ne doit pas comporter des traitements trop lents ou permettant au champ de reprendre le focus. En effet, dans ce cas, l'action par défaut sera tout de même effectuée.<br><br>Exemple de code : <br><br><pre><code>// Ouverture des liens ayant comme destination une nouvelle fenêtre, <br>// dans une autre fenêtre spécifique de l'application<br>PROCÉDURE ClicLien(sUrl est chaîne, bDansNouvelleFenetre est un booléen, <br>	sDestination est une chaîne)<br>SI bDansNouvelleFenetre ALORS<br>	// Ouverture d'une autre fenêtre demandée : <br>	// traitement d'ouverture de l'autre fenêtre, <br>	// décalé de façon à ce que le traitement courant réponde <br>	// avant l'ouverture de la nouvelle fenêtre<br>	AfficheNouveauNavigateur(sUrl)	<br>	RENVOYER Faux // Annule le comportement par défaut<br>SINON<br>	RENVOYER Vrai // Laisse le comportement par défaut<br>FIN<br><br>PROCÉDURE INTERNE AfficheNouveauNavigateur(sParamUrl) <délai=10ms> <br>	// Important : mettre un délai même minime<br>	<COMPILE SI TypeConfiguration = Android OU  TypeConfiguration = iOS><br>		OuvreFenêtreMobile(FEN_POPUP, sParamUrl) <br>	<SINON>	<br>		OuvreFille(FEN_POPUP, sParamUrl) <br>	<FIN><br>FIN</code></pre><br> |
| Avant chargement de la page HTML | Exécuté avant le chargement du document HTML dans le champ d'affichage HTML. Si l'utilisateur navigue par des liens dans le champ d'affichage HTML, cet événement est exécuté à la fin du chargement de chaque document HTML affiché dans le champ. <br><br>Cet événement est un événement acceptant des paramètres : <br><br><pre><code>PROCÉDURE ChangePage(sUrl est chaîne, sDestination est une chaîne)</code></pre><br>où &lt;sURL&gt; est une chaîne de caractères optionnelle contenant l'URL de la page à afficher. <br><br>Si cet événement renvoie <u><u><u><u>Faux</u></u></u></u>, la page ne sera pas chargée. |
| Après chargement de la page HTML | Exécuté lors de la fin de chargement du document HTML dans le champ d'affichage HTML. Si l'utilisateur navigue par des liens dans le champ d'affichage HTML, cet événement est exécuté à la fin du chargement de chaque document HTML affiché dans le champ. |
| Chargement de ressources | Permet d'être notifié et de bloquer le chargement d'images ou de scripts de l'application (par sécurité par exemple). <br><br>Cet événement est un événement acceptant des paramètres : <br><br><pre><code>PROCÉDURE ChargementRessources(sUrl est chaîne, nType est entier)</code></pre><br> où : <br><br>- &lt;sURL&gt; est une chaîne de caractères correspondant à l'URL de la ressource à charger.<br><br>- &lt;nType&gt; est une constante permettant de connaître le type de la ressource à télécharger : <br><br>	- *typehtmlResImage* : la ressource à télécharger est une image. <br><br>	- *typehtmlResScript* : la ressource à télécharger est un script. <br><br>	- *typehtmlResCss* : la ressource à télécharger est un style CSS.  <br><br>	- *typehtmlResXMLHttpRequest* : la ressource à télécharger est un document XML généré en réponse à une requête HTTP. <br><br>	- *typehtmlAutre* : la ressource à télécharger est d'un type inconnu. <br><br><br><br><br><br><br><br>Si cet événement renvoie <u><u><u><u>Faux</u></u></u></u>, le chargement de la ressource ne sera pas effectué. |
| Clic droit sur un lien | Exécuté lorsque l'utilisateur fait un clic droit sur un lien (pour ouvrir un menu contextuel). Cet événement est de la forme : <br><pre><code>PROCÉDURE ClicDroitLien(sUrl est chaîne)</code></pre><br> où &lt;sURL&gt; est une chaîne de caractères contenant l'URL du lien.<br><br> |


(\*) Par défaut, l'événement "Initialisation" de chaque champ est exécuté selon l'ordre de création des différents champs dans la fenêtre. Pour modifier cet ordre d'exécution : 

1. Sous le volet "Fenêtre", dans le groupe "Ordre", cliquez sur "Initialisation". 

2. Dans la fenêtre qui s'affiche, utilisez les flèches situées sur la droite pour modifier l'ordre d'initialisation des champs.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Evénements optionnels
<a name="evenements_optionnels_ELTTEXTE000255"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Plusieurs événements optionnels peuvent être gérés.
Pour ajouter un événement optionnel :

1. Sélectionnez le champ voulu.

2. Affichez la fenêtre de code de ce champ (touche F2).

3. Cliquez sur le lien "Ajouter d'autres événements à xxx" situé à la fin de la fenêtre de code, après le dernier événement.  ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Traitements_optionnels_WD_OK%20-%20HC%20N%B0001.gif)


4. La totalité des événements optionnels disponibles pour le champ est affichée. 

5. Cochez l'événement optionnel à ajouter et validez. 
	Remarque : Il est possible de sélectionner plusieurs événements optionnels. 

6. L'événement optionnel sélectionné est automatiquement ajouté dans les événements gérés par le champ.




Pour désactiver un événement optionnel, il suffit d'effectuer les mêmes manipulations pour afficher la liste des événements optionnels. Il suffit ensuite de décocher les événements optionnels à supprimer. 
Remarque : Si le code désactivé contient du code WLangage, ce code est automatiquement supprimé.Il est ainsi possible de gérer par exemple :

- le survol du champ par la souris,

- le bouton gauche enfoncé, relâché, avec un double-clic,

- le bouton droit enfoncé, relâché, avec double-clic,

- la roulette de la souris, ...





