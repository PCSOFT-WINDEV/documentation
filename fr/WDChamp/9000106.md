
## Modèles d'états et héritage
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000202"></a>


### Principe de l'héritage et de la surcharge
<a name="principe_heritage_surcharge_ELTPARAGRAPHE000011"></a>Lorsque vous appliquez un modèle d'états à un état, l'ensemble des champs et du code du modèle sont "copiés" dans l'état. C'est le concept **d'héritage**.

Les champs du modèle sont visibles dans l'état, sous l'éditeur d'états. Un carré jaune est situé dans le coin haut gauche de chaque champ. Par défaut, les champs du modèle ne sont pas modifiables.

Le code du modèle est visible dans l'éditeur de code, dans les différents traitements de l'état ou de ses champs. Ce code WLangage est facilement identifiable : 

- les traitements associés au modèle sont suivis de "(modèle &lt;Nom du modèle&gt;)" (par exemple : "*Avant impression XXX (modèle MonModèle)*").

- le fond des traitements est grisé car le code n'est pas modifiable.




Dans le cas de modèle de modèles, l'héritage se fait sur plusieurs niveaux.

Il est possible de **surcharger** les champs et le code du modèle. La surcharge des champs et du code permet de modifier, pour un état donné, le code et / ou les champs du modèle. 



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Surcharge des états
<a name="surcharge_des_etats_ELTTEXTE000226"></a>


### Surcharger le code des états
<a name="surcharger_code_des_etats_ELTPARAGRAPHE000032"></a>Pour surcharger le code des états modèle :

1. Affichez les événements associés à l'état (option "Code" du menu contextuel).

2. Si un événement existe dans l'état modèle, cet événement apparaît en double dans l'état utilisant le modèle. En effet, sont affichés :

	- l'événement issu du modèle. Cet événement apparaît en grisé et son intitulé est suivi de "(modèle &lt;Nom du modèle&gt;)".

	- l'événement associé à l'état.




3. Le code saisi dans l'événement associé à l'état sera exécuté de la manière suivante :  

	- pour tous les événements (sauf l'événement "Fermeture" de l'état) : les événements des modèles appliqués à l'état sont exécutés en suivant leur ordre d'inclusion, puis l'événement correspondant associé à l'état est exécuté.

	- pour l'événement "Fermeture" de l'état : l'événement "Fermeture" de l'état est exécuté, puis les événements des modèles appliqués à l'état sont exécutés en suivant l'ordre inverse d'inclusion.





**Remarque** : Il n'est pas possible de surcharger dans cette version les procédures locales d'un état.



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Surcharge des champs
<a name="surcharge_des_champs_ELTTEXTE000250"></a>


### Surcharger le look d'un champ (surcharge d'IHM)
<a name="surcharger_look_champ_surcharge_ihm_ELTPARAGRAPHE000054"></a>Pour surcharger l'interface d'un champ du modèle :

1. Affichez le menu contextuel du champ du modèle présent dans l'état.

2. Sélectionnez l'option "Surcharger le champ".

3. Le carré jaune a été remplacé par un carré bleu, indiquant que ce champ peut être surchargé.![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ModeleEtat_IHMNonSurchargee.gif)![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ModeleEtat_IHMSurchargee.gif)

4. Vous pouvez maintenant modifier tous les aspects de l'interface du champ : dimensions, position, style, ...<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ModeleEtat_IHMModifiee.gif)






<a name="NOTE3_2"></a>


### Surcharger le code d'un champ (surcharge de code)
<a name="surcharger_code_champ_surcharge_code_ELTPARAGRAPHE000072"></a>Pour surcharger le code d'un champ du modèle :

1. Affichez le menu contextuel d'un champ du modèle présent dans l'état.

2. Sélectionnez l'option "Surcharger le champ".

3. Le carré jaune a été remplacé par un carré bleu, indiquant que ce champ peut être surchargé.

4. Affichez le code du bouton (option "Code" du menu contextuel).

5. Deux sections de code de clic sont présents : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ModeleEtat_CodeNonSurcharge.gif)


	- le code de clic issu du modèle.

- le code de clic de l'état. Une fonction a été automatiquement ajoutée : [ExécuteAncêtre](../WDLang1/3013063.md). Cette fonction exécute le code de clic du modèle.

6. Ajoutez le code spécifique à l'état en cours, avant et/ou après la procédure d'appel au code du modèle. Vous pouvez supprimer la fonction [ExécuteAncêtre](../WDLang1/3013063.md) si vous ne souhaitez pas que le code du modèle soit exécuté.




**Remarque** : Il n'est pas possible de surcharger les procédures locales d'un état.


<a name="NOTE3_3"></a>


### Spécificités des blocs
<a name="specificites_des_blocs_ELTPARAGRAPHE000099"></a>Un état contient des blocs uniques : début de document, haut de page, corps, bas de page, fin de document, ...

Lors de l'insertion d'un modèle dans un état, les blocs de même type sont fusionnés automatiquement :

- le code est automatiquement hérité (de manière cumulative si il y a plusieurs modèles)

- les propriétés sont héritées,

- le bloc contient les champs du modèle et ceux de l'état.




Seul le modèle principal définit les propriétés des blocs.

**Cas particulier : les blocs d'itération**
Les blocs d'itération n'étant pas des blocs uniques, ils ne seront pas fusionnés.


<a name="NOTE3_4"></a>


### Remarques
<a name="remarques_ELTPARAGRAPHE000119"></a>

- Par défaut, les différents blocs de l'état sont surchargés. Comme pour les champs, il est possible de surcharger l'interface et le code d'un bloc.

- Il n'est pas possible de supprimer un élément surchargé d'un modèle.

- La surcharge de style n'est pas disponible.






<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Gérer les propriétés surchargées d'un champ ou d'un bloc
<a name="gerer_les_proprietes_surchargees_champ_bloc_ELTTEXTE000292"></a>


### Connaître les propriétés surchargées
<a name="connaitre_les_proprietes_surchargees_ELTPARAGRAPHE000131"></a>Pour connaître les propriétés d'un champ ou d'un bloc qui ont été surchargées :

1. Ouvrez le menu contextuel du champ ou du bloc.

2. Sélectionnez l'option "Propriétés surchargées".

3. La fenêtre de gestion des surcharges s'ouvre.




Il est possible depuis cette fenêtre de supprimer les propriétés surchargées. Il suffit de sélectionner la propriété voulue et de la supprimer.

Pour supprimer complètement toutes les surcharges effectuées sur un champ ou un bloc, il suffit de sélectionner la ligne intitulée "Surcharge complète".



<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Limitations
<a name="limitations_ELTTEXTE000316"></a>


- Il n'est pas possible d'utiliser dans les modèles :

	- des tableaux,

	- des ruptures,

	- des sources de données.




- La surcharge de style n'est pas disponible.







