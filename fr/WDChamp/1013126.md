


## Champ Arbre lié à un fichier de données
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000129"></a>
Il est possible de créer des champs Arbre directement liés aux données. 

Vous pouvez créer un **champ Arbre Fichier** : le champ Arbre sera lié à un fichier de données ou à une requête. 

La programmation des champs Arbre est grandement simplifiée : il n'est plus nécessaire d'utiliser directement les fonctions Arbrexxx. 



## Comment le faire ?
<a name="comment_faire_ELTTEXTE000153"></a>


### Créer un champ Arbre fichier
<a name="creer_champ_arbre_fichier_ELTPARAGRAPHE000019"></a>Pour créer un champ Arbre fichier : 

1. Créez un champ Arbre (sous le volet "Création", dans le groupe "Données", cliquez sur "Arbre").

2. Affichez la fenêtre de description du champ (option "Description" du menu contextuel). 

3. Dans l'onglet "Contenu", sélectionnez l'option "Fichier/Requête". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Arbre_Contenu.gif&type=thumb)


4. Cliquez sur le bouton "Ajouter". Une source de type "&lt;Aucun&gt;" est automatiquement ajoutée.

5. Définissez les caractéristiques de cette source :

	- Source : correspond au fichier de données ou à la requête qui va être parcourue.

	- Parcours : correspond à la clé de parcours utilisée pour parcourir la source.

	- Affichée : correspond à la rubrique affichée dans le champ Arbre.




6. Si nécessaire, ajoutez une seconde source pour le niveau suivant (bouton "Ajouter"). Dans ce cas, il est possible de définir la source de la liaison du niveau précédent. 
	Par exemple, si le premier niveau parcourt le fichier de données Client, le second peut par exemple parcourir le fichier de données Commande. Les rubriques qui permettront la liaison sont "Client.IDClient" et "Commande.IDClient". Par défaut, la source de la liaison est automatiquement déduite des rubriques et des liaisons définies dans l'analyse.

7. Définissez autant de sources que nécessaire. 
	**Cas particulier : champ Arbre fichier récursif**
	Un champ Arbre fichier peut afficher des enregistrements dépendant de l'enregistrement précédent (cas classique d'une liaison récursive permettant par exemple de gérer les parents / enfants). 
	Pour gérer ce type de champ Arbre, il est possible de définir une liaison réflexive dans l'onglet "Contenu" de la fenêtre de description du champ Arbre.

8. Validez la fenêtre de description du champ Arbre. Le champ Arbre est un champ Arbre fichier. 



![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Option "Remplissage différé des sous-niveaux"
<a name="option_remplissage_differe_des_sousniveaux_ELTPARAGRAPHE000062"></a>Lorsque un champ Arbre fichier comporte de nombreux éléments et sous-éléments, son remplissage complet peut être long. 

L'option "Remplissage différé des sous-niveaux (plus rapide)" permet de remplir chaque sous-niveau uniquement lorsque l'utilisateur clique pour dérouler un niveau. Dans ce cas, la durée de remplissage est répartie et le remplissage initial est beaucoup plus rapide. 

**Note** : Pour utiliser cette option sur un champ Arbre rempli par programmation, utilisez la propriété [AjouteFilsDifféré](../Proprietes/1000020927.md). 



## Manipuler un champ Arbre fichier
<a name="manipuler_champ_arbre_fichier_ELTTEXTE000183"></a>
Un champ Arbre fichier se manipule très simplement : 

- Si le champ Arbre Fichier autorise la modification, les modifications réalisées dans le champ Arbre sont automatiquement reportées dans la source de données reliée. 

- Si le champ Arbre Fichier n'autorise pas la saisie, la source de données reliée ne pourra pas être modifiée par l'utilisateur directement. 





