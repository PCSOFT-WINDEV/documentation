


## Le champ Carte
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation du champ Carte
<a name="presentation_champ_carte_ELTTEXTE000407"></a>
Le champ Carte permet d'afficher une carte afin de se géolocaliser, d'afficher des points d'intérêt (P.O.I), ... 

Cette carte provient : 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) du service Google Maps pour les sites Web via Google Maps API. 
	L'utilisation du champ Carte est soumis à des conditions d'utilisations spécifiques. Selon le mode d'utilisation, il peut être nécessaire d'utiliser une clé Google (fonction [CarteLicenceGgl](../WDLang3/1000021299.md)). Vérifiez la licence Google avant de déployer vos applications. 

- ![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) du service Bing Maps pour les applications en mode Universal Windows 10 App.
	 **Attention** : 

	- L'utilisation du champ Carte est soumis à des conditions d'utilisations spécifiques. Il est nécessaire d'utiliser une clé Bing (fonction [CarteLicenceBing](../WDLang3/1000022006.md)). Vérifiez la licence Bing avant de déployer vos applications. 

	- Le positionnement dans le champ Carte via une adresse spécifiée à l'aide d'une chaîne de caractères peut donner des résultats incohérents. Il est conseillé d'utiliser plutôt un positionnement via une variable de type [Adresse](../WDLang3/1000019944.md) ou de type [géoPosition](../WDLang3/1000019191.md).   







La carte affichée est interactive : il est possible de zoomer, de se déplacer, ... Elle peut être affichée sous forme graphique ou sous forme de vue satellitaire. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ModeCarte.gif)

<a name="NOTE1_2"></a>


### Créer un champ de type Carte
<a name="creer_champ_type_carte_ELTPARAGRAPHE000096"></a>Pour créer un champ de type Carte : 

1. Sous le volet "Création", dans le groupe "Champs graphiques", cliquez sur "Carte".

2. Cliquez dans la fenêtre ou la page à la position où le champ doit être créé.




**Pour afficher les caractéristiques du champ**, sélectionnez l'option "Description" dans le menu contextuel du champ. 
L'onglet "Général" permet de définir : 

- le mode d'affichage : plan ou satellite, 

- l'affichage ou non des informations concernant le trafic.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) l'affichage ou non des boutons de zoom dans le champ, 

- l'image utilisée pour les marqueurs des points d'intérêt (P.O.I.). 
	

- la popup affichée par défaut lors du clic sur un marqueur. Cette popup peut correspondre à : 

	- Aucune : la popup utilisée sera celle proposée par défaut. 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Fenêtre prédéfinie : Dans ce cas, une fenêtre interne est automatiquement intégrée dans votre projet. 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) une fenêtre interne de votre projet.







L'onglet "Détail" permet de définir : 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) la mise à l'échelle par double clic,

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) la mémorisation de la dernière position affichée.




**Remarques** : 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Le champ Carte n'est pas manipulable par les tests automatiques. 



<a name="NOTE1_3"></a>


### Popup d'affichage des marqueurs
<a name="popup_affichage_des_marqueurs_ELTPARAGRAPHE000200"></a>Lors de l'utilisation d'une fenêtre prédéfinie ou d'une page prédéfinie pour gérer la popup des marqueurs, les éléments suivants sont intégrés selon la plateforme utilisée : 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) la fenêtre interne FI_WinDevPopupMarqueur_WD (cette fenêtre est contenue dans le composant WDFAA).




Ces éléments contiennent : 

- deux champs permettant d'afficher le nom et la description du marqueur. 

- un code de déclaration permettant de manipuler la variable de type Marqueur en cours.




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Affichage et manipulation des cartes
<a name="affichage_manipulation_des_cartes_ELTTEXTE000443"></a>


### Affichage des cartes
<a name="affichage_des_cartes_ELTPARAGRAPHE000224"></a>A l'ouverture de la fenêtre contenant un champ Carte, une carte du monde est automatiquement affichée : la carte est centrée sur l'Europe avec un niveau de zoom moyen.

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Il est possible d'afficher la dernière position mémorisée : il suffit de sélectionner l'option "Mémoriser la dernière position affichée" dans l'onglet "Détail" de la fenêtre de description du champ Carte. Dans ce cas, la dernière position est affichée avec le même niveau de zoom.


### Manipulation des cartes par l'utilisateur
<a name="manipulation_des_cartes_par_utilisateur_ELTPARAGRAPHE000237"></a>L'utilisateur peut se déplacer dans la carte : 

- ![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) en la faisant défiler avec un ou plusieurs doigts. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) en la faisant défiler à l'aide de la souris.

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) via les boutons de positionnement du champ (si l'option "Afficher les boutons de zoom" a été sélectionnée dans l'onglet "Général" de la fenêtre de description du champ). 




L'utilisateur peut zoomer ou dé-zoomer : 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) en utilisant les boutons de zoom du champ (si l'option a été sélectionnée dans l'onglet "Général" de la fenêtre de description du champ). 

- ![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) en effectuant un geste de type "scale" (ou "pinch") : un écartement de deux doigts sur l'écran permet de zoomer et un rapprochement de deux doigts sur l'écran permet de dé-zoomer. 

- ![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) en effectuant un "double tap" sur la carte pour zoomer d'un niveau sur une position (si l'option a été sélectionnée dans l'onglet "Général" de la fenêtre de description du champ). 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) en effectuant un double-clic sur la carte pour zoomer d'un niveau sur une position (si l'option a été sélectionnée dans l'onglet "Général" de la fenêtre de description du champ). 

- par programmation avec la propriété [Zoom](../Proprietes/1000017201.md). 






![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Pour connaître toutes les manipulations disponibles en exécution, consultez [Champ Carte : Fonctionnalités Automatiques de vos Applications (FAA)](../WDChamp/1000019824.md). 

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Spécificités
<a name="specificites_ELTTEXTE000473"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Internet Explorer : Versions nécessaires
<a name="internet_explorer_versions_necessaires_ELTPARAGRAPHE000304"></a>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Dans une application WINDEV, le champ Carte utilise ActiveX de Internet Explorer sur le poste du client. Pour utiliser le champ Carte dans l'application, l'utilisateur final doit avoir Internet Explorer 10 ou 11 installé sur son poste. 


### Champ Carte et Licence Google
<a name="champ_carte_licence_google_ELTPARAGRAPHE000324"></a>


|   |
| --- |
| ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) **Attention : Licence Google**<br>Il est obligatoire de spécifier une clé de licence pour utiliser le service de cartographie service. <br><br>Vous devez posséder un compte Développeur Google pour obtenir une clé Google Maps API. Consultez la licence Google pour connaître les conditions d'utilisation (service gratuit ou payant, quota d'utilisation, etc.).<br><br>Lorsque le compte développeur est disponible, vous devez : <br><br>1. Générer la clé dans la console développeur de Google ([https://console.developers.google.com](https://console.developers.google.com)). Les manipulations à réaliser sont les suivantes (à la date d'écriture de cette page) : <br><br>	- Utilisez un compte Google pour se connecter à la console développeur. <br><br>	- Créez un projet si nécessaire. <br><br>	- Cliquez sur "Activer des API et des services".<br><br>	- Cliquez sur "Maps JavaScript API".<br><br>	- Cliquez sur "Activer" afin d'activer l'API Google Maps JavaScript API. <br><br>	- Cliquez sur la rubrique "Identifiants". Dans la page qui s'affiche, cliquez sur le lien "Identifiant des API et services".<br><br>	- Cliquez sur "Créer des identifiants".  <br><br>	- Sélectionnez "Clé d'API". <br><br>	- Validez la création de la clé, puis copiez la clé créée par Google. <br><br><br><br><br>2. Indiquer la clé utilisée dans l'application ou le site grâce à la fonction [CarteLicenceGgl](../WDLang3/1000021299.md).<br><br><br><br><br> |










- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampCarte.gif) ***Exemples unitaires (WEBDEV)*** : **Le champ Carte** <br>Utilisation du champ Carte de WEBDEV.<br>Il permet d'afficher une carte comprenant des marqueurs et également d'afficher un itinéraire.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LechampCarte.gif) ***Exemples unitaires (WINDEV)*** : **Le champ Carte** <br>Utilisation du champ Carte de WINDEV.<br>Il permet d'afficher une carte comprenant des marqueurs et également d'afficher un itinéraire.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LafonctiongglRecupereCarte.gif) ***Exemples unitaires (WINDEV)*** : **La fonction gglRécupèreCarte** <br>Utilisation de la fonction gglRécupèreCarte pour afficher une carte Google dans un champ Image.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMGeolocalisation.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Geolocalisation** <br>Cet exemple présente comment gérer des recherches de proximité avec géolocalisation :<br>- recherche autour de moi<br>- recherche dans une ville, à une adresse donnée, proche d'une adresse.<br>Les résultats apparaissent dans une zone répétée et dans une carte avec des marqueurs.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSports.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Sports** <br>Cet exemple est une application de sport vous permettant d'enregistrer vos performances.<br>L'application calcule la distance parcourue, le temps, la vitesse moyenne et le nombre de calories dépensées en fonction du sport pratiqué. <br>Le parcours réalisé est affiché sur un champ carte grâce à des marqueurs et un tracé d'itinéraire. <br>Si vous disposez d'une montre Apple Watch, vous pourrez piloter WM Sports avec votre montre !<br><br>L'exemple dispose aussi d'une partie serveur qui sert à la synchronisation des données des utilisateurs.<br>Ce webservice est disponible dans l'exemple WEBDEV "WW_Sports".


