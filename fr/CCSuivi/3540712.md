


## Utiliser les Centres de Contrôle en mode Client/Serveur
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000254"></a>
Les différents Centres de Contrôle livrés avec WINDEV, WEBDEV et WINDEV Mobile utilisent tous la même base de données. Cette base de données peut être une base de données au format HFSQL Classic ou au format HFSQL Client/Serveur.

Si vous utilisez déjà les Centres de Contrôle, vous avez la possibilité d'importer les données HFSQL Classic dans une base Client/Serveur. Dans ce cas, les données des Centres de Contrôle seront également disponibles via ADSL. Ainsi, la méthodologie des développeurs à distance sera simplifiée.

Cette page de documentation présente comment passer d'une base de données HFSQL Classic à une base de données HFSQL Client/Serveur.

**Important** : **Avec une base de données des Centres de Contrôle au format HFSQL Client/Serveur** :

- le mode de connexion "Invité" des Centres de Contrôle n'est plus disponible.

- le mode nomade pour les Centres de Contrôle n'est pas disponible.

- tous les intervenants des Centres de Contrôle sont définis comme utilisateurs de la base HFSQL Client/Serveur.

- **si vos applications WINDEV utilisent le composant "Feedback"** : pour faire suivre les retours client, vous devez modifier les applications. Cette modification est nécessaire uniquement si vous utilisez le mode connecté, ou ADSL (modification non nécessaire si les retours client sont effectués par emails). Pour plus de détails, consultez le paragraphe [Utiliser Feedback en ADSL](#NOTE5_1).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Passer d'une base HFSQL Classic à une base HFSQL Client/Serveur
<a name="passer_une_base_hfsql_classic_une_base_hfsql_clientserveur_ELTTEXTE000284"></a>


### Les différentes étapes sont les suivantes
<a name="les_differentes_etapes_sont_les_suivantes_ELTPARAGRAPHE000034"></a>

1. Installer si nécessaire un serveur HFSQL Client/Serveur.

2. Configurer les Centres de Contrôle pour utiliser la base de données HFSQL Client/Serveur.
	Remarque : la base de données HFSQL Client/Serveur pour les Centres de Contrôle sera créée vide.

3. Utiliser les Centres de Contrôle.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mise en place
<a name="mise_place_ELTTEXTE000308"></a>


### Étape 1 : Installer si nécessaire un serveur HFSQL Client/Serveur
<a name="etape_1_installer_necessaire_serveur_hfsql_clientserveur_ELTPARAGRAPHE000047"></a>Pour utiliser les Centres de Contrôle avec une base de données HFSQL Client/Serveur, il est nécessaire d'installer un serveur HFSQL Client/Serveur sur un poste. Les fichiers de données des Centres de Contrôle seront installés sur ce serveur.

Pour installer un serveur HFSQL Client/Serveur, lancez le pack d'installation de votre produit et cliquez sur l'option "Installation du serveur HFSQL Client/Serveur".

**Remarque** : En WINDEV, le programme d'installation d'un serveur HFSQL Client/Serveur est également livré dans le sous-répertoire "\\Install\\Serveur HFSQL" du répertoire d'installation de votre produit.
<a name="NOTE3_3"></a>


### Étape 2 : Configurer les différents produits pour utiliser les Centres de Contrôle en mode Client/Serveur
<a name="etape_2_configurer_les_differents_produits_pour_utiliser_les_centres_controle_mode_clientserveur_ELTPARAGRAPHE000058"></a>Lorsque les données des Centres de Contrôle sont au format HFSQL Client/Serveur, il est nécessaire que tous les utilisateurs de WINDEV, WEBDEV, WINDEV Mobile et/ou des différents Centres de Contrôle spécifient le nouveau format de la base de données à utiliser.

Cette indication peut être donnée :

- soit lors de l'installation de WINDEV, WEBDEV ou WINDEV Mobile.

- soit dans les options de WINDEV, WEBDEV ou WINDEV Mobile : 

	- Sous le volet "Accueil", dans le groupe "Environnement", déroulez "Options" et sélectionnez "Options générales de WINDEV/WEBDEV/WINDEV Mobile". 

	- Dans l'onglet "Utilisateur", cliquez sur le bouton "Paramètres des Centres de Contrôle".




- soit dans les paramètres du Centre de Suivi de Projets :  déroulez ![Menu Centre de Suivi de Projets](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=CC_Suivi_Configuration%20-%20HC%20N%B0001.gif)
 puis sélectionnez "Options".




Il suffit d'indiquer :

- la base en mode HFSQL Client/Serveur. 

- le nom ou l'adresse IP du serveur.

- le port utilisé.

- la base de données utilisée.




Après avoir configuré le mode d'accès aux données des Centres de Contrôle, l'utilisation des Centres de Contrôle est identique.
<a name="NOTE3_4"></a>


### Etape 2 : Astuce
<a name="etape_2_astuce_ELTPARAGRAPHE000098"></a>Pour simplifier la configuration des différents postes utilisant les Centres de Contrôle, il est possible de créer un fichier .reg que chaque utilisateur pourra exécuter sur son poste.

Ce fichier .reg doit contenir les informations suivantes :

```txt
[HKEY_CURRENT_USER\Software\PC SOFT\CControle\28.0]
<ModeHF_CS>=dword:00000001

[HKEY_CURRENT_USER\Software\PC SOFT\CControle\28.0\ConnexionHF]
<ServeurConnexionHF_CS>=<Nom du Serveur>
"BaseConnexionHF_CS"=<Nom de la base de données>
"PortConnexionHF_CS"=dword:0000<valeur du port hexadécimale>
```

Pour trouver la valeur du port en hexadécimal, ouvrez la calculatrice Windows (calc.exe) en mode scientifique, saisissez la valeur décimal du port (par exemple 4988) et cliquez sur "Hex". La valeur hexadécimale apparaît (dans notre exemple 137C).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Utilisation des Centres de Contrôle en mode Client/Serveur
<a name="utilisation_des_centres_controle_mode_clientserveur_ELTTEXTE000344"></a>


### Spécificités Client/Serveur
<a name="specificites_clientserveur_ELTPARAGRAPHE000112"></a>En mode Client/Serveur :

- Le mode "Invité" n'est pas disponible.

- Le mode nomade pour les Centres de Contrôle n'est pas disponible.




**Pour des raisons de sécurité (notamment lors d'une utilisation via ADSL), il est conseillé de changer le mot de passe des comptes administrateur**. Tous les comptes doivent avoir un mot de passe.
<a name="NOTE4_2"></a>


### Gestion des intervenants
<a name="gestion_des_intervenants_ELTPARAGRAPHE000124"></a>Deux groupes sont automatiquement créés sur le serveur HFSQL Client/Serveur :

- "Intervenants des Centres de Contrôle". 

- "Administrateurs des Centres de Contrôle".




Les droits de ces groupes sont paramétrés pour l'utilisation des Centres de Contrôle en mode Client/Serveur. Ces deux groupes ont les droits de création de fichier.

Si vous avez importé une base HFSQL Classic et si vous avez coché l'option "Ajouter les intervenants des Centres de Contrôle à la liste des utilisateurs du serveur HFSQL" :

- les intervenants avec les droits d'administrateur sont automatiquement associés au groupe "Administrateurs des Centres de Contrôle",

- les autres intervenants sont automatiquement associés au groupe "Intervenants des Centres de Contrôle".  




Si vous créez une nouvelle base HFSQL Client/Serveur ou si l'option "Ajouter les intervenants des Centres de Contrôle à la liste des utilisateurs du serveur HFSQL" n'a pas été cochée, lors de la connexion des intervenants, l'écran suivant va apparaître :
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Utilisateur_inconnu.gif)
Cet écran apparaît également si un nouvel intervenant essaie de se connecter.

Cet écran permet de :

- **Ressaisir le nom / mot de passe** : cas d'une erreur lors de l'identification.

- **Créer le compte** : cas d'un nouvel utilisateur, ou de non importation des intervenants existants. Dans ce cas, les nouveaux intervenants avec les droits d'administrateur sont automatiquement associés au groupe "Administrateurs des Centres de Contrôle", les autres nouveaux intervenants sont automatiquement associés au groupe "Intervenants des Centres de Contrôle".  

- **Travailler en mode restreint** : permet de travailler avec une base de données locale (cas d'un problème réseau, d'un problème concernant le serveur HFSQL, ...). Attention : toutes les informations saisies dans ce mode ne seront pas reportées dans la base de données des Centres de Contrôle.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Utiliser le composant Feedback avec les Centres de Contrôle en mode Client/Serveur
<a name="utiliser_composant_feedback_avec_les_centres_controle_mode_clientserveur_ELTTEXTE000374"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Présentation
<a name="presentation_ELTPARAGRAPHE000155"></a>Le composant Feedback intégré à vos applications permet aux utilisateurs d'envoyer simplement des remarques, des suggestions sur votre application. Ces envois peuvent être fait :

- **en mode connecté** : Si WINDEV, WEBDEV ou WINDEV Mobile est installé sur le poste de l'utilisateur et que les données des Centres de Contrôle sont accessibles, les suggestions et dysfonctionnements seront immédiatement enregistrés dans le spool "Retours-Client" de votre application (si celle-ci est enregistrée dans le Centre de Suivi de Projets).

- **en mode déconnecté (par emails)** : Dans tous les autres cas, les suggestions et dysfonctionnements seront envoyés par emails à l'adresse de votre choix. Le Centre de Suivi de Projets permet de récupérer les emails envoyés afin de les enregistrer directement dans le spool "Retours-client" de votre application.




Si vous utilisez le mode connecté, une modification doit être effectuée dans vos applications pour gérer les Centres de Contrôle en mode Client/Serveur.

Cette modification doit être effectuée juste après le passage de la base de données des Centres de Contrôle en mode Client/Serveur. Il est nécessaire de mettre à jour toutes les applications en même temps afin de ne pas utiliser simultanément les bases HFSQL Classic et HFSQL Client/Serveur.

Pour les applications réseau, il est conseillé de "Forcer la mise à jour".
<a name="NOTE5_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Manipulations à faire dans les applications utilisant le composant Feedback
<a name="manipulations_faire_dans_les_applications_utilisant_composant_feedback_ELTPARAGRAPHE000173"></a>**Si votre application utilise le MCU**, désactivez l'utilisation des fonctions Hxxx dans le MCU (décochez l'option "Autoriser l'utilisation des ordres de lecture HFSQL", par exemple dans l'assistant de création de l'exécutable).

**Si votre application utilise un menu automatique**, il est nécessaire de modifier le paramétrage afin d'accéder à la base de données Client/Serveur des Centres de Contrôle. Pour cela :

1. Affichez la fenêtre qui utilise le menu automatique : sous le volet "Fenêtre", dans le groupe "Barres et menus", déroulez "Menu principal" et sélectionnez "Ouvrir le menu '?'".

2. Editez le code de l'option "Envoyer une suggestion, un dysfonctionnement, une règle métier".

3. Modifiez la ligne de code permettant d'indiquer le chemin des fichiers de données. Pour utiliser les Centres de Contrôle en mode Client/Serveur, la nouvelle ligne de code à utiliser est la suivante :
	
	```wl
	pFeedback.Configure(fbCheminDonnéesCC, ...
		"hfcs://<utilisateur>:<mot de passe>@<serveur>:<port>/<base de données>")
	```



Dans ce code :

- &lt;utilisateur&gt; : Nom d'un utilisateur du serveur HFSQL.

- &lt;mot de passe&gt; : Mot de passe associé à l'utilisateur.

- &lt;serveur&gt; : Adresse IP ou nom du serveur où le serveur HFSQL et la base de données des Centres de Contrôle sont installés.

- &lt;port&gt; : Port du serveur.

- &lt;base de données&gt; : Nom de la base de données HFSQL Client/Serveur correspondant aux fichiers des Centres de Contrôle.




Remarque : si vous mettez à jour le menu automatique de votre application, cette ligne de code sera automatiquement mise à jour avec le nom du développeur en cours.

**Si votre application utilise directement le composant Feedback**, il est nécessaire de modifier la configuration du chemin des fichiers de données (méthode Configure du composant, avec le paramètre fbCheminDonnéesCC). Voir ci-dessus.


