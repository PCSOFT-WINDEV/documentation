
## Leçon 6.1. Déployer un site


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000470"></a>


- Comment déployer ?

- Configuration nécessaire.





|   |   |
| --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 30 mn |

| [Leçon précédente](../TutoWB/1410087499.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087501.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000517"></a>
Lorsque le site WEBDEV est développé, il faut le déployer sur un serveur pour le rendre accessible aux internautes.

Nous allons voir les différentes étapes nécessaires pour le déploiement d'un site WEBDEV.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Cette partie présente le déploiement sur un serveur Windows. Si vous voulez utiliser un serveur Linux, reportez-vous à la documentation du serveur d'application WEBDEV pour Linux. |



Il est possible de déployer un site WEBDEV (en mode Session ou en mode AWP) grâce à plusieurs méthodes :

- Déploiement à distance directement depuis le poste de développement (par HTTP ou FTP).

- Déploiement dans [PCSCloud](https://pcscloud.net/FR/cloud_developpement.awp), le Cloud PC SOFT.

- Déploiement à distance depuis un poste d'administration (par HTTP ou FTP) à l'aide d'un "package de déploiement".

- Déploiement du site via le service d'hébergement de test PC SOFT.

- Déploiement par média physique (CD-ROM, ...). Ce déploiement peut être autonome : dans ce cas, l'installation installe également un serveur Web et un serveur d'application WEBDEV limité.

- Déploiement via une image Docker du site.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Configuration nécessaire
<a name="configuration_necessaire_ELTTEXTE000559"></a>
Pour le déploiement sur le serveur, il est nécessaire d'avoir installé et configuré :

- Un serveur Web,

- Un serveur d'application WEBDEV (une version 10 connexions est livrée avec WEBDEV).


Remarque : Si une installation distante est réalisée par FTP, il est également nécessaire d'installer un serveur FTP sur le serveur.  

Lors de l'installation de WEBDEV, vous avez la possibilité d'installer la version de test du Serveur d'application WEBDEV. Vous avez ainsi la possibilité de tester le déploiement de vos sites WEBDEV dynamiques (en mode Session ou AWP).

Pour simplifier les manipulations du déploiement et pour que vous puissiez directement tester le déploiement de votre site Web, nous allons :

- Installer un Serveur d'Application WEBDEV 10 connexions sur un poste Windows. Ce serveur d'application doit être installé sur un poste différent du poste de développement. WEBDEV version Développement ne doit pas avoir été installé sur ce poste.

- Déployer le site à distance (par HTTP).


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Si vous possédez déjà les paramètres d'accès au serveur sur lequel votre site va être déployé, il n'est pas nécessaire d'installer le Serveur d'Application WEBDEV 10 Connexions. Vous pouvez réaliser l'installation directement sur le serveur par HTTP. |





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Installation et configuration du "Serveur d'Application WEBDEV - 10 Connexions"
<a name="installation_configuration_serveur_application_webdev_10_connexions_ELTTEXTE000601"></a>
Le programme d'installation du "Serveur d'Application WEBDEV - 10 connexions" est disponible : 

- dans le pack d'installation de WEBDEV (si vous avez demandé à télécharger l'installation du Serveur d'application WEBDEV). Dans ce cas, lancez "Menu.exe" et choisissez l'option "Installer le Serveur d'Application WEBDEV - 10 connexions".

- sur le site PC SOFT, depuis la [page de téléchargement de WEBDEV](https://pcsoft.fr/st/telec/index.html), option "Télécharger WEBDEV 28", puis "WEBDEV 28 Serveur d'Application (déploiement)". 


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Si vous possédez déjà les paramètres d'accès au serveur sur lequel votre site va être déployé, il n'est pas nécessaire d'installer le Serveur d'Application WEBDEV 10 Connexions. Vous pouvez réaliser l'installation directement sur le serveur par HTTP. |








<a name="NOTE4_2"></a>


### Installation du "Serveur d'Application WEBDEV - 10 Connexions"
<a name="installation_serveur_application_webdev_10_connexions_ELTPARAGRAPHE000094"></a>Les étapes de l'installation sont les suivantes :

1. Sélectionnez la langue d'installation du serveur d'application WEBDEV et validez. 

2. Acceptez la licence. Passez à l'étape suivante de l'assistant.

3. Choisissez "Installer la version "10 connexions"". Passez à l'étape suivante.
	
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Install%20Serveur%2010%20Connexions%20-%20HC%20N%B0001.jpg)


4. Sélectionnez le chemin d'installation du serveur d'application (par défaut "C:\\WEBDEV 28").
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Install%20Serveur%2010%20Connexions%20-%20HC%20N%B0002.jpg)


5. L'étape suivante permet de spécifier le répertoire racine pour le déploiement des sites et des Webservices. Conservez le chemin indiqué par défaut et passez à l'étape suivante. 

6. L'étape suivante permet d'indiquer les paramètres avancés du Serveur d'application WEBDEV. Conservez l'option "Utiliser les paramètres par défaut".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Install%20Serveur%2010%20Connexions%20-%20HC%20N%B0003.jpg)


7. **Si le Serveur d'Application WEBDEV n'a jamais été installé sur le poste**, indiquez les paramètres d'un compte Windows qui sera utilisé comme administrateur WEBDEV. Ce compte sera également appelé "Compte d'hébergement". 
	Il est possible de créer un nouveau compte Windows ou d'utiliser un compte Windows existant. 
	Sélectionnez l'option de votre choix et passez à l'étape suivante. 

8. **Si une version précédente du Serveur d'Application WEBDEV a été installée sur le poste**, l'assistant permet : 

	- de définir la gestion des sites et webservices des versions antérieures. Conservez l'option "Conserver les sites dans leurs versions actuelles" et passez à l'étape suivante.

	- d'importer les comptes WEBDEV. Conservez l'option "Ne pas importer de comptes existants" et passez à l'étape suivante. Indiquez le login et le mot de passe d'un compte Windows qui sera utilisé comme administrateur WEBDEV. Ce compte sera également appelé "Compte d'hébergement". 
			Il est possible de créer un nouveau compte Windows ou d'utiliser un compte Windows existant. 
			Sélectionnez l'option de votre choix et passez à l'étape suivante. 




9. L'étape suivante permet de gérer l'hébergement de sites SaaS. L'activation du SaaS installe automatiquement un site et un Webservice pour administrer vos sites SaaS. Pour plus de détails, consultez [SaaS](../WDLang3/9500213.md). Validez cette étape.

10. L'étape suivante permet d'exiger une connexion sécurisée pour l'accès à tous les sites d'administration à distance. 

11. L'étape suivante permet de sélectionner la langue du serveur d'application qui va être installé. Il est possible d'utiliser le Serveur d'application dans 3 langues au choix : français, anglais, espagnol. 

12. Validez les différentes étapes de l'installation.

13. Si le poste d'installation contient plusieurs serveurs virtuels, sélectionnez les serveurs Web virtuels sur lesquels le serveur d'application WEBDEV doit être installé. Le site Web par défaut est suffisant. Validez.

14. L'assistant propose différentes options : sélectionnez les options voulues et conservez l'option "Lancer l'administrateur de WEBDEV". Validez.
	|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | L'option "Afficher le guide d'utilisation" permet d'afficher automatiquement l'aide du [Serveur d'application WEBDEV](../WDAdminDeploiement/3539053.md) à la fin de l'installation. La consultation de cette aide peut être utile et nécessaire pour résoudre des problèmes de configuration liés aux droits d'accès sur le serveur. |





15. Le "Serveur d'Application WEBDEV - 10 Connexions" est automatiquement configuré. Le déploiement d'un site WEBDEV peut être effectué immédiatement. 

16. L'administrateur WEBDEV est automatiquement lancé ainsi que le Centre de Contrôle d'hébergement. 



<a name="NOTE4_3"></a>


### Configuration via le Centre de Contrôle d'Hébergement
<a name="configuration_via_centre_controle_hebergement_ELTPARAGRAPHE000194"></a>Lors de l'installation du Serveur d'Application WEBDEV - 10 Connexions, un compte Windows a été créé ou défini comme administrateur du serveur d'application WEBDEV. Cet utilisateur possède tous les droits (administration, déploiement, statistiques). 

Pour configurer les différentes caractéristiques de cet utilisateur ou pour utiliser un utilisateur spécifique pour effectuer le déploiement de vos sites, vous pouvez utiliser le Centre de Contrôle d'Hébergement. 

Rappel : Le Centre de Contrôle d'Hébergement est un outil conçu pour prendre en charge automatiquement la configuration des éléments suivants : 

- Serveur d'Application WEBDEV, 

- Serveur Web (IIS), 

- Serveur FTP (IIS). La configuration du serveur FTP est nécessaire uniquement pour une installation via FTP. 




- Si le Centre de Contrôle d'Hébergement n'est pas déjà affiché, lancez le Centre de Contrôle d'Hébergement depuis le menu "Démarrer" de Windows.




**Nous allons tout d'abord voir les différents paramètres disponibles dans le Centre de Contrôle d'Hébergement**. 

- Pour afficher les différents paramètres : 

	1. Pour configurer les répertoires utilisés par votre serveur, dans le groupe "Paramètres de l'hébergement", cliquez sur "Répertoires".
			Remarque : Les différentes options de ce groupe permettent de définir les paramètres qui seront utilisés par défaut pour votre serveur d'hébergement. 

	2. Indiquez où seront installés les sites. Choisissez le répertoire racine dans lequel seront créés les sous-répertoires des comptes WEBDEV.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Utilisez un répertoire local à la machine. Si vous voulez utiliser un répertoire réseau, indiquez obligatoirement un chemin UNC. L'invité Internet du poste devra avoir accès à ce chemin sans avoir besoin de s'authentifier. |




			Vous pouvez choisir le nom des sous-répertoires qui contiendront les sites, les webservices et les données.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Configuration%20CCH%E9bergement%20-%20HC%20N%B0001.jpg&type=thumb)


	3. Cliquez sur "Groupes Windows" et définissez dans quels groupes seront affectés les utilisateurs Windows créés pour le déploiement.
			Pour le déploiement, vous pouvez créer un groupe ou utiliser le groupe standard "Utilisateurs avec pouvoir".
			Pour l'exécution des sites, une bonne pratique consiste à utiliser le groupe "IIS_IUSRS" (sur les versions de Windows où il existe).
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Configuration%20CCH%E9bergement%20-%20HC%20N%B0002.jpg&type=thumb)
Cliquez sur le bouton "Appliquer" pour valider vos choix. 

4. Cliquez sur "Limites" pour spécifier les limitations de ressources à appliquer aux comptes WEBDEV : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Configuration%20CCH%E9bergement%20-%20HC%20N%B0003.jpg&type=thumb)



<a name="NOTE4_4"></a>


### Création d'un compte de déploiement
<a name="creation_compte_deploiement_ELTPARAGRAPHE000243"></a>Le Centre de Contrôle d'hébergement permet également de créer un compte de déploiement.

Ce compte pourra être utilisé pour déployer les sites WEBDEV depuis WEBDEV. 

Pour créer un compte de déploiement :

1. Cliquez sur le bouton "Nouvel utilisateur". L'assistant de création d'un nouvel utilisateur se lance. Il suffit de suivre les différentes étapes.
	Remarque : Si vous ne l'avez pas fait, le Centre de Contrôle d'hébergement propose de définir un groupe d'administration. Dans cet exemple, répondez "Oui" à la question "Voulez-vous continuer sans ce groupe ?". 

2. Vous pouvez : 

	- Créer un compte Windows. Ce compte sera utilisé pour le déploiement et la configuration de vos sites. 

	- Utiliser un compte Windows existant. 


 Dans cet exemple nous allons créer un compte Windows. Saisissez le nom de l'utilisateur et son mot de passe (vous pouvez également générer le mot de passe. Dans ce cas, n'oubliez pas de le noter !).
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Configuration%20CCH%E9bergement%20-%20HC%20N%B0005.jpg&type=thumb)
Passez à l'étape suivante de l'assistant.

3. L'assistant propose de sélectionner les options WEBDEV associées au compte : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Configuration%20CCH%E9bergement%20-%20HC%20N%B0006.jpg&type=thumb)
Conservez les choix par défaut et passez à l'étape suivante.

4. L'assistant propose d'utiliser un compte Windows pour l'exécution des applications. Conservez les options par défaut et passez à l'étape suivante de l'assistant. 

5. Saisissez les informations concernant l'utilisateur. Passez à l'étape suivante.

6. Les répertoires du compte utilisateur sont remplis automatiquement en fonction des données spécifiées.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_Configuration%20CCH%E9bergement%20-%20HC%20N%B0008.jpg&type=thumb)


7. Continuez l'assistant jusqu'à l'étape "Site Web virtuel".

	- Si vous choisissez de créer un nouveau site virtuel, il suffit d'indiquer le nom DNS qui mènera à ce site (le DNS doit être configuré en conséquence).

	- Si vous choisissez d'utiliser un site virtuel déjà existant, sa configuration sera remplacée.




8. Passez à l'étape suivante.

9. Cette étape permet de spécifier si l'accès et le déploiement par FTP doivent être autorisés pour l'utilisateur. Dans notre cas, cette option n'est pas nécessaire car nous allons réaliser un déploiement par HTTP. Passez à l'étape suivante.

10. L'assistant est terminé. Vérifiez tous les choix. Il est possible de décocher certaines opérations si vous ne souhaitez pas que l'assistant les effectue à votre place.

11. Validez l'assistant. Votre serveur est maintenant prêt à recevoir des sites WEBDEV. Nous allons utiliser l'utilisateur que nous avons créé pour tester le déploiement d'un site par HTTP.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Les différents modes de déploiement
<a name="les_differents_modes_deploiement_ELTTEXTE000733"></a>
Maintenant que nous avons configuré notre serveur Web, nous pouvons déployer notre site. Différentes méthodes existent. Le choix d'une méthode ou d'une autre dépend notamment des contraintes techniques (possibilité d'utiliser un serveur FTP ou non, accès au poste serveur, ...). 
Un site dynamique WEBDEV peut être déployé selon une des méthodes suivantes :

- **Déploiement à distance directement depuis le poste de développement** (par HTTP ou FTP). Nous allons déployer notre site selon cette méthode par HTTP.
	Remarque : le déploiement par FTP nécessite l'installation d'un serveur FTP. 

- **Déploiement dans le Cloud PC SOFT**.

- **Déploiement à distance depuis un poste d'administration** (par HTTP ou FTP) à l'aide d'un "package de déploiement". Ce mode de déploiement fonctionne de la même manière que le déploiement à distance direct. La seule différence : le déploiement n'est pas fait depuis l'environnement de développement de WEBDEV. Dans ce mode :

	- le développeur génère un package de déploiement.

	- l'administrateur du site (qui peut être une personne différente du développeur) déploie le package sur le serveur à distance grâce à l'outil WDDéploie. WDDéploie est un outil redistribuable livré en standard avec WEBDEV.




- **Déploiement par média physique** (DVD-ROM, ...). Le déploiement par média physique crée un support d'installation (comme une application) qui devra être exécuté directement sur le serveur. Ce mode de déploiement ne fonctionne que sous Windows. 

- **Déploiement du site via le service d'hébergement de test PC SOFT**.

- **Déploiement via une image Docker du site**.




Détaillons maintenant le déploiement par HTTP.
<a name="NOTE5_2"></a>


### Un exemple détaillé : déploiement par HTTP
<a name="exemple_detaille_deploiement_par_http_ELTPARAGRAPHE000302"></a>Nous allons déployer le projet "Site_WEBDEV_Complet" manipulé dans les parties précédentes de ce tutoriel. Si vous n'avez pas encore manipulé ce projet, une version corrigée est disponible.



- Ré-ouvrez si nécessaire le projet que vous avez manipulé dans la leçon précédente. 

	1. Affichez la page d'accueil de WEBDEV (Ctrl + &lt;).

	2. Dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 3 à 6", double-cliquez sur "Site WEBDEV Complet - Exercice".

	3. WEBDEV vous propose d'ouvrir le projet que vous avez manipulé dans la leçon précédente. Vous pouvez ouvrir le projet présent sur votre poste ou ouvrir le projet original. Choisissez "Ouvrir la copie locale". 





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=exemple-WB.png)<br> | Corrigé | Un projet corrigé est disponible. Vous pouvez effectuer les différentes manipulations de cette leçon sur ce projet. Pour ouvrir le projet corrigé, dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 3 à 6", double-cliquez sur "Site WEBDEV Complet - Corrigé". |







**Préparation de l'installation**

WEBDEV dispose d'un assistant d'installation, permettant de diffuser facilement votre site chez un hébergeur WEBDEV (pour un site Internet ou Extranet par exemple) ou sur l'un de vos serveurs dédié à l'hébergement WEBDEV (pour un site Intranet par exemple).

- Nous allons utiliser cet assistant :

	1. Dans le ruban, sous le volet "Projet", dans le groupe "Génération", déroulez "Déployer le site" et sélectionnez "Générer et déployer le site".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_D%E9ploiement%20-%20HC%20N%B0001.jpg&type=thumb)


	2. L'assistant se lance. Avant de procéder à l'installation, il faut mettre en bibliothèque tous les éléments de votre site. Une bibliothèque est un fichier qui regroupe tous les éléments créés lors du développe­ment (description de la base de données, pages, états, requêtes, ...). Les pages HTML et les images ne sont pas incluses dans la bibliothèque.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_D%E9ploiement%20-%20HC%20N%B0002.jpg&type=thumb)
Passez à l'étape suivante.

3. Vous pouvez choisir d'intégrer plusieurs langues dans la bibliothèque. Dans notre exemple, nous conservons les options par défaut. Passez à l'étape suivante.

4. Les informations sur la version de la bibliothèque permettent de saisir les éléments qui seront affichés dans les propriétés du fichier sous l'explorateur Windows. Passez à l'étape suivante.

5. Ne réalisez pas de sauvegarde du projet et validez la création de la bibliothèque.




**Installation**

- L'assistant d'installation va maintenant vous poser quelques questions pour définir de quelle manière diffuser votre site. Dans notre cas, nous allons réaliser une installation distante par HTTP :

	1. Sélectionnez l'option "Déployer sur un Serveur d'Application WEBDEV distant".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_D%E9ploiement%20-%20HC%20N%B0003.jpg&type=thumb)
Passez à l'étape suivante.

	2. Pour définir les paramètres du serveur, vous aurez besoin des informations suivantes fournies par votre hébergeur pour continuer. Nous allons saisir les informations correspondant à l'installation précédemment réalisée :

		- Adresse du serveur (dans notre exemple, nom du poste où le Serveur d'Application WEBDEV 10 connexions a été installé). Le nom peut être :

			- un nom de machine accessible par le réseau (par exemple : "ServeurTEST"),

			- une adresse IP (par exemple : 192.168.15.99),

			- une adresse Internet (par exemple : www.monserveur.fr).
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_D%E9ploiement%20-%20HC%20N%B0004.jpg&type=thumb)




3. Lorsque vous avez terminé de saisir les informations de votre compte, passez à l'étape suivante.

4. Saisissez les paramètres de déploiement du site. Nous conserverons les options données par défaut.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P6_D%E9ploiement%20-%20HC%20N%B0005.jpg&type=thumb)
Passez à l'étape suivante.

5. L'assistant propose de sélectionner le mode de déploiement à effectuer : 

	- Déployer sans déconnecter les utilisateurs. Cette option permet de mettre à jour le site sans déconnexion des utilisateurs connectés. 

	- Déployer en déconnectant les utilisateurs. Si cette option est choisie, les utilisateurs connectés seront automatiquement déconnectés lors de la mise à jour du site. 


Pendant le transfert des fichiers, l'assistant compresse et crypte les données transférées. Vos données transitent donc en toute sécurité.

A la fin de l'installation, un lien permet de lancer immédiatement le site.

<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Correspondance entre les répertoires du poste de développement et le déploiement
<a name="correspondance_entre_les_repertoires_poste_developpement_deploiement_ELTTEXTE000799"></a>
La répartition des fichiers d'un site est légèrement différente entre le développement et le serveur de déploiement. Voici un récapitulatif de la répartition proposée automatiquement par WEBDEV.


|   |   |
| --- | --- |
| Répertoire sur le poste de développement | Répertoire sur le serveur de déploiement |
| &lt;Nom projet&gt;\\&lt;Nom projet&gt;_WEB | &lt;site&gt;\\&lt;nom du site&gt;\\&lt;nom du site en majuscules&gt;_WEB |
| &lt;Nom projet&gt;\\Exe | Cas d'un site :<br><br>- fichiers de données (.fic, .ndx, .mmo, .ftx) : &lt;données&gt;\\&lt;nom du site&gt;<br><br>- autres fichiers : &lt;site&gt;\\&lt;nom du site&gt;<br><br><br>Cas d'un Webservice : <br><br>- fichiers de données (.fic, .ndx, .mmo, .ftx) : &lt;données&gt;\\&lt;nom du site&gt;<br><br>- autres fichiers : &lt;webservice&gt;\\&lt;nom du site&gt;<br><br><br> |


où : 

- &lt;site&gt;, &lt;données&gt; et &lt;webservice&gt; sont les répertoires définis lors de la création du compte d'hébergement (voir plus haut).

- &lt;nom du site&gt; est le nom du site. 


La répartition des fichiers est entièrement paramétrable dans l'assistant de déploiement.

| [Leçon précédente](../TutoWB/1410087499.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087501.md) |
| --- | --- | --- |




