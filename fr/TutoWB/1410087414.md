
## Leçon 2.2. Projet et analyse


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000601"></a>


- Création d'un projet.

- Création d'une analyse.





|   |   |
| --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 40 mn |

| [Leçon précédente](../TutoWB/1410087411.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087488.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000648"></a>
Pour créer un site avec une base de données, il faut :

- Créer le projet lié au site. Ce projet regroupera tous les éléments du site (pages, codes, requêtes, états, etc.). 

- Créer l'analyse liée au projet. L'analyse permet de décrire tous les fichiers de données manipulés par le site.




<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Création du projet
<a name="creation_projet_ELTTEXTE000672"></a>


- Pour créer le projet :

	1. Lancez WEBDEV si ce n'est pas déjà fait. 

	2. Affichez la page d'accueil de WEBDEV si nécessaire (Ctrl + &lt;). 

	3. Dans la page d'accueil, cliquez sur le bouton "Créer un projet", puis sur l'option "Site". L'assistant de création du projet se lance. Les différentes étapes de l'assistant vont vous aider à créer votre projet. Tous les renseignements indiqués dans cet assistant pourront être modifiés par la suite.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Astuce : Pour créer un projet, vous pouvez également :<br><br>		1. Cliquer sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Cr%E9er_WB_GAF.jpg)<br> parmi les boutons d'accès rapide du menu de WEBDEV.<br><br>		2. La fenêtre de création d'un nouvel élément s'affiche : cliquer sur "Projet".<br><br><br> |





	4. L'assistant propose de créer un projet vierge ou basé sur un exemple. Choisissez "Créer un projet vierge" et passez à l'étape suivante (bouton "Suivant").  

	5. Indiquez le type de site à créer. Sélectionnez "Site WEBDEV" et passez à l'étape suivante. 

	6. L'assistant propose deux modes de génération. Sélectionnez le "Mode Session" et passez à l'étape suivante. 

	7. L'assistant permet de saisir le nom du projet, son emplacement et sa description. Dans notre cas, ce projet va simplement s'appeler "Mon_Site_WEBDEV".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%201%20-%20Cr%E9ation%20Projet%20-%20HC%20N%B0001.jpg&type=thumb)


	8. Par défaut, WEBDEV propose de créer ce projet dans le répertoire ".\\Mes Projets\\Mon_Site_WEBDEV". Vous pouvez conserver cet emplacement ou le modifier grâce au bouton [...].
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Lorsque vous développez pour le Web, il est préférable d'éviter les caractères accentués dans les noms des éléments (projets, pages, etc.). |





9. Les différentes parties de l'assistant sont indiquées dans la marge de gauche. Vous pouvez passer rapidement d'une partie à l'autre en cliquant dessus. Les autres étapes de la partie "Description" n'étant pas fondamentales, cliquez directement sur "Chartes".

10. Cette partie permet de définir les différentes chartes associées au projet. Pour la charte de programmation, ne modifiez pas les options proposées. Passez à l'étape suivante.

11. Cette étape permet de définir la charte graphique (également appelée "Ambiance"). La charte graphique permet de définir le "look" du site.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Les ambiances permettent d'harmoniser l'aspect visuel d'un site et rendent les changements de look plus simples et plus rapides.<br><br>L'ambiance fournit les images, les polices, la texture, la forme des boutons et les styles disponibles pour le projet. |



Sélectionnez "Phoenix".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%201%20-%20Cr%E9ation%20Projet%20-%20HC%20N%B0002.jpg&type=thumb)




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Création de l'analyse
<a name="creation_analyse_ELTTEXTE000768"></a>


- Les étapes de l'assistant de création de l'analyse sont les suivantes :

	1. Indiquez le nom et le répertoire de l'analyse. Par défaut, le nom de l'analyse correspond au nom du projet et le répertoire de l'analyse est un répertoire ".ana" dans le répertoire du projet. Nous allons conserver ces paramètres par défaut. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%201%20-%20Cr%E9ation%20Projet%20-%20HC%20N%B0003.jpg&type=thumb)
Passez à l'étape suivante de l'assistant. 

	2. Vous pouvez ensuite choisir le type de la base de données manipulée par le projet. Sélectionnez "HFSQL Classic". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%201%20-%20Cr%E9ation%20Projet%20-%20HC%20N%B0004.jpg&type=thumb)
Passez à l'étape suivante de l'assistant.

	3. Validez. L'assistant de création d'un fichier de données se lance automatiquement.







<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Création de la description des fichiers de données
<a name="creation_description_des_fichiers_donnees_ELTTEXTE000792"></a>
Notre application de gestion de clients et de commandes va être associée à l'analyse suivante. Cette analyse comporte cinq fichiers de données (tables) différents :

- Client,

- Commande,

- ModeRèglement,

- LigneCommande,

- Produit.



![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0005.jpg&type=thumb)
Pour créer les différents fichiers de données de cette analyse, nous allons utiliser différentes méthodes disponibles dans WEBDEV.
<a name="NOTE5_2"></a>


### Création d'un fichier de données : utilisation d'un fichier de données prédéfini
<a name="creation_fichier_donnees_utilisation_fichier_donnees_predefini_ELTPARAGRAPHE000125"></a>

- Les étapes de l'assistant de création d'un fichier de données sont les suivantes :

	1. Dans l'assistant, sélectionnez l'option "Sélectionner une description parmi des fichiers de données prédéfinis". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%202%20-%20Fichier%20Client%20WB%20-%20HC%20N%B0001.jpg&type=thumb)
Passez à l'étape suivante de l'assistant.

	2. La liste des fichiers de données prédéfinis est affichée. Nous allons créer le fichier de données "Client". Dans la liste des fichiers de données, sélectionnez "Client". Passez à l'étape suivante.

	3. L'assistant propose la liste des rubriques à intégrer dans le fichier de données Client. Cette liste est impressionnante car elle permet de gérer de nombreux types de fichiers de données Client. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%202%20-%20Fichier%20Client%20WB%20-%20HC%20N%B0002.jpg&type=thumb)


	4. Cliquez sur "Aucune" pour désélectionner toutes les rubriques. Puis, cochez uniquement les rubriques suivantes : IDClient, Société, Nom, Prénom, Adresse, CodePostal, Ville, EtatDep, Pays, Téléphone, Mobile, Email.

5. Passez à l'étape suivante de l'assistant.

6. Validez l'assistant. Le fichier de données "Client" est automatiquement créé sous l'éditeur d'analyses. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%202%20-%20Fichier%20Client%20WB%20-%20HC%20N%B0003.jpg&type=thumb)



<a name="NOTE5_3"></a>


### Création d'un fichier de données : création du fichier de données et des rubriques
<a name="creation_fichier_donnees_creation_fichier_donnees_des_rubriques_ELTPARAGRAPHE000144"></a>

- Pour créer un fichier de données depuis la fenêtre de création d'un nouvel élément :

	1. Cliquez sur "Données" puis sur "Fichier de données".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Il est également possible de créer un fichier de données directement depuis l'éditeur d'analyses : dans le ruban, sous le volet "Analyse", dans le groupe "Création", cliquez sur "Nouveau fichier". |





	2. L'assistant de création d'un nouveau fichier de données se lance.

	3. Dans l'assistant, sélectionnez l'option "Créer une nouvelle description d'un fichier de données".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%203%20-%20Fichier%20Commande%20WB%20-%20HC%20N%B0001.jpg&type=thumb)
Passez à l'étape suivante de l'assistant.

	4. Nous allons créer le fichier de données "Commande". Saisissez son nom "Commande" dans l'assistant.
			Ce nom sera utilisé :

		- pour manipuler le fichier de données en programmation. La variable associée au fichier de données sera "Commande".

		- pour construire le nom du fichier de données physique associé (fichier "Commande.fic").


 Automatiquement, le libellé et la description des éléments représentés par les enregistrements du fichier de données apparaissent.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Dans l'assistant, le champ "Un enregistrement représente" permet d'avoir un libellé clair lors de la description des liaisons entre les fichiers de données. Automatiquement, un libellé est proposé à partir du nom du fichier de données.<br><br>Dans notre cas, saisissez "Une commande". |




![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%203%20-%20Fichier%20Commande%20WB%20-%20HC%20N%B0002.jpg)




Nous allons saisir les rubriques du fichier de données "Commande". Dans la fenêtre de description des rubriques du fichier de données, vous pouvez déjà voir qu'une rubrique a été automatiquement créée : "IDCommande". Cette rubrique correspond à l'identifiant automatique du fichier de données. Cette rubrique est composée des lettres "ID" et du nom du fichier de données.

Nous allons créer les autres rubriques de ce fichier de données.

- Tout d'abord, nous allons créer la rubrique "Date". Cette rubrique contiendra la date de la commande.

	1. Dans la fenêtre de description des rubriques, double-cliquez dans la colonne "Nom" de la première ligne vide. Cette colonne passe automatiquement en saisie. Saisissez "Date".

	2. Cliquez dans la colonne "Libellé". Automatiquement, le nom de la rubrique apparaît. Nous allons modifier le libellé de la rubrique en cliquant dessus : saisissez "Date de la commande". Dans la colonne "Type", le type "Texte" est automatiquement sélectionné. Déroulez la liste et sélectionnez le type "Date".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%203%20-%20Fichier%20Commande%20WB%20-%20HC%20N%B0004.jpg)


	3. Cette rubrique va être une clé (un index) de notre fichier de données : les clés permettent d'accélérer les accès aux données et les tris.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | La notion de clé fait partie des caractéristiques d'une rubrique. En fait, lors de la création d'une rubrique, vous avez la possibilité d'indiquer si elle est :<br><br>		- non clé,<br><br>		- clé unique : la valeur de cette clé sera unique dans l'ensemble du fichier de données (c'est-à-dire dans tous les enregistrements du fichier de données),<br><br>		- clé avec doublons : la valeur de cette clé pourra être présente plusieurs fois dans le fichier de données.<br><br><br> |





	- Dans le cas d'une base de données au format SQL, le moteur utilise au mieux les index.

	- Dans le cas d'un parcours séquentiel d'un fichier de données, il suffit d'indiquer l'index de parcours (c'est-à-dire la clé).




- Nous allons maintenant créer la rubrique "Etat" qui permet de connaître l'état de la commande.

	1. Positionnez-vous sur une nouvelle ligne dans le tableau des rubriques. Saisissez :

		- le nom : Etat

		- le libellé : Etat de la commande

		- le type : Sélecteur, Liste, Combo. Dans la fenêtre qui s'ouvre, vous pouvez sélectionner le type de champ créé par défaut pour cette rubrique. Ici, ce sera un sélecteur. Validez la fenêtre.




2. Dans la partie basse de l'écran, cliquez sur le lien pour afficher les paramètres du champ lié à la rubrique sélectionnée. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%203%20-%20Fichier%20Commande%20WB%20-%20HC%20N%B0004%202.jpg)
Les informations saisies dans la nouvelle fenêtre qui s'affiche seront automatiquement utilisées lors de la création des pages liées au fichier de données. Vous retrouvez ici le type du champ et le libellé.
			Nous allons saisir les différentes options correspondant à l'état de la commande dans l'onglet "Contenu" :

	- Cliquez sur l'onglet "Contenu".

	- L'option 1 correspond à "En attente". Saisissez "En attente" dans le champ de saisie à droite du numéro 1.

	- Saisissez "Validée" dans le champ de saisie à droite du numéro 2.

	- Cliquez sur le bouton "+" pour ajouter une nouvelle option dans le sélecteur. 

	- Saisissez "Annulée" à la place de "Option 3".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%203%20-%20Fichier%20Commande%20WB%20-%20HC%20N%B0005.jpg&type=thumb)



<a name="NOTE5_4"></a>


### Importation d'un fichier CSV
<a name="importation_fichier_csv_ELTPARAGRAPHE000259"></a>Pour créer le fichier de données "ModeRèglement", contenant les caractéristiques du règlement, nous allons utiliser une autre méthode : l'import d'un fichier CSV.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Un fichier CSV est un fichier texte utilisant un format spécifique. Ce fichier contient des données sur chaque ligne. Ces données sont séparées par un caractère de séparation (généralement une virgule, un point-virgule ou une tabulation). |



A partir du fichier CSV contenant les données, WEBDEV­ va créer :

- la description du fichier de données dans l'analyse,

- le fichier de données HFSQL avec les données présentes dans le fichier CSV.




- Pour importer un fichier CSV dans l'analyse :

	1. Dans le ruban, sous le volet "Analyse", dans le groupe "Création", déroulez "Importer" et sélectionnez "Importer des descriptions de fichiers/tables".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=astuce.png)<br> | Astuce | Pour importer un fichier (CSV ou autre) dans l'analyse, il est également possible de réaliser directement un "Drag and Drop" du fichier CSV (présent dans l'explorateur de fichiers Windows) vers l'éditeur d'analyses. Nous le verrons dans le paragraphe suivant. |





	2. L'assistant d'importation d'un fichier se lance.

	3. Passez à l'étape suivante.

	4. Sélectionnez le format du fichier de données à importer. Ici, sélectionnez "Fichier texte".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%204%20-%20Import%20CSV%20WB%20-%20HC%20N%B0001.jpg&type=thumb)
Passez à l'étape suivante de l'assistant.

	5. Indiquez le chemin du fichier à importer : "\\Tutoriel\\WB\\Exercices\\Mon_Site_WEBDEV\\ModeRèglement.csv" présent dans le répertoire d'installation de WEBDEV.

	6. Passez à l'étape suivante de l'assistant.

	7. Indiquez les paramètres d'importation suivants :

		- Enregistrements délimités par : "&lt;Retour chariot/Saut de ligne&gt;"

		- Colonnes délimitées par : "&lt;Point-virgule&gt;"

		- Chaînes délimitées par : "&lt;Aucun&gt;"

		- Séparateur décimal : "&lt;Automatique : point ou virgule&gt;" 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%204%20-%20Import%20CSV%20WB%20-%20HC%20N%B0002.jpg&type=thumb)







- Examinons la description du fichier de données importé :

	1. Sélectionnez le fichier de données "ModeRèglement" puis dans le menu contextuel, sélectionnez l'option "Description du fichier de données".

	2. Dans la fenêtre qui s'affiche, modifiez le libellé du fichier de données : supprimez "(Importé)".

	3. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0001%201.jpg)
 (en bas, à gauche) pour afficher la description des rubriques du fichier de données.

	4. Ce fichier de données ne contient pas d'identifiant automatique ni de clé unique. Nous allons passer la rubrique "Code" en clé unique :

		- Positionnez le bandeau de sélection si nécessaire sur la rubrique "Code".

		- Dans la partie droite de l'écran, cliquez sur "Clé unique".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%204%20-%20Import%20CSV%20WB%20-%20HC%20N%B0005.jpg)






<a name="NOTE5_5"></a>


### Importation directe de fichiers de données existants
<a name="importation_directe_fichiers_donnees_existants_ELTPARAGRAPHE000336"></a>La dernière méthode que nous allons voir pour créer des fichiers de données est la simple importation de fichiers de données HFSQL existants. Nous allons utiliser cette méthode pour créer le fichier de données "Produit".



- Pour importer des fichiers de données HFSQL :

	1. Dans l'explorateur de fichiers de Windows, ouvrez le sous-répertoire de WEBDEV suivant : "\\Tutoriel\\WB\\Exercices\\Mon_Site_WEBDEV".

	2. Sélectionnez le fichier "Produit.fic".

	3. Effectuez un "Drag and Drop" du fichier "Produit" vers l'éditeur d'analyses de WEBDEV.

	4. Le fichier de données apparaît sous l'éditeur d'analyses.





Tous les fichiers de données nécessaires sont maintenant présents dans l'éditeur d'analyses.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=avertissement.png)<br> | Attention ! | Nous avons uniquement importé la description du fichier de données "Produit" dans l'analyse de notre projet. Les données contenues dans le fichier de données "Produit" n'ont pas été importées dans le projet. |







- Pour manipuler les données du fichier que vous venez d'importer : 

	1. Ouvrez directement l'explorateur de fichiers sur le répertoire de votre projet : sous le volet "Accueil", dans le groupe "Général", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Rep_Projet_GAF.jpg)
. 

	2. Ouvrez un nouvel explorateur de fichiers sur le répertoire "\\Tutoriel\\WB\\Exercices\\Mon_Site_WEBDEV".

	3. Copiez via l'explorateur de fichiers, les fichiers "Produit.fic", "Produit.mmo" et "Produit.ndx" présents dans le répertoire "\\Tutoriel\\WB\\Exercices\\Mon_Site_WEBDEV" vers le sous-répertoire EXE du répertoire de votre projet.
			Remarque : il y a 3 fichiers à copier : 

		- "Produit.fic" : fichier contenant les données, 

		- "Produit.mmo" : fichier mémo contenant les images des produits, 

		- "Produit.ndx" : fichier contenant les index pour optimiser les recherches dans le fichier de données. 







<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Création des liaisons
<a name="creation_des_liaisons_ELTTEXTE000966"></a>
Nous avons créé toutes les descriptions des fichiers de données nécessaires à l'application de gestion de produits.

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%205%20-%20Import%20FIC%20WB%20-%20HC%20N%B0001.jpg&type=thumb)
Maintenant nous allons créer les liaisons entre les fichiers de données. Une liaison permet de définir les contraintes d'intégrité (cardinalités) entre deux fichiers de données. 



- Créons tout d'abord la liaison entre le fichier de données "Client" et le fichier de données "Commande" : un client peut avoir une ou plusieurs commandes, et chaque commande est liée à un client.

	1. Sous le volet "Analyse" (présent dans le ruban), dans le groupe "Création", cliquez sur "Nouvelle liaison". Le curseur de la souris se transforme en crayon.

	2. Cliquez sur le fichier de données "Client" puis sur le fichier de données "Commande".

	3. L'assistant de création d'une liaison se lance.

	4. Répondez aux questions posées par l'assistant : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%206%20-%20Liaisons%20WB%20-%20HC%20N%B0001.jpg&type=thumb)


		- Chaque Client a au moins une Commande : Non

- Chaque Client peut avoir plusieurs Commandes : Oui

- Chaque Commande a au moins un Client : Oui

- Chaque Commande peut avoir plusieurs Clients : Non
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Vous pouvez également saisir directement les cardinalités de la liaison dans l'assistant.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%206%20-%20Liaisons%20WB%20-%20HC%20N%B0001%201.jpg)<br> |





5. Passez à l'étape suivante. L'assistant propose automatiquement la clé utilisée par la liaison (IDClient).
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%206%20-%20Liaisons%20WB%20-%20HC%20N%B0002.jpg&type=thumb)




- De la même manière, créez une liaison entre les fichiers de données "ModeRèglement" et "Commande". Ces deux fichiers de données sont liés de la façon suivante :

	- Une commande doit avoir un mode de règlement.

	- Un mode de règlement peut être utilisé dans plusieurs commandes.


 Dans l'assistant :

- Les cardinalités sont les suivantes : ModeRèglement (0,n), Commande (1,1).

- La clé de liaison correspond à la rubrique "Code".




- Nous allons maintenant créer une liaison entre les fichiers de données "Commande" et "Produit". Cette liaison va nous permettre de créer un fichier de liaison, le fichier de données correspondant aux lignes de commande.

	1. Créez de la même manière la liaison entre les fichiers de données "Commande" et "Produit".

	2. Répondez aux questions posées par l'assistant :

		- Chaque Commande a au moins un Produit : Non

		- Chaque Commande peut avoir plusieurs Produits : Oui

		- Chaque Produit a au moins une Commande : Non

		- Chaque Produit peut avoir plusieurs Commandes : Oui
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%206%20-%20Liaisons%20WB%20-%20HC%20N%B0004.jpg&type=thumb)







Nous allons maintenant modifier le fichier de relation qui a été créé par WEBDEV. En effet, ce fichier va contenir les lignes de commande.

Nous allons :

- Modifier le nom du fichier de relation.

- Modifier le nom de ses rubriques.

- Ajouter des rubriques pour connaître la quantité de produits commandés et le total de la ligne de commande.




- Nous allons tout d'abord renommer le fichier de relation. Nous avons déjà réalisé une manipulation similaire lorsque nous avons changé le libellé du fichier de données importé. Mais ici, ce n'est pas juste un libellé qui va être modifié : nous allons également renommer le fichier physique lié à la description du fichier de données.

	1. Sélectionnez le fichier de données "Commande_Produit". Dans le menu contextuel, sélectionnez l'option "Description du fichier de données".

	2. Dans la fenêtre qui s'affiche, modifiez :

		- le nom du fichier de données par "LigneCommande".

		- le nom sur le disque par "LigneCommande".
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0001.jpg&type=thumb)







- Nous allons maintenant modifier les rubriques de ce fichier de relation.

	1. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0001%201.jpg)
 (en bas à gauche) pour afficher la description des rubriques du fichier de données.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0002.jpg)


	2. Ce fichier de données comporte 3 rubriques. Positionnez le bandeau de sélection sur la rubrique "IDCommande_Référence". Cette rubrique est une clé composée.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Une clé composée est un ensemble de rubriques constituant un index.<br><br>Ce type de clé permet de parcourir le fichier de données sur des critères complexes ou de faire des recherches sur plusieurs rubriques simultanément. |





3. Pour renommer cette rubrique :

	- Cliquez dans la colonne "Nom".

	- Remplacez "IDCommande_Référence" par "IDLigneCommande".

	- Cliquez dans la colonne "Libellé".

	- Remplacez le libellé actuel par "Identifiant de LigneCommande".




- Nous allons maintenant ajouter 3 nouvelles rubriques dans ce fichier de relation : Quantité, TotalTTC et TotalHT.

	1. Positionnez-vous sur une nouvelle ligne et créez la rubrique "Quantité". Cette rubrique est de type "Numérique".

	2. Positionnez-vous sur une nouvelle ligne de la table et créez la rubrique "TotalTTC". Cette rubrique est de type "Monétaire".

	3. Une fenêtre s'affiche, indiquant que la rubrique existe déjà dans l'analyse et proposant de reprendre ses caractéristiques : ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0003.jpg)


	4. Conservez les options sélectionnées par défaut et validez (bouton "OK").

5. Positionnez-vous sur une nouvelle ligne de la table et créez la rubrique "TotalHT". Cette rubrique est de type "Monétaire". Là encore, reprenez la description existante.

6. La description des rubriques pour le fichier de données "LigneCommande" est la suivante.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0004.jpg)




- L'analyse est alors la suivante : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0005.jpg&type=thumb)





<a name="NOTE7"></a>
<a name="NOTE7_1"></a>


## Génération de l'analyse
<a name="generation_analyse_ELTTEXTE001026"></a>
La génération de l'analyse consiste à valider les modifications de l'analyse (création de fichiers de données, ajout ou suppression de rubriques, ...) et à les propager dans tout le projet (pages, champs reliés, états, ...).

La génération (synchronisation) de l'analyse est automatiquement proposée à la fermeture de l'éditeur d'analyses si des modifications ont été effectuées.

Il est également possible de générer l'analyse manuellement. C'est ce que nous allons faire.

- Pour générer l'analyse :

	1. Dans le ruban de l'éditeur d'analyses, sous le volet "Analyse", dans le groupe "Analyse", cliquez sur "Génération". 

	2. La génération de l'analyse est automatiquement lancée.





Nous avons modifié les descriptions des fichiers de données présents dans l'analyse.

- Pour mettre à jour les fichiers de données de l'application, WEBDEV propose de lancer la synchronisation de la structure des données déployées (appelée également "procédure de modification des fichiers de données"). Cette opération permet de mettre à jour les fichiers de données physiques (fichiers ".fic") en fonction de leur description dans l'analyse.




- Cliquez sur le bouton "Lancer". 




- L'assistant de modification automatique se lance. 

	1. Validez les différentes étapes de l'assistant jusqu'à l'étape listant les fichiers de données à prendre en compte : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_Ma%20Premi%E8re%20Base%20-%207%20-%20Ligne%20de%20commande%20WB%20-%20HC%20N%B0006.jpg&type=thumb)


		- Le fichier de données ModeRèglement nécessite une mise à jour. Conservez ce fichier sélectionné.

- Le fichier de données Produit a été copié dans le répertoire du projet. WEBDEV propose de l'associer à cette analyse. Cochez le fichier de données. 

2. Passez à l'étape suivante.

3. L'assistant propose de réaliser une sauvegarde des fichiers de données existants, ne changez rien et passez à l'étape suivante.

4. L'assistant propose de saisir des mots de passe de protection des fichiers de données modifiés par la modification automatique. Conservez les options par défaut et passez à l'étape suivante.

5. La liste des fichiers de données à modifier apparaît. Terminez l'assistant.

6. La mise à jour des fichiers de données est effectuée.




- Fermez l'éditeur d'analyses.




Vous venez de découvrir les principales étapes pour la création d'une analyse.

Lorsque votre analyse est décrite et générée, il est possible de :

- Créer un site complet grâce au RAD (Rapid Application Development). 
	Pour plus de détails, consultez [Créer une application grâce au RAD](../Editeurs/2031042.md). 

- Créer un site complet entièrement personnalisé. Cette méthode sera utilisée pour développer un site complet basé sur une base de données dans la partie 3 de ce tutoriel. Ce site sera basé sur une analyse correspondant à celle que vous avez créée dans cette partie.




| [Leçon précédente](../TutoWB/1410087411.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087488.md) |
| --- | --- | --- |




