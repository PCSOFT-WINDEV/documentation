
## Leçon 1.3. Mes premières pages


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000767"></a>


- Création d'une page formulaire.

- Enregistrement des données.

- Contrôles de saisie.

- Recherche simple dans une base de données.





|   |   |
| --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 30 mn |

| [Leçon précédente](../TutoWB/1410087405.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087411.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000814"></a>
Pour commencer à développer avec WEBDEV, nous allons simplement créer quelques pages.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Les pages permettent d'afficher ou de saisir à l'écran des informations. L'internaute peut agir directement sur les pages par l'intermédiaire de champs, de boutons, etc. |



Ces quelques exemples vous permettront de comprendre le fonctionnement des sites Internet/Intranet et vous permettront de manipuler votre première base de données.


### Ouverture du projet
<a name="ouverture_projet_ELTPARAGRAPHE000034"></a>

- Lancez WEBDEV 28 (si ce n'est déjà fait). 




- Ouvrez le projet "Mes_Premieres_Pages". 

	1. Affichez la page d'accueil de WEBDEV (Ctrl + &lt;). 

	2. Cliquez sur "Tutoriel" puis dans la zone "Partie 1 - Leçon 1.3 - Mes premières pages", double-cliquez sur "Mes premières pages - Exercice".





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=avertissement.png)<br> | Important ! | Dans cette partie, nous nous concentrons sur la création de pages simples. Le projet "Mes_Premieres_Pages" est un projet vide, déjà créé.<br><br>La création d'un projet sera abordée dans une prochaine leçon. |




|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=exemple-WB.png)<br> | Corrigé | Un projet corrigé est disponible. Ce projet contient les différentes pages créées dans cette leçon. Pour ouvrir le projet corrigé, dans la page d'accueil de WEBDEV, cliquez sur "Tutoriel" puis dans la zone "Partie 1 - Leçon 1.3 - Mes premières pages", double-cliquez sur "Mes premières pages - Corrigé". |





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Création d'une page "formulaire"
<a name="creation_une_page_formulaire_ELTTEXTE000898"></a>
Nous allons créer un formulaire d'inscription. Ce formulaire va contenir plusieurs champs permettant d'identifier la personne. 


### Création de la page
<a name="creation_page_ELTPARAGRAPHE000063"></a>

- Pour créer la page :

	1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Cr%E9er_WB_GAF.jpg)
 parmi les boutons d'accès rapide. ![Bouton de création (boutons d'accès rapide)](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20pages%20-%20Nouvelle_page%20-%20HC%20N%B0001.jpg)


	2. La fenêtre de création d'un nouvel élément s'affiche. Cette fenêtre permet de créer tous les éléments pouvant être associés à un projet.

3. Cliquez sur "Page" puis sur "Page". L'assistant de création d'une page s'affiche.

4. Sélectionnez "Vierge". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20pages%20-%20Nouvelle_page%20-%20HC%20N%B0002.jpg&type=thumb)


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Pour chaque page créée sous l'éditeur, WEBDEV génère plusieurs types de fichiers :<br><br>- Un fichier "WWH" qui contient la description de la page pour l'éditeur de pages. Ce fichier est enregistré dans le répertoire du projet.<br><br>- Un fichier "AWL" qui correspond à la description de la page pour le moteur WEBDEV dans le sous-répertoire EXE du projet.<br><br>- Un fichier "HTM" qui contient le code HTML et le code Javascript de la page destiné à être envoyé au navigateur. Ce fichier est enregistré dans le sous-répertoire "\\&lt;Nom du projet&gt;_WEB\\XX" (un sous-répertoire par langue, par exemple "FR" pour la langue française, "UK" pour la langue anglaise, ...).<br><br><br> |






### Création des champs
<a name="creation_des_champs_ELTPARAGRAPHE000094"></a>Nous allons créer les différents champs du formulaire. Ces champs permettront à l'utilisateur de renseigner les données nécessaires à l'inscription.

Le formulaire est constitué des champs suivants :

- Nom.

- Prénom.

- Adresse.

- Email.

- Login.

- Mot de passe.


Tous ces champs sont des champs de saisie, dans lesquels l'utilisateur va saisir des données.

- Pour créer un champ de saisie :

	1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_champ_saisie_WB_GAF.jpg)
. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0003%201.jpg)


	2. Le champ en création suit le mouvement de la souris.

3. Cliquez dans la page vierge pour créer le champ. Le champ est créé et des poignées sont affichées pour indiquer que le champ est sélectionné.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Vous devez créer un champ ? Affichez le volet "Création" de WEBDEV : tous les champs disponibles sont accessibles dans ce volet. |








- Pour modifier le libellé du champ :

	1. Cliquez sur le champ (simple clic) : le libellé passe en édition. Si vous préférez utiliser le clavier, il suffit d'appuyer sur la touche Espace ou sur la touche Entrée pour faire passer le libellé en édition. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0004.jpg)


	2. Saisissez "Nom" et validez avec la touche Entrée. Le libellé est immédiatement modifié. Le nom du champ est également modifié : il apparaît dans la bulle d'aide en survol du champ : SAI_Nom. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0005.jpg)


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Observez bien le nom du champ que WEBDEV propose par défaut : ce nom commence par les lettres "SAI_". Ce préfixe est automatiquement ajouté car le projet utilise une charte de programmation.<br><br>La charte de programmation permet de définir un préfixe pour chaque type d'objet et ainsi d'identifier rapidement l'élément manipulé :<br><br>- une page commence par "PAGE_" (nous l'avons vu lors de l'enregistrement de la page).<br><br>- un champ de saisie commence par "SAI_".<br><br>- un bouton commence par "BTN_", etc.<br><br><br>Si vous ne voulez pas utiliser cette charte, il suffit de la débrancher : dans le ruban, sous le volet "Projet", dans le groupe "Autres actions", déroulez "Charte" et décochez l'option "Utiliser la charte". |







- Pour modifier plus en détail les caractéristiques du champ, il suffit de double-cliquer sur le champ. Une fenêtre de description du champ apparaît : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0006.jpg&type=thumb)





- Nous allons par exemple modifier la taille maximale de saisie : il suffit de saisir la nouvelle taille (30 dans notre cas) dans le champ "Taille de saisie (caractères)". De nombreuses autres caractéristiques sont modifiables. Pour enregistrer les modifications, cliquez sur le bouton "OK" de validation.




- Maintenant, à vous de jouer. Créez de la même manière les champs de saisie suivants, en dessous du champ "Nom" : 
	

| Libellé | Type | Taille |
| --- | --- | --- |
| Prénom | Texte | 30 |
| Adresse | Texte multiligne |   |
| Email | Texte | 255 |
| Login | Texte | 10 |
| Mot de passe | Mot de passe | 10 |




Comme vous l'avez remarqué, ces champs ne sont pas tous du même type. Pour modifier le type du champ de saisie, affichez simplement la fenêtre de description du champ. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20IHM%20-%20HC%20N%B0007.jpg&type=thumb)
La base du formulaire est créée. Nous allons maintenant l'améliorer.

Voici la page que nous voulons obtenir : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20Corrig%E9%20-%20HC%20N%B0001.jpg)


- Le champ de saisie "Adresse" permet de saisir plusieurs lignes.

- Les différents champs de saisie sont alignés.

- Les champs "Login" et "Mot de passe" ont un libellé rouge.





### Améliorations de la page
<a name="ameliorations_page_ELTPARAGRAPHE000216"></a>Nous allons réaliser quelques modifications dans l'interface de cette page.

Tout d'abord, regardons le champ "Adresse". Ce champ doit afficher plusieurs lignes à l'écran. Nous allons donc l'agrandir.

Ensuite, nous alignerons les champs dans la page.

Enfin, nous modifierons le style des champs "Login" et "Mot de passe".

- Pour agrandir le champ "Adresse" :

	1. Cliquez sur le champ "Adresse".

	2. Des poignées apparaissent.

	3. Saisissez avec la souris la poignée en bas de la zone de saisie et agrandissez la zone.







- Vous pouvez ainsi agrandir en largeur les différents champs de la page.




- Pour aligner les champs de la page :

	1. Sélectionnez le champ "Nom" puis tous les autres champs de saisie de la page (en maintenant la touche Ctrl appuyée et en cliquant sur les différents champs).
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Attention : le premier champ sélectionné est important. En effet, les options d'alignement se basent sur :<br><br>		- La taille du premier champ sélectionné : elle va servir de référence pour la taille des autres champs.<br><br>		- La position du premier champ sélectionné : tous les champs sélectionnés seront alignés par rapport au premier champ sélectionné.<br><br><br> |





	2. Affichez le volet "Alignement" du menu de WEBDEV. Ce volet contient toutes les options d'alignement disponibles pour les champs. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20Corrig%E9%20-%20HC%20N%B0002.jpg&type=thumb)


	3. Nous voulons que les bords gauches et droits des champs soient alignés. Cliquez sur l'option "Justifier (Int et Ext)".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Si vous ne savez pas quel alignement choisir, survolez les différentes options proposées par le volet "Alignement" de WEBDEV. Lors du survol avec la souris d'une option, les champs sélectionnés dans la page sont automatiquement positionnés en fonction de l'option survolée.<br><br>Si le positionnement vous convient, il suffit de cliquer sur l'option.<br><br>Si le positionnement ne vous convient pas, il suffit de cliquer dans la page : les champs sont replacés à leur position d'origine. |





4. Enregistrez la page : cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Sauver_WB_GAF.jpg)
 parmi les boutons d'accès rapide (ou utilisez le raccourci Ctrl + S).





### Modification du style des champs "Login" et "Mot de passe"
<a name="modification_style_des_champs_login_mot_passe_ELTPARAGRAPHE000260"></a>Pour afficher en rouge le libellé des champs "Login" et "Mot de passe", nous allons modifier le style par défaut associé à ces champs.



- Pour modifier le style par défaut :

	1. Sélectionnez le champ "Login".

	2. Affichez la fenêtre de description du champ (double-cliquez sur le champ par exemple).

	3. Dans l'onglet "Style", sélectionnez l'élément "Libellé (CSS)".

	4. Déroulez la combo "Couleur" et sélectionnez la couleur rouge. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20Style%20-%20HC%20N%B0001.jpg&type=thumb)

			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Afin de réutiliser ce style, il est possible de l'ajouter à la feuille de styles du projet. Il suffit de :<br><br>		1. Cliquer sur le bouton "Ajouter ce style au projet" dans le volet "Style WEBDEV" affiché à droite de la fenêtre de description.<br><br>		2. Donner un nom au style.<br><br>		3. Cliquer sur le bouton "Ajouter". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20Style%20-%20HC%20N%B0002.jpg)<br><br><br><br><br><br>Pour réutiliser le style créé et l'associer à un autre champ :<br><br>		1. Sélectionnez le champ dont le style doit être modifié.<br><br>		2. Affichez le menu contextuel du champ (clic droit) et sélectionnez l'option "Choisir un style WEBDEV".<br><br>		3. Dans la fenêtre qui s'affiche, sélectionnez le style voulu et validez.<br><br><br>Note : Le choix d'un style existant sera effectué dans la [leçon 5](../TutoWB/1410087494.md). |





	5. Validez la fenêtre de description du champ "Login".







- Pour appliquer ce même style au champ "Mot de passe" :

	1. Sélectionnez le champ "Mot de passe".

	2. Appuyez sur la touche F4.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | La touche de raccourci F4 permet de rejouer sur le ou les champs sélectionnés, la dernière modification effectuée. Dans notre cas, le changement de couleur est automatiquement rejoué sur le champ "Mot de passe". |





	3. Vous obtenez l'UI suivante : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20Style%20-%20HC%20N%B0003.jpg)









### Pensez mobilité
<a name="pensez_mobilite_ELTPARAGRAPHE000311"></a>Un site doit fonctionner aussi bien sur PC que sur Mobile : c'est une réalité actuelle. Le site doit être pensé dès sa conception pour une utilisation mobile. 

Pour simplifier l'utilisation de sites à la fois sur PC et sur Mobile, WEBDEV met à votre disposition les agencements. Grâce aux agencements, seule l'interface de votre page est modifiée en Mobile. Le code ne change pas. Pas besoin d'utiliser deux jeux de pages. Votre site reste le même. 

Ce premier site étant un site de découverte, nous n'utiliserons pas immédiatement les agencements. Nous aborderons ce sujet dans la [partie 8, "Site Mobile-Friendly"](../TutoWB/1410087416.md). 


### Test de la page
<a name="test_page_ELTPARAGRAPHE000323"></a>

- Lancez le test de cette page (cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Go_Page_WB_GAF.jpg)
 parmi les boutons d'accès rapide). Vous pouvez saisir des données, mais ces données ne sont ni traitées, ni enregistrées.




- Fermez le navigateur.




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Enregistrement des données dans un fichier de données
<a name="enregistrement_des_donnees_dans_fichier_donnees_ELTTEXTE001084"></a>
Lors de la création d'un formulaire, la première chose que l'on souhaite, c'est bien entendu, sauvegarder les données saisies. Ces données peuvent être enregistrées par exemple dans un fichier texte, un fichier XML ou encore une base de données.

C'est cette dernière option que nous avons choisie.

Sous WEBDEV, la description de la base de données se fait sous un éditeur spécifique, l'éditeur d'analyses. Nous verrons cet éditeur en détail dans la prochaine partie.

Dans cet exemple, nous allons définir rapidement la base de données liée aux champs que nous avons créés, grâce à une fonctionnalité très simple : la rétro-analyse.


### Création du fichier de données
<a name="creation_fichier_donnees_ELTPARAGRAPHE000345"></a>

- Pour créer automatiquement le fichier de données :

	1. Dans le ruban, sous le volet "Page", dans le groupe "Edition", déroulez "Autres actions" et sélectionnez "Générer une description de fichier".

	2. Un nouvel éditeur apparaît : l'éditeur d'analyses. L'éditeur d'analyses contient la description de tous les fichiers de données qui seront manipulés par le projet.

	3. L'assistant de génération d'un fichier de données se lance. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20pages%20-%20Analyse%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Le nom du fichier de données est automatiquement renseigné avec le nom de la page. Nous allons modifier quelques éléments :

	- Saisissez "Inscription" dans le nom.

	- Saisissez "Inscription" dans le libellé.

	- Saisissez "une inscription" dans le dernier champ.


Nous ne nous attarderons pas plus sur l'éditeur d'analyses. Nous le verrons en détail dans une prochaine leçon.


### Enregistrement des données
<a name="enregistrement_des_donnees_ELTPARAGRAPHE000393"></a>

- Revenons au formulaire d'inscription pour mettre en place l'ajout des données saisies par l'internaute dans le fichier de données. En haut de l'éditeur, se trouve la barre des documents. Dans cette barre, un bouton est affiché par document ouvert sous l'éditeur. ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20pages%20-%20Analyse%20-%20HC%20N%B0005.jpg)


	- "P" représente le projet.

- "PAGE_Formulaire" représente la page "Formulaire".




- Pour enregistrer les données depuis notre formulaire, il nous faut un champ Bouton. Ce champ permettra de valider les informations saisies dans la page et d'enregistrer les données dans le fichier de données Inscription.




- Pour créer un champ Bouton :

	1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_champ_bouton_WB_GAF.jpg)
. 

	2. Le champ en création suit le mouvement de la souris.

	3. Cliquez dans la page pour créer le champ (par exemple en dessous des champs de saisie). Le champ est créé.

	4. Appuyez sur la barre d'espace : le libellé passe en édition.

	5. Saisissez "Enregistrer".

	6. Appuyez sur la touche Entrée pour valider.







- Pour saisir le code WLangage associé au champ Bouton :

	1. Affichez le menu contextuel du champ et sélectionnez l'option "Code" (ou appuyez sur la touche F2).

	2. Les événements associés au champ sont affichés. Nous retrouvons les entêtes des événements effectués sur le serveur et les entêtes des événements effectués sur le navigateur.

	3. Nous voulons enregistrer les données dans la base de données. L'accès à la base de données peut être effectué uniquement en code Serveur : nous devons saisir le code WLangage dans l'événement "Clic Serveur" (jaune).

	4. Saisissez le code WLangage suivant :
			
		```wl
		PAGE_Formulaire.VersFichier()
		Inscription.Ajoute()
		Info("Enregistrement ajouté.")
		```


	5. Examinons ce code :

		- La fonction [&lt;Page&gt;.VersFichier](../WDLang4/1000021390.md) permet de récupérer le contenu des champs de saisie de la page pour le transférer vers le fichier de données.

		- La fonction [&lt;Fichier de données&gt;.Ajoute](../WDLang4/1000024187.md) permet d'écrire dans le fichier de données les données transférées.

		- La fonction [Info](../WDLang1/3021011.md) permet d'afficher un message.




6. Sauvez (Ctrl + S) et fermez l'éditeur de code (croix en haut à droite).





### Test de la page
<a name="test_page_ELTPARAGRAPHE000447"></a>

- Lancez le test de cette page :

	1. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Go_Page_WB_GAF.jpg)
 parmi les boutons d'accès rapide.

	2. La page s'affiche dans un navigateur. 

	3. Saisissez les données suivantes :

		- Nom : Dupont

		- Prénom : Paul

		- Adresse : Rue des fleurs, 75000 Paris

		- Email : paul.dupont@hautrange.fr

		- Login : polo

		- Mot de passe : polo




4. Cliquez sur le bouton "ENREGISTRER". Le navigateur affiche un message pour indiquer que l'enregistrement est ajouté !

5. Fermez le navigateur.





### Visualisation des données saisies
<a name="visualisation_des_donnees_saisies_ELTPARAGRAPHE000467"></a>WEBDEV propose un outil simple permettant de voir le contenu des fichiers de données pendant le développement du site (lorsque par exemple, les pages de visualisation n'ont pas encore été créées).

Cet outil s'appelle WDMap. Nous allons l'utiliser pour vérifier si les informations saisies sont bien enregistrées.

- Pour lancer WDMap :

	1. Dans le ruban, sous le volet "Outils", dans le groupe "Base de données", cliquez sur "WDMap". 

	2. Sélectionnez le fichier de données "Inscription". Le contenu du fichier de données s'affiche. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_WDMap%20-%20HC%20N%B0001.jpg&type=thumb)


	3. Nous retrouvons bien les données saisies.

4. Fermez WDMap (bouton "Fermer").




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Ajout de contrôles de saisie
<a name="ajout_controles_saisie_ELTTEXTE001150"></a>
Nous allons maintenant améliorer notre formulaire en ajoutant des contrôles de saisie. Nous allons :

- rendre obligatoire la saisie du nom, de l'email et du login.

- faire saisir le mot de passe en double pour le vérifier.





### Saisie obligatoire
<a name="saisie_obligatoire_ELTPARAGRAPHE000504"></a>

- Revenez si nécessaire sur la page "PAGE_Formulaire" en cliquant sur son nom dans la barre des documents ouverts.




- Pour rendre obligatoire la saisie dans le champ "Nom" :

	1. Double-cliquez sur le champ "Nom" : la fenêtre de description du champ apparaît.

	2. Affichez le volet "Détail".

	3. Cochez l'option "Saisie obligatoire". Si cette option est cochée, WEBDEV va automatiquement vérifier si ce champ de saisie a été renseigné.

	4. Validez la fenêtre de description. 







- Pour appliquer cette modification au champ "Email" :

	1. Sélectionnez le champ "Email" (clic de souris).

	2. Appuyez sur la touche F4 : la dernière action effectuée sur un champ est ré-exécutée sur le champ sélectionné.







- Appliquez de la même manière cette modification au champ "Login".




- Lancez le test de cette page :

	1. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Go_Page_WB_GAF.jpg)
 parmi les boutons d'accès rapide.

	2. Dans la page qui s'affiche, cliquez sur le bouton "ENREGISTRER".

	3. Une boîte d'information est automatiquement affichée pour indiquer que des champs obligatoires n'ont pas été remplis. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20Pages%20-%20Partie%203%20-%20HC%20N%B0001.jpg&type=thumb)


	4. Validez la boîte d'information.

5. Fermez le navigateur.





### Vérification du mot de passe
<a name="verification_mot_passe_ELTPARAGRAPHE000534"></a>Pour vérifier le mot de passe, nous allons tout d'abord créer le champ de saisie permettant à l'utilisateur de saisir à nouveau son mot de passe. Ensuite, nous saisirons le code WLangage nécessaire à la vérification.



- Créez un nouveau champ de saisie. Ce champ a pour libellé "Vérification" et est de type "Mot de passe".




- Le code WLangage de vérification du mot de passe doit être saisi dans les événements associés au champ Bouton "ENREGISTRER".

	1. Cliquez sur le champ Bouton "ENREGISTRER" et appuyez sur la touche F2.

	2. Cette vérification consiste à comparer la valeur saisie dans le champ "Mot de passe" et celle saisie dans le champ "Vérification". Pour effectuer cette vérification, le serveur est inutile : cette vérification peut être effectuée en local dans le navigateur.

	3. Nous allons donc saisir le code suivant dans l'événement navigateur "Clic" :
			
		```wl
		SI SAI_Mot_De_Passe <> SAI_Vérification ALORS
			Info("Erreur, les mots de passe sont différents.")
			SAI_Mot_De_Passe = ""
			SAI_Vérification = ""
			DonneFocusEtRetourUtilisateur(SAI_Mot_De_Passe)
		FIN
		```


	4. Examinons ce code :

		- L'instruction [SI](../Motscles/1510011.md) permet de faire une action sur une condition. Dans notre cas, l'action est faite si les champs "Mot de passe" et "Vérification" sont différents (opérateur ‘&lt;&gt;'). 

		- En cas de différence, les champs de saisie sont "vidés" : on leur affecte une chaîne vide.

		- La fonction [DonneFocusEtRetourUtilisateur](../WDLang1/1410088107.md) permet de remettre le curseur dans le champ indiqué (ici, le champ "Mot de passe") sans effectuer le code qui suit. Dans notre cas, si les mots de passe saisis sont différents, le champ "Mot de passe" reprend le focus et le code en cours d'exécution est arrêté : le code serveur qui permet d'enregistrer les informations dans la base de données ne sera pas effectué.







- Lancez le test de cette page :

	1. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Go_Page_WB_GAF.jpg)
 parmi les boutons d'accès rapide.

	2. Dans la page qui s'affiche dans un navigateur, saisissez les informations suivantes :

		- Nom : "Dupont"

		- Prénom : "Pierre"

		- Email : "Pierre.Dupont@gmail.com"

		- Login : "Pierre"

		- Mot de passe : "Pierre"

		- Vérification : "Louis"




3. Cliquez sur le bouton "ENREGISTRER".

4. Un message d'erreur est automatiquement affiché pour indiquer que les mots de passe sont différents.

5. Validez ce message.

6. Fermez le navigateur.




<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Recherche simple dans une base de données
<a name="recherche_simple_dans_une_base_donnees_ELTTEXTE001186"></a>
Nous avons vu comment créer un formulaire de saisie et enregistrer des valeurs dans une base de données. Continuons notre première découverte de WEBDEV en réalisant une recherche dans la base de données.

Nous allons créer une page de login dans laquelle nous saisirons le login et le mot de passe. Nous contrôlerons ensuite si ces informations sont correctes.


### Création de la page
<a name="creation_page_ELTPARAGRAPHE000589"></a>

- Pour créer la page :

	1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Cr%E9er_WB_GAF.jpg)
 parmi les boutons d'accès rapide.

	2. La fenêtre de création d'un nouvel élément s'affiche.

	3. Cliquez sur "Page" puis sur "Page". L'assistant de création d'une page s'affiche.

	4. Sélectionnez "Vierge". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20pages%20-%20Nouvelle_page%20-%20HC%20N%B0002.jpg&type=thumb)


	5. Validez.

6. La page est créée et la fenêtre de sauvegarde est automatiquement affichée.

7. Saisissez le titre de la page : "Login".

8. Validez.





### Création des champs
<a name="creation_des_champs_ELTPARAGRAPHE000606"></a>La page de login va contenir les champs suivants :

- Deux champs de saisie :

	- "Login" pour saisir le login.

	- "Mot de passe" pour saisir le mot de passe.




- Deux champs Bouton :

	- "Se connecter" pour vérifier le login et le mot de passe.

	- "S'inscrire" pour ouvrir la page d'inscription (que nous avons déjà créée).







Nous avons déjà créé ces types de champ, voici un rappel des manipulations à faire :

- Pour créer le champ de saisie :

	1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_champ_saisie_WB_GAF.jpg)
.

	2. Cliquez dans la page vierge pour créer le champ.

	3. Cliquez sur le champ (simple clic) : le libellé passe en édition.

	4. Saisissez le libellé ("Login" et "Mot de passe") et validez avec la touche Entrée. Le libellé est immédiatement modifié.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Le champ "Mot de passe" doit être de type "Mot de passe". Pour modifier le type du champ de saisie, affichez simplement la fenêtre de description du champ. |











- Pour créer chaque champ Bouton :

	1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_champ_bouton_WB_GAF.jpg)
.

	2. Cliquez dans la page pour créer le champ Bouton (par exemple en dessous des champs de saisie). Le champ est créé.

	3. Appuyez sur la barre d'espace : le libellé passe en édition.

	4. Saisissez le libellé ("Se connecter" et "S'inscrire") et validez avec la touche Entrée. Le libellé est immédiatement modifié.







- Vous obtenez la page suivante : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20pages%20-%20Partie%203%20-%20HC%20N%B0002.jpg&type=thumb)





- Nous allons maintenant voir en détail le fonctionnement des champs Bouton. Tout d'abord, occupons-nous du champ Bouton "S'INSCRIRE".

	1. Sélectionnez le champ Bouton "S'INSCRIRE".

	2. Affichez la fenêtre de description du champ (double-clic sur le champ).

	3. Dans l'onglet "Général", dans la zone "Action du bouton", nous allons indiquer l'action à effectuer. Dans notre cas, nous allons ouvrir la page d'inscription : 

		- Dans la zone "Type", sélectionnez "Afficher une page du site". 

		- Dans la zone "Page", sélectionnez "PAGE_Formulaire". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P1_Mes%20Premi%E8res%20pages%20-%20Partie%203%20-%20HC%20N%B0003.jpg&type=thumb)







- Pour le champ Bouton "SE CONNECTER", il est nécessaire de saisir le code WLangage permettant de réaliser la recherche :

	1. Sélectionnez le champ Bouton "SE CONNECTER" et affichez les événements associés (touche F2).

	2. Saisissez le code WLangage suivant dans l'événement "Clic xxx (serveur)" :
			
		```wl
		Inscription.LitRecherchePremier(Login, SAI_Login)
		SI PAS Inscription.Trouve() ALORS
			Erreur("Login inconnu.")
			RETOUR
		FIN
		
		SI SAI_Mot_De_Passe = Inscription.Mot_De_Passe ALORS
			Info("OK, vous êtes connecté.")
		SINON
			Erreur("Mot de passe incorrect.")
		FIN
		```


	3. Examinons ce code WLangage :

		- Ce code est exécuté en code serveur car nous réalisons une recherche dans la base de données qui est sur le serveur.

		- La fonction [&lt;Fichier de données&gt;.LitRecherchePremier](../WDLang4/1000025034.md) permet de rechercher une valeur dans un fichier de données (ici, le fichier de données "Inscription"). Par défaut, la recherche est faite sur le nom entier. Pour effectuer une recherche de type "Commence par", il suffit d'ajouter un paramètre, la constante ***hGénérique***.

		- La fonction [&lt;Fichier de données&gt;.Trouve](../WDLang4/1000025076.md) permet de savoir si la recherche a réussi ou non dans le fichier de données Inscription. Le code "SI PAS Inscription.Trouve" permet de définir l'action si le login n'est pas trouvé (affichage de "Login inconnu"). Le mot-clé RETOUR permet dans ce cas de sortir du traitement en cours. En effet, si le Login n'est pas trouvé, il n'est pas nécessaire d'exécuter le code suivant.

		- Si le login est trouvé, le mot de passe saisi dans le champ SAI_Mot_De_Passe est comparé à celui trouvé dans le fichier de données (pour le login spécifié). Si les deux mots de passe sont égaux, alors l'internaute est connecté, sinon un message d'erreur est affiché.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Le code présenté ici est purement didactique. Dans un projet réel :<br><br>			- Le mot de passe ne doit pas être stocké en clair. Il est conseillé de crypter le mot de passe. <br><br>			- Il est conseillé d'afficher le même message d'erreur en cas de login ou de mot de passe incorrect (pour éviter une tentative de piratage des logins).<br><br><br> |








4. Sauvez (Ctrl + S) et fermez l'éditeur de code (croix en haut à droite).





### Test de la page
<a name="test_page_ELTPARAGRAPHE000705"></a>

- Lancez le test de cette page :

	1. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Go_Page_WB_GAF.Jpg)
 parmi les boutons d'accès rapide.

	2. Dans la page qui s'affiche dans un navigateur, saisissez les données suivantes :

		- Login : polo

		- Mot de passe : polo1




3. Cliquez sur le bouton "SE CONNECTER". Un message d'erreur est affiché.

4. Validez le message et modifiez le mot de passe : "polo".

5. Cliquez sur le bouton "SE CONNECTER". Vous êtes connecté.

6. Fermez le navigateur.




<a name="NOTE7"></a>
<a name="NOTE7_1"></a>


## Conclusion
<a name="conclusion_ELTTEXTE001282"></a>
En faisant uniquement deux pages, nous avons vu de nombreuses possibilités de WEBDEV :

- la création des champs : champs de saisie et champs Bouton,

- les possibilités d'alignement et d'organisation des champs dans la page,

- l'ajout d'enregistrements dans des fichiers de données,

- l'enchaînement des pages,

- la recherche d'enregistrements dans les fichiers de données,

- l'utilisation des événements WLangage serveur et navigateur,

- ...


Après ce survol, nous allons dans la prochaine partie nous pencher plus précisément sur l'analyse et la définition des caractéristiques de la base de données avant d'aborder le développement d'un site complet.

| [Leçon précédente](../TutoWB/1410087405.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087411.md) |
| --- | --- | --- |




