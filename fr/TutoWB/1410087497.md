
## Leçon 5.4. Identifier l'utilisateur : le groupware utilisateur


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000337"></a>


- Qu'est-ce le groupware utilisateur ?

- Intégrer le groupware utilisateur.

- Configurer le groupware utilisateur.

- Tester le groupware utilisateur.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 20 mn |

| [Leçon précédente](../TutoWB/1410087496.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087498.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000384"></a>
Un site peut être utilisé par différents intervenants, ayant tous des profils différents. Il est souvent nécessaire de prévoir des niveaux d'accès selon l'identité de l'internaute (client, commercial, directeur par exemple).

Prenons un exemple simple : lors de la mise en place d'un site de vente, le site propose les ­fonctionnalités suivantes :

- Consultation du tarif,

- Modification du tarif,

- Saisie des commandes,

- Gestion des clients.


Selon l'internaute, les accès possibles sont différents. Quelques exemples :

- les internautes clients peuvent consulter le tarif et créer des commandes.

- les commerciaux peuvent consulter le tarif et établir les commandes, gérer de nouveaux clients.

- les directeurs commerciaux ont accès à toutes les options.




WEBDEV permet de gérer ces différents niveaux d'accès en quelques clics dans vos sites grâce au groupware utilisateur.

Nous allons intégrer le groupware utilisateur dans notre site "Site_WEBDEV_Complet" et le configurer pour limiter les accès à la page d'ajout des produits.



- Ré-ouvrez si nécessaire le projet que vous avez manipulé dans la leçon précédente. 

	1. Affichez la page d'accueil de WEBDEV (Ctrl + &lt;).

	2. Dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 3 à 6", double-cliquez sur "Site WEBDEV Complet - Exercice".

	3. WEBDEV vous propose d'ouvrir le projet que vous avez manipulé dans la leçon précédente. Vous pouvez ouvrir le projet présent sur votre poste ou ouvrir le projet original. Choisissez "Ouvrir la copie locale". 





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=exemple-WB.png) | Corrigé | Un projet corrigé est disponible. Ce projet vous permet de suivre cette leçon. Pour ouvrir le projet corrigé, dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 3 à 6", double-cliquez sur "Site WEBDEV Complet - Corrigé". |









<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Intégrer le groupware utilisateur
<a name="integrer_groupware_utilisateur_ELTTEXTE000426"></a>


- Pour intégrer le groupware utilisateur dans le projet "Site_WEBDEV_Complet" :

	1. Sous le volet "Projet", dans le groupe "Projet", cliquez sur "Groupware Utilisateur". La fenêtre de configuration de la plateforme en cours apparaît, positionnée sur l'onglet "GPU/Store Privé".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | Le groupware utilisateur peut être configuré pour une seule des configurations de projet de votre projet. Lors du test du projet, la fenêtre de connexion au groupware utilisateur ne sera affichée que lors du test de la plateforme pour laquelle le groupware a été défini. |





	2. Dans la zone "Groupware utilisateur", cliquez sur "Modifier". 

	3. La fenêtre de paramétrage du groupware utilisateur s'affiche. Activez le groupware utilisateur en cliquant sur "Actif". 

	4. Sélectionnez les options "Groupware utilisateur classique" et "Lancement manuel par un modèle de champs". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0001.jpg&type=thumb)

			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | **Lorsque le groupware utilisateur est en mode "Lancement automatique"**, une page de connexion standard est proposée. Si l'utilisateur renseigne son login et mot de passe, il peut accéder au site.<br><br>**Lorsque le groupware utilisateur est en mode "Lancement manuel par un modèle de champs"**, le développeur dispose d'un modèle de champs spécifique. Ce modèle de champs permet d'intégrer dans sa page un lien qui permettra à l'utilisateur de se connecter. Nous allons présenter cette solution dans ce cours, car elle est flexible et facilement intégrable. |





	5. Validez. Un message apparaît indiquant que par défaut, un utilisateur "superviseur" est créé.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | Par défaut, un seul utilisateur existe, le superviseur. Au premier lancement du site, connectez-vous en utilisant le nom : "superviseur" et le mot de passe "superviseur". |





	6. Validez ce message. 

	7. Validez la fenêtre de description de la configuration de projet. Le groupware utilisateur est intégré dans le projet.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | Dans cet exemple, nous conservons toutes les options par défaut. De nombreuses options sont également paramétrables. <br>Pour plus de détails, consultez [Groupware utilisateur : Options et paramétrage](../Editeurs/1000021153.md). |











<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Configurer le groupware utilisateur
<a name="configurer_groupware_utilisateur_ELTTEXTE000522"></a>
La configuration du groupware utilisateur se fait directement lors de l'exécution du site. Cette configuration consiste à définir les différents utilisateurs et leurs droits sur les différentes pages et champs du site.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | La configuration des utilisateurs peut être réalisée :<br><br>- lors du développement de l'application. Les fichiers de données nécessaires (des utilisateurs et de leurs droits) pourront être installés avec le site.<br><br>- lorsque le site est installé, par l'administrateur.<br><br><br> |




<a name="NOTE4_2"></a>


### Intégration de l'espace client dans le site
<a name="integration_espace_client_dans_site_ELTPARAGRAPHE000124"></a>Dans cet exemple, nous allons intégrer le lien de connexion dans la page "PAGE_Liste_des_produits".

Le lien de connexion est fourni sous forme d'un modèle de champs.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | Un modèle de champs est une page spécifique contenant différents champs. Dans cette page, vous pouvez mettre tous types de champs. Un modèle de champs est un fichier d'extension "WDT".<br><br>L'intérêt premier d'un modèle de champs est la ré-utilisabilité. Un modèle de champs présent dans un projet peut être réutilisé dans n'importe quelle page du projet. Les modifications ne sont effectuées qu'une seule fois dans le modèle de champs et c'est WEBDEV qui reporte les modifications automatiquement.<br><br>Les modèles de champs peuvent être surchargés : du code peut être ajouté, les champs peuvent être déplacés dans la page utilisant le modèle de champs. Les champs peuvent être modifiés. |







- Pour intégrer le lien de connexion :

	1. Affichez la page "PAGE_Liste_des_produits" sous l'éditeur.

	2. Dans le volet "Explorateur de projet", dans le dossier "Composants internes", déroulez "WDGPU_WB_CNX". Ce composant interne a été intégré au projet lors de la mise en place du groupware intégré. Il comprend tous les éléments nécessaires à sa gestion, notamment le modèle de champs permettant de se connecter.

	3. Déroulez ensuite "Modèles de champs WEBDEV".<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0002.jpg)


	4. Sélectionnez le modèle de champs "MDLC_GPU_WB_Connexion" et réalisez un "Drag and Drop" vers la page "PAGE_Liste_des_produits". Déposez le modèle de champs au-dessus de la barre de menu.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0003.jpg&type=thumb)



<a name="NOTE4_3"></a>


### Test du site
<a name="test_site_ELTPARAGRAPHE000153"></a>

- Nous allons tout de suite tester notre site :

	1. Lancez le test du projet (![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Go_Projet_WB_GAF.jpg) parmi les boutons d'accès rapide).

	2. La page correspondant à la liste des produits apparaît.

	3. Cliquez sur le lien "Connexion". La page de connexion apparaît.

	4. Connectez-vous en tant que superviseur :

		- Login : superviseur

		- Mot de passe : superviseur




5. Validez.

6. La page de configuration du groupware apparaît.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0003%20B.jpg&type=thumb)



<a name="NOTE4_4"></a>


### Création des utilisateurs et des groupes
<a name="creation_des_utilisateurs_des_groupes_ELTPARAGRAPHE000173"></a>Pour configurer le groupware utilisateur, nous allons tout d'abord créer un groupe "Gestion Produits". Ce groupe regroupera les utilisateurs autorisés à modifier et à ajouter des produits dans le site.

Nous créerons ensuite un utilisateur Alice, associé au groupe "Gestion Produits".



- Pour créer un nouveau groupe d'utilisateurs :

	1. Cliquez sur l'onglet "Groupes". 

	2. Cliquez sur le bouton "Ajouter un groupe". L'écran de saisie d'un nouveau groupe apparaît.

	3. Saisissez le nom du groupe "Gestion Produits".<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0004.jpg&type=thumb)


	4. Cliquez sur le bouton "Enregistrer". Le groupe "Gestion Produits" apparaît dans la liste des groupes définis pour le groupware utilisateur.




- Pour créer un utilisateur :

	1. Cliquez sur l'onglet "Utilisateurs". 

	2. Cliquez sur le bouton "Ajouter un utilisateur". L'écran de saisie d'un nouvel utilisateur apparaît.

	3. Saisissez les informations suivantes :

		- Login : Alice

		- Prénom : Alice

		- Sélectionnez l'option "Forcer le mot de passe suivant" et indiquez le mot de passe : Alice. 
						Remarque : Il est également possible de laisser l'utilisateur choisir son mot de passe à la première connexion.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | Informations concernant l'utilisateur :<br><br>			- Dans les informations concernant l'utilisateur, seul le login est obligatoire.<br><br>			- Il est également possible de définir ici que l'utilisateur est aussi un superviseur du groupware. Dans ce cas, il sera autorisé à modifier les utilisateurs, les groupes et les droits.<br><br><br> |


<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0005.jpg&type=thumb)







- Pour associer l'utilisateur "Alice" au groupe "Gestion Produits" :

	1. Sélectionnez l'utilisateur "Alice" dans la page.

	2. Cochez la case présente en début de ligne : les boutons "Groupes de l'utilisateur" et "Supprimer l'utilisateur" apparaissent. 

	3. Cliquez sur le bouton "Groupes de l'utilisateur". 

	4. Dans la popup qui s'affiche, cochez le groupe "Gestion Produits" puis cliquez sur le bouton "Valider". 

	5. L'association est réalisée. Le nom du groupe de l'utilisateur "Alice" apparait dans la liste des utilisateurs.






<a name="NOTE4_5"></a>


### Définition des droits
<a name="definition_des_droits_ELTPARAGRAPHE000222"></a>Nous allons maintenant définir les droits d'accès au menu d'ajout d'un produit.

**Une bonne pratique en termes de sécurité consiste à interdire les accès par défaut et à autoriser l'accès aux seuls groupes souhaités**.

- Nous allons définir les droits pour les utilisateurs non connectés (c'est-à-dire non identifiés par le groupware). Ces droits seront utilisés par défaut au lancement du site, tant que l'utilisateur ne sera pas connecté.




- Pour définir les droits :

	1. Pour interdire à tous les utilisateurs d'accéder à la page d'ajout de produit, sélectionnez l'utilisateur "Visiteur (non connecté)". Chaque utilisateur non connecté est automatiquement associé à cet utilisateur.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0006.jpg&type=thumb)


	2. Cliquez sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0006%201.jpg) pour définir les droits.

3. La page qui s'affiche permet de sélectionner chaque page, modèle de pages ou état de l'application.<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0007.jpg&type=thumb)




- Dans notre cas, le lien "Ajouter un produit" est présent dans le modèle de pages "PAGEMOD_Menu" :

	1. Sélectionnez le modèle de pages "PAGEMOD_Menu" dans la liste. Les droits définis sur le modèle de pages seront reportés sur toutes les pages utilisant le modèle.

	2. Le nom des différents champs de la page apparaît à droite.

	3. Pour l'option "Option de menu Option_2", sélectionnez dans la combo "Etat" l'option "Grisé".<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0008.jpg&type=thumb)


	4. Fermez le navigateur.



<a name="NOTE4_6"></a>


### Test du site
<a name="test_site_ELTPARAGRAPHE000254"></a>

- Nous allons maintenant tester le site.

	1. Lancez le test du projet (![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Go_Projet_WB_GAF.jpg) parmi les boutons d'accès rapide).

	2. Par défaut, l'option "AJOUTER UN PRODUIT" est grisée. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P5_Groupware%20Utilisateur%20-%20HC%20N%B0009.jpg&type=thumb)


	3. Cliquez sur "Connexion" et utilisez le login "Alice" (et son mot de passe "Alice"). Validez.

4. L'option "AJOUTER UN PRODUIT" n'est plus grisée.

5. Fermez le navigateur.




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Débrancher la gestion du groupware utilisateur
<a name="debrancher_gestion_groupware_utilisateur_ELTTEXTE000630"></a>
**Dans la suite de ce cours, nous n'utiliserons plus le groupware utilisateur**. Vous pouvez donc désactiver la gestion des droits des utilisateurs dans ce projet et supprimer le modèle de champs que nous avons utilisé :

1. Sous le volet "Projet", dans le groupe "Projet", cliquez sur "Groupware Utilisateur".

2. La fenêtre de configuration de la plateforme apparaît. 

3. Dans la zone "Groupware utilisateur", cliquez sur "Modifier". 

4. Dans la fenêtre qui s'affiche, cliquez sur "Inactif".

5. Validez.

6. Ouvrez si nécessaire la page "PAGE_Liste_des_produits". 

7. Supprimez le modèle de champs "Connexion" que nous avons intégré précédemment. 

8. Enregistrez et fermez la page. 

9. Recompilez le projet : sous le volet "Projet", dans le groupe "Projet", déroulez "Recompiler et synchroniser" et sélectionnez "Recompiler le projet et générer les pages HTML". 

10. Dans le volet "Explorateur de projet", déroulez "Composants internes" et sélectionnez "WDGPU_WB_CNX". Affichez le menu contextuel (clic droit) et sélectionnez l'option "Enlever et supprimer du disque". 

11. Validez le message qui s'affiche. 


Le groupware utilisateur est supprimé du projet.  

| [Leçon précédente](../TutoWB/1410087496.md) | [Sommaire](../TutoWB/1410087510.md) | [Leçon suivante](../TutoWB/1410087498.md) |
| --- | --- | --- |




