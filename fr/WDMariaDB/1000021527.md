
## Connecteur Natif MariaDB pour WINDEV et WEBDEV
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000225"></a>
WINDEV et WEBDEV 28 proposent un Connecteur Natif à MariaDB (également appelé Accès Natif à MariaDB). Ce Connecteur Natif permet d'accéder à une base MariaDB sans drivers externes depuis un programme en WLangage.

**Attention** : Cette version du Connecteur Natif MariaDB ne fonctionne qu'avec WINDEV et WEBDEV version 28.

**Remarque** : Le Connecteur Natif MariaDB est un module optionnel et gratuit disponible en téléchargement sur [le site de PC SOFT](https://www.pcsoft.fr)





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Configuration nécessaire
<a name="configuration_necessaire_ELTTEXTE000249"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Connecteurs Natifs (Accès Natifs)](https://doc.pcsoft.fr/ext/images/fr/AN.png) 

### Conditions nécessaires à l'utilisation du Connecteur Natif MariaDB
<a name="conditions_necessaires_utilisation_connecteur_natif_mariadb_ELTPARAGRAPHE000030"></a>

- WINDEV 28 ou WEBDEV 28.

- Couche cliente de MariaDB (fichier libmariadb.DLL)

	- Couche Cliente 32 bits pour utiliser le Connecteur Natif MariaDB 32 bits (version 3.x.x à 10.x.x testée).

	- Couche Cliente 64 bits pour utiliser le Connecteur Natif MariaDB 64 bits (version 10.x.x testée).




- La DLL ***LibMariaDB.DLL*** doit être présente :

	- Sur le poste de développement : 

		- dans le répertoire "\\Programmes\\Framework\\Win32x86" du répertoire d'installation de WINDEV ou WEBDEV (32 bits).

		- dans le répertoire "\\Programmes\\Framework\\Win64x86" du répertoire d'installation de WINDEV ou WEBDEV (64 bits).




- Sur le poste de déploiement, dans le répertoire de l'exécutable ou dans le répertoire de Windows. En cas de déploiement sur un serveur Web, la DLL doit être présente dans le répertoire du Connecteur Natif ou dans le répertoire de Windows. 



<a name="NOTE3_2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Connecteurs Natifs (Accès Natifs)](https://doc.pcsoft.fr/ext/images/fr/AN.png) 

### Les fichiers nécessaires
<a name="les_fichiers_necessaires_ELTPARAGRAPHE000056"></a>Les fichiers nécessaires à l'utilisation du Connecteur Natif MariaDB sont :

- La DLL ***LibMariaDB.DLL***. Cette DLL est livrée avec MariaDB. Pour les conditions de diffusion de cette DLL, reportez-vous à la licence de MariaDB.

	- fichier version 32 bits pour utiliser le Connecteur Natif MariaDB 32 bits.

	- fichier version 64 bits pour utiliser le Connecteur Natif MariaDB 64 bits. 




- La DLL ***wd280maria.dll*** : Nécessaire au Connecteur Natif 32 bits à une base MariaDB. Ce fichier est livré avec le Connecteur Natif MariaDB pour WINDEV et/ou WEBDEV.

- La DLL ***wd280maria64.dll*** : Nécessaire au Connecteur Natif 64 bits à une base MariaDB. Ce fichier est livré avec le Connecteur Natif MariaDB pour WINDEV et/ou WEBDEV.




Pour déboguer un projet multi-configuration en configuration 32 bits et 64 bits : 

- copiez la DLL libmariadb 32 bits dans le sous-dossier EXE de la configuration 32 bits du projet. 

- copiez la DLL libmariadb 64 bits dans le sous-dossier EXE de la configuration 64 bits du projet.



<a name="NOTE3_3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Connecteurs Natifs (Accès Natifs)](https://doc.pcsoft.fr/ext/images/fr/AN.png) 

### Installation d'une nouvelle version de MariaDB
<a name="installation_une_nouvelle_version_mariadb_ELTPARAGRAPHE000081"></a>Le dialogue entre le Connecteur Natif MariaDB et MariaDB utilise la DLL LibMariaDB.DLL livrée avec MariaDB. 
Si le comportement de cette DLL est modifié (lors d'un changement de version par exemple), le Connecteur Natif peut ne plus fonctionner.

Dans l'attente d'une mise à jour qui prenne en compte ces changements de fonctionnement interne, il suffit en général d'utiliser la précédente version de la DLL LibMariaDB.DLL. Cette DLL fonctionnera en général avec la nouvelle version de MariaDB, tout en étant compatible avec le Connecteur Natif. 

<a name="NOTE3_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png)![Connecteurs Natifs (Accès Natifs)](https://doc.pcsoft.fr/ext/images/fr/AN.png) 

### Fichiers nécessaires à l'utilisation du Connecteur Natif MariaDB sous Linux
<a name="fichiers_necessaires_utilisation_connecteur_natif_mariadb_sous_linux_ELTPARAGRAPHE000094"></a>Pour utiliser le Connecteur Natif MariaDB sous Linux, les manipulations suivantes sont nécessaires :

**1.** Installez la couche client MariaDB sur le serveur. Vérifiez que la DLL ***libmariadbclient.so*** a bien été copiée dans /usr/lib.

Remarque : 

- La couche client MariaDB 32 bits doit être installée pour utiliser le Connecteur Natif MariaDB 32 bits. 

- La couche client MariaDB 64 bits doit être installée pour utiliser le Connecteur Natif MariaDB 64 bits. 


Si les DLL copiées sont du type libmariadbClient.so.12.0.0, il est nécessaire de créer un lien sur cette DLL par la ligne de code suivante :

```txt
ln -s libmariadbclient.so.12.0.0 libmariadbclient.so
```


**2.** Si vous utilisez un site WEBDEV, copiez les DLL suivantes dans le répertoire du serveur d'application WEBDEV :

- wd280hf.so : librairie HFSQL

- wd280maria.so : librairie du connecteur natif 32 bits

- wd280maria64.so : librairie du connecteur natif 64 bits

- wd280sql.so : librairie SQL




**3.** Si vous utilisez un Batch Linux, copiez les DLL suivantes dans le répertoire de l'application :

- wd280hf.so : librairie HFSQL

- wd280maria.so : librairie du connecteur natif 32 bits

- wd280maria64.so : librairie du connecteur natif 64 bits

- wd280sql.so : librairie SQL 




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Utilisation
<a name="utilisation_ELTTEXTE000291"></a>


### Utiliser le Connecteur Natif MariaDB dans vos applications WINDEV et sites WEBDEV
<a name="utiliser_connecteur_natif_mariadb_dans_vos_applications_windev_sites_webdev_ELTPARAGRAPHE000143"></a>Pour utiliser le Connecteur Natif MariaDB, il faut programmer dans l'application WINDEV ou dans le site WEBDEV :

- soit avec les fonctions "SQL" du WLangage (voir [Programmation à l'aide des fonctions SQL](../WDMariaDB/1000021529.md)).

- soit avec les fonctions "HFSQL" du WLangage (voir [Programmation à l'aide des fonctions HFSQL](../WDMariaDB/1000021528.md)).


**Remarques** : 

- N'oubliez pas de consulter les [limitations concernant l'utilisation du Connecteur Natif MariaDB.](../WDMariaDB/1000021521.md)

- L'option "Créer les fichiers de données automatiquement au moment de leur ouverture" (disponible dans l'onglet "Fichiers" de la description du projet) est prise en compte par le Connecteur Natif MariaDB. 





<a name="NOTE4_2"></a>


### Optimisations des fonctions HFSQL
<a name="optimisations_des_fonctions_hfsql_ELTPARAGRAPHE000174"></a>

- **Les champs de type "Table fichier" basés sur des requêtes sont optimisés** : il est possible de trier le contenu du champ Table en cliquant sur une de ses colonnes.

- Pour éviter de ré-exécuter plusieurs fois la même requête lors du parcours de son résultat, il est conseillé d'utiliser la constante ***hSansRafraîchir*** (par exemple si un seul poste modifie les données).







