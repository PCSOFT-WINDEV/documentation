
## hRSConfig (Type de variable)

***En anglais : hRSConfig***
				



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Le type **hRSConfig** permet de définir toutes les caractéristiques avancées d'une réplication entre 2 serveurs HFSQL. Les caractéristiques de cette réplication peuvent être définies et modifiées à l'aide de différentes propriétés WLangage. 

**Remarque** : Pour plus de détails sur la déclaration de ce type de variable et l'utilisation des propriétés WLangage, consultez [Déclaration d'une variable](../Motscles/1514032.md).
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
Cnx est une Connexion
ConfigRéplication1 est un hRSConfig

ConfigRéplication1.Serveur = "atlas.masociete.com:4996"
Ajoute(ConfigRéplication1.Fichier, "Mabase")
Ajoute(ConfigRéplication1.Fichier, "-Mabase\Monfichier.fic")
HRSAjouteConfig(Cnx, ConfigRéplication1, hrsSansCopie)
```

<a name="NOTE0"></a>

## Remarques
<a name="NOTE0_1"></a>


### Propriétés spécifiques à la description des variables de type hRSConfig
<a name="proprietes_specifiques_description_des_variables_type_hrsconfig_ELTPARAGRAPHE000028"></a>Les propriétés suivantes peuvent être utilisées pour manipuler une réplication entre serveurs HFSQL :


| **Nom de la propriété** | **Type manipulé** | **Effet** |
| --- | --- | --- |
| Bidirectionnelle | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> si la réplication doit se faire dans les deux sens : la réplication sera bi-directionnelle. <br><br>- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire (valeur par défaut) : la réplication sera mono-directionnelle.<br><br><br> |
| Description | Chaîne de caractères | Description de la réplication. |
| Fichier | Tableau de chaînes | Liste des éléments à répliquer. <br><br>Les éléments à répliquer peuvent correspondre à : <br><br>- une base de données, <br><br>- un fichier de données, <br><br>- un  fichier de données à exclure de la réplication. Dans ce cas, le nom du fichier doit être préfixé par "-" (moins).<br><br><br> |
| Identifiant | Entier | Permet d'identifier la réplication manipulée.<br><br>**Cette propriété est disponible en lecture seulement**. |
| Initialisation | Entier | Permet de suivre l'évolution de la copie initiale des éléments répliqués du serveur de la connexion (serveur maître) vers l'autre serveur (serveur abonné) lors d'une copie en tâche de fond (fonction [HRSAjouteConfig](../WDLang4/1000020492.md) utilisée avec la constante *hrsCopieTâcheDeFond*). <br><br>Si cette propriété : <br><br>- est comprise entre 0 et 1000, la réplication est en cours d'ajout. <br><br>- vaut 1000, la réplication a été ajoutée. <br><br>- n'est pas renseignée, l'ajout de la réplication est en échec.<br><br><br><br><br>**Cette propriété est disponible en lecture seulement**. |
| MotDePasse | Chaîne de caractères | Mot de passe spécifique à la réplication. Ce mot de passe doit correspondre au mot de passe spécifié dans la fonction [HRSInit](../WDLang4/1000020541.md) utilisée sur le poste serveur abonné. <br><br>Cette propriété est disponible en écriture uniquement. |
| Planification | Variable de type [hPlanification](../WDLang4/1000018853.md) | Période de réplication. <br><br>Si tous les membres de la variable de type [hPlanification](../WDLang4/1000018853.md) sont laissés vides, il s'agira d'une réplication en mode flux (streaming). |
| ProcédureRésolutionConflitModification | Chaîne de caractères | Nom de la procédure stockée à utiliser si la méthode de résolution des conflits (propriété **RésolutionConflitModification**) correspond à la constante *hrcmProcédureAvecRubriquesModifiées* ou à la constante *hrcmProcédureToutesRubriques*.<br><br>Cette procédure stockée doit renvoyer :<br><br>- la constante *opRéessayer* pour valider la réplication de la modification,<br><br>- la constante *opAnnuler* pour annuler la réplication de la modification.<br><br><br>Cette procédure stockée doit être présente dans la base de données répliquée sur le serveur abonné. |
| RésolutionConflitModification | Constante de type Entier | Méthode de résolution des conflits : <br><br>- *hrcmPlusPrioritaire* (valeur par défaut) : Lors d'un conflit, seule la valeur de priorité définie pour le serveur est prise en compte. Plus la valeur de priorité définie pour le serveur est petite, plus le serveur sera prioritaire. <br><br>- *hrcmPlusRécent* : Lors d'un conflit, l'élément le plus récent est prioritaire. <br>	Attention : Cette méthode nécessite une synchronisation de l'horloge des différents serveurs.  <br><br>- *hrcmProcédureAvecRubriquesModifiées* : Lors d'un conflit, une procédure stockée est lancée (définie par la propriété **ProcédureRésolutionConflitModification**). Dans cette procédure, seules les rubriques modifiées seront accessibles.  <br><br>- *hrcmProcédureToutesRubriques* : Lors d'un conflit, une procédure stockée est lancée (définie par la propriété **ProcédureRésolutionConflitModification**). Dans cette procédure, toutes les rubriques de l'enregistrement seront accessibles.<br><br><br> |
| Serveur | Chaîne de caractères | Serveur vers lequel va s'effectuer la réplication. Ce serveur est identifié par : <br><br>- son nom DNS ou son adresse IP.<br><br>- le port de réplication (4996 par défaut). <br><br><br>Si le port est différent du port par défaut, il faut utiliser la syntaxe "&lt;Nom Serveur&gt;:&lt;Port de réplication&gt;" pour le spécifier. Ce port doit correspondre au port spécifié dans la fonction [HRSInit](../WDLang4/1000020541.md) utilisée sur le poste serveur abonné. |
| Spare | Booléen | <br><br>- <u><u><u><u>Vrai</u></u></u></u> pour effectuer une réplication en mode spare, <br><br>- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. <br><br><br><br><br>**Remarque** : Cette propriété est incompatible avec la propriété **Bidirectionnelle**. |




<a name="NOTE0_2"></a>


