
## Serveur de réplication pour la réplication universelle assistée
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000198"></a>
La réplication universelle assistée peut utiliser un serveur de réplication.

Dans ce cas, la réplication est effectuée via le serveur de réplication. Le transfert des réplicas est automatiquement géré.

***La réplication par serveur peut être réalisée avec réplica immédiat*** : dans ce cas, les données sont synchronisées immédiatement. La base abonnée envoie les données à répliquer, la réplication est effectuée, et la base abonnée récupère les données à mettre à jour. Cette opération peut être relativement longue. Ce mode de réplication est conseillé par exemple lors d'une synchronisation quotidienne (un commercial se synchronise tous les soirs avec le siège).

***La réplication par serveur peut être réalisée avec réplica différé*** : dans ce cas, les données sont synchronisées au fur et à mesure des échanges avec le serveur. Lorsque le serveur reçoit les données à répliquer, il prépare automatiquement les données à renvoyer. Ces données seront renvoyées lors de la prochaine synchronisation. Ce mode de réplication est conseillé par exemple lors d'une synchronisation périodique (à chaque prise de commande par exemple).



Remarque : Ce serveur de réplication peut également être utilisé pour réaliser une réplication de données entre une application Android/iOS et une application WINDEV. Pour plus de détails, consultez [Réplication des données mobiles (Android ou iOS)](../WDLang4/1000021071.md). 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Installation du serveur de réplication
<a name="installation_serveur_replication_ELTTEXTE000228"></a>




### Présentation
<a name="presentation_ELTPARAGRAPHE000035"></a>Le serveur de réplication peut être installé :

- soit directement grâce au pack d'installation disponible dans le sous-répertoire **"Install\\WDServeurR"** de WINDEV ou WINDEV Mobile.

- soit lors de l'installation d'une application WINDEV.





<a name="NOTE2_2"></a>




### Installation d'un pack
<a name="installation_pack_ELTPARAGRAPHE000047"></a>Le pack d'installation permet d'installer ou de désinstaller le serveur de réplication.

Lors de l'installation, il suffit de préciser :

- le répertoire d'installation des éléments du serveur.

- le répertoire de déploiement des données de réplication. Ce répertoire sera celui dans lequel les fichiers nécessaires à la réplication seront créés.




**Remarque** : Si plusieurs serveurs virtuels sont disponibles, il est nécessaire d'indiquer ceux pour lesquels un serveur de réplication sera installé.

A la fin de l'installation, le site de paramétrage des réplications se lance. Ce site permet de configurer les différentes réplications gérées par le serveur de réplication.

**Note** : Pour désinstaller le serveur de réplication, il suffit de relancer le pack d'installation.


<a name="NOTE2_3"></a>




### Remarque
<a name="remarque_ELTPARAGRAPHE000067"></a>L'interface Web du serveur de réplication nécessite la création d'un alias sur le serveur Web. Cette création est normalement automatisée.

Si cet alias n'a pas été créé, il faut le créer manuellement. Cet alias se nomme "SRVRPL_WEB".

**Exemple de création de l'alias sous Apache 2.2** :


```txt
Alias /SRVRPL_WEB/ "D:/PC SOFT/Serveur Replication 19/SRVRPL/SRVRPL_WEB/"
<Directory "D:/PC SOFT/Serveur Replication 19/SRVRPL/SRVRPL_WEB/">
Order allow,deny
Allow from all
</Directory>
```






### Droits d'accès
<a name="droits_acces_ELTPARAGRAPHE000078"></a>Le serveur de réplication utilise une base de données localisée dans le dossier "\\ProgramData\\ReplicSRV\\". Il est donc nécessaire de donner les droits complets sur ce dossier pour le compte utilisé par le serveur Web (invité internet) afin qu'il accède aux disques.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Utilisation du site de paramétrage des réplications
<a name="utilisation_site_parametrage_des_replications_ELTTEXTE000264"></a>
Le site de paramétrage des réplications permet : 

- de créer les différents utilisateurs des réplications, 

- de paramétrer les différentes réplications gérées par le site.




La connexion au site nécessite un nom et un mot de passe. Par défaut, le seul utilisateur créé est l'administrateur (nom "admin" sans mot de passe).


<a name="NOTE3_2"></a>




### Gérer les comptes
<a name="gerer_les_comptes_ELTPARAGRAPHE000100"></a>L'onglet "Comptes" permet de gérer les différents comptes des utilisateurs de la réplication. Par défaut, seul l'administrateur existe.
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ServReplic_Compte.gif)


L'option "Ajouter un compte" permet de créer un nouveau compte. Les éléments nécessaires sont :

- le login.

- le mot de passe et sa confirmation.

- l'adresse email.




Depuis la table listant les utilisateurs, il est possible d'ajouter ou de supprimer un compte.


<a name="NOTE3_3"></a>




### Gérer les publications
<a name="gerer_les_publications_ELTPARAGRAPHE000119"></a>L'onglet "Publications" permet de gérer les publications des réplications, c'est-à-dire les réplications qui pourront être utilisées par le serveur de réplication.
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ServReplic_publication.gif)


L'option "Ajouter une publication" permet de créer une nouvelle publication. Indiquez :

- Le nom de la publication.

- Le fichier de réplication à utiliser (fichier .WER). Ce fichier a été créé avec l'outil ReplicEdit.

- Le mode de préparation des réplicas : par défaut la préparation est immédiate : les réplicas sont créés immédiatement lors de la réplication. Si vous choisissez une préparation périodique, c'est le serveur de réplication qui périodiquement prépare le réplica. Le réplica n'est pas le plus a jour possible, mais le temps de réplication est optimisé.




Si vous choisissez une préparation périodique, indiquez les différents paramètres de la période de préparation des réplicas (tous les jours, ...).

La publication est créée lors de la validation de l'assistant.

Depuis la table listant les publications, il est possible d'ajouter ou de supprimer une publication.


<a name="NOTE3_4"></a>




### Gérer les abonnements
<a name="gerer_les_abonnements_ELTPARAGRAPHE000142"></a>L'abonnement à une publication est réalisé : 

- lors de l'installation de l'application WINDEV

- par la fonction [RéplicInitialise](../WDLang4/1000017195.md).







