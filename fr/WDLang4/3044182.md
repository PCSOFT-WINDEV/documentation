


## Structure des fichiers journal (HFSQL Classic)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000234"></a>
Lors de la journalisation d'un fichier de données HFSQL Classic, les fichiers suivants sont automatiquement créés :


|   |   |
| --- | --- |
| **JournalOpération.Fic** | Ensemble des opérations réalisées sur les fichiers de données HFSQL journalés utilisés par l'application. Une opération correspond à une fonction HFSQL. |
| **JournalIdentification.Fic** | Liste des emplacement physiques de tous les fichiers journalés de l'application |
| **xxxJNL.Fic** | Fichier créé pour chaque fichier journalé. Contient la valeur des enregistrements manipulés avant et après chaque opération. |

Cette page détaille la structure de ces fichiers.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Fichier JournalOpération.FIC
<a name="fichier_journaloperationfic_ELTTEXTE000264"></a>
Les différentes rubriques présentes dans le fichier JournalOpération.Fic sont les suivantes :


|   |   |
| --- | --- |
| **Id_Opération** | Identifiant de l'opération réalisée. |
| **Numéro_Enregistrement** | Numéro de l'enregistrement manipulé dans le fichier de données. |
| **Id_Sauvegarde_Enregistrement_Original** | Numéro de l'enregistrement du journal correspondant à l'enregistrement *avant modification*. Ce numéro d'enregistrement correspond à un enregistrement du fichier xxxxJNL.Fic. |
| **Id_Sauvegarde_Enregistrement_Modifié** | Numéro de l'enregistrement du journal correspondant à l'enregistrement *après modification*. Ce numéro d'enregistrement correspond à un enregistrement du fichier xxxxJNL.Fic. |
| **Id_FonctionWL** | Identifiant de la fonction WLangage utilisée dans le programme. Pour retrouver le nom de la fonction WLangage utilisée, il suffit de consulter le fichier ListeDéfinitionHF.WL (présent dans le sous-répertoire "Personnel\\Externe\\" de WINDEV ou WEBDEV) |
| **Poste_Nom** | Nom du poste qui a effectué l'opération (les 12 derniers caractères). |
| **Poste_AdresseIP** | Adresse IP du poste qui a réalisé l'opération. |
| **Application** | Nom de l'application depuis laquelle l'opération a été effectuée (les 12 premiers caractères) |
| **HPosteID** | Identifiant du poste de l'utilisateur, défini en programmation par la fonction [HPoste](../WDLang4/3044111.md). |
| **HJournalInfoMsg** | Commentaires concernant l'opération journalée. Ces commentaires sont paramétrables grâce à la fonction [HJournalInfo](../WDLang4/3044009.md). |
| **Heure_Poste_Client** | Heure GMT à laquelle l'opération a été effectuée sur le poste utilisateur (décalage de 2 heures par rapport à l'heure en France en été). |
| **ID_Replica** | Identifiant du réplica. Cette rubrique est utilisée par la réplication. |
| **ID_FichierJNL** | Identifiant du fichier JNL contenant la sauvegarde de l'enregistrement |



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Fichier JournalIdentification.fic
<a name="fichier_journalidentificationfic_ELTTEXTE000288"></a>
Les différentes rubriques présentes dans le fichier JournalIdentification.Fic sont les suivantes :


|   |   |
| --- | --- |
| **Id_FichierJNL** | Identifiant du fichier manipulé. |
| **GUID_Fichier_Source** | Identifiant unique du fichier qui est journalé. Cet identifiant est automatiquement attribué par le moteur HFSQL au fichier lors de la création du fichier de données. |
| **GUID_Fichier_JNL** | Identifiant unique du fichier Journal associé au fichier Source. Cet identifiant est automatiquement attribué par le moteur HFSQL au fichier lors de la création du fichier de données. |
| **Emplacement_Fichier_Source** | Chemin du fichier de données manipulé (fichier de données HFSQL journalé) |


<a name="NOTE3_2"></a>


### GUID et journalisation
<a name="guid_journalisation_ELTPARAGRAPHE000123"></a>Deux types de GUID de fichiers sont gérés par le moteur HFSQL :

- GUID de fichier défini lors de la description du fichier sous l'éditeur d'analyses. Ce GUID est utilisé dans la gestion du .REP.

- GUID du fichier défini lors de la création du fichier de données physique. Ce GUID est utilisé dans la journalisation pour détecter que deux fichiers de données n'utilisent pas le même fichier journal.




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Fichier *JNL.Fic
<a name="fichier_jnlfic_ELTTEXTE000318"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![HFSQL Classic](https://doc.pcsoft.fr/ext/images/fr/HF.png) Le fichier \*JNL.Fic contient :

- toutes les rubriques du fichier HFSQL journalé correspondant

- les rubriques suivantes :





|   |   |
| --- | --- |
| **Id_Sauvegarde** | Numéro de l'enregistrement sauvegardé. Ce numéro permet d'identifier l'enregistrement dans le fichier JournalOpération.Fic |
| **Numéro_Enregistrement** | Numéro de l'enregistrement dans le fichier original journalé. |
| **Etat_Enregistrement** | Etat de l'enregistrement (modifié, supprimé, ajouté, ...) |
| **ID_FonctionWL** | Identifiant de la fonction WLangage utilisée dans le programme. Pour retrouver le nom de la fonction WLangage utilisée, il suffit de consulter le fichier ListeDéfinitionHF.WL (présent dans le sous-répertoire "Personnel\\Externe\\" de WINDEV) |
| **Poste_Nom** | Nom du poste qui a effectué l'opération (les 12 derniers caractères). |
| **Poste_AdresseIP** | Adresse IP du poste qui a réalisé l'opération. |
| **Application** | Nom de l'application depuis laquelle l'opération a été effectuée (les 12 premiers caractères) |
| **HPosteID** | Identifiant du poste de l'utilisateur, défini en programmation par la fonction [HPoste](../WDLang4/3044111.md). |
| **HJournalInfoMsg** | Commentaires concernant l'opération journalée. Ces commentaires sont paramétrables grâce à la fonction [HJournalInfo](../WDLang4/3044009.md). |
| **Heure_Poste_Client** | Heure GMT à laquelle l'opération a été effectuée sur le poste utilisateur (décalage de 2 heures par rapport à l'heure en France en été). |




