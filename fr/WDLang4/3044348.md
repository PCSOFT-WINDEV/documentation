
## Vignettes HFSQL
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000201"></a>
Pour optimiser l'affichage des images dans votre application ou votre site, il est possible d'utiliser des vignettes HFSQL.

Une vignette HFSQL correspond à une image générée automatiquement à partir d'une image stockée dans un mémo binaire HFSQL. Pour chaque rubrique de type mémo binaire HFSQL, une ou plusieurs vignettes de tailles différentes peuvent être générées.

Par exemple, la rubrique "ImageProduit" permet de générer deux vignettes HFSQL : 

- une vignette de petite taille utilisée dans un champ Zone répétée, 

- une vignette un peu plus grande utilisée dans les fiches produits.




La vignette la plus adaptée au champ affichant l'image sera automatiquement sélectionnée par le moteur HFSQL.



![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) Pour utiliser les vignettes HFSQL sous Linux, la librairie libfreetype6 (libfreetype.so.6) doit être installée sur le poste en cours.







<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000231"></a>


### Gérer des vignettes HFSQL
<a name="gerer_des_vignettes_hfsql_ELTPARAGRAPHE000046"></a>Pour gérer des vignettes HFSQL : 

1. Sous l'éditeur d'analyses, sélectionnez le fichier de données contenant la rubrique de type mémo binaire HFSQL.

2. Double-cliquez sur le fichier de données pour afficher la description des rubriques.

3. Sélectionnez la rubrique voulue.

4. Cochez l'option "Gestion automatique des vignettes" et cliquez sur le bouton "Editer".
	<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Vignettes%20HFSQL%20-%20HC%20N%B0001.GIF)


5. Spécifiez la largeur et la hauteur (en pixels) de chaque vignette à générer.

6. Validez.




**Remarque** : Les vignettes HFSQL d'une rubrique sont générées automatiquement lors :

- de l'écriture de l'enregistrement correspondant (fonctions [HAjoute](../WDLang4/3044147.md) ou [HEcrit](../WDLang4/3044092.md)),

- de la modification de la valeur de la rubrique (fonction [HModifie](../WDLang4/3044042.md)),

- [de la modification automatique des fichiers de données](../WDLang4/3044195.md).





<a name="NOTE2_2"></a>


### Propriétés WLangage associées aux vignettes HFSQL
<a name="proprietes_wlangage_associees_aux_vignettes_hfsql_ELTPARAGRAPHE000080"></a>Les différentes propriétés WLangage permettant de gérer les vignettes HFSQL sont les suivantes :



|   |   |
| --- | --- |
| [HauteurMaxVignette](../Proprietes/2512110.md) | La propriété **HauteurMaxVignette** permet de connaître et modifier la hauteur maximale d'une vignette d'une rubrique de type Image (mémo binaire). |
| [InfoGénérationVignette](../Proprietes/2512111.md) | La propriété **InfoGénérationVignette** permet de savoir si les vignettes d'une rubrique ont été correctement générées. |
| [LargeurMaxVignette](../Proprietes/2512112.md) | La propriété **LargeurMaxVignette** permet de connaître ou modifier la largeur maximale d'une vignette d'une rubrique de type Image (mémo binaire). |
| [NbVignette](../Proprietes/2512113.md) | La propriété **NbVignette** permet de connaître le nombre de vignettes générées d'une rubrique. |
| [NbVignetteDécrit](../Proprietes/2512114.md) | La propriété **NbVignetteDécrit** permet de connaître le nombre de vignettes attendues pour une rubrique. |
| [Vignette](../Proprietes/2512115.md) | La propriété **Vignette** permet de : <br><br>- connaître la valeur d'une vignette d'une rubrique. Cette rubrique a été définie sous l'éditeur d'analyses ou définie par programmation.<br><br>- connaître et modifier l'image associée à un champ Vignette.<br><br><br> |







<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Notes
<a name="notes_ELTTEXTE000308"></a>


### Taille du champ affichant l'image et taille de la vignette
<a name="taille_champ_affichant_image_taille_vignette_ELTPARAGRAPHE000091"></a>Lors de l'affichage de l'image, la vignette la plus adaptée à la taille du champ affichant l'image sera automatiquement sélectionnée par le moteur HFSQL.

Si le champ affichant l'image est plus grand que la plus grande des vignettes, l'image affichée correspondra à l'image originale contenue dans le mémo binaire HFSQL.


<a name="NOTE3_2"></a>


### Nombre de vignettes
<a name="nombre_vignettes_ELTPARAGRAPHE000101"></a>Dans la plupart des cas, une ou deux vignettes par mémo binaire HFSQL suffisent. L'utilisation de plusieurs vignettes est intéressante uniquement dans le cas où l'image est affichée dans divers champs ayant une grande différence de taille entre eux.

Remarque : Plus le nombre de vignettes par rubrique est grand, plus la taille du mémo binaire HFSQL correspondant sera important.



<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Limitations
<a name="limitations_ELTTEXTE000338"></a>
Les vignettes sont disponibles :

- en HFSQL Classic et en HFSQL Mobile : sur les rubriques d'un fichier de données, d'une vue ou d'une requête.

- en HFSQL Client/Serveur : sur les rubriques d'un fichier de données uniquement.




![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) Les vignettes sont disponibles uniquement en HFSQL Client/Serveur sur les rubriques d'un fichier de données.


<a name="NOTE4_2"></a>


### Version 9 et inférieure
<a name="version_9_inferieure_ELTPARAGRAPHE000126"></a>Les vignettes HFSQL ne sont pas disponibles en version 9 et inférieure. Les enregistrements écrits par un moteur HFSQL 9 ou inférieur ne peuvent donc pas contenir de vignettes HFSQL.

Le tableau suivant présente l'utilisation des mémos binaires et des vignettes dans une application 9 (ou inférieure) et dans une application 19 utilisant les mêmes fichiers de données :


|   |   |   |
| --- | --- | --- |
|   | **Application (ou site) 9 et inférieure** | **Application (ou site) 19** |
| Nouvel enregistrement écrit par un moteur HFSQL 9 ou inférieur | Image affichée : Mémo binaire | Image affichée : Mémo binaire |
| Nouvel enregistrement écrit par un moteur HFSQL 10 et supérieur | Image affichée : Mémo binaire | Image affichée : Vignette |
| Enregistrement écrit par un moteur HFSQL 9 ou inférieur et modifié en 19 (modification de la valeur de la rubrique mémo binaire) | Image affichée : Mémo binaire | Image affichée : Vignette |






