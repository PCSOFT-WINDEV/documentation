


## Accès Natif XML
			

<DIV class="specObsolete">
	<IMG style="float:left;margin-right:10px;" src="https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=warning_big.png"><B>Avertissement</B><BR>
	A partir de la version <B>27</B>,  l'importation de fichiers XML dans l'analyse n'est plus disponible. Pour manipuler des fichiers XML, il est recommandé d'utiliser des variables de type [xmlDocument](../WDLang5/1000018782.md). Pour plus de détails, consultez [Gestion du XML](../WDLang5/3081018.md).
</DIV><a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000194"></a>
WINDEV et WEBDEV permettent d'importer et de manipuler une définition de fichiers XML à l'aide de l'éditeur d'analyses.

Les fichiers XML se manipulent alors avec la même simplicité que les fichiers de données HFSQL traditionnels.


<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Manipulations sous l'éditeur d'analyses
<a name="manipulations_sous_editeur_analyses_ELTTEXTE000224"></a>


### Importer un document XML
<a name="importer_document_xml_ELTPARAGRAPHE000030"></a>Pour importer la structure d'un document XML dans l'éditeur d'analyses : 

1. Sous l'éditeur d'analyses, lancez l'assistant d'importation : sous le volet "Analyse", dans le groupe "Création", déroulez "Importer" et sélectionnez "Importer des descriptions de fichiers/tables".

2. Dans l'assistant qui se lance :

	- Indiquez le type de base de données : XML

	- Indiquez si les données doivent être migrées au format HFSQL Classic.

	- Indiquez le chemin du document XML à importer.

	- Sélectionnez les tables du document XML à importer.




3. Validez l'assistant : les différents fichiers qui composent le document XML et leur arborescence sont automatiquement représentés sous l'éditeur d'analyses. 



<a name="NOTE2_2"></a>


### Génération de l'analyse
<a name="generation_analyse_ELTPARAGRAPHE000058"></a>Pour créer des fenêtres ou des pages manipulant le document XML décrit dans l'analyse, l'analyse doit être générée : sous le volet "Analyse", dans le groupe "Analyse", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ico_Generation_analyse.gif).

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Manipulation par programmation
<a name="manipulation_par_programmation_ELTTEXTE000254"></a>


### Parcours des différents fichiers du document XML
<a name="parcours_des_differents_fichiers_document_xml_ELTPARAGRAPHE000077"></a>La structure d'un document XML est représentée par différents fichiers sous l'éditeur d'analyses.

Pour lire le contenu d'un document XML, il suffit de lire le contenu du fichier principal (le parent) puis des fichiers liés (les fils).

Par défaut, lors de la lecture dans un fichier, un filtre est automatiquement réalisé sur les fichiers reliés pour lire uniquement les enregistrements correspondant au fichier principal.

Par exemple :<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=XML_2.GIF)
Lors du parcours du fichier Person, il est possible de connaître l'email de cette personne.

Pour cela, il suffit de se positionner sur le fichier "Person", puis d'utiliser la fonction [HLitPremier](../WDLang4/3044051.md) sur le fichier "email".

Dans ce cas, l'enregistrement lu dans le fichier "email" correspondra au premier email associé à l'enregistrement en cours dans le fichier "Person".

Si ce mécanisme est désactivé (fonction [HDésactiveFiltreAuto](../WDLang4/3044298.md)), l'enregistrement lu dans le fichier "email" correspondra au premier enregistrement du fichier email (et non au fils de l'enregistrement lu dans le fichier "Person").

Pour réactiver le mécanisme de positionnement dans les fichiers liés, utilisez la fonction [HActiveFiltreAuto](../WDLang4/3044297.md).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Limitations
<a name="limitations_ELTTEXTE000278"></a>


### Requêtes
<a name="requetes_ELTPARAGRAPHE000111"></a>Les requêtes ne sont pas disponibles sur les fichiers XML.
<a name="NOTE4_2"></a>


### Création de fichiers
<a name="creation_fichiers_ELTPARAGRAPHE000118"></a>Les fonctions de création de fichiers ([HCréation](../WDLang4/3044255.md) et [HCréationSiInexistant](../WDLang4/3044254.md)) ne sont pas disponibles sur les fichiers XML.
<a name="NOTE4_3"></a>


### Filtre
<a name="filtre_ELTPARAGRAPHE000131"></a>La syntaxe suivante de la fonction [HFiltre](../WDLang4/3044100.md) n'est pas disponible sur les fichiers XML :

```txt
<Résultat> = HFiltre(<Nom du fichier> , <Condition de sélection>)
```

<a name="NOTE4_4"></a>


### Lecture de fichiers XML
<a name="lecture_fichiers_xml_ELTPARAGRAPHE000142"></a>La fonction [HLit](../WDLang4/3044047.md) lit uniquement l'enregistrement en cours. Il est impossible de spécifier un numéro d'enregistrement différent de celui en cours. Pour désigner l'enregistrement en cours, utilisez la constante *hNumEnrEnCours*.


