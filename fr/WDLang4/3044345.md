
## Fichier HFConf.Ini
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000500"></a>
Le fichier HFConf.INI est présent à la racine du serveur. Ce fichier permet de définir plusieurs caractéristiques du serveur HFSQL Client/Serveur.

Ce fichier permet entre autre de spécifier les caractéristiques des fichiers de log créés sur le serveur. Les fichiers de log sont des fichiers texte dont les rubriques sont séparées par des TAB. La première ligne du fichier contient la définition des colonnes. Les fichiers de log sont créés par le programme HFLogger.exe (hflogger sous Linux).





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Contenu du fichier HFConf.Ini
<a name="contenu_fichier_hfconfini_ELTTEXTE000530"></a>
Le fichier HFConf.INI contient plusieurs sections :

- La section [INIT](#NOTE2_2) qui permet de faire différentes initialisations.

- La section [MANAGER](#NOTE2_3), utilisée en Linux uniquement.

- La section [AUTOANALYSE](#NOTE2_4) qui permet de paramétrer l'optimisation des index en tâche de fond.

- La section [TELEMETRY](#NOTE2_5) qui permet de configurer la transmission des données à PC SOFT en vue de l'amélioration du produit (télémétrie).

- La section [ACTIVEDIRECTORY](#NOTE2_6) qui permet de configurer l'authentification via Active Directory.





<a name="NOTE2_2"></a>


### Section INIT
<a name="section_init_ELTPARAGRAPHE000056"></a>La section INIT peut contenir les mots-clés suivants :

| Mot-clé | Description | Valeur par défaut |
| --- | --- | --- |
| **AccessPort** | Port réseau utilisé. | 4900 |
| **ActivityStatisticMaxFileSize** | Taille maximale du fichier de statistiques d'activité (Mo).<br><br>Cette valeur doit être supérieure ou égale à 1 sinon aucune modification n'est effectuée.<br>Les statistiques sont sauvegardées et réinitialisées. |   |
| **ActivityStatisticPath** | Chemin des fichiers de statistiques d'activité. Le chemin est créé sur le serveur si il n'existe pas.<br>Les statistiques sont sauvegardées et réinitialisées. |   |
| **ActivityStatisticPeriod** | Période (en secondes) entre chaque sauvegarde des valeurs des différents compteurs d'activité.<br><br>Cette valeur doit être supérieure ou égale à 1 sinon aucune modification n'est effectuée.<br>Les statistiques sont sauvegardées et réinitialisées. |   |
| **CacheMaxUnusedFiles** | Nombre maximum de tables HFSQL non utilisées par des clients qui sont gardées en cache (c'est-à-dire ouvertes) sur le serveur. Lorsque ce nombre est atteint, la table la plus ancienne non utilisée est supprimée du cache. |   |
| **CacheFilesPrefetch** | Configure le remplissage automatique du cache des tables. <br><br>Les valeurs possibles sont : <br><br><br><br>- 1 : Remplissage automatique activé. <br><br>- 0 : Remplissage automatique inactif. <br><br><br> | 0, remplissage automatique des caches des tables inactif. |
| **DBRootPath** | Chemin du répertoire contenant l'ensemble des bases de données (c'est-à-dire les fichiers de données des différentes applications HFSQL Client/Serveur).<br><br>Pour spécifier le répertoire du service Manta, il suffit d'utiliser la chaîne de caractères "%%EXE%%". | "%%EXE%%DB" (sous-répertoire "DB" du répertoire du service Manta) |
| **DaemonUser**<br>Linux uniquement | Nom d'utilisateur sous lequel le serveur va tourner. | "root" |
| **JNLBackupRootPath** | Chemin du répertoire de sauvegarde des journaux. Si ce chemin n'existe pas au redémarrage du serveur, il est automatiquement créé. | Sous-répertoire "__JNLBackup" du répertoire contenant l'ensemble des fichiers de données |
| **JNLRootPath** | Chemin du répertoire contenant l'ensemble des journaux des différentes applications HFSQL Client/Serveur  (historique des écritures dans les fichiers de données HFSQL). L'ensemble des journaux sera contenu dans le sous-répertoire "__JNL" du répertoire spécifié.<br><br>Par exemple, si le répertoire spécifié est "C:\\MonRep", les journaux seront contenus dans le répertoire "C:\\MonRep\\__JNL".<br><br><br><br>Il est conseillé de modifier le chemin par défaut des journaux pour sécuriser les données. En effet, si le disque dur contenant les données a un problème technique, il sera toujours possible de rejouer le journal (enregistré sur un autre disque) à partir d'une sauvegarde.<br><br><br><br>Pour spécifier le répertoire du service Manta, il suffit d'utiliser la chaîne de caractères "%%EXE%%". | Sous-répertoire "__JNL" du répertoire contenant l'ensemble des fichiers de données |
| **KeepAliveInterval** | Temps maximum (en secondes) au bout duquel, si aucune communication n'est effectuée entre le serveur et le client, le serveur vérifie la présence du client. | 30 minutes |
| **KeepAliveTimeOut** | Temps maximum (en secondes) d'attente du serveur lors de la vérification de la présence du client. Si le client n'est pas présent à la fin de cette durée, le client est automatiquement déconnecté. | 2 minutes |
| **KeySearch** | Activation de la recherche des clés. <br><br>Les valeurs possibles sont : <br><br><br><br>- 0 : Recherche automatique des clés inactive,<br><br>- 1 : Recherche automatique des clés activée. <br><br><br> | 0, recherche automatique des clés inactive. |
| **LoadCoeffCall** | Coefficient global pour le nombre d'appels du client.<br>Cette valeur, comprise entre -100 et 100, augmente ou diminue le coefficient appliqué au compteur des appels clients au serveur.<br><br>Les coefficients permettent de faire varier l'importance de chaque compteur dans la formule de calcul de la charge engendrée par un utilisateur sur le serveur.<br><br><br><br>Une valeur de 1, 0, -1 ne modifie pas le coefficient.<br><br><br><br>Une valeur supérieure à 100 est équivalente à 100.<br><br><br><br>Une valeur inférieure à -100 est équivalente à -100. |   |
| **LoadCoeffDisk** | Coefficient global pour le nombre d'octets lus ou écrits sur disque.<br><br>Cette valeur, comprise entre -100 et 100, augmente ou diminue le coefficient appliqué au compteur des octets lus ou écrits sur disque par le serveur.<br><br><br><br>Les coefficients permettent de faire varier l'importance de chaque compteur dans la formule de calcul de la charge engendrée par un utilisateur sur le serveur.<br><br><br><br>Une valeur de 1, 0, -1 ne modifie pas le coefficient.<br><br><br><br>Une valeur supérieure à 100 est équivalente à 100.<br><br><br><br>Une valeur inférieure à -100 est équivalente à -100. |   |
| **LoadCoeffDiskAccess** | Coefficient global pour le nombre d'accès au disque.<br><br>Cette valeur, comprise entre -100 et 100 augmente ou diminue le coefficient appliqué au compteur du nombre d'accès  au disque.<br><br><br><br>Les coefficients permettent de faire varier l'importance de chaque compteur dans la formule de calcul de la charge engendrée par un utilisateur sur le serveur.<br><br><br><br>Une valeur de 1, 0, -1 ne modifie pas le coefficient.<br><br><br><br>Une valeur supérieure à 100 est équivalente à 100.<br><br><br><br>Une valeur inférieure à -100 est équivalente à -100. |   |
| **LoadCoeffRecv** | Coefficient global pour le nombre d'octets reçus sur le réseau.<br><br>Cette valeur, comprise entre -100 et 100, augmente ou diminue le coefficient appliqué au compteur des octets reçus par le serveur.<br><br><br><br>Les coefficients permettent de faire varier l'importance de chaque compteur dans la formule de calcul de la charge engendrée par un utilisateur sur le serveur.<br><br><br><br>Une valeur de 1, 0, -1 ne modifie pas le coefficient.<br><br><br><br>Une valeur supérieure à 100 est équivalente à 100.<br><br><br><br>Une valeur inférieure à -100 est équivalente à -100. |   |
| **LoadCoeffSend** | Coefficient global pour le nombre d'octets envoyés sur le réseau.<br><br>Cette valeur, comprise entre -100 et 100, augmente ou diminue le coefficient appliqué au compteur des octets envoyés par le serveur.<br><br><br><br>Les coefficients permettent de faire varier l'importance de chaque compteur dans la formule de calcul de la charge engendrée par un utilisateur sur le serveur.<br><br><br><br>Une valeur de 1, 0, -1 ne modifie pas le coefficient.<br><br><br><br>Une valeur supérieure à 100 est équivalente à 100.<br><br><br><br>Une valeur inférieure à -100 est équivalente à -100. |   |
| **LoadEnable** | Indique si l'équilibrage de charge est activé (Vrai) ou non (Faux). |   |
| **LoadMaxWait** | Temps maximum (en ms) pour lequel une demande au serveur pourra être mise en attente par le système d'équilibrage de charge avant d'être traitée. |   |
| **LogConnexion** | Permet d'ajouter une information dans les fichiers log système à chaque connexion d'un client sur le serveur.<br><br>La valeur de ce mot-clé peut être 0 (pas d'ajout) ou 1 (ajout possible). | 0 (pas d'ajout) |
| **MaximumConnectionsNumber** | Nombre maximum de connexions autorisées par application. Le nombre de connexions est déterminé par le nombre d'applications (process) ayant au moins une connexion non super-utilisateur sur le serveur. Par exemple : <br><br>- une application ayant ouvert une seule connexion en mode super-utilisateur compte pour zéro.<br><br>- une application ayant ouvert une seule connexion avec un utilisateur normal compte pour 1. <br><br>- une application ayant ouvert deux connexions d'un utilisateur normal compte pour 1.<br><br>- une application ayant ouvert des connexions en super-utilisateur et en utilisateur normal compte pour 1. <br><br><br><br><br>Si la valeur de ce mot-clé vaut 0, il n'y a pas de limite. | 0, pas de limite. |
| **MoreThan2Go** | Indique si les fichiers systèmes supportent plus de 2 Go.<br><br>La valeur de ce mot-clé peut être 0 (non) ou 1 (oui). | 0 (non) |
| **NdxCacheSize** | Taille du cache des index (Mo).<br><br>Cette taille doit être supérieure à 1.<br><br><br><br>**Remarque** : sur un serveur 32 bits, ce paramètre ne peut dépasser 1 Go. |   |
| **ServerLogLevels** | Définit ce qui doit être présent dans le fichier de log.<br><br>Les paramètres possibles sont "WL" et "PARAM", séparés par une virgule :<br><br><br><br>- "WL" : permet de mettre dans le fichier de log les appels au serveur.<br><br>- "PARAM" : permet de mettre dans le fichier de log les paramètres des appels.<br><br><br> | Aucun fichier de log réalisé |
| **ServerLogPath** | Emplacement des fichiers de log d'audit du serveur (ensemble des opérations demandées par les postes client au serveur).<br><br>Le chemin est créé sur le serveur s'il n'existe pas. | "%%EXE%%\\Logs" (sous-répertoire "Logs" du répertoire du service Manta) |
| **ServerLogMaxSize** | Taille maximale d'un fichier de log (en Mo).<br><br>Cette taille doit être supérieure à 1. | 20 Mo |
| **TmpPath** | Chemin du répertoire temporaire. Ce répertoire peut être utilisé par exemple pour créer des fichiers temporaires lors de la réindexation de gros fichiers. |   |
| **WindowsFileCacheSize** | Configure la gestion des caches disques de Windows.<br><br>Les valeurs possibles sont :<br><br><br><br>- -1, pour une taille calculée automatiquement,<br><br>- 0, pour une taille du cache sans limite,<br><br>- une valeur positive permet de définir une taille de cache personnalisée.<br><br><br>Remarque : La gestion standard des caches disques de Windows en mode 64 bits (indépendamment de HFSQL) peut amener à des saturations mémoire. Cette option permet de personnaliser la gestion des caches mémoire. | -1 |
| **WLDebugPort** | Port utilisé pour le débogage des procédures stockées et des triggers Client/Serveur. | 27281 |

Remarque : Dans les chemins de répertoire, il est possible d'utiliser %%COMMONAPPDATA%% : 

- Sous Windows, le répertoire obtenu correspond à celui obtenu par la fonction [SysRep](../WDLang1/3073026.md) (syntaxe : SysRep(srAppDataCommun)).

- Sous Linux, le répertoire obtenu est "/var/lib/". 



<a name="NOTE2_3"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) 

### Section MANAGER
<a name="section_manager_ELTPARAGRAPHE000390"></a>La section MANAGER est utilisée en Linux uniquement. Cette section peut contenir les mots-clés suivants :

- **RestartOnFailed** : Active le relancement du serveur après une erreur fatale. La valeur de ce mot-clé peut être 0 (pas d'activation) ou 1 (activation). Par défaut, ce mot-clé vaut 1 (activation).

- **CheckPeriod** : Période (exprimée en secondes) après laquelle MantaManager vérifie si le serveur s'est arrêté anormalement. Par défaut, 600 secondes (soit toutes les 10 minutes).



<a name="NOTE2_4"></a>


### Section AUTOANALYSE
<a name="section_autoanalyse_ELTPARAGRAPHE000402"></a>La section AUTOANALYSE permet de paramétrer l'optimisation des index en tâche de fond. Cette section peut contenir le mot-clé suivant :

**Enabled** : Active l'optimisation des index en tâche de fond. La valeur de ce mot-clé peut être 0 (pas d'activation) ou 1 (activation). Par défaut, ce mot-clé vaut 1 (activation).

Si l'optimisation des index en tâche de fond est activée, les index des fichiers de données sont automatiquement optimisés si les conditions suivantes sont réunies : 

- les statistiques du fichier de données n'ont pas été calculées depuis au moins 7 jours. 

- le fichier de données a été créé depuis au moins 1 jour. 

- le nombre d'écritures depuis le dernier calcul de statistiques est supérieur à 1000 (plus 10% du nombre d'enregistrements du fichier). 




Si l'optimisation des index est lancée, cette opération n'est pas bloquante. 


<a name="NOTE2_5"></a>


### Section TELEMETRY
<a name="section_telemetry_ELTPARAGRAPHE000422"></a>La section TELEMETRY permet de paramétrer la mise en place de la transmission des données pour le serveur HFSQL (télémétrie). Il est ainsi possible de participer à l'amélioration du produit installé en autorisant la collecte d'informations relatives à l'utilisation du produit. Cette collecte, facultative et anonyme, permet à PC SOFT d'améliorer les fonctionnalités du produit.

Cette section contient le mot-clé suivant :

**Active** : Active la transmission des données relatives à l'utilisation du serveur HFSQL. La valeur de ce mot-clé peut être : 

- 1, si lors de l'installation du serveur HFSQL, la transmission des données (télémétrie) a été activée,

- 0, si lors de l'installation du serveur HFSQL, la transmission des données (télémétrie) a été refusée.

- une autre valeur si aucun choix n'a été fait lors de l'installation concernant l'usage de la télémétrie. La question sera reposée lors de la prochaine installation du serveur HFSQL.




Remarque : Si la section "TELEMETRY" n'existe pas dans le fichier HFConf.ini, la transmission des données relatives à l'utilisation du produit n'est pas activée pour le serveur HFSQL.






<a name="NOTE2_6"></a>


### Section ACTIVEDIRECTORY
<a name="section_activedirectory_ELTPARAGRAPHE000443"></a>La section ACTIVEDIRECTORY permet de configurer l'authentification via Active Directory. 

Cette section contient les mots-clés suivants :

- **Enabled** : Active l'authentification via Active Directory. La valeur de ce mot-clé peut être 0 (pas d'activation) ou 1 (activation). 

- **KerberosKeyFile** (utilisé uniquement sous Linux) : Chemin vers la "keytab". 











