
## Gestion de l'Unicode dans les fichiers HFSQL
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000179"></a>
L'analyse propose deux types de rubriques Unicode : 

- rubrique de type "Texte Unicode" 

- rubrique de type "Mémo Unicode". 


Ces rubriques permettent de stocker des informations au format Unicode.

Ces rubriques peuvent être associées à une langue : le tri effectué sur la rubrique prendra en compte la langue spécifiée. L'association à la langue peut être effectuée :

- directement dans l'éditeur d'analyses.

- par programmation grâce à la variable [H.CréationLangueUnicode](../WDLang4/3044382.md). Cette variable doit être utilisée avant la création des fichiers de données (fonction [HCréation](../WDLang4/3044255.md) ou [HCréationSiInexistant](../WDLang4/3044254.md)).




Les textes saisis dans les rubriques Unicode sont gérés automatiquement par les différents champs de la fenêtre ou de la page, les tables, ...





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000209"></a>


### Créer une rubrique de type Unicode dans l'analyse
<a name="creer_une_rubrique_type_unicode_dans_analyse_ELTPARAGRAPHE000042"></a>Lors de la création de la rubrique sous l'éditeur d'analyses (voir [Manipulations de rubriques](../Editeurs/2011009.md) pour plus de détails), il suffit d'indiquer le sous-type voulu pour la rubrique. Une rubrique de type Texte peut être :

- Une chaîne (correspond à une chaîne de caractères Ansi)

- Un caractère

- Unicode (correspond à une chaîne de caractères Unicode)

- Mémo texte (correspond à un mémo texte Ansi)

- Mémo texte Unicode (correspond à un mémo texte Unicode).




Lors de la sélection d'un type Unicode (chaîne ou mémo texte), l'éditeur d'analyses permet de saisir les caractéristiques de la langue qui sera saisie dans cette rubrique.
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Unicode_Analyse.gif)


Ces caractéristiques sont nécessaires pour effectuer le tri sur la rubrique. 

- Si une langue est sélectionnée, cette langue sera utilisée pour réaliser les tris sur la rubrique en cours. Un tri linguistique sera réalisé. Le tri est effectué selon l'ordre suivant :

	1. Tri sur l'ensemble de la chaîne.

	2. Prise en compte des accents.

	3. Prise en compte des majuscules.




- Si l'option "Langue" correspond à l'option "&lt; Définie à la création &gt;", il est possible de préciser les caractéristiques de la langue par programmation grâce à la variable [H.CréationLangueUnicode](../WDLang4/3044382.md). Cette variable doit être utilisée avant la création des fichiers de données (fonction [HCréation](../WDLang4/3044255.md) ou [HCréationSiInexistant](../WDLang4/3044254.md)). Ainsi, une même analyse peut être utilisée pour gérer plusieurs langues Unicode.

- Si l'option "Langue" correspond à "&lt;Tri binaire&gt;", le tri sera effectué en comparant la valeur binaire des octets. Ce type de tri est très rapide. Il est conseillé par exemple pour effectuer une recherche à l'identique. 

- Si l'option "Langue" correspond à "&lt;Tri rapide (multilingue)&gt;", une comparaison caractère par caractère sera effectué selon un tri générique. Le même tri sera effectué, quels que soient les caractères présents dans la rubrique. 





<a name="NOTE2_2"></a>


### Passer de l'Unicode à ANSI et inversement sous l'éditeur d'analyses
<a name="passer_unicode_ansi_inversement_sous_editeur_analyses_ELTPARAGRAPHE000087"></a>Il est possible de modifier le sous-type d'une rubrique en la passant de ANSI à Unicode (ou inversement). Dans ce cas, une modification automatique des données sera effectuée.

La conversion ANSI vers Unicode sera effectuée selon la langue spécifiée.

La conversion Unicode vers ANSI sera effectuée selon la langue en cours.



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## A savoir
<a name="savoir_ELTTEXTE000239"></a>


### Champs liés aux rubriques
<a name="champs_lies_aux_rubriques_ELTPARAGRAPHE000101"></a>Lors de la création des champs (dans une fenêtre ou une page), il est possible de spécifier si le champ est Unicode ou non (case à cocher "Unicode" dans l'onglet "Général" de la fenêtre de description du champ).

Lors de la création des champs liés à une rubrique Unicode, l'option "Unicode" est automatiquement cochée dans la description du champ.

La propriété [Unicode](../Proprietes/1000017001.md) permet de savoir et d'indiquer si la valeur d'un champ est une chaîne Unicode.


<a name="NOTE3_2"></a>


### Programmation en WLangage
<a name="programmation_wlangage_ELTPARAGRAPHE000116"></a>La programmation en WLangage des fichiers contenant des rubriques Unicode est identique à celle des fichiers contenant des rubriques ANSI. Les options de langue définies dans l'éditeur d'analyses sont prises en compte lors des parcours indexés et lors des tris pour définir l'ordre des enregistrements.

La propriété [Type](../Proprietes/2510131.md) permet de savoir si une rubrique est de type Unicode ou Ansi.


<a name="NOTE3_4"></a>


### Recherche avec la fonction HLitRecherche
<a name="recherche_avec_fonction_hlitrecherche_ELTPARAGRAPHE000129"></a>Il est conseillé de ne pas effectuer de recherches génériques sur des rubriques Unicode sensibles à la casse. En effet, le codage des caractères étant spécifique en Unicode,  ce type de recherche peut engendrer des résultats faux ou incomplets. 




