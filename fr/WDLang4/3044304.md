
## HFSQL Client/Serveur : Paramétrage du serveur
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Serveur Manta
<a name="serveur_manta_ELTTEXTE000315"></a>
Le **serveur Manta** est composé :

- du service **MantaManager** permet de communiquer avec l'application "Centre de Contrôle HFSQL" (outil d'administration à distance) et d'arrêter et/ou de lancer le ou les serveurs.

- du service **Manta**. 
	Par défaut, un seul service **Manta** est présent sur le poste serveur. Cependant, il est possible d'avoir plusieurs services **Manta** sur le même poste serveur. Cette configuration permet par exemple d'associer une application WINDEV/WEBDEV (ou un petit nombre d'applications WINDEV/WEBDEV) à un service **Manta**. Ainsi, si une application surcharge le service Manta, seules les applications associées à ce service seront bloquées ou ralenties.
	Pour utiliser cette configuration, il est nécessaire que chaque service Manta utilise un port réseau et un chemin de répertoire de bases de données différents.
	Remarque : En cas de défaillance, le service est automatiquement redémarré.






Sous WINDEV :
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ClientServeur_XManta03.gif)


Sous WEBDEV :
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WB_ClientServeur_XManta03.gif)




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Où est installé le serveur Manta ?
<a name="est_installe_serveur_manta_ELTTEXTE000345"></a>


### Comment installer HFSQL Client/Serveur ?
<a name="comment_installer_hfsql_clientserveur_ELTPARAGRAPHE000038"></a>L'installation de HFSQL Client/Serveur est disponible :

- Dans le package d'installation de WINDEV, WEBDEV et WINDEV Mobile.

- Dans le répertoire INSTALL de WINDEV, WEBDEV et WINDEV Mobile.

- via le système intégré de Debian.

- via le système intégré de RedHat.

- via Docker.




Le serveur HFSQL Client/Serveur peut être installé avec vos applications. Il suffit de l'inclure lors de la création du programme d'installation.

**Remarque** : Pour fonctionner, le serveur Manta doit être installé sur un poste ayant une version serveur de Windows (toutes les versions serveur de Windows dont le support est assuré par l'éditeur). Il est également possible d'installer le serveur Manta sur un poste ayant comme système d'exploitation Linux (processeur x86 ou compatible).
<a name="NOTE2_2"></a>


### Installation sous Linux
<a name="installation_sous_linux_ELTPARAGRAPHE000061"></a>Pour installer le serveur HFSQL Client/Serveur sur un serveur LINUX : 

1. Copiez les fichiers suivants sur le serveur : 

	- manta_install 

	- mantainstall.zip 

	- README
			Ces fichiers sont présents dans le sous-répertoire "Serveur HFSQL\\Linux4" du package d'installation. 




2. Connectez-vous au serveur en tant que "root"

3. Exécutez le fichier manta_install. Il est possible de : 

	- Installer un nouveau serveur.

	- Mettre à jour un serveur existant. 

	- Désinstaller un serveur.




4. Suivez les instructions affichées à l'écran. 


**Attention** : Il est nécessaire de faire défiler complètement la licence pour pouvoir afficher les écrans suivants. 

Pour installer le serveur HFSQL Client/Serveur 64 bits sur un serveur LINUX 64 bits : 

1. Copiez les fichiers suivants sur le serveur : 

	- manta_install64

	- mantainstall.zip 

	- README
			Ces fichiers sont présents dans le sous-répertoire "Serveur HFSQL\\Linux44_64" du package d'installation.




2. Connectez-vous au serveur en tant que "root"

3. Exécutez le fichier manta_install64. Il est possible de : 

	- Installer un nouveau serveur.

	- Mettre à jour un serveur existant. 

	- Désinstaller un serveur.




4. Suivez les instructions affichées à l'écran. 


**Attention** : Il est nécessaire de faire défiler complètement la licence pour pouvoir afficher les écrans suivants. 
<a name="NOTE2_3"></a>


### Installation via le système intégré de Debian
<a name="installation_via_systeme_integre_debian_ELTPARAGRAPHE000106"></a>Pour utiliser ce mode d'installation :
Exécutez l'action suivante (à partir de Ubuntu 22.04 et Debian 11): 
```txt
curl -sS https://package.windev.com/keys/hfsql_public.asc | \
gpg --dearmor | \
sudo tee /usr/share/keyrings/pcsoft.gpg > /dev/null

echo "deb [signed-by=/usr/share/keyrings/pcsoft.gpg] http://package.windev.com/fr/debian/ debian main" | \
sudo tee /etc/apt/sources.list.d/pcsoft.list

sudo apt update
sudo apt install hfsql
```


Pour les distributions Linux plus anciennes, vous pouvez exécuter l'action suivante : 
```txt
curl -sSL https://package.windev.com/keys/hfsql_public.asc | sudo apt-key add -
sudo echo "deb http://package.windev.com/fr/debian/ debian main" 
	> /etc/apt/sources.list.d/pcsoft.list
sudo apt-get update
sudo apt-get install hfsql
```


**Attention** : Si vous obtenez une erreur de la forme suivante : "gpg: failed to start the dirmngr" alors exécutez la commande suivante : 

```txt
sudo apt-get install dirmngr
```


Remarque : Ce mode d'installation fonctionne uniquement avec les distributions Debian version 8 minimum.
<a name="NOTE2_4"></a>


### Installation via le système intégré de RedHat et dérivé 
<a name="installation_via_systeme_integre_redhat_derive_ELTPARAGRAPHE000126"></a>Pour utiliser ce mode d'installation, veuillez effectuer les actions suivantes :

```txt
sudo dnf config-manager --add-repo http://package.windev.com/fr/rpm/pcsoft.repo
sudo dnf install hfsql
sudo systemctl start hfsql
```

<a name="NOTE2_5"></a>


### Installation via Docker 
<a name="installation_via_docker_ELTPARAGRAPHE000136"></a>Pour utiliser ce mode d'installation, utilisez l'adresse suivante :

```txt
https://hub.docker.com/r/windev/hfsql/
```


Pour plus de détails, consultez [HFSQL et Docker](../WDLang4/1000017420.md). 








<a name="NOTE2_6"></a>
Le **serveur Manta** peut être présent :

- soit sur le poste de développement :<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ClientServeur_XManta02.gif)


- soit sur le poste serveur : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ClientServeur_XManta.gif)







<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Centre de contrôle HFSQL : Outil d'administration du serveur à distance
<a name="centre_controle_hfsql_outil_administration_serveur_distance_ELTTEXTE000399"></a>
L'application **Centre de Contrôle HFSQL** permet de :

- administrer entièrement les différents serveurs utilisés.

- gérer les utilisateurs et les groupes d'utilisateurs des bases de données.

- visualiser et/ou modifier le contenu d'une base de données.

- effectuer des recherches dans une base de données.

- exécuter des requêtes sur une base de données.

- visualiser les connexions en cours sur une base de données ou sur un fichier de données.

- arrêter, démarrer, installer et/ou désinstaller un serveur.

- ...






<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Fichiers présents sur le poste serveur
<a name="fichiers_presents_sur_poste_serveur_ELTTEXTE000423"></a>
Par défaut, les fichiers présents sur le poste serveur se présentent de la façon suivante :


|   |   |   |
| --- | --- | --- |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=FichierServeur.gif)<br> | **1** | **Fichiers présents à la racine du serveur**<br>Le fichier **HFConf.ini** permet de définir :<br><br>- le chemin du répertoire contenant l'ensemble des fichiers de données des différentes applications WINDEV HFSQL Client/Serveur (point 2).<br>	Le mot-clé correspondant est "DBRootPath". <br>	Pour spécifier le répertoire du service Manta, utilisez la chaîne "%%EXE%%".<br><br>- le port réseau utilisé. Par défaut, le port 4900 est utilisé.<br>	Le mot-clé correspondant est "AccessPort".<br><br><br>Le fichier **Manta.exe** correspond au service Manta.<br>Le fichier **MantaManager.exe** correspond au service MantaManager.<br>Les fichiers **WDHFSrv.dll** et **WDSQLSrv.dll** correspondent aux librairies WINDEV nécessaires aux services Manta et MantaManager (port 4999). |
| **2** | **Répertoire BDD**<br>Ce répertoire contient l'ensemble des bases de données présentes sur le serveur. |
| **3** | **Répertoire __System**<br>Ce répertoire contient les fichiers permettant de définir :<br><br>- l'ensemble des règles d'intégrité entre les différentes bases de données.<br><br>- les utilisateurs des bases de données.<br><br>- les groupes d'utilisateurs des bases de données.<br><br>- les liaisons entre les utilisateurs et les groupes d'utilisateurs.<br><br><br> |
| **4** | **Répertoire DonnéesApplicationA**<br>Ce répertoire contient l'ensemble des fichiers de données utilisés par "ApplicationA". Le nom de ce répertoire est défini lors de la [création de la connexion utilisée par l'application](../WDLang4/3044301.md). |
| **5** | **Répertoire __System de DonnéesApplicationA**<br>Ce répertoire contient les fichiers permettant de définir l'ensemble des règles d'intégrité de "ApplicationA". |
| **6** | **Fichiers de données de DonnéesApplicationA**<br>Ensemble des fichiers de données utilisés par "ApplicationA".<br>Comme présenté dans le point 7, ces fichiers de données peuvent être également présents dans plusieurs sous-répertoires.<br>**Remarque** : Une même application peut utiliser des fichiers de données provenant de plusieurs bases de données. |
| **7** | **Fichiers de données de DonnéesApplicationB**<br>Ensemble des fichiers de données utilisés par "ApplicationB", présents dans plusieurs sous-répertoires.<br>**Remarque** : Une même application peut utiliser des fichiers de données provenant de plusieurs bases de données. |





<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Désinstallation des services d'un serveur
<a name="desinstallation_des_services_serveur_ELTTEXTE000447"></a>


### Vous pouvez désinstaller les services d'un serveur
<a name="vous_pouvez_desinstaller_les_services_serveur_ELTPARAGRAPHE000264"></a>

- soit en utilisant le package d'installation du module serveur HFSQL. Les services à désinstaller sont Manta et MantaManager.

- soit directement depuis le panneau de configuration de Windows (option "Ajout/Suppression de programmes").







