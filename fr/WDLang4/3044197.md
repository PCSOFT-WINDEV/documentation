


## Structure des fichiers journal (HFSQL Client/Serveur)
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000256"></a>
Lors de la journalisation d'un fichier de données HFSQL Client/Serveur, les fichiers suivants sont automatiquement créés :


|   |   |
| --- | --- |
| **JNL_FILES.FIC** | Description des fichiers journalés. |
| **JNL_OPERATION.FIC** | Description des actions effectuées sur un fichier journalé. |
| **JNL_USERS.FIC** | Description des utilisateurs effectuant une action sur un fichier journalé. |
| **xxxJNL.FIC** | Fichier créé pour chaque fichier journalé. Contient la valeur des enregistrements manipulés avant et après chaque opération. |

Ces fichiers sont créés selon la structure suivante :


|   |   |
| --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Journal_CS.gif)<br> | **1. Répertoire __JNL**<br>Ce répertoire contient :<br><br>- Le journal des fichiers<br><br>- Le journal des utilisateurs<br><br>- Le journal des opérations<br><br>- Pour chaque fichier journalisé de chaque base de données, le fichier journal correspondant. L'arborescence utilisée correspond à l'arborescence des fichiers de données associés à la base.<br><br><br>**Par exemple**, si le fichier Commande de DonneesApplicationA est journalé, le sous-répertoire __JNL\\DonneesApplicationA contiendra le fichier CommandeJNL.FIC.<br><br>**Autre exemple** : si le fichier Client de DonneesApplicationB est jounalé, le sous-répertoire __JNL\\DonneesApplicationA\\Client contiendra le fichier ClientJNL.FIC.<br><br>**2. Répertoire de la base de données** DonneesApplicationA<br><br>**3. Répertoire de la base de données** DonneesApplicationB |

Cette page détaille la structure de ces fichiers.



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Fichier JNL_FILES.FIC
<a name="fichier_jnlfilesfic_ELTTEXTE000286"></a>
Les différentes rubriques présentes dans le fichier JNL_FILES.FIC sont les suivantes :


|   |   |
| --- | --- |
| **JNLFile_ID** | Identifiant du fichier. |
| **Source_DB_File_Location** | Nom de la base de données +'\\'+chemin relatif du fichier journal. |
| **Source_File_GUID** | GUID du fichier journalé. |
| **JNL_File_GUID** | GUID du journal des écritures. |



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Fichier JNL_OPERATION.FIC
<a name="fichier_jnloperationfic_ELTTEXTE000310"></a>
Les différentes rubriques présentes dans le fichier JNL_OPERATION.FIC sont les suivantes :


|   |   |
| --- | --- |
| **Operation_ID** | Identifiant de l'opération. |
| **USER_ID** | Identifiant de l'utilisateur réalisant l'opération. Cet identifiant correspond à l'identifiant du fichier JNL_USER.Fic |
| **JNLFile_ID** | Identifiant du fichier journalé sur lequel l'opération est effectuée. Cet identifiant correspond à l'identifiant du fichier JNL_FILES.Fic. |
| **WLFunction_ID** | Identifiant de la fonction WLangage utilisée dans le programme. Pour retrouver le nom de la fonction WLangage utilisée, il suffit de consulter le fichier ListeDéfinitionHF.WL (présent dans le sous-répertoire "Personnel\\Externe\\" du produit) |
| **Server_Time** | Date de l'opération sur le serveur (au format UTC, temps universel) |
| **Record_Number** | Numéro de l'enregistrement modifié |
| **Source_Record_Backup_ID** | Identifiant dans le fichier des valeurs. Correspond à la valeur de l'enregistrement avant l'opération. |
| **Modified_Record_Bacup_ID** | Identifiant dans le fichier des valeurs. Correspond à la valeur de l'enregistrement après l'opération. |
| **HLogInfoMsg** | Valeur définie par la fonction [HJournalInfo](../WDLang4/3044009.md). |
| **HPost_ID** | Texte défini par la fonction [HPoste](../WDLang4/3044111.md). |



<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Fichier JNL_USERS.FIC
<a name="fichier_jnlusersfic_ELTTEXTE000334"></a>
Les différentes rubriques présentes dans le fichier JNL_USERS.FIC sont les suivantes :


|   |   |
| --- | --- |
| **User_ID** | Identifiant de l'utilisateur. |
| **Login** | Login de l'utilisateur. |
| **Workstation_Name** | Nom de la machine de l'utilisateur. |
| **Workstation_IPAddress** | Adresse IP de la machine de l'utilisateur. |
| **Application** | Nom de l'application |



<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Fichier *JNL.FIC (journal des écritures)
<a name="fichier_jnlfic_journal_des_ecritures_ELTTEXTE000358"></a>
Le fichier \*JNL.Fic contient :

- les rubriques présentées dans le tableau ci-dessous,

- toutes les rubriques journalées du fichier HFSQL journalé correspondant.





|   |   |
| --- | --- |
| **User_ID** | Identifiant de l'utilisateur ayant réalisé l'opération. Ce numéro permet d'identifier l'enregistrement dans le fichier JNL_Users.Fic |
| **Record_Number** | Numéro de l'enregistrement dans le fichier original journalé. |
| **Record_Status** | Etat de l'enregistrement (modifié, supprimé, ajouté, ...) |
| **WLFunction_ID** | Identifiant de la fonction WLangage utilisée dans le programme. Pour retrouver le nom de la fonction WLangage utilisée, il suffit de consulter le fichier ListeDéfinitionHF.WL (présent dans le sous-répertoire "Personnel\\Externe\\" du produit utilisé) |
| **Server_Time** | Date de l'opération sur le serveur (au format UTC, temps universel) |
| **HLogInfoMsg** | Valeur définie par la fonction [HJournalInfo](../WDLang4/3044009.md). |
| **HPost_ID** | Texte défini par la fonction [HPoste](../WDLang4/3044111.md). |
| **IDJNL** | Identifiant du journal |




