
## Réplication des données mobiles (Android ou iOS)
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000146"></a>
La Réplication Universelle Assistée est disponible en Android et iOS. 

Cette réplication permet de répliquer des données en provenance de différentes bases de données. 



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Mise en place
<a name="mise_place_ELTTEXTE000170"></a>


### Conditions nécessaires
<a name="conditions_necessaires_ELTPARAGRAPHE000023"></a>

- L'analyse doit être partagée entre l'application WINDEV et WINDEV Mobile (Android ou iOS). 

- La base de données Maître doit être une base de données HFSQL (Classic ou Client/Serveur). 

- La base de donnée mobile (Abonnée) doit être une base de données HFSQL Classic. 

- La structure de la base de données doit être strictement identique sur les deux plateformes.



<a name="NOTE2_2"></a>


### Les différentes étapes
<a name="les_differentes_etapes_ELTPARAGRAPHE000033"></a>Pour mettre en place une réplication dans une application mobile (Android ou iOS), les étapes sont les suivantes : 

1. [Installation du serveur de réplication](#NOTE2_3). 

2. [Définition de la réplication avec l'outil ReplicEdit](#NOTE2_4). 

3. [Appel des différentes fonctions WLangage pour gérer la synchronisation dans l'application mobile (Android ou iOS)](#NOTE2_5). 







<a name="NOTE2_3"></a>


### Installation du serveur de réplication
<a name="installation_serveur_replication_ELTPARAGRAPHE000051"></a>

L'installation du serveur de réplication est présentée dans la page [Serveur de réplication pour la réplication universelle assistée](../WDLang4/1000017227.md). 

Rappels/Remarques

- IMPORTANT : La date et l'heure doivent être identiques sur le serveur et les terminaux Android/iOS. Les dates internes (celles utilisées par la réplication dans les fichiers HFSQL) sont en UTC. 

- Le pack d'installation du serveur de réplication est fourni avec WINDEV, WEBDEV et WINDEV Mobile. Il se trouve dans le répertoire \\Install\\WDServeurR\\ du dossier d'installation des produits. 

- Si vous possédez des sites WEBDEV, le serveur de réplication peut être installé sur le même serveur que le Serveur d'Application WEBDEV.




**Attention** : Il est nécessaire de donner des droits spécifiques sur le répertoire d'installation du serveur de réplication. Sur ce répertoire (et dans les sous-répertoires), l'utilisateur Internet (compte IUSR_Nom_du_poste) doit avoir les droits de lecture et d'exécution.  
<a name="NOTE2_4"></a>


### Définition de la réplication
<a name="definition_replication_ELTPARAGRAPHE000069"></a>La définition de la réplication est effectuée avec l'outil ReplicEdit. 

Les différentes étapes pour créer une réplication pour les applications Android/iOS sont les suivantes : 

1. [Créer une réplication](../ReplicEdit/3526501.md). 

2. [Ajouter des fichiers dans une réplication](../ReplicEdit/3526504.md). 

3. [Publier la réplication](../ReplicEdit/3526505.md). 



<a name="NOTE2_5"></a>


### Programmation de la réplication
<a name="programmation_replication_ELTPARAGRAPHE000088"></a>Dans l'application Mobile, il est nécessaire d'utiliser les fonctions WLangage pour réaliser la synchronisation. 

L'assistant de publication de la réplication sur le serveur de réplication vous a fourni une base de code : 


```wl
// Ouvre une réplication sur le serveur de réplication
RéplicOuvre("nom réplication", "", "adresse IP", "login", "mot de passe")

// Initialise la réplication en passant les paramètres 
//SI RéplicInfo("nom réplication", replicInitialisée) = Faux ALORS
//	RéplicInitialise("nom réplication", <Paramètres>)
//FIN

// Lance la synchronisation
RéplicSynchronise("nom réplication")
```


Les fonctions à utiliser sont les suivantes : 



|   |   |
| --- | --- |
| [RéplicInfo](../WDLang4/1000017197.md) | Renvoie des informations sur une réplication. |
| [RéplicInitialise](../WDLang4/1000017195.md) | Initialise ou réinitialise une réplication définie avec l'éditeur de réplication (ReplicEdit). |
| [RéplicOuvre](../WDLang4/1000017194.md) | Ouvre une réplication en mode direct ou avec un serveur de réplication. |
| [RéplicSynchronise](../WDLang4/1000017196.md) | Synchronise les données correspondant à une réplication. |





**Remarque** : N'oubliez pas dans le code du projet Android (ou iOS) de paramétrer la connexion à la base locale (fichier HFSQL Classic sur l'appareil mobile). 



