


## Gestion des droits sur HFSQL Client/Serveur
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000335"></a>
Pour assurer la sécurité des données et la confidentialité de certaines informations, il peut être utile de restreindre certaines actions à un ensemble d'utilisateurs.

Il sera par exemple possible de donner plus de droits aux administrateurs de la base de données qu'aux utilisateurs finaux.

**Remarque** : Le Centre de Contrôle HFSQL permet une gestion graphique des droits accordés aux utilisateurs sur les différents éléments de la base de données.





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Quels sont les droits disponibles ?
<a name="quels_sont_les_droits_disponibles_ELTTEXTE000365"></a>


### Les utilisateurs "super utilisateur"
<a name="les_utilisateurs_super_utilisateur_ELTPARAGRAPHE000038"></a>Les utilisateurs désignés comme "Super utilisateur" sont autorisés à effectuer toutes les actions sur le serveur, les bases de données et sur tous les fichiers de données.

Pour qu'un utilisateur soit un "Super utilisateur", il suffit de l'indiquer dans les [variables de description des utilisateurs](../WDLang4/3044315.md).
<a name="NOTE2_2"></a>


### Affectation des droits
<a name="affectation_des_droits_ELTPARAGRAPHE000050"></a>Par défaut, lorsqu'un utilisateur ou un groupe est créé, celui-ci n'a aucun droit spécifique.

Il est possible de lui affecter les droits grâce aux fonctions suivantes :



|   |   |
| --- | --- |
| [HModifieDroitBaseDeDonnées](../WDLang4/3044326.md) | Modifie les droits donnés à un utilisateur ou à un groupe pour une base de données HFSQL Client/Serveur. |
| [HModifieDroitFichier](../WDLang4/3044327.md) | Modifie les droits accordés sur un fichier de données HFSQL Client/Serveur pour un utilisateur ou un groupe. |
| [HModifieDroitServeur](../WDLang4/3044328.md) | Modifie les droits accordés sur un serveur HFSQL pour un utilisateur ou un groupe. |





Lorsque l'utilisateur est associé à un groupe, l'utilisateur hérite automatiquement des droits accordés au groupe.
<a name="NOTE2_3"></a>


### Les différents droits disponibles
<a name="les_differents_droits_disponibles_ELTPARAGRAPHE000062"></a>Pour chaque type d'élément (base de données, fichier de données, serveur), il est possible de donner un ou plusieurs droits aux utilisateurs et/ou aux groupes.

Pour chaque droit, il est possible de donner une des valeurs suivantes :


|   |   |
| --- | --- |
| Autorisé | L'utilisateur ou le groupe est autorisé à utiliser cette fonctionnalité. |
| Hérité | Le droit est indéfini à ce niveau. Le serveur HFSQL utilise le droit défini au niveau supérieur :<br><br>- droit défini au niveau du groupe pour un utilisateur.<br><br>- droit défini au niveau de la base de données pour un fichier<br><br><br> |
| Interdit | L'utilisateur ou le groupe n'est pas autorisé à utiliser cette fonctionnalité. S'il tente d'utiliser cette fonctionnalité, une erreur WLangage indique que l'utilisateur ne possède pas les droits nécessaires pour utiliser cette fonctionnalité. |


**Pour connaître les droits actuels d'un utilisateur ou d'un groupe**, utilisez une des fonctions suivantes :



|   |   |
| --- | --- |
| [HInfoDroitBaseDeDonnées](../WDLang4/3044320.md) | Permet de connaître les droits sur une base de données définis pour un utilisateur ou un groupe. |
| [HInfoDroitFichier](../WDLang4/3044321.md) | Permet de connaître les droits accordés sur un fichier de données HFSQL Client/Serveur pour un utilisateur ou un groupe. |
| [HInfoDroitServeur](../WDLang4/3044322.md) | Permet de connaître les droits accordés sur un serveur à un utilisateur ou à un groupe d'utilisateurs. |





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Gestion d'une action sur un serveur, une base de données ou un fichier de données
<a name="gestion_une_action_sur_serveur_une_base_donnees_fichier_donnees_ELTTEXTE000447"></a>


### Action sur un serveur ou sur une base de données
<a name="action_sur_serveur_sur_une_base_donnees_ELTPARAGRAPHE000093"></a>Les actions dépendant d'un droit sont les suivantes :

- Supprimer ou ajouter des utilisateurs ou des groupes, visualiser des utilisateurs.

- Créer ou supprimer une base de données.

- Se connecter à un serveur (connexion cryptée uniquement).

- Créer un fichier.

- Arrêter le serveur.




Pour plus de détails sur les actions dépendant d'un droit, consultez les fonctions [HInfoDroitBaseDeDonnées](../WDLang4/3044320.md) et [HInfoDroitServeur](../WDLang4/3044322.md).

**Lorsqu'un utilisateur demande à effectuer une de ces actions**, le serveur effectue les opérations suivantes :

1. Vérification des droits de l'utilisateur pour réaliser cette action.

2. Les cas suivants peuvent se présenter :

	- L'action est autorisée pour l'utilisateur : l'action est effectuée.

	- L'action est interdite pour l'utilisateur : l'action est refusée.

	- L'action est héritée : le serveur recherche les droits des groupes auxquels l'utilisateur appartient.







Si l'utilisateur appartient à au moins un groupe pour lequel l'action sur ce serveur ou cette base de données est autorisée, l'action est autorisée, sinon l'action est refusée.
<a name="NOTE3_2"></a>


### Action sur un fichier de données
<a name="action_sur_fichier_donnees_ELTPARAGRAPHE000125"></a>Les actions dépendant d'un droit sont les suivantes :

- Lire les enregistrements d'un fichier de données.

- Ajouter, modifier, supprimer des enregistrements.

- Supprimer un fichier de données.

- Lancer une modification automatique des données.

- Lancer une ré-indexation ou un calcul de statistiques sur un fichier de données.

- Modification des règles d'intégrité.

- Brancher ou débrancher la gestion des doublons.




Pour plus de détails sur les actions dépendant d'un droit, consultez la fonction [HInfoDroitFichier](../WDLang4/3044321.md).

**Lorsqu'un utilisateur demande à effectuer une de ces actions**, le serveur effectue les opérations suivantes :

1. Vérification des droits de l'utilisateur pour réaliser cette action.

2. Les cas suivants peuvent se présenter :

	- L'action est autorisée pour l'utilisateur : l'action est effectuée

	- L'action est interdite pour l'utilisateur : l'action est refusée

	- L'action est héritée : le serveur recherche les droits des groupes auxquels l'utilisateur appartient.

		- Si l'utilisateur appartient à au moins un groupe pour lequel l'action sur ce fichier de données a été autorisé : l'action est effectuée.

		- Si l'utilisateur appartient à au moins un groupe pour lequel l'action sur ce fichier de données a été interdite : l'action est refusée.




- Si l'action n'a pas été définie au niveau du groupe, le serveur recherche si l'action sur la base de données à laquelle appartient le fichier est :

	- autorisée : l'action est effectuée.

	- interdite : l'action est refusée.



<a name="NOTE3_3"></a>


### Exemple
<a name="exemple_ELTPARAGRAPHE000165"></a>Les droits d'un utilisateur sont définis de la manière suivante :


|   |   |   |
| --- | --- | --- |
| Elément | Droit de lecture | Droit d'ajouter un enregistrement |
| Base de données | Interdit | Autorisé |
| Fichier 1 de la base de données | Autorisé | Interdit |
| Fichier 2 de la base de données | Hérité | Hérité |

Dans ce cas :

- L'utilisateur pourra lire les enregistrements du Fichier 1 et ajouter des enregistrements dans le fichier 2.

- L'utilisateur n'a pas le droit de lire les enregistrements du fichier 2 car l'interdiction est héritée du droit défini sur la base de données.

- L'utilisateur ne peut pas ajouter d'enregistrements dans le fichier 1 car cette action lui est explicitement interdite.




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Cas particuliers
<a name="cas_particuliers_ELTTEXTE000483"></a>


### Propriétaire d'une base de données ou d'un fichier de données
<a name="proprietaire_une_base_donnees_fichier_donnees_ELTPARAGRAPHE000205"></a>Les bases de données et les fichiers de données possèdent un propriétaire. L'utilisateur qui crée la base ou le fichier est automatiquement déclaré propriétaire de cet élément.

- Droit de modifier le propriétaire : 
	Seul le propriétaire de l'élément ou un utilisateur possédant le droit de "Modifier le propriétaire" peut changer le propriétaire de l'élément.
	Le droit de "Modifier le propriétaire" ne peut être accordé que par le propriétaire de l'élément ou un utilisateur possédant le droit de "Modifier le propriétaire".

- Connaître et modifier le propriétaire : 

	- Le propriétaire pourra être connu grâce aux fonctions suivantes :
			


|   |   |
| --- | --- |
| [HInfoPropriétéBaseDeDonnées](../WDLang4/3044323.md) | Permet de connaître les propriétés d'une base de données située sur un serveur HFSQL. |
| [HInfoPropriétéFichier](../WDLang4/3044324.md) | Permet de connaître les propriétés d'un fichier de données situé sur un serveur HFSQL. |

- Le propriétaire pourra être modifié par les fonctions suivantes :
			




Il est également possible de modifier le propriétaire par le Centre de Contrôle HFSQL.

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Modifier un droit
<a name="modifier_droit_ELTTEXTE000539"></a>
La modification d'un droit consiste à autoriser, interdire ou retirer une autorisation ou une interdiction.

Pour modifier un droit, il est nécessaire :

- soit de posséder le droit "Modifier les droits".

- soit d'être "Super Utilisateur".




Remarque : Le propriétaire de la base de données ou du fichier de données est toujours autorisé à se rajouter le droit de "Modifier les droits" sur cet élément (fonction [HModifieDroitBaseDeDonnées](../WDLang4/3044326.md) ou [HModifieDroitFichier](../WDLang4/3044327.md))

<a name="NOTE6"></a>
<a name="NOTE6_1"></a>


## Quels sont les droits nécessaires pour ajouter/modifier les utilisateurs ou les groupes ?
<a name="quels_sont_les_droits_necessaires_pour_ajoutermodifier_les_utilisateurs_les_groupes_ELTTEXTE000563"></a>
Le tableau suivant présente les droits nécessaires pour manipuler les caractéristiques des utilisateurs et ou des groupes :

|   | hDroitGestionUtilisateur | hDroitVisualisationUtilisateur |
| --- | --- | --- |
| Actions sur les autres utilisateurs ou groupes (différents de l'utilisateur et du groupe en cours) |   | x |
| Modifier le nom d'un utilisateur ou d'un groupe | x | x |
| Ajouter un  utilisateur ou un groupe | x | x |
| Modifier les caractéristiques de l'utilisateur ou du groupe en cours | x |   |
| Voir les utilisateurs ou les groupes |   | x |


Ces constantes sont utilisées dans les fonctions [HInfoDroitServeur](../WDLang4/3044322.md) et [HModifieDroitServeur](../WDLang4/3044328.md).


