
## Réplication journalée
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000183"></a>
La réplication est l'opération permettant de maintenir à jour des bases de données distantes de structures identiques, et sur lesquelles des opérations différentes sont effectuées. Les opérations effectuées sur chacune des bases de données sont reportées sur toutes les autres bases de données.

Pour plus de détails sur la réplication et le vocabulaire associé à la réplication, consultez [La réplication](../WDLang4/3044266.md).

**WINDEV et WEBDEV proposent deux possibilités pour mettre en place la réplication journalée** : 

- [**Utiliser l'outil WDReplic**](../WDReplic/3520002.md). Dans ce cas, aucune programmation spécifique n'est nécessaire. Il suffit uniquement de configurer les différentes options de réplication. Cet outil (et les fichiers de configuration nécessaires) devra être installé avec les bases de données à répliquer.

- [**Utiliser les fonctions WLangage**](../WDLang4/3044279.md). Dans ce cas, toute la gestion de la réplication sera effectuée directement dans l'application grâce à des options spécifiques. Ces options utiliseront les fonctions WLangage permettant de mettre en place la réplication.




**Remarque** : La réplication journalée n'est pas disponible en HFSQL Client/Serveur. Il est conseillé d'utiliser la [réplication universelle](../WDLang4/9000032.md).





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Mettre en place la réplication journalée avec WDReplic
<a name="mettre_place_replication_journalee_avec_wdreplic_ELTTEXTE000213"></a>


### Les étapes
<a name="les_etapes_ELTPARAGRAPHE000040"></a>Pour mettre en place la réplication journalée avec WDREPLIC, il faut : 

1. Modifier l'analyse (pour plus de détails sur les modifications nécessaires pour gérer la réplication, consultez [Modification de l'analyse pour la réplication jounalée](../WDLang4/3044246.md)).

2. Créer l'exécutable (pour une application WINDEV), puis la procédure d'installation. 
	Remarque : Lors de la création de la procédure d'installation, pensez à ajouter WDReplic dans le programme d'installation.

3. Installer l'application (et l'outil WDREPLIC) sur les sites maîtres et abonnés. L'installation de l'application comprend en plus des modules habituels :

	- l'utilitaire WDReplic si la réplication est réalisée avec cet outil

	- une mise à jour automatique des fichiers de données. Cette mise à jour permet de journaler (si nécessaire) et de répliquer les fichiers de données. Si les fichiers étaient déjà journalés, les journaux existants sont purgés.
			Rappel : Pour mettre en place la réplication, les fichiers de données doivent avoir une structure (analyse) identique sur tous les postes (poste maître et postes abonnés).




4. Configurer WDReplic sur le poste maître.

5. Installer les fichiers nécessaires au fonctionnement de WDReplic sur les postes abonnés.




Pour plus de détails sur l'utilisation de WDReplic, consultez [Aide de WDReplic](../WDReplic/3520002.md).


<a name="NOTE2_2"></a>


### Important : conditions de mise en place
<a name="important_conditions_mise_place_ELTPARAGRAPHE000069"></a>La mise en place de la réplication journalée dans une application n'est pas une opération anodine.

Il est conseillé de respecter quelques règles de base.

Ainsi, pour chaque fichier en réplication, il est conseillé d'utiliser une seule clé unique dans vos fichiers. Cette clé unique doit être de type "Identifiant automatique sur 8 octets".

Pour plus de détails sur les modifications nécessaires dans l'analyse, consultez [Réplication journalée : Modification de l'analyse](../WDLang4/3044246.md).



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mettre en place la réplication journalée par programmation
<a name="mettre_place_replication_journalee_par_programmation_ELTTEXTE000243"></a>
Pour mettre en place la réplication journalée par programmation, il faut :

1. Modifier l'analyse (pour plus de détails sur les modifications nécessaires pour gérer la réplication, consultez [Réplication journalée : Modification de l'analyse](../WDLang4/3044246.md)).

2. Modifier l'application pour gérer la réplication avec les fonctions WLangage. Pour plus de détails, consultez [Réplication journalée : Programmer en WLangage](../WDLang4/3044279.md)

3. Créer l'exécutable (pour une application WINDEV) et le programme d'installation.  

4. Installer l'application sur les sites maîtres et abonnés. L'installation de l'application doit comprendre une mise à jour automatique des fichiers de données. Cette mise à jour permet de journaler (si nécessaire) et configurer les fichiers de données pour la réplication. Si les fichiers étaient déjà journalés, les journaux existants sont purgés.




Rappel : Pour mettre en place la réplication journalée, les fichiers de données doivent avoir une structure (analyse) identique sur tous les postes (poste maître et postes abonnés).


<a name="NOTE3_2"></a>


### Important : conditions de mise en place
<a name="important_conditions_mise_place_ELTPARAGRAPHE000106"></a>La mise en place de la réplication journalée dans une application n'est pas une opération anodine.

Il est conseillé de respecter quelques règles de base.

Ainsi, pour chaque fichier en réplication, il est conseillé d'utiliser une seule clé unique dans vos fichiers. Cette clé unique doit être de type "Identifiant automatique sur 8 octets".

Pour plus de détails sur les modifications nécessaires dans l'analyse, consultez [Réplication journalée : Modification de l'analyse](../WDLang4/3044246.md).



<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Précaution
<a name="precaution_ELTTEXTE000273"></a>


### Déplacement manuel des fichiers de données
<a name="deplacement_manuel_des_fichiers_donnees_ELTPARAGRAPHE000125"></a>Attention : Pour déplacer manuellement des fichiers de données, il est nécessaire de respecter les règles suivantes :

1. Mettez à jour tous les réplicas sur les postes concernés.

2. Copiez les fichiers de données sur les postes concernés.

3. Sauvegardez puis supprimez les fichiers suivants :

	- tous les fichiers journaux (fichiers ".JNL").

	- tous les fichiers de tables des identifiants (fichiers "JournalIdentification.\*").

	- tous les fichiers de tables des opérations (fichiers "JOurnalOpération.\*").










