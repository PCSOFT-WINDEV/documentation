


## UploadLance (Fonction)

***En anglais : UploadStart***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Lance l'envoi des fichiers sélectionnés dans un champ Upload. A la fin de l'envoi, la liste des fichiers à envoyer est vidée sur le navigateur (que le champ envoie un ou plusieurs fichiers).
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// -- Evénement "A chaque modification de la liste des fichiers sélectionnés"
// dans le champ UPL_Upload
// Lance l'envoi du fichier et transmet le contenu du champ SAI_Famille
UploadLance(MoiMême, SAI_Famille)
```

```wl
// -- Evénement "Réception des fichiers uploadés"
PROCEDURE Réception(NomFamille)
// Copie le fichier dans le répertoire correspondant à la famille
UploadCopieFichier(MoiMême, ComplèteRep(sRépertoireDestination) + NomFamille, "")
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`UploadLance(<Champ Upload> [, <Paramètre 1> [... [, <Paramètre N>]]])`
---

**`<Champ Upload> : (Chaîne de caractères)`**

Nom du champ Upload à manipuler.

**`<Paramètre 1> : (Tout type)`**

Premier paramètre à passer à l'événement serveur "Réception des fichiers uploadés". Pour récupérer ce paramètre, il est nécessaire de déclarer dans l'événement "Réception des fichiers uploadés" une procédure de la forme : 

```txt
PROCEDURE NomProcédure(<Paramètre 1> [, ... [, <Paramètre N>]])
```




**`<Paramètre N> : (Tout type)`**

Nième paramètre à passer à l'événement serveur "Réception des fichiers uploadés". Pour récupérer ce paramètre, il est nécessaire de déclarer dans l'événement "Réception des fichiers uploadés" une procédure de la forme : 

```txt
PROCEDURE NomProcédure(<Paramètre 1> [, ... [, <Paramètre N>]])
```




<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Fonctionnement de l'upload des fichiers réalisé grâce au champ Upload
<a name="fonctionnement_upload_des_fichiers_realise_grace_champ_upload_ELTPARAGRAPHE000070"></a>Plusieurs événements sont associés au champ Upload (simple ou multifichier) : 

- Dans le cas d'un champ Upload simple, ces événements sont associés au bouton "Envoyer". 

- Dans le cas d'un champ Upload multi-fichiers, ces événements sont associés au bouton "Ajouter". 




Les événements utilisés lors de l'upload des fichiers sélectionnés sont les suivants : 

- Evénement navigateur **"Progression du transfert"** : 
	Lors de l'avancement de l'envoi, cet événement est régulièrement appelé pour permettre la mise à jour d'une éventuelle jauge.

- Evénement serveur **"Réception des fichiers uploadés"** : 
	Cet événement est exécuté lorsque tous les fichiers sont reçus par le serveur. 
	**Remarque** : Si la fonction **UploadLance** est appelée avec des paramètres supplémentaires, ces paramètres sont transmis à l'événement "Réception des fichiers uploadés". Pour récupérer ces paramètres, il est nécessaire de déclarer une procédure dans cet événement (via l'instruction PROCEDURE).



<a name="NOTE0_2"></a>


### Limites
<a name="limites_ELTPARAGRAPHE000096"></a>Les modifications effectuées dans l'événement serveur "Réception des fichiers uploadés" ne sont PAS reportés dans le navigateur. Ces modifications seront visibles uniquement lors du prochain affichage de la page.
<a name="NOTE0_3"></a>


### Taille maximale des fichiers à uploader
<a name="taille_maximale_des_fichiers_uploader_ELTPARAGRAPHE000241"></a>**Par défaut,** la taille des fichiers à uploader est illimitée dans le moteur WEBDEV. Cette taille peut être limitée par le serveur d'application WEBDEV. 
Si le fichier à uploader dépasse la taille limite, le fichier n'est pas uploadé.
Pour modifier la taille maximale des fichiers à uploader dans le serveur d'application WEBDEV, il est nécessaire de modifier la base de registre sur le serveur :  

1. Pour modifier la taille des fichiers uploadés pour toutes les applications WEBDEV 28, sélectionnez la clé : HKEY_LOCAL_MACHINE\\SOFTWARE\\PC SOFT\\WEBDEV\\28.0 sur une machine 32 bits et HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\PC SOFT\\WEBDEV\\28.0 sur une machine 64 bits.

2. Ajoutez la chaîne MAX_UPLOAD. Cette chaîne aura pour valeur la taille maximale des fichiers à uploader (en Ko).




- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=UploadouDownloadd'unfichier.gif) ***Exemples unitaires (WEBDEV)*** : **Upload ou Download d'un fichier** <br>Upload (copier vers le serveur) et download (télécharger depuis le serveur) d'un fichier :<br>- Copier un fichier du poste navigateur vers le poste serveur<br>- Télécharger un fichier présent sur le serveur<br>- Télécharger un fichier présent sur le serveur grâce à un lien<br>- Télécharger un fichier présent sur le serveur en demandant son ouverture


<a name="XComposante"></a>

## Composante :
WDJS.DLL
