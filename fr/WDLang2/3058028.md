
## DéclareContexteAWP (Fonction)

***En anglais : DeclareAWPContext***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Permet de déclarer une liste de variables dont la valeur sera persistante entre les affichages successifs des pages AWP. Cette fonction indique quelles variables sauver et restaurer à chaque ré-affichage de pages AWP. Il est ainsi possible de gérer un contexte AWP. Deux modes de gestion des contextes sont disponibles :

- Gestion des contextes par cookies (par défaut).

- Gestion des contextes sur disque.


Le choix du mode de gestion des contextes est réalisé avec la fonction [ConfigureContexteAWP](../WDLang2/1000017066.md). Par défaut, si cette fonction n'est pas utilisée, le mode de gestion des contextes est la gestion des contextes par cookies. 

La fonction **DéclareContexteAWP** est prise en compte uniquement en mode AWP.

Il est conseillé d'utiliser cette fonction dans l'événement "Initialisation" associé au projet (pour les variables du projet) et / ou dans l'événement "Initialisation" des pages (pour les variables des pages). En règle générale, il faut utiliser cette fonction dans le traitement où sont déclarées et initialisées les variables.
Si votre projet utilise les sessions prélancées, cette fonction ne doit pas être utilisée dans l'événement "Initialisation" du projet. Cette fonction doit être utilisée dans l'événement "Initialisation du projet après connexion au site". 

**Remarque** : Pour plus de détails :

- sur les pages AWP, consultez [Les pages dynamiques AWP](../WDChamp/3539009.md).

- sur la gestion des contextes AWP, consultez [Gestion des contextes AWP](../WDChamp/3539060.md).




**Attention** : Cette fonction est destinée aux développeurs maîtrisant WEBDEV.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// -- Code d'initialisation du projet 
gnNumProduitEnCours est un entier = 1

// On indique qu'on souhaite sauver la valeur de gnNumProduitEnCours
// à chaque affichage d'une page AWP
DéclareContexteAWP(gnNumProduitEnCours)

// Lors des prochains affichage de la page :
// - soit la valeur gnNumProduitEnCours n'est pas récupérée 
// et elle est automatiquement réinitialisée avec "1"
// (par exemple, lors du premier affichage de la page)
// - soit la valeur gnNumProduitEnCours est récupérée et utilisée
// (par exemple, lors des affichages suivants)
```



<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = DéclareContexteAWP(<Nom de la variable 1> [, <Nom de la variable 2> [... [, <Nom de la variable N>]]])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la ou les variables indiquées ont bien été restaurées, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire (lors du premier affichage de la page par exemple).




**`<Nom de la variable 1> : (Type de la variable)`**

Nom de la première variable à sauver à la fin de l'affichage. La valeur de cette variable sera récupérée lors des réaffichages successifs de la page.

**`<Nom de la variable 2> : (Type de la variable (paramètre optionnel))`**

Nom de la 2ème variable à sauver à la fin de l'affichage. La valeur de cette variable sera récupérée lors des réaffichages successifs de la page.



**`<Nom de la variable N> : (Type de la variable (paramètre optionnel))`**

Nom de la Nème variable à sauver à la fin de l'affichage. La valeur de cette variable sera récupérée lors des réaffichages successifs de la page.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques




### Si le mode de gestion des contextes par cookies est utilisé (constante ctxCookie utilisée dans la fonction ConfigureContexteAWP) : 
<a name="mode_gestion_des_contextes_par_cookies_est_utilise_constante_ctxcookie_utilisee_dans_fonction_configurecontexteawp_ELTPARAGRAPHE000078"></a>

- La fonction **DéclareContexteAWP** utilise les cookies HTTP. Si le navigateur utilisé sur le poste en cours ignore les cookies HTTP, les valeurs des variables ne sont pas restaurées.

- La taille totale des valeurs des différentes variables est limitée à environ 4ko. Si la taille de ces valeurs est trop importante, ces valeurs seront tronquées (variables manquante et/ou contenu tronqué).

- La fonction **DéclareContexteAWP** n'est pas recommandée pour les données sensibles (mot de passe de l'utilisateur par exemple). En effet, les données transitent par le navigateur. Il ne faut donc PAS utiliser cette fonction pour mémoriser la connexion d'un utilisateur par exemple.

- Si deux variables sauvées ont le même nom (par exemple une dans le projet et l'autre dans une page) seule la première variable est mémorisée.

- La fonction **DéclareContexteAWP** renvoie <u><u><u><u>Faux</u></u></u></u> si une des variables n'a pas été restaurée.

- Seules les variables passées à la fonction **DéclareContexteAWP** lors d'un affichage de page pourront être récupérées lors de l'affichage suivant. Les variables passées précédemment ne sont pas automatiquement sauvegardées une nouvelle fois.

- Seules les variables de type simple (entier, chaîne, ...) sont gérées.





<a name="NOTE0_2"></a>




### Si le mode de gestion des contextes sur disque est utilisé (constante ctxDisque utilisée dans la fonction ConfigureContexteAWP): 
<a name="mode_gestion_des_contextes_sur_disque_est_utilise_constante_ctxdisque_utilisee_dans_fonction_configurecontexteawp_ELTPARAGRAPHE000109"></a>

- La fonction **DéclareContexteAWP** utilise les contextes sur disque. Les valeurs des variables sont toujours restaurées.

- La taille totale des valeurs des différentes variables n'est pas limitée.

- La fonction **DéclareContexteAWP** peut être utilisée pour des données sensibles (mot de passe de l'utilisateur par exemple). 

- Si deux variables sauvées ont le même nom (par exemple une dans le projet et l'autre dans une page), les deux variables sont mémorisées indépendamment.

- La fonction **DéclareContexteAWP** renvoie <u><u><u><u>Faux</u></u></u></u> si une des variables n'a pas été restaurée.

- Toutes les variables passées à la fonction **DéclareContexteAWP** lors d'un affichage de page pourront être récupérées lors de l'affichage suivant. Les variables passées précédemment sont automatiquement sauvegardées une nouvelle fois.

- Les variables de type simple (entier, chaîne, ...) sont gérées, ainsi que les variables de type : 

	- structure, 

	- classe, 

	- tableau, 

	- tableau associatif, 

	- combinaison

	- énumération




- Les types de variables suivants ne sont pas gérés : 

	- les tableaux fixes, 

	- les membres globaux de classes, 

	- les tableaux associatifs de structures locales, 

	- les prises de référence vers des objets dynamiques.









<a name="XComposante"></a>

## Composante :
wd280page.dll
