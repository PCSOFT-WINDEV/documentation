
## NavigateurHistoriqueAjoute (Fonction)

***En anglais : BrowserHistoryAdd***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Ajoute une entrée dans l'historique de navigation en lui associant des données. Ces données seront transmises lors du retour sur cette entrée.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Passe dans le plan suivant de l'application
CELL_Principale.Plan++
// Ajoute une entrée d'historique
// Les données transmises sont simplement le numéro du plan
NavigateurHistoriqueAjoute(CELL_Principale.Plan, MaPage.Titre, "#Plan" + CELL_Principale.Plan)
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`NavigateurHistoriqueAjoute(<Données> [, <Titre> [, <URL>]])`
---

**`<Données> : (Type des données)`**

Etat associé à la page pour la nouvelle entrée de l'historique. 

**`<Titre> : (Chaîne de caractères optionnelle)`**

Nouveau titre de la page.
Attention : ce titre est actuellement ignoré par une majorité de navigateur.

**`<URL> : (Chaîne de caractères optionnelle)`**

Nouvelle URL qui sera affichée par le navigateur. Cette URL est utilisée uniquement pour l'affichage dans la barre d'adresse. Il n'est donc pas nécessaire de mettre une URL valide. En revanche si l'utilisateur copie cette URL et l'utilise dans un autre navigateur, si l'URL n'est pas valide, le chargement de la page échouera.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Fonctionnement
<a name="fonctionnement_ELTPARAGRAPHE000038"></a>Les données ajoutées décrivent l'état associé à la page pour la nouvelle entrée de l'historique. 

Si l'internaute retourne en arrière dans l'historique et revient sur une entrée mémorisée dans l'historique, les données mémorisées seront transmises à l'événement "Déplacement dans l'historique de navigation" (événement optionnel de la page). Cet événement doit les traiter pour restaurer l'état de la page. Cet événement doit être associé à une procédure qui attend en paramètre les données transmises : 

```txt
// Evénement "Déplacement dans l'historique de navigation (onpopstate)"
PROCEDURE <NomProcédure>(<Données>)
```


Exemple : Cet exemple ajoute la page dans l'historique et mémorise l'heure d'insertion. Le retour sur la page précédente de l'historique affiche l'heure.

```wl
x est un Variant
x.Heure = HeureSys()
NavigateurHistoriqueAjoute(x, MaPage.Titre, "#avant") 

x.Heure = HeureSys()
NavigateurHistoriqueAjoute(x, MaPage.Titre, "#apres")
```

```wl
// Evénement "Déplacement dans l'historique de navigation (onpopstate)" 
PROCÉDURE TraitementHistorique(stEtat)
Info(stEtat.Heure)
```


Remarque : Selon les navigateurs, l'événement "Déplacement dans l'historique de navigation (onpopstate)" est également exécuté au chargement de la page et lors d'un retour à l'affichage initial de la page. Dans ce cas, le paramètre &lt;Données&gt; transmis à l'événement correspond à Null.
<a name="NOTE0_2"></a>


### Empêcher l'utilisation de la touche "Précédent" du navigateur
<a name="empecher_utilisation_touche_precedent_navigateur_ELTPARAGRAPHE000060"></a>Il est possible d'empêcher l'utilisation de la touche "Précédent" du navigateur. Pour plus de détails, consultez [Empêcher l'utilisation de la touche "Précédent" du navigateur](../WDChamp/1012009.md). 

<a name="XComposante"></a>

## Composante :
WDJS.DLL
