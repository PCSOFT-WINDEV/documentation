
## FichierAffiche (Fonction)

***En anglais : FileDisplay***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Affiche un fichier sur le navigateur de l'internaute. Permet d'afficher sur le navigateur de l'internaute des documents qui ne sont pas accessibles au serveur Web : fichiers cachés pour des raisons de sécurité, mémo binaires, ...




<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple
<a class="notetitle" target="_blank" href="$DOC$=1000003012005&name=fichieraffiche_fonction&product=WD">Voir des exemples supplémentaires</a>
![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) 
```wl
// Affiche une boîte de dialogue proposant à l'internaute
// de télécharger le fichier NOTES.TXT sur son poste. 
FichierAffiche(ComplèteRep(fRepWeb()) + "NOTES.TXT", ...
		"application/unknown", "Notes.TXT")
```


<a name="Exemple2"></a>


![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) 
```wl
// Affiche une boîte de dialogue proposant à l'internaute
// de télécharger le fichier NOTES.TXT sur son poste. 
// Fichier NOTES.TXT dans le même répertoire que .PHP
FichierAffiche("NOTES.TXT", "application/unknown", "Notes.TXT")
```


<a name="Exemple3"></a>


![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) 
```wl
// Affiche un fichier présent dans un répertoire protégé
// Ce fichier est affiché uniquement si l'utilisateur est autorisé
// Autorise est un booléen permettant de gérer les droits de l'utilisateur
SI Autorise = Vrai ALORS
	FichierAffiche("c:\date\protege\plan.gif", "image/gif")
SINON
	PageAffiche(PAGE_Erreur)
FIN
```


<a name="Exemple4"></a>


![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) 
```wl
// -- Code de clic d'un bouton de type submit
// Affiche le fichier "MonFichier.PDF" 
// présent dans le répertoire "<NomDuProjet>_WEB"
sFichier est une chaîne
sFichier = fRepWeb() + "/MonFichier.pdf"
FichierAffiche(sFichier, "application/pdf")
```


<a name="Exemple5"></a>


![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) 
```wl
// Page AWP : Vérifie qu'un numéro de livraison a bien été saisi 
// (le champ n'est pas vide et la taille du numéro est égale à 18)
SI SansEspace(SAI_NUMLIVRAISON) = "" OU ...
	Taille(SansEspace(SAI_NUMLIVRAISON)) < 18 ALORS
	// Reprend la saisie du numéro
	FichierAffiche("webdev_liv_number.awp?P1=1&P2=" + CODELANGUE)
FIN
FichierAffiche("webdev_liv_history.awp?P1=" + SAI_NUMLIVRAISON + ...
	"&P2=" + CODELANGUE)
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe
<a name="SYNTAXE2"></a>

<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques
![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) 

### Choisir la destination du fichier
<a name="choisir_destination_fichier_ELTPARAGRAPHE000198"></a>Pour choisir la destination du fichier, il est conseillé d'utiliser le paramètre &lt;Destination&gt; de la fonction **FichierAffiche** plutôt que la fonction [ChangeDestination](../WDLang2/3058005.md). En effet, dans ce cas, le code Javascript correspondant est plus petit et donc la taille de vos pages est optimisée.
<a name="NOTE0_2"></a>
![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) 

### Récupérer les paramètres passés à une page AWP
<a name="recuperer_les_parametres_passes_une_page_awp_ELTPARAGRAPHE000213"></a>Plusieurs méthodes permettent de récupérer les paramètres passés à une page AWP :

1. Récupération des paramètres dans l'événement "Déclarations globales" de la page.

2. Récupération des paramètres grâce à la fonction [PageParamètre](../WDLang2/3058026.md).




Pour plus de détails, consultez [Afficher une page AWP depuis une autre page](../WDChamp/3539047.md).
<a name="NOTE0_3"></a>




### Téléchargement de fichiers volumineux
<a name="telechargement_fichiers_volumineux_ELTPARAGRAPHE000232"></a>Le téléchargement de fichiers via la fonction **FichierAffiche** peut être plus lent que le téléchargement direct par un lien http. 

Dans le cas de la fonction **FichierAffiche**, le moteur WEBDEV : 

1. Ouvre le fichier à télécharger. 

2. Transfère le fichier au serveur Web en lui demandant d'envoyer le fichier vers l'internaute. 




Dans le cas d'un lien http, c'est le navigateur de l'internaute qui va chercher directement le fichier à télécharger.

**Pour des fichiers volumineux**, il est conseillé d'utiliser un lien http. Dans ce cas, le chemin et le nom du fichier à télécharger peuvent être paramétrés grâce à la propriété [URL](../Proprietes/2510132.md).
<a name="NOTE0_4"></a>


### Sessions prélancées
<a name="sessions_prelancees_ELTPARAGRAPHE000259"></a>Si votre projet utilise les sessions prélancées, cette fonction ne doit pas être utilisée dans l'événement "Initialisation" du projet. Cette fonction doit être utilisée dans l'événement "Initialisation du projet après connexion au site". 

<a name="XComposante"></a>

## Classification Métier / UI :
Code UI
## Composante :
wd280dllexe.dll
