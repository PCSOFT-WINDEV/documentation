


## Download (téléchargement) de fichiers
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000130"></a>
Le download (ou téléchargement) est l'opération qui consiste à enregistrer sur le poste de l'internaute un fichier stocké sur le serveur. Le fichier est "downloadé" ou "téléchargé" sur le poste de l'internaute.

Quelques exemples :

- Proposer le chargement de la bande annonce d'un film sur un site de location de DVD.

- Télécharger des documents dans une application de gestion documentaire.




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Mettre en place le téléchargement d'un fichier dans un site WEBDEV
<a name="mettre_place_telechargement_fichier_dans_site_webdev_ELTTEXTE000154"></a>
WEBDEV propose plusieurs méthodes pour effectuer un téléchargement de fichier dans un site :

- fenêtre de description du champ Bouton ou du champ Lien permettant d'effectuer le téléchargement.

- programmation en WLangage.



<a name="NOTE2_2"></a>


### Utilisation de la fenêtre de description des champs (champ Bouton, Lien, ...)
<a name="utilisation_fenetre_description_des_champs_champ_bouton_lien_ELTPARAGRAPHE000031"></a>Pour proposer un téléchargement :

1. Créez un champ de type "Lien", "Bouton", ...

2. Affichez la fenêtre de description du champ.

3. Dans l'onglet "Général", sélectionnez le type "Lien personnalisé (email, téléphone, ...)". 

4. Dans la zone "Adresse", sélectionnez "Fichier".

5. Indiquez le chemin complet du fichier (répertoire + Nom) présent sur le serveur. Le fichier doit être présent dans le répertoire "_WEB" du site. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Download_de_fichiers_telechargement%20nv%20-%20HC%20N%B0001.gif)





En exécution, lors du clic sur ce champ Lien ou Bouton :

- si le type du fichier est connu, le fichier sera directement ouvert dans le navigateur

- si le type du fichier est inconnu ou correspond à un exécutable, une boîte de dialogue permettra de télécharger ce fichier et / ou de l'exécuter directement.



<a name="NOTE2_3"></a>


### Programmation
<a name="programmation_ELTPARAGRAPHE000050"></a>Pour proposer le téléchargement d'un fichier par programmation, il suffit d'utiliser la fonction [FichierAffiche](../WDLang2/3012005.md) dans le code de clic serveur du champ Bouton ou du champ Lien permettant de télécharger le fichier. 

Le répertoire spécifié pour le fichier doit être un répertoire accessible et dans lequel il est possible d'écrire (par exemple, le répertoire des données (fonction [fRepDonnées](../WDLang1/3036001.md)) ou le répertoire des ressources (fonction [fRepWeb](../WDLang1/3036052.md))). 

Exemple :

```wl
// Affiche le fichier dans le navigateur
// (si le format est connu sur le système, le fichier s'affiche directement)
FichierAffiche(ComplèteRep(fRepWeb()) + "NOTES.TXT", "text/plain")
```
En exécution, lors du clic sur ce champ Lien ou Bouton :

- si le type du fichier est connu, le fichier sera directement ouvert dans le navigateur.

- si le type du fichier est inconnu ou correspond à un exécutable, une boîte de dialogue permettra de télécharger ce fichier et/ou de l'exécuter directement.



<a name="NOTE2_4"></a>


### Astuce : forcer le téléchargement du fichier (uniquement par programmation)
<a name="astuce_forcer_telechargement_fichier_uniquement_par_programmation_ELTPARAGRAPHE000075"></a>Pour forcer le téléchargement quel que soit le type du fichier à télécharger , il suffit d'utiliser la ligne de code suivante (dans le code de clic serveur du champ Bouton ou Lien permettant le téléchargement) :

```wl
FichierAffiche(ComplèteRep(fRepWeb()) + "NOTES.TXT", "application/unknown")
```
Cependant, le nom du fichier proposé en téléchargement ne correspond pas à un nom valide. Pour proposer immédiatement le nom du fichier à télécharger, il suffit de rajouter ce nom à la suite des paramètres de la fonction [FichierAffiche](../WDLang2/3012005.md).

```wl
FichierAffiche(ComplèteRep(fRepWeb()) + "NOTES.TXT", ...
	"application/unknown", "Notes.TXT")
```



