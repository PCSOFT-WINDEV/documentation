
## SSL : Transactions sécurisées avec WEBDEV
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000185"></a>
Par défaut, lors de l'utilisation d'une application Internet, les données circulant entre le poste de l'internaute et le serveur Web ne sont pas protégées : les données sont accessibles par tout internaute. La confidentialité des données échangées n'est pas certifiée.

Pour assurer la confidentialité des données échangées plusieurs systèmes existent. Le plus courant est l'utilisation du protocole SSL (Secure Socket Layer).

SSL est un protocole de communication d'informations qui permet d'assurer l'authentification, la confidentialité et l'intégrité des données échangées. Ce protocole utilise un moyen de cryptographie reconnu : l'algorithme à clé publique RSA. Une clé RSA est le résultat d'opérations entre nombres premiers.

**Pratiquement :** Qu'est-ce qui change lorsque une transaction est sécurisée ?

- une transaction sécurisée utilise une adresse spécifique (*https* au lieu de *http*)

- un cadenas apparaît automatiquement dans la barre d'état du navigateur, indiquant au client qu'une transaction sécurisée est en cours.






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment mettre en place des transactions sécurisées par le protocole SSL
<a name="comment_mettre_place_des_transactions_securisees_par_protocole_ssl_ELTTEXTE000209"></a>
Pour mettre en place des transactions sécurisées utilisant le protocole SSL :

1. Sur le serveur Web, créez une clé, par exemple avec le gestionnaire de clés de IIS, si votre serveur Web est IIS.

2. Envoyez le fichier de demande de certificat de clé à un organisme de certification de clé (exemple de société : www.verisign.com)

3. L'organisme renvoie un certificat de clé (opération payante). Ce certificat doit être installé sur le serveur grâce au gestionnaire de clés.

4. Il est alors possible d'utiliser les transactions sécurisées entre le serveur et le client (voir paragraphe suivant).




**Note** : "Verisign" délivre des certificats de test valables 14 jours, qui permettent de tester si la connexion HTTPS est correcte. Ces clés de test permettent de tester le bon fonctionnement des transactions sécurisées.

La procédure complète à suivre pour obtenir un certificat SSL est détaillée dans le chapitre [Obtention d'un certificat SSL pour le serveur IIS (version 2 ou +)](../WDLang2/3012012.md).



<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Insérer des transactions sécurisées par SSL dans un site WEBDEV
<a name="inserer_des_transactions_securisees_par_ssl_dans_site_webdev_ELTTEXTE000233"></a>
Dans un site Internet / Intranet, toutes les transactions ne contiennent pas obligatoirement des données sensibles : il suffit de sécuriser uniquement le transfert de données sensibles (transfert du numéro de carte bancaire par exemple).

**Attention** : la mise en place d'une transaction sécurisée dans un site WEBDEV suppose que toutes les formalités liées au protocole SSL ont été effectuées.


<a name="NOTE3_2"></a>


### Principe
<a name="principe_ELTPARAGRAPHE000056"></a>La mise en place d'un mode sécurisé est réalisée lors de l'ouverture d'une nouvelle page par un bouton ou un lien, grâce à la fonction [SSLActive](../WDLang2/3012014.md) du WLangage. Dès l'ouverture de la page sécurisée, toutes les actions et ouvertures de pages suivantes seront faites en mode sécurisé, quels que soient les objets utilisés (lien, table, zone de cliquage).

La fin du mode sécurisé est effectuée lors de l'utilisation de la fonction [SSLActive](../WDLang2/3012014.md) dans le code d'un bouton ou lien permettant d'ouvrir une nouvelle page.


<a name="NOTE3_3"></a>


### Mise en place
<a name="mise_place_ELTPARAGRAPHE000072"></a>Pour ouvrir une page en mode sécurisé :

1. Créez un bouton (ou un lien) permettant d'ouvrir une page. Cette page peut être ouverte soit par une action définie dans la description du bouton, soit par programmation en code serveur. Les caractéristiques de ce bouton sont :

	- Type : "Envoyer la valeur au serveur" ou "Aucune"

	- Action : Afficher la page XXX (ou aucune si l'ouverture de page se fait par programmation)

	- Destination :

		- "Navigateur en cours" pour ouvrir la page dans le navigateur en cours

		- "Nouveau navigateur" pour ouvrir la page dans un nouveau navigateur




2. Dans le code navigateur de clic sur le bouton (ou du lien), saisissez le code suivant :
	
	```wl
	SSLActive(Vrai)
	```


3. Si nécessaire (action non définie dans la description du bouton ou du lien), dans le code de clic serveur, utilisez la fonction [PageAffiche](../WDLang2/3058008.md) pour afficher la page voulue en mode sécurisé.
	

4. La page ouverte par le bouton ou le lien sera en mode sécurisé. Ce mode sécurisé sera conservé jusqu'au passage explicite en mode normal.





<a name="NOTE3_4"></a>


### Revenir en mode normal (transaction non sécurisée) dans le navigateur en cours
<a name="revenir_mode_normal_transaction_non_securisee_dans_navigateur_cours_ELTPARAGRAPHE000098"></a>Pour revenir en mode normal (transaction non sécurisée) dans le navigateur en cours :

1. Créez un bouton ou lien permettant d'ouvrir une page. Cette page peut être ouverte soit par une action définie dans la description du bouton ou lien, soit par programmation en code serveur. Les caractéristiques de ce bouton sont :

	- Type : "Envoyer la valeur au serveur" ou "Aucune"

	- Action : Afficher la page XXX (ou aucune si l'ouverture de page se fait par programmation)

	- Destination :

		- "Navigateur en cours" pour ouvrir la page dans le navigateur en cours

		- "Nouveau navigateur" pour ouvrir la page dans un nouveau navigateur




2. Dans le code navigateur de clic sur le bouton ou du lien, saisissez le code suivant : 
	
	```wl
	SSLActive(Faux)
	```


3. Si nécessaire (action non définie dans la description du bouton ou du lien), dans le code de clic serveur, utilisez la fonction [PageAffiche](../WDLang2/3058008.md) pour afficher la page voulue en mode non sécurisé.
	

4. La page ouverte par le bouton sera en mode non sécurisé. Ce mode non sécurisé sera conservé jusqu'au passage explicite en mode sécurisé.





<a name="NOTE3_5"></a>


### Cas particulier : Ouverture d'une page en mode sécurisé avec la fonction NavigateurOuvre
<a name="cas_particulier_ouverture_une_page_mode_securise_avec_fonction_navigateurouvre_ELTPARAGRAPHE000124"></a>Pour ouvrir une page en mode sécurisé avec la fonction [NavigateurOuvre](../WDLang2/3055006.md) : 

1. Créez une variable globale (adrPage par exemple) dans la page de départ (non sécurisée).

2. Initialisez cette variable avec l'adresse sécurisée de la page : 
	
	```txt
	adrPage = PageAdresse(<Nom de la page>, paSécurisée)
	```


3. Dans le code voulu, utilisez la fonction :
	
	```wl
	NavigateurOuvre(adrPage)
	```








