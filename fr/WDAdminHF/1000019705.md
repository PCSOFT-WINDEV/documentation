
## WDAdminHF : Tâche planifiée
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000120"></a>
L'administrateur HFSQL distant permet de définir des tâches planifiées. Ces tâches planifiées peuvent correspondre : 

- soit à l'appel d'une procédure stockée, 

- soit à une sauvegarde. 




L'appel d'une procédure stockée permet d'exécuter le code de votre choix, par exemple maintenance personnalisée, édition de statistiques, ... 



<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000150"></a>


### Créer une tâche planifiée
<a name="creer_une_tache_planifiee_ELTPARAGRAPHE000024"></a>Pour créer une tâche planifiée :

1. Connectez-vous au serveur HFSQL voulu. 

2. Sélectionnez l'option "Tâches planifiées".

3. Cliquez sur le bouton "Créer". L'assistant de création d'une tâche planifiée se lance.

4. Indiquez les options de la planification : 

	- mois d'exécution : tous les mois, certains mois

	- jour d'exécution : tous les jours, certains jours de la semaine ou du mois

	- heure d'exécution : à heure fixe ou régulièrement dans la journée




5. Indiquez le contenu de la tâche planifiée : 

	- Procédure stockée : indiquez le nom de la base, le nom de la collection contenant la procédure stockée et sélectionnez la procédure.
			Attention : Pour qu'une procédure stockée lancée depuis une tâche planifiée accède aux données, il faut utiliser la fonction [HDéclareExterne](../WDLang4/3044204.md). Cette fonction permet de déclarer des sources de données qui seront utilisées dans les traitements de la procédure stockée. En effet, lorsqu'une procédure stockée est lancée depuis l'administrateur distant HFSQL, il n'y a pas d'analyse en cours et les données HFSQL Client/Serveur ne sont pas immédiatement accessibles.
			Si la fonction [HDéclareExterne](../WDLang4/3044204.md) n'est pas utilisée dans le code de la procédure stockée, la procédure provoquera une erreur fatale, notée dans le journal des événements du système.
			Remarque : lorsqu'une procédure stockée est lancée depuis une application WINDEV, WEBDEV ou WINDEV Mobile avec la fonction [HExecuteProcédure](../WDLang4/3044358.md), elle utilise l'analyse de l'application et peut donc utiliser directement des données HFSQL Client/Serveur.

	- Sauvegarde :

		- Indiquez les éléments à sauvegarder : le contenu du serveur, une base spécifique ou une sélection de bases.

		- Indiquez si la sauvegarde doit contenir les fichiers d'index (fichiers d'index NDX et fichiers d'index full-text FTX). Si les fichiers d'index ne sont pas sauvegardés, la taille de la sauvegarde sera réduite, mais le temps de restauration sera plus long. Remarque : si les fichiers d'index ne sont pas sauvegardés, il sera nécessaire de fournir les mots de passe des fichiers au moment de la restauration pour permettre leur réindexation.

		- Indiquez le répertoire de sauvegarde. Si ce nom correspond à un chemin relatif, la sauvegarde sera réalisée dans le sous-répertoire "Backup" du serveur HFSQL. L'assistant permet de définir un sous-répertoire de "backup" ("Sauvegarde" par défaut). Il est également possible d'ajouter la date et l'heure (sous la forme "Année\\Mois\\Jour\\Heure-Minute") au nom du répertoire pour identifier facilement la sauvegarde.
						Remarque : Les sauvegardes sont réalisées dans un sous-répertoire numéroté (par exemple "backup\\Sauvegarde\\1"). Ainsi, si plusieurs sauvegardes sont réalisées, les fichiers correspondants ne seront pas écrasés par une nouvelle sauvegarde.




6. Donnez une description à votre tâche planifiée et validez.

7. La tâche planifiée apparaît automatiquement dans l'administrateur distant HFSQL.





### Supprimer une tâche planifiée
<a name="supprimer_une_tache_planifiee_ELTPARAGRAPHE000065"></a>Pour supprimer une tâche planifiée :

1. Connectez-vous au serveur HFSQL voulu. 

2. Sélectionnez l'option "Tâches planifiées".

3. Sélectionnez la tâche planifiée à supprimer.

4. Cliquez sur le bouton "Supprimer".







