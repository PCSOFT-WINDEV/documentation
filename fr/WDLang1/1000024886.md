
## MasqueDeSaisie (Type de variable)

***En anglais : InputMask***
				



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Le type **MasqueDeSaisie** permet de définir toutes les caractéristiques avancées d'un masque de saisie personnalisé. Les caractéristiques de ce masque de saisie personnalisé peuvent être définies et modifiées à l'aide de différentes propriétés WLangage. 

**Remarque** : Pour plus de détails sur la déclaration de ce type de variable et l'utilisation des propriétés WLangage, consultez [Déclaration d'une variable](../Motscles/1514032.md).






<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
m_sMasque est chaîne = "99 99 99 99 99"
MasquePerso est un MasqueDeSaisie
MasquePerso.FormateEnSaisie = FormateEnSaisie
MasquePerso.ValideEnSaisie = ValideEnSaisie
MasquePerso.ValideEnSortie = ValideEnSortie
MasquePerso.FormateEnSortie = FormateEnSortie
MasquePerso.FormateEnEntrée = FormateEnEntrée
MasquePerso.FormateEnAffectation = FormateEnAffectation
MasquePerso.VérifieSiSaisieValide = VérifieSiSaisieValide

SAI_Téléphone.MasqueSaisie = MasquePerso

PROCÉDURE INTERNE FormateEnSaisie(LOCAL sTexteAvant est une chaîne, 
	LOCAL nCurseurAvant est un entier, ...
	LOCAL nFinCurseurAvant est un entier, ...
	sTexteApres est une chaîne, ...
	nCurseurApres est un entier, ...
	nFinCurseurApres entier)
	SI Taille(sTexteAvant) > Taille(sTexteApres) ALORS RETOUR 
	//Ne rien faire si on est en train d'effacer
	// si on est a la fin
	SI nFinCurseurApres = Taille(sTexteApres) + 1 ALORS
		// on met un " " si c'est ce qu'il faut a cette position
		SI Milieu(m_sMasque, nFinCurseurApres, 1) = " " ALORS
			sTexteApres += " "
			nFinCurseurApres ++
			nCurseurApres = nFinCurseurApres
		FIN
	FIN
FIN	

PROCÉDURE INTERNE ValideEnSaisie(sTexte est une chaîne) : booléen
	RENVOYER VérifieExpressionRégulière(sTexte, "[0-9 ]*")
FIN

PROCÉDURE INTERNE VérifieSiSaisieValide(sTexte est une chaîne) : booléen
	RENVOYER ValideEnSaisie(sTexte) _ET_ Taille(sTexte) >= 3
FIN

PROCÉDURE INTERNE FormateEnAffectation(sTexte_INOUT est une chaîne) 
		FormateChaîneEnNuméroTéléphone(sTexte_INOUT)
FIN

PROCÉDURE INTERNE ValideEnSortie(sTexte est une chaîne) : booléen
	SI Taille(sTexte) < 3 ALORS
		ToastAffiche("Au moins 3 caractères")
		RENVOYER Faux
	FIN
	RENVOYER Vrai
FIN

PROCÉDURE INTERNE FormateEnSortie(sTexte_INOUT est une chaîne) 
	FormateChaîneEnNuméroTéléphone(sTexte_INOUT)
FIN

PROCÉDURE INTERNE FormateEnEntrée(sTexte_INOUT est une chaîne) 
	FormateChaîneEnNuméroTéléphone(sTexte_INOUT)
FIN

PROCÉDURE INTERNE FormateChaîneEnNuméroTéléphone(sTexte_INOUT est une chaîne)
	// on groupe les chiffres comme dans le masque
	sTexte_INOUT = Remplace(sTexte_INOUT," ","")
	sResultat est une chaîne
	nPosSrc est un entier = 1
	POUR I = 1 _À_ Taille(m_sMasque)
		// selon le caractère dans le masque
		SELON Milieu( m_sMasque, I, 1) 
			CAS " "	
				sResultat += " "
			AUTRE CAS
				// garde le caractère saisi
				sResultat += Milieu(sTexte_INOUT, nPosSrc, 1) 
				nPosSrc++
		FIN
	FIN
	sTexte_INOUT = sResultat
FIN
```





<a name="NOTE0"></a>

## Remarques
<a name="NOTE0_1"></a>


### Propriétés spécifiques à la description des variables de type MasqueDeSaisie
<a name="proprietes_specifiques_description_des_variables_type_masquedesaisie_ELTPARAGRAPHE000048"></a>Les propriétés suivantes peuvent être utilisées pour manipuler un masque de saisie personnalisé :

| Nom de la propriété | Type manipulé | Effet |
| --- | --- | --- |
| FormateEnAffectation | Procédure WLangage | Nom de la procédure WLangage qui transforme le texte affecté par programmation vers le texte à afficher.<br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Texte> chaîne)</code></pre><br>où &lt;Texte&gt; correspond au texte à manipuler. <br><br>Si cette propriété n'est pas renseignée, aucune transformation n'est effectuée. |
| FormateEnEntrée | Procédure WLangage | Nom de la procédure WLangage qui transforme le texte affiché vers le texte en saisie.<br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Texte> chaîne)</code></pre><br>où &lt;Texte&gt; correspond au texte à manipuler. <br><br>Si cette propriété n'est pas renseignée, aucune transformation n'est effectuée. |
| FormateEnSaisie | Procédure WLangage | Nom de la procédure WLangage qui transforme le texte durant sa saisie.<br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(LOCAL <Texte avant> chaîne, <br>LOCAL <Curseur avant> entier, <br>LOCAL <Fin Curseur avant> entier, <br><Texte après> chaîne, <Curseur après> entier, <br><Fin Curseur après> entier)</code></pre><br>où : <br><br>- &lt;Texte avant&gt; correspond au texte avant la saisie.<br><br>- &lt;Curseur avant&gt; correspond à la position du curseur avant la saisie.<br><br>- &lt;Fin curseur avant&gt; correspond à la position de fin du curseur avant la saisie. <br><br>- &lt;Texte après&gt; correspond au texte après la saisie.<br><br>- &lt;Curseur après&gt; correspond à la position du curseur après la saisie.<br><br>- &lt;Fin curseur après&gt; correspond à la position de fin du curseur après la saisie. <br><br><br><br><br>Si cette propriété n'est pas renseignée, aucune transformation n'est effectuée. |
| FormateEnSortie | Procédure WLangage | Nom de la procédure WLangage qui transforme le texte en saisie vers le texte affiché. <br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Texte> chaîne)</code></pre><br>où &lt;Texte&gt; correspond au texte à manipuler. <br><br>Si cette propriété n'est pas renseignée, aucune transformation n'est effectuée. |
| ValideEnSaisie | Procédure WLangage | Nom de la procédure WLangage qui vérifie la saisie en cours. Cette procédure renvoie <u><u><u><u>Faux</u></u></u></u> si le texte en cours de saisie contient des caractères invalides. <br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Texte> chaîne)</code></pre><br>où &lt;Texte&gt; correspond au texte à manipuler. <br><br>Si cette propriété n'est pas renseignée, aucune transformation n'est effectuée. |
| ValideEnSortie | Procédure WLangage | Nom de la procédure WLangage qui vérifie la saisie effectuée (lorsque tous les caractères ont été saisis). Cette procédure renvoie <u><u><u><u>Faux</u></u></u></u> si le texte qui a été saisi contient des caractères invalides. <br><br>Cette procédure sera appelée en sortie de champ uniquement si la validation de la saisie est en mode bloquant. Pour plus de détails, consultez [Saisie obligatoire ou invalide dans WINDEV](../WDChamp/9500154.md).<br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Texte> chaîne)</code></pre><br>où &lt;Texte&gt; correspond au texte à manipuler. <br><br>Si cette propriété n'est pas renseignée, aucune transformation n'est effectuée. |
| VérifieSiSaisieValide | Procédure WLangage | Nom de la procédure WLangage appelée par les fonctions [SaisieInvalideDétecte](../WDLang1/1000026180.md) et [SaisieInvalideListeChamp](../WDLang1/1000026244.md) pour déterminer si le texte saisi est valide.<br><br>Cette procédure est de la forme : <br><br><pre><code>PROCEDURE <Nom de la procédure>(<Texte> chaîne)</code></pre><br>où &lt;Texte&gt; correspond au texte à manipuler. <br><br>Si cette propriété n'est pas renseignée, aucune vérification n'est effectuée. |




<a name="NOTE0_2"></a>


### Utilisation
<a name="utilisation_ELTPARAGRAPHE000186"></a>

- Une variable de type **MasqueDeSaisie** peut être affectée à la propriété [MasqueSaisie](../Proprietes/2510033.md) pour avoir un contrôle personnalisé sur chaque événement lié a la gestion du masque d'un champ de saisie.

- Les fonctions [MasqueNuméroDeTéléphone](../WDLang1/1000024741.md) et [MasqueCodePostal](../WDLang1/1000024742.md) manipulent des variables de type **MasqueDeSaisie**. 







