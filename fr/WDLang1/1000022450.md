
## CaméraCapture (Fonction)

***En anglais : CameraCapture***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Capture la séquence vidéo actuellement retransmise par une "caméra" : 

- sous forme d'une image : prend une photo. 

- sous forme de vidéo : enregistre une vidéo.   




Selon la plateforme, les formats des photos et des vidéos sont les suivants :  

- ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) une image au format BMP ou une séquence vidéo au format AVI. 




Remarques : 

- Cette fonction est équivalente à la fonction [VidéoCapture](../WDLang1/3079007.md).





<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple

![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 
```wl
// Enregistre la vidéo retransmise dans le champ Caméra "CAM_Cuisine"
// sous forme d'une AVI ("C:\Temp\MaVideo.AVI") de 1 minute
ResSauvegarde = CaméraCapture(CAM_Cuisine, "C:\Temp\MaVideo.AVI", viCaptureVidéo, 60)
SI ResSauvegarde = Vrai ALORS
	Info("Vidéo correctement sauvegardée")
SINON
	Erreur(ErreurInfo())
FIN
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = CaméraCapture(<Champ Caméra> , <Nom du fichier créé> [, <Type de capture> [, <Durée de la capture> [, <Nombre d'images par seconde> [, <Affichage pendant la capture>]]]])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la vidéo a été correctement sauvegardée, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. Pour plus de détails sur l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Champ Caméra> : (Nom de champ)`**

Nom du champ Caméra à manipuler. Il n'est pas nécessaire d'afficher la vidéo dans un champ Caméra pour la sauvegarder.

**`<Nom du fichier créé> : (Chaîne de caractères)`**

Nom et chemin complet (ou relatif) du fichier à créer.

![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) Si la séquence vidéo est capturée sous forme d'une photo, un fichier BMP est créé. Si la séquence vidéo est capturée sous forme d'une vidéo, un fichier AVI est créé.



**Attention** : Il n'est pas possible d'utiliser un chemin de type UNC.

**`<Type de capture> : (Constante optionnelle de type entier)`**

Type de capture :


|   |   |
| --- | --- |
| *viCaptureImage* | ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) Capture d'une image sous forme d'un fichier BMP.<br> |
| *viCaptureVidéo*<br>(Valeur par défaut) | ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) Capture d'une séquence vidéo sous forme d'un fichier AVI.<br> |



**`<Durée de la capture> : (Entier optionnel ou durée optionnelle)`**

Durée (en secondes) de la capture. Si ce paramètre correspond à 0 ou n'est pas spécifié, la capture s'arrêtera :

- soit lors de l'appel de la fonction [VidéoArrête](../WDLang1/3079001.md).

- soit lorsque le disque spécifié n'aura plus d'espace disponible.


**Remarque** : Ce paramètre peut correspondre à : 

- un entier correspondant au nombre de secondes, 

- une variable de type Durée, 

- l'indication directe de la durée (par exemple '1 s'). 




**`<Nombre d'images par seconde> : (Entier optionnel)`**

Nombre d'images sauvegardées par seconde (15 par défaut). Ce paramètre est pris en compte uniquement si &lt;Type de capture&gt; est égal à *viCaptureVidéo*.

**`<Affichage pendant la capture> : (Booléen optionnel)`**



- <u><u><u><u>Vrai</u></u></u></u> (par défaut) si la vidéo actuellement retransmise doit être visualisée dans le champ Caméra spécifié, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire.  








<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques




### Enregistrement d'une photo
<a name="enregistrement_une_photo_ELTPARAGRAPHE000143"></a>Seule l'image affichée au moment de l'exécution de la fonction **CaméraCapture** est enregistrée sous forme de photo au format BMP. Pour sauvegarder cette image, il est également possible d'utiliser :

- la fonction [dSauveImageBMP](../WDLang1/3029026.md) : la photo sera enregistrée au format BMP.

- la fonction [dSauveImageGIF](../WDLang1/3029040.md) : la photo sera enregistrée au format Gif.

- la fonction [dSauveImageJPEG](../WDLang1/3029038.md) : la photo sera enregistrée au format Jpeg.





### Conditions d'utilisation : 
<a name="conditions_utilisation_ELTPARAGRAPHE000164"></a>

- ![Windows](https://doc.pcsoft.fr/ext/images/fr/WINDOWS.png) Pour utiliser cette fonction, une "web caméra" doit être connectée au poste en cours.







<a name="NOTE0_2"></a>

<a name="XComposante"></a>

## Composante :
wd280obj.dll
