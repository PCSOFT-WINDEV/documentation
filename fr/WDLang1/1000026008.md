
## SysOptimBatterieArrièrePlan (Fonction)

***En anglais : SysBatteryOptimBackground***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Permet de gérer l'optimisation de la batterie : 

- Récupère le mode de gestion de l'optimisation de la batterie pour l'application en cours. 

- Demande à l'utilisateur de désactiver l'optimisation de la batterie de cette application sur l'appareil. 


Cette fonction permet d'empêcher le système d'exploitation d'arrêter l'exécution de l'application lorsqu'elle est en arrière-plan.
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Si l'optimisation de la batterie est activée, 
// alors on demande à l'utilisateur de la désactiver.
SI SysOptimBatterieArrièrePlan() = sobOptimisée ALORS
	SysOptimBatterieArrièrePlan(sobDemandeDésactivation)
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

### Récupérer le mode d'optimisation de la batterie pour l'application en cours

`<Résultat> = SysOptimBatterieArrièrePlan()`
---

**`<Résultat> : (Constante de type Entier)`**

Etat de l'optimisation de la batterie de l'application : 



|   |   |
| --- | --- |
| *sobNonOptimisée* | La batterie n'est pas optimisée pour cette application. |
| *sobOptimisée* | La batterie est optimisée pour cette application. |




<a name="SYNTAXE2"></a>

### Modifier le mode d'optimisation de la batterie pour l'application en cours

`SysOptimBatterieArrièrePlan(<Mode>)`
---

**`<Mode> : (Constante de type Entier)`**

Mode d'appel de la fonction : 


|   |   |
| --- | --- |
| *sobDemandeDésactivation* | Affiche un message système demandant à l'utilisateur de désactiver l'optimisation de la batterie sur cette application. Si l'optimisation de la batterie est désactivée, rien ne se passe. |
| *sobParamètreSystème* | Ouvre la fenêtre des paramètres affichant la liste des applications ayant l'optimisation de la batterie désactivée. |





<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Google et la désactivation de l'optimisation de la batterie
<a name="google_desactivation_optimisation_batterie_ELTPARAGRAPHE000062"></a>Google déconseille la désactivation de l'optimisation de la batterie. La majorité des applications ne devrait pas utiliser cette option. Cette option doit être utilisée seulement pour des cas particuliers qui nécessitent de garder un contrôle total de l'exécution de l'application en arrière-plan.

**Attention** : Sur certains téléphones, la liste des applications non-optimisées/optimisées ne se met pas à jour à moins de redémarrer. Ce fonctionnement provient de Google. Cependant, la demande de désactivation de de l'optimisation de la batterie fonctionne correctement : seule la page des paramètres Android peut ne pas être à jour (cela peut poser problème pour la réactivation de l'optimisation de la batterie).


### Permissions requises
<a name="permissions_requises_ELTPARAGRAPHE000069"></a>L'utilisation de cette fonction entraîne la modification des permissions requises par l'application. 
Permission requise : REQUEST_IGNORE_BATTERY_OPTIMIZATIONS : Permet à l'application de demander à l'utilisateur de désactiver l'optimisation de la batterie. 

**Attention** : L'utilisation de cette permission sans raison valable peut amener Google à supprimer votre application du Play Store.


### Condition nécessaire
<a name="condition_necessaire_ELTPARAGRAPHE000078"></a>La fonction **SysOptimBatterieArrièrePlan** est disponible uniquement sur les appareils disposant d'une version d'Android supérieure ou égale à la version 6.0 (api level 23)..
Si la fonction est utilisée avec une version antérieure du système, une erreur fatale sera déclenchée. 
Pour connaître la version du système Android sur laquelle s'exécute l'application, utilisez la fonction [SysVersionAndroid](../WDLang1/1000019785.md).
<a name="NOTE0_5"></a>

<a name="XComposante"></a>

## Composante :
wd280android.aar
