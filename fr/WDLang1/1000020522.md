
## fSurveilleFichier (Fonction)

***En anglais : fTrackFile***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Déclenche la surveillance d'un fichier. En cas de modification du fichier, une procédure spécifique est exécutée dans un thread. 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Nom du fichier à surveiller
sNomFichier est une chaîne = "C:\Temp\MonRep\MonFichier.extension"
// La procédure TraiteModification sera appelée lorsque le fichier 
// "C:\Temp\MonRep\MonFichier.extension" sera modifié.
SI fSurveilleFichier(sNomFichier, fSurveilleFichier_Callback, ...
		fsCréationFichier + fsModificationFichier + fsSuppressionFichier + ...
		fsRenommage) ALORS
	// On informe l'utilisateur de la mise sous surveillance du fichier
	Info("La mise sous surveillance du fichier " + sNomFichier + " a réussi.")
SINON
	// On informe l'utilisateur de l'échec de la mise sous surveillance du fichier
	Info("La mise sous surveillance du fichier " + sNomFichier + " a échoué.")
FIN

// Code de la procédure
PROCEDURE INTERNE fSurveilleFichier_Callback(sNomComplet, sNomFichier, nAction, sAncienNomFichier)
	sDesignationAction est une chaîne
	// La désignation de l'action subie dépend de nAction
	SELON nAction
		CAS fsCréationFichier : sDesignationAction = "Création de fichier"
		CAS fsSuppressionFichier : sDesignationAction = "Suppression de fichier"
		CAS fsModificationFichier : sDesignationAction = "Modification de fichier"
		CAS fsRenommage : sDesignationAction = "Renommage de fichier"
	FIN
	// Ajout d'une ligne contenant les informations de la modification 
	// dans le champ Table TABLE_MODIFICATIONS
	TableAjouteLigne(TABLE_MODIFICATIONS, sNomComplet, sNomFichier, ...
		sDesignationAction, sAncienNomFichier)
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = fSurveilleFichier(<Fichier à surveiller> , <Procédure WLangage> [, <Modifications à notifier>])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la surveillance du fichier est activée, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. Pour plus de détails sur l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Fichier à surveiller> : (Chaîne de caractères)`**

Nom complet du fichier à surveiller.

**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") appelée lors d'un changement sur le fichier spécifié.

Pour plus de détails sur cette procédure, consultez [Paramètres de la procédure utilisée par la fonction fSurveilleFichier](../WDLang1/1000025349.md). 

**`<Modifications à notifier> : (Constante ou combinaison de constantes optionnelle de type Entier)`**

Modifications du fichier à surveiller et pour lesquelles la procédure doit être exécutée : 


|   |   |
| --- | --- |
| *fsCréationFichier* | Création du fichier &lt;Nom du fichier modifié&gt;. |
| *fsModificationFichier* | Modification du fichier &lt;Nom du fichier modifié&gt;. |
| *fsRenommage* | Renommage du fichier &lt;Nom du fichier modifié&gt;. |
| *fsSuppressionFichier* | Suppression du fichier &lt;Nom du fichier modifié&gt;. |
| *fsTout* | Surveillance de toutes les actions possibles. Correspond à *fsCréationFichier* + *fsModificationFichier* + *fsRenommage* + *fsSuppressionFichier*. |





<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Cas particuliers
<a name="cas_particuliers_ELTPARAGRAPHE000077"></a>

- Pour arrêter la surveillance du fichier, utilisez les fonctions [fSurveilleStop](../WDLang1/1000020575.md) et [fSurveilleStopTout](../WDLang1/1000020576.md).

- Pour surveiller les modifications effectuées sur le contenu d'un répertoire, utilisez la fonction [fSurveilleRépertoire](../WDLang1/1000020523.md).

- Limitations : 

	- Seuls 5 fichiers peuvent être surveillés simultanément.

	- Il n'est pas possible de surveiller un fichier situé à la racine d'un disque (pour des raisons de performances).  






<a name="NOTE0_2"></a>


### Procédure WLangage
<a name="procedure_wlangage_ELTPARAGRAPHE000098"></a>La procédure WLangage est exécutée dans un thread WLangage.
Attention : Il n'est pas possible d'exécuter dans les threads les traitements suivants :

- ouverture de fenêtres avec les fonctions WLangage telles que [Ouvre](../WDLang1/3038035.md), [Utilise](../WDLang1/3038044.md), [Ferme](../WDLang1/3038018.md), ... Si des fenêtres doivent être manipulées dans des threads (cas rare), une gestion spécifique doit être mise en place. Pour plus de détails, consultez [Gérer l'ouverture d'une fenêtre dans un thread secondaire](../WDLang1/3077015.md). 

- gestion d'événements.

- gestion de timers.




Pour plus de détails sur la gestion des threads, consultez [Gestion des threads](../WDLang1/3077026.md).

<a name="XComposante"></a>

## Composante :
wd280std.dll
