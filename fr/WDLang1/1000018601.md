
## diffCrée (Fonction)

***En anglais : diffCreate***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Compare deux buffers et crée un buffer contenant les différences entre ces deux buffers. 
Ce buffer de différences contient les différences entre l'ancien buffer et le nouveau buffer. Il pourra être appliqué au buffer le plus ancien pour obtenir le nouveau buffer grâce à la fonction [diffApplique](../WDLang1/1000018602.md). 

Cette fonction peut être utile par exemple lors de la mise à jour d'un fichier par Internet : il suffit d'envoyer le fichier de différences et de l'appliquer lors de la réception. 






<a name="sample_code"></a>

## Exemple


```wl
// Comparaison de deux buffers
BufferOrigine est un Buffer
BufferFin est un Buffer
// Chargement des buffers
// ..
MonBufferDifférence est un Buffer
MonBufferDifférence = diffCrée(BufferOrigine, BufferFin, diffBinaire)
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = diffCrée(<Ancien buffer> , <Nouveau buffer> [, <Options> [, <Pourcentage>]])`
---

**`<Résultat> : (Variable de type Buffer)`**

Description des différences entre les deux buffers. Ce buffer peut être appliqué à l'ancien buffer pour obtenir le nouveau buffer grâce à la fonction [diffApplique](../WDLang1/1000018602.md). 

**`<Ancien buffer> : (Variable de type Buffer)`**

Nom du buffer contenant les données les plus anciennes.

**`<Nouveau buffer> : (Variable de type Buffer)`**

Nom du buffer contenant les données les plus récentes.

**`<Options> : (Constante ou combinaison de constantes de type Entier optionnelle)`**

Permet de choisir l'algorithme de calcul des différences. Les options disponibles sont : 


|   |   |
| --- | --- |
| *diffBinaire* | Comparaison binaire des fichiers. |
| *diffFichierPCS* | Comparaison binaire des fichiers optimisée pour les fichiers créés par WINDEV, WEBDEV et WINDEV Mobile. |
| *diffPourcentageMax* | Comparaison des fichiers avec un pourcentage de différences maximal. <br>Cette constante peut être combinée aux constantes *diffBinaire*, *diffFichierPCS* ou *diffTexte*. Dans ce cas, le paramètre &lt;Pourcentage&gt; doit être spécifié. <br>**Attention** : cette constante ne doit pas être utilisée avec des buffers trop petits. |
| *diffTexte* | Comparaison texte (c'est-à-dire ligne par ligne) des fichiers. |





**`<Pourcentage> : (Entier optionnel)`**

Pourcentage maximum de différences autorisées pour la création du buffer de différences. 
Si ce pourcentage est dépassé, le buffer de différences est vide et la variable [ErreurDétectée](../WDLang1/3087001.md) vaut <u><u><u><u>Vrai</u></u></u></u>. Par défaut, la valeur de ce paramètre correspond à 50%. 
Ce paramètre est pris en compte uniquement si la constante *diffPourcentageMax* a été spécifiée. 







<a name="XComposante"></a>

## Classification Métier / UI :
Code métier
## Composante :
wd280std.dll
