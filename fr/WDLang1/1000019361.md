
## CapteurDétecteChangementOrientation (Fonction)

***En anglais : SensorDetectChangeOrientation***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Permet d'être notifié lors du changement d'orientation de l'appareil sur n'importe lequel de ses 3 axes.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Détection des changements d'orientation sur plusieurs axes
CapteurDétecteChangementOrientation(DetectionOrientation, cptAzimut + cptPitch + cptRoll)
```

```wl
// Procédure appelée par la fonction CapteurDétecteChangementOrientation	
PROCEDURE DetectionOrientation(nAzimut est un entier, nPitch est un entier, nRoll est un entier)
SI nAzimut = 0 OU nAzimut = 360 ALORS
	ToastAffiche("L'appareil est orienté vers le Nord.")
FIN		

// Arrêt de la détection des changements d'orientation : 
CapteurTermine()
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = CapteurDétecteChangementOrientation(<Procédure WLangage> [, <Orientation> [, <Fréquence> [, <Seuil>]]])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la détection a pu être déclenchée, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire.




**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") appelée lorsque l'appareil change d'orientation. Cette procédure est de la forme :

```txt
PROCEDURE <Nom de la procédure> (<Azimut>, <Pitch>, <Roll>)
```
où :

- &lt;Azimut&gt; est un entier correspondant à l'angle entre la direction du Nord magnétique et la direction de l'axe longitudinal (Y) de l'appareil,

- &lt;Pitch&gt; est un entier correspondant à l'angle de rotation de l'appareil autour de l'axe horizontal (X)

- &lt;Roll&gt; est un entier correspondant à l'angle de rotation de l'appareil autour de l'axe longitudinal (Y). 




Les paramètres de cette procédure sont optionnels. Il n'est pas nécessaire de passer des paramètres à cette procédure. En effet, ces paramètres sont renseignés automatiquement à chaque appel à condition que le type d'orientation correspondant soit spécifié dans le paramètre &lt;Orientation&gt;. Dans le cas contraire, ces paramètres valent 0.

Si le nom de la procédure correspond à une chaîne vide (""), les notifications de changement d'orientation correspondant au paramètre &lt;Orientation&gt; ne seront plus envoyées.

**`<Orientation> : (Constante ou combinaison de constantes optionnelle de type Entier)`**

Type de changement d'orientation devant être notifié : 


|   |   |
| --- | --- |
| *cptAzimut* | Notification lors du changement d'orientation autour de l'axe vertical (Z). |
| *cptPitch* | Notification lors du changement d'orientation autour de l'axe horizontal (X). |
| *cptRoll* | Notification lors du changement d'orientation autour de l'axe longitudinal (Y). |

Par défaut, une notification sera envoyée lors du changement d'orientation sur n'importe lequel des trois axes (équivalent à *cptAzimut* + *cptPitch* + *cptRoll*).

**`<Fréquence> : (Constante optionnelle de type Entier)`**

Fréquence à laquelle les notifications de changements d'orientation doivent être envoyées : 


|   |   |
| --- | --- |
| *cptFréquenceJeu* | Fréquence de notification nécessaire lors de l'utilisation de la fonction **CapteurDétecteChangementOrientation** dans un jeu. |
| *cptFréquenceNormal*<br>(Valeur par défaut) | Fréquence de notification moyenne. |
| *cptFréquenceRapide* | Fréquence de notification la plus rapide. |



**`<Seuil> : (Entier optionnel)`**

Seuil de tolérance au changement (en degrés). Les notifications seront envoyées uniquement pour des changements d'orientation supérieurs à ce seuil. 

Si ce paramètre n'est pas spécifié, aucun seuil de tolérance ne sera fixé : les notifications seront envoyées pour chaque changement d'orientation (équivalent à un seuil de 0).



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Conditions d'utilisation
<a name="conditions_utilisation_ELTPARAGRAPHE000121"></a>

- Cette fonction ne peut pas être utilisée dans l'émulateur ou le simulateur. Dans ces deux cas, le résultat de la fonction correspondra toujours à <u><u><u><u>Faux</u></u></u></u>.

- La détection des changements d'orientation utilise le capteur de type accéléromètre de l'appareil. Si un tel capteur n'est pas présent sur l'appareil, la détection des changements d'orientation n'est pas possible. La sensibilité de la détection dépend de la qualité du capteur présent dans l'appareil.

- Seul le dernier appel à la fonction **CapteurDétecteChangementOrientation** est pris en compte. En effet, il ne peut y avoir qu'une seule détection à la fois. Pour effectuer une détection sur plusieurs axes, il faut combiner les orientations.



<a name="NOTE0_2"></a>


### Orientation d'un appareil : définitions
<a name="orientation_appareil_definitions_ELTPARAGRAPHE000137"></a>Le changement d'orientation peut être rapporté dans les trois dimensions suivantes : 

- **Azimut** : Direction de l'appareil par rapport au Nord magnétique autour de l'axe vertical (Z). Cette direction est exprimée en degrés (de 0 à 360 degrés). Dans ce cas, 0 ou 360 correspond au Nord, 90 correspond à l'Est, 180 correspond au Sud et 270 correspond à l'Ouest.

- **Pitch** : Rotation de l'appareil autour de l'axe horizontal (X). Cette rotation est exprimée en degrés (de -180 à 180). Sa valeur est de 0 degré lorsque l'appareil est à plat sur le dos avec l'écran pointant vers le plafond, -90 degrés lorsque l'appareil est debout avec le haut de l'appareil pointant vers le plafond, 90 degrés lorsque l'appareil est debout avec le haut de l'appareil pointant vers le sol et -180/180 degrés lorsque l'appareil est à plat avec l'écran en direction du sol.

- **Roll** : Rotation de l'appareil autour de l'axe longitudinal (Y). Cette rotation est exprimée en degrés (de -90 à 90). Sa valeur est de 0 degré lorsque l'appareil est à plat sur le dos avec l'écran pointant vers le plafond, -90 degrés lorsque l'écran est orienté côté gauche et 90 degrés lorsque l'écran est orienté vers la droite.




![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Acceleration_Origine.gif)


Système de coordonnées (en considérant que l'appareil est à plat, l'écran en direction du plafond) : 

- L'origine se situe dans le coin inférieur gauche de l'écran. 

- L'axe des X représente l'axe horizontal et pointe vers la droite de l'écran. 

- L'axe des Y représente l'axe longitudinal et pointe vers le haut de l'écran. 

- L'axe des Z représente l'axe vertical et pointe en dehors de la face avant de l'écran. 





<a name="NOTE0_3"></a>


### Arrêt de la détection
<a name="arret_detection_ELTPARAGRAPHE000158"></a>Il est conseillé de stopper la détection des changements d'orientation si elle n'est plus nécessaire afin d'économiser la batterie de l'appareil. Pour cela, le paramètre &lt;Procédure WLangage&gt; doit correspondre à chaîne vide (""). 

La fonction [CapteurTermine](../WDLang1/1000019644.md) permet d'arrêter toutes les détections en cours. 




- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSysteme.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Système** <br>Cette application est un exemple didactique montrant quelques unes des fonctionnalités de WINDEV Mobile pour Android/iOS.<br>Les fonctions système utilisées sont : <br>- NFC<br>- Champ Multimédia<br>- Luminosité<br>- Volume<br>- WIFI<br>- Bluetooth<br>- Toast<br>- Boussole<br>- Accéléromètre<br>- Champ caméra<br>- LED<br>- Vibrations<br>- Notifications<br>- Fonctions de dessin<br>- Internet



<a name="XComposante"></a>

## Composante :
WDJS.DLL
