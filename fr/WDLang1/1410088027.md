
## Notifications interactives
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000145"></a>
Une notification est une petite fenêtre qui apparaît en bas à droite de l'écran, et qui reste consultable en permanence, dans la zone des notifications de Windows.
Ce type de fenêtre est normé (en XML) par Windows.

En version 27, il devient facilement possible de créer des notifications à afficher sous Windows.

![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WD%20-%20Notif%20Windows%2011.gif)


Une notification peut contenir :

- des images,

- des textes,

- des champs de saisie,

- des boutons,

- des combos.




Pour créer ces notifications, WINDEV propose plusieurs fonctions et types WLangage.

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Comment le faire ?
<a name="comment_faire_ELTTEXTE000169"></a>
Pour créer une notification et l'afficher : 

1. Vérifiez si le système de l'utilisateur est compatible avec les notifications interactives via la fonction [SysNotificationCompatible](../WDLang1/1410087932.md). 

2. Créez une variable de type [sysNotification](../WDLang1/1410087893.md). Cette variable contient la description complète de la notification. 

	- Pour ajouter des zones de saisie dans la notification, créez une ou plusieurs variable de type [sysNotificationEntrée](../WDLang1/1410088024.md). La propriété **Type** de ce type de variable permet de déterminer si la zone de saisie correspond à une combo ou à une zone de texte. 

	- Pour ajouter des boutons dans la notification, créez une ou plusieurs variables de type [sysNotificationBouton](../WDLang1/1410087947.md). La propriété **Type** de ce type de variable permet de déterminer le type et la position du bouton à créer.

	- Définissez les actions à effectuer lorsque l'utilisateur clique sur la notification ou sur un bouton de la notification (voir paragraphe suivant). Ces actions peuvent correspondre : 

		- à une procédure globale spécifique. 

		- à l'événement optionnel du projet "Réception d'une notification" (cet événement est appelé si la procédure n'a pas été précisé dans la propriété **Action** ou si la procédure indiquée n'existe pas). 




3. Envoyez la notification au système grâce à la fonction [SysNotificationEnvoie](../WDLang1/1410087906.md).





### Gestion du clic sur la notification ou sur un bouton de la notification
<a name="gestion_clic_sur_notification_sur_bouton_notification_ELTPARAGRAPHE000061"></a>La récupération des informations de l'interaction de l'utilisateur avec une notification passe par un système de procédures de type Callback.

Il est possible d'associer une procédure spécifique à chaque action effectuée sur une notification (que ce soit sur la notification elle-même ou sur ses boutons). Cependant, comme une notification peut relancer une application, il est obligatoire que la procédure soit une procédure GLOBALE car elle doit être accessible dès l'ouverture de l'application.

Le nom de la procédure à exécuter est contenu dans la notification via la propriété **Action**. Si aucun nom n'est spécifié (utilisation d'un XML personnalisé par l'utilisateur par exemple), ou que la procédure n'est pas trouvée, alors l'événement optionnel du projet "Réception d'une notification" est exécuté.

La procédure comme l'événement optionnel du projet "Réception d'une notification" doivent être de la forme suivante : 

```txt
PROCEDURE NomProcédure(arguments est une chaîne, données est un tableau de chaînes)
```
 où : 

- &lt;arguments&gt; contient les arguments associés à l'action (que ce soit via la propriété **Note** de la variable [sysNotification](../WDLang1/1410087893.md) pour un clic sur la notification ou via la propriété **Note** de la variable [sysNotificationBouton](../WDLang1/1410087947.md) pour un clic sur un bouton). 

- &lt;données&gt; contient les données saisies par les utilisateurs dans les champs de la notification (champ de saisie ou combo). Chaque chaîne est de la forme : 
	
	```txt
	<Nom du champ> + TAB + <Valeur du champ>
	```





Remarque : Les procédures et l'événement optionnel sont exécutés dans thread principal de l'application (accès direct aux champs).

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Fonctions et types de variables associés aux notifications interactives
<a name="fonctions_types_variables_associes_aux_notifications_interactives_ELTTEXTE000199"></a>
Les fonctions permettant de gérer les notifications interactives sont les suivantes : 


|   |   |
| --- | --- |
| [EnModeSysNotification](../WDLang1/1410087933.md) | Permet de savoir si l'application est lancée depuis une notification interactive "Windows 10". |
| [SysNotificationCompatible](../WDLang1/1410087932.md) | Vérifie si le système d'exploitation supporte les notifications interactives. |
| [SysNotificationEnvoie](../WDLang1/1410087906.md) | Envoie une notification interactive au système afin de l'afficher. |
| [SysNotificationSupprime](../WDLang1/1410087907.md) | Supprime une notification interactive précédemment envoyée. |
| [SysNotificationSupprimeID](../WDLang1/1410087939.md) | Supprime toutes les notifications interactives précédemment envoyées correspondant à l'identifiant (ID) spécifié. |
| [SysNotificationSupprimeTout](../WDLang1/1410087937.md) | Supprime toutes les notifications interactives précédemment envoyées par l'application en cours. |





Les types de variables permettant de gérer les notifications interactives sont les suivantes : 



|   |   |
| --- | --- |
| [sysNotification](../WDLang1/1410087893.md) | Le type **sysNotification** permet de définir toutes les caractéristiques avancées d'une notification système interactive. |
| [sysNotificationBouton](../WDLang1/1410087947.md) | Le type **sysNotificationBouton** permet de définir toutes les caractéristiques avancées d'un champ Bouton dans une notification interactive. |
| [sysNotificationEntrée](../WDLang1/1410088024.md) | Le type **sysNotificationEntrée** permet de définir toutes les caractéristiques avancées d'un champ d'entrée utilisateur (saisie de texte ou combo) dans une notification interactive. |






- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDGestionNotificationsWindows.gif) ***Exemples didactiques (WINDEV)*** : **WD Gestion Notifications Windows** <br>A partir de Windows 10, les « toast » notifications (celles qui apparaissent à droite dans le bureau) sont devenues interactives, avec possibilité d’y mettre des boutons, des zones de saisie et des combos. <br>Cet exemple présente la gestion de ces notifications.


