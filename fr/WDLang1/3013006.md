
## Principe du contrôle à distance
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Contrôle à distance d'une application WINDEV
<a name="controle_distance_une_application_windev_ELTTEXTE000160"></a>
Le contrôle à distance d'une application WINDEV permet au responsable d'une application utilisée en réseau de gérer l'arrêt automatique de l'application pour tous les utilisateurs en cours. Cet arrêt de l'application peut être nécessaire par exemple pour une mise à jour de l'application ou de la base de données.

Le contrôle à distance permet de modifier le mode de fonctionnement de l'application.

Plusieurs modes sont disponibles :

- **Fonctionnement normal de l'application** : l'application peut être utilisée normalement.

- **Interdiction de toute nouvelle connexion à l'application** : à chaque nouveau lancement de l'application, un message apparaît. L'application ne peut pas être lancée.

- **Avertissement d'un arrêt imminent de l'application** : ce message apparaît à tous les utilisateurs connectés, à intervalle de temps régulier.

- **Arrêt immédiat de l'application** : un message apparaît et l'application est fermée.






<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principe de fonctionnement
<a name="principe_fonctionnement_ELTTEXTE000184"></a>
La gestion du contrôle à distance est réalisée grâce à un fichier de type INI. Ce fichier contient les références des différentes applications à contrôler et, pour chacune d'entre elles, les caractéristiques du contrôle à effectuer (pour plus de détails, consultez [Structure du fichier de contrôle](../WDLang1/3013005.md)).

Ce fichier de contrôle (nommé WDUPDATE.NET par défaut) est créé et maintenu par [l'application WDADMINEXE](../WDAdminExe/2028052.md). Régulièrement, l'exécutable consulte ce fichier de contrôle et déclenche automatiquement les actions liées au mode spécifié.

Les différentes étapes du contrôle de l'application sont les suivantes :

1. Modification du fichier WDUPDATE.NET par l'administrateur de l'application.

2. Vérification à intervalle de temps régulier du fichier WDUPDATE.NET par l'application.

3. Si le mode est modifié, l'application déclenche automatiquement l'affichage des messages correspondants (spécifiés dans le fichier de contrôle) sur les postes des utilisateurs.




[Voir quelques exemples de configuration.](../WDLang1/3013007.md)

| Mode | Effet pour les nouveaux utilisateurs | Effet pour les utilisateurs déjà connectés |
| --- | --- | --- |
| Nouvelle connexion interdite (constante *acInterdit*) | Affichage d'un message à toute nouvelle connexion (message paramétrable).<br>Ce message peut par exemple indiquer que l'application est en cours de modification et conseiller de relancer l'application plus tard.<br>Sans action de la part de l'utilisateur, ce message est automatiquement fermé au bout d'un délai spécifique (paramétrable). L'application ne se lance pas. | Aucun effet.<br>Utilisation normale de l'application. |
| Mode avertissement (constante *acAvertissement*) | Affichage d'un message à toute nouvelle connexion (message paramétrable).<br>Ce message peut par exemple indiquer que l'application est en cours de modification et conseiller de relancer l'application plus tard.<br>Sans action de la part de l'utilisateur, ce message est automatiquement fermé au bout d'un délai spécifique (paramétrable). L'application ne se lance pas. | Affichage d'un message à intervalle de temps régulier (message et délai paramétrable).<br>Ce message peut par exemple indiquer que l'application va bientôt être arrêtée pour modification, demander aux utilisateurs de finir leur tâche en cours le plus rapidement possible. |
| Mode arrêt de l'application (constante *acArrêt*) | Affichage d'un message à toute nouvelle connexion (message paramétrable).<br>Ce message peut par exemple indiquer que l'application est en cours de modification et conseiller de relancer l'application plus tard.<br>Sans action de la part de l'utilisateur, ce message est automatiquement fermé au bout d'un délai spécifique (paramétrable). L'application ne se lance pas. | Affichage d'un message indiquant que l'application va être fermée et fermeture de l'application (message paramétrable).<br>L'application est fermée. |





<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Fonctionnement par défaut et fonctionnement personnalisé
<a name="fonctionnement_par_defaut_fonctionnement_personnalise_ELTTEXTE000208"></a>
Par défaut, les fenêtres affichées à l'utilisateur sont des fenêtres standard. Ces fenêtres ne peuvent pas être modifiées lors de la réalisation de l'application.

Aucune programmation n'est nécessaire.

Un fonctionnement personnalisé peut être mis en place de deux façons :

- [utilisation d'une fenêtre de l'application](../WDLang1/3013001.md) pour afficher les messages d'avertissement,

- [utilisation d'une procédure de l'application](../WDLang1/3013009.md) pour personnaliser les traitements effectués en fonction des différents modes de contrôle de l'application.







- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDControleADistance.gif) ***Exemples didactiques (WINDEV)*** : **WD ContrôleADistance** <br>Cet exemple met en application le contrôle à distance d’une application WINDEV. <br>Ce contrôle permet de prévenir les utilisateurs de la fermeture prochaine de l’application, d’empêcher de nouveaux utilisateurs de s'y connecter et enfin de fermer l’application.<br>Ce mode doit être généralement réservé à l’administrateur de l’application.<br>Important : pour tester cet exemple, il est nécessaire de le déployer en tant que "Installation avec mise à jour réseau".


