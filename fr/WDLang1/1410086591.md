


## Télémétrie personnalisée
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000277"></a>
Une télémétrie personnalisée permet de définir les éléments à prendre en compte dans la télémétrie. Ces éléments sont définis à l'aide de capteurs. 

- Ces capteurs sont définis sous l'éditeur de télémétrie.  

- La valeur des capteurs peut être modifiée dans le code de l'application grâce à plusieurs fonctions WLangage. 


Les résultats de cette télémétrie personnalisée seront affichés dans des widgets spécifiques. 

**Pour utiliser des données personnalisées dans la télémétrie**, il faut : 

- Créer une télémétrie personnalisée. 

- Créer les widgets affichés par la télémétrie. 

- Paramétrer les widgets en définissant les informations affichées à l'aide de capteurs. 

- Placer dans le code les appels nécessaires à la gestion des capteurs. 

- Déployer l'application et sa télémétrie personnalisée. 




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Créer une télémétrie personnalisée
<a name="creer_une_telemetrie_personnalisee_ELTTEXTE000301"></a>
Une télémétrie personnalisée peut être créée : 

- via le volet "Explorateur de projet" : 

	1. Dans le volet "Explorateur de projet", sélectionnez le dossier "Télémétries personnalisées". 

	2. Dans le menu contextuel du dossier (clic droit), sélectionnez l'option "Nouvelle télémétrie personnalisée". 

	3. Le volet "Télémétrie personnalisée" apparaît dans le ruban de l'éditeur.

	4. Créez les différents capteurs et widgets correspondant à la télémétrie personnalisée. 

	5. Enregistrez la télémétrie personnalisée (Ctrl + S ou ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Enregistrer.gif) parmi les boutons d'accès rapide).




- via l'éditeur de télémétrie : 

	1. Sous le volet "Télémétrie", dans le groupe "Télémétrie personnalisée", cliquez sur "Nouveau". 

	2. Le volet "Télémétrie personnalisée" apparaît dans le ruban de l'éditeur.

	3. Créez les différents capteurs et widgets correspondant à la télémétrie personnalisée. 

	4. Enregistrez la télémétrie personnalisée (Ctrl + S ou ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Enregistrer.gif) parmi les boutons d'accès rapide).







<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Créer les capteurs de la télémétrie personnalisée et les widgets associés
<a name="creer_les_capteurs_telemetrie_personnalisee_les_widgets_associes_ELTTEXTE000325"></a>


### Créer les capteurs de la télémétrie personnalisée
<a name="creer_les_capteurs_telemetrie_personnalisee_ELTPARAGRAPHE000064"></a>Pour créer un capteur dans une télémétrie personnalisée : 

1. Sous le volet "Télémétrie personnalisée", dans le groupe "Capteurs", cliquez sur "Capteur". 

2. L'écran de paramétrage du capteur apparaît. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=T%E9l%E9m%E9trie_perso%20-%20HC%20N%B0001.gif)
Dans cet écran, indiquez : 

	- Le type du capteur : 

		- Point de passage : Ce type de capteur permet de compter les éléments pris en compte par la télémétrie. Par exemple, il est possible de compter le nombre de factures créées, le nombre de factures annulées, nombre d'utilisateurs ayant utilisé une fonctionnalité, ...

		- Mesure d'une valeur : Ce type de capteur permet de compter un élément. Par exemple, il est possible de compter le nombre de produits par facture, ...

		- Mesure du temps : Ce type de capteur permet de mesurer le temps d'une action. Par exemple, mesure du temps nécessaire à la préparation d'une commande. 




- Le mode d'agrégation utilisé par le capteur : 

	- En fonction du temps uniquement : Les données seront regroupées uniquement en fonction du temps. 

	- En fonction du temps et d'une catégorie : Les données seront regroupées en fonction du temps et de la catégorie spécifiée. 

3. Validez. Le nouveau capteur apparaît dans le Widget "Liste des capteurs". 





### Créer les widgets associés aux capteurs sans catégorie
<a name="creer_les_widgets_associes_aux_capteurs_sans_categorie_ELTPARAGRAPHE000091"></a>Si vous avez créé un capteur sans catégorie, plusieurs types de Widgets peuvent être créés pour afficher les données de ce type de capteur : 

- **Widget de type Valeur** : 

	1. Sous le volet "Télémétrie personnalisée", dans le groupe "Widgets", cliquez sur "Valeurs". 

	2. L'écran de paramétrage du widget apparaît : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=T%E9l%E9m%E9trie_perso%20-%20HC%20N%B0002.gif&type=thumb)
Cet écran permet de spécifier : 

		- Le libellé du Widget. 

		- Les informations à afficher : 

			- Le nom du capteur à utiliser. 

			- L'information à afficher : Nombre, Temps, Nombre de passages, Nombre d'utilisateurs, Pourcentage d'utilisateurs, ... 
										L'information affichée est différente selon le type du capteur. 

			- La légende




3. Vous pouvez afficher plusieurs valeurs dans un même widget. Cliquez sur le bouton "+" pour ajouter une nouvelle valeur à afficher. 

4. Validez la fenêtre de paramétrage du widget. 

- **Widget de type Graphe** : 

	1. Sous le volet "Télémétrie personnalisée", dans le groupe "Widgets", cliquez sur "Graphe". 

	2. L'écran de paramétrage du widget apparaît : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=T%E9l%E9m%E9trie_perso%20-%20HC%20N%B0003.gif&type=thumb)
Cet écran permet de spécifier : 

		- Le type de graphe à afficher : Histogramme, Histogramme empilé ou Courbe

		- Le libellé du Widget. 

		- Les éléments à afficher : 

			- Le nom du capteur à utiliser. 

			- L'information à afficher : Nombre, Temps, Nombre de passages, Nombre d'utilisateurs, Pourcentage d'utilisateurs, ... 
										L'information affichée est différente selon le type du capteur. 

			- La légende




3. Vous pouvez afficher plusieurs valeurs dans un même graphe. Cliquez sur le bouton "+" pour ajouter une nouvelle valeur à afficher. 

4. Validez la fenêtre de paramétrage du widget. 





### Créer les widgets associés aux capteurs avec catégorie
<a name="creer_les_widgets_associes_aux_capteurs_avec_categorie_ELTPARAGRAPHE000140"></a>Si vous avez créé un capteur avec catégorie, plusieurs types de Widgets peuvent être créés pour afficher les données de ce type de capteur : 

- **Widget de type Table** : 

	1. Sous le volet "Télémétrie personnalisée", dans le groupe "Widgets avec catégorie", cliquez sur "Table". 

	2. L'écran de paramétrage du widget apparaît : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=T%E9l%E9m%E9trie_perso%20-%20HC%20N%B0004.gif&type=thumb)
Cet écran permet de spécifier : 

		- Le libellé du Widget. 

		- Le capteur à utiliser. 

		- Les informations à afficher dans les différentes colonnes de la table : 

			- la première colonne affiche la catégorie. 

			- pour les autres colonnes, spécifiez le titre de la colonne et la valeur affichée. 




- **Widget de type Temporel** : 

	1. Sous le volet "Télémétrie personnalisée", dans le groupe "Widget", cliquez sur "Temporel". 

	2. L'écran de paramétrage du widget apparaît : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=T%E9l%E9m%E9trie_perso%20-%20HC%20N%B0005.gif)
Cet écran permet de spécifier : 

		- Le libellé du Widget. 

		- Le capteur à utiliser

		- Le type de graphe à afficher : Histogramme, Histogramme empilé ou Courbe

		- Les valeurs affichées par les axes du graphe. 




- **Widget de type Répartition** : 

	1. Sous le volet "Télémétrie personnalisée", dans le groupe "Widget", cliquez sur "Répartition". 

	2. L'écran de paramétrage du widget apparaît : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=T%E9l%E9m%E9trie_perso%20-%20HC%20N%B0006.gif&type=thumb)
Cet écran permet de spécifier : 

		- Le libellé du Widget. 

		- Le capteur à utiliser. 

		- Le type de graphe à afficher : "Histogramme Valeur" ou "Camembert Valeur". 

		- Les informations à afficher. 




3. Validez la fenêtre de paramétrage du widget. 




Les différents Widgets créés peuvent être modifiés grâce à leur menu contextuel (bouton situé en bas à droite du Widget). Il est possible de : 

- Editer le Widget. 

- Dupliquer le Widget. 

- Supprimer le Widget. 




<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Placer dans le code les appels nécessaires à la gestion des capteurs
<a name="placer_dans_code_les_appels_necessaires_gestion_des_capteurs_ELTTEXTE000361"></a>
Lors de la création du widget, un ou plusieurs capteurs ont été créés. 

Pour enregistrer les données concernant ces capteurs, il est nécessaire de les gérer dans les traitements de l'application. Deux fonctions WLangage sont disponibles : 



|   |   |
| --- | --- |
| [TélémétrieAjouteMesure](../WDLang1/1000022168.md) | Ajoute une mesure pour un capteur de valeur ou de temps. |
| [TélémétrieAjoutePassage](../WDLang1/1000022174.md) | Signale l'exécution du code au niveau d'un capteur de passage. |



Par exemple : 

- Capteur de mesure : 
	
	```wl
	// Un capteur de valeur "NombreProduit" a été défini sous l'éditeur
	// A chaque validation d'une commande, le nombre de produits de la commande est ajouté
	TélémétrieAjouteMesure(NombreProduit, TableauProduit..Occurrence)
	```


- Capteur de passage : 
	
	```wl
	// Un capteur de passage "AnnulationCommande" a été défini dans l'éditeur.
	// A chaque annulation de commande, on enregistre l'utilisation de la fonctionnalité
	// par l'utilisateur
	TélémétrieAjoutePassage(AnnulationCommande)
	```





<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Déployer la télémétrie personnalisée
<a name="deployer_telemetrie_personnalisee_ELTTEXTE000401"></a>
Pour qu'une télémétrie personnalisée soit prise en compte, il est nécessaire de : 

1. Déployer la télémétrie personnalisée sur le serveur. 

2. Générer et déployer l'application contenant les appels aux différents capteurs. 




Pour déployer la télémétrie personnalisée, cliquez sur l'option "Déployer" présente dans le volet "Télémétrie personnalisée". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=T%E9l%E9m%E9trie_perso%20-%20HC%20N%B0007.gif)



