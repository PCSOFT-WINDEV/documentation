


## dDébutDessin (Fonction)

***En anglais : dStartDrawing***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Indique que les fonctions de dessin qui vont être utilisées sont destinées : 

- au champ Image spécifié, 

- à une variable de type [Image](../WDLang1/1000019650.md).
	

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) à une variable de type [WDPic](../WDLang1/1000023503.md) (sur le calque d'arrière-plan),

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) à une variable de type [picCalque](../WDLang1/1000024604.md).




**Remarque** : La fonction **dDébutDessin** initialise tous les paramètres nécessaires à la création (ou à la poursuite) d'un dessin pour un élément donné.

![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) **Attention** : L'utilisation de cette fonction sous Linux nécessite une configuration spécifique. Pour plus de détails, consultez [Les dessins](../WDLang1/3029035.md). 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Début du dessin dans le champ Image "IMG_ImageDessin"
ResDessin = dDébutDessin(IMG_ImageDessin)
// Dessins dans le champ Image "IMG_ImageDessin"
...
// Fin des dessins dans le champ Image "IMG_ImageDessin"
```

```wl
dDébutDessin(IMG_Image1)
dPolice("Arial", 12, iNormal, 0)
dTexte(4, 0, "J'écris mon texte dans un champ Image !")
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

### Débuter un dessin dans un champ Image

`<Résultat> = dDébutDessin(<Champ Image> [, <Options>])`
---

**`<Résultat> : (Entier système)`**



- DC (device context) mémoire du champ Image, 

- 0 en cas d'erreur. 


Ce paramètre peut être utilisé pour appeler des routines système (fonctions de l'API Windows). Dans ce cas, il est conseillé d'utiliser un entier système.
![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cas particulier : 

- 1 en cas de succès, 

- 0 en cas d'erreur.




**`<Champ Image> : (Nom de champ)`**

Nom d'un champ Image dans lequel le dessin va être réalisé. 

**`<Options> : (Constante ou combinaison de constantes de type entier optionnelle)`**

Options de dessin :


|   |   |
| --- | --- |
| *dAffichageAsynchrone* |   |
| *dAffichageManuel* |   |
| *dAvecOpacité* | Autorise la gestion de l'opacité dans les différentes fonctions de dessin utilisées avec le champ Image. Permet par exemple de créer un dessin enregistré sous forme de PNG avec gestion de la couche alpha. |
| *dEffacer*<br>(Valeur par défaut) | Efface le dessin présent dans le champ Image. |
| *dQuadrillageOpacité* | L'affichage du dessin est effectué sur un quadrillage afin de mettre en évidence les parties transparentes ou semi-transparentes du dessin. Le quadrillage n'est pas enregistré dans l'image.<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette constante n'est pas disponible. |
| *dSansEffacer* | N'efface pas le dessin présent dans le champ Image. |
| *dSurGraphe* | Permet de dessiner sur un champ Image dans lequel un graphe a déjà été dessiné. Dans ce cas, le dessin du graphe n'est pas effacé.<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette constante n'est pas disponible. |




<a name="SYNTAXE2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 
### Débuter le dessin dans une variable de type Image, WDPic ou picCalque

`<Résultat> = dDébutDessin(<Elément> [, <Options>])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si le dessin a été initialisé, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire. 




**`<Elément> : (Variable de type Image, WDPic ou picCalque)`**

Nom d'une variable : 

- de type [Image](../WDLang1/1000019650.md).

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) de type [WDPic](../WDLang1/1000023503.md). Seul le calque d'arrière-plan sera manipulé. 

- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) de type [picCalque](../WDLang1/1000024604.md).




**`<Options> : (Constante ou combinaison de constantes de type entier optionnelle)`**

Options de dessin :


|   |   |
| --- | --- |
| *dAvecOpacité* | Autorise la gestion de l'opacité dans les différentes fonctions de dessin utilisées avec la variable. Permet par exemple de créer un dessin enregistré sous forme de PNG avec gestion de la couche alpha. |
| *dQuadrillageOpacité* | L'affichage du dessin est effectué sur un quadrillage afin de mettre en évidence les parties transparentes ou semi-transparentes du dessin. Le quadrillage n'est pas enregistré dans l'image.<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cette constante n'est pas disponible. |
| *dSansEffacer* | N'efface pas le dessin présent dans la variable. |
| *dSurGraphe* | Permet de dessiner dans une variable dans laquelle un graphe a déjà été dessiné. Dans ce cas, le dessin du graphe n'est pas effacé.<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cette constante n'est pas disponible. |


Si ce paramètre n'est pas précisé, aucune option de dessin n'est utilisée. 



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Cas particuliers
<a name="cas_particuliers_ELTPARAGRAPHE000355"></a>

- La fonction **dDébutDessin** doit être appelée avant l'utilisation des fonctions de dessin. La fonction **dDébutDessin** permet de définir l'élément (champ Image ou variable de type [Image](../WDLang1/1000019650.md)) sur lequel les fonctions de dessin vont intervenir.

- Dans le cas du dessin dans un champ Image : 

	- les fonctions de dessin travaillent sur une copie ("bitmap") de l'image. Vous pouvez utiliser les fonctions de dessin de Windows (grâce à la fonction [API](../WDLang1/3014005.md) ou [AppelDLL32](../WDLang1/3014003.md)) mais ces fonctions Windows doivent utiliser le DC (Device Context) renvoyé par la fonction **dDébutDessin**.

	- la fonction [dFinDessin](../WDLang1/3029019.md) ne doit pas être appelée dans le même traitement que la fonction **dDébutDessin**. Si la fonction [dFinDessin](../WDLang1/3029019.md) est appelée dans le même traitement que la fonction **dDébutDessin**, le dessin n'apparaîtra pas : il sera automatiquement effacé.






<a name="NOTE0_2"></a>
<a name="NOTE0_3"></a>
<a name="NOTE0_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Dessin avec gestion de l'opacité
<a name="dessin_avec_gestion_opacite_ELTPARAGRAPHE000515"></a>Créer un dessin avec gestion de l'opacité permet d'enregistrer simplement des images au format PNG avec gestion de la couche Alpha.

**Pour enregistrer un dessin PNG avec gestion de la couche Alpha** :

1. Utilisez la fonction **dDébutDessin**. Cette fonction permet de définir si nécessaire l'élément sur lequel les fonctions de dessin vont intervenir, ainsi que le mode de dessin. La constante *dAvecOpacité* permet d'indiquer que le dessin gérera l'opacité. La constante *dQuadrillageOpacité* permet de faire apparaître un quadrillage sous les différentes zones du dessin.

2. Paramétrez l'opacité de vos dessins grâce aux fonctions suivantes :
	


|   |   |
| --- | --- |
| [dFond](../WDLang1/3029002.md) | Déclare la couleur de fond et son opacité pour les prochains dessins. |
| [dPoint](../WDLang1/3029018.md) | Déclare la couleur des points et leur opacité pour les prochains dessins. |
| [dStylo](../WDLang1/3029029.md) | Déclare la couleur des traits et leur opacité pour les prochains dessins. |


	**Remarque** : La fonction [dPixelOpacité](../WDLang1/1000017029.md) permet de connaître l'opacité d'un point.

3. Utilisez la fonction [dSauveImagePNG](../WDLang1/3029027.md) pour sauvegarder votre dessin au format PNG avec gestion de la couche alpha (de l'opacité).




**Limite** : En mode "Gestion de l'opacité", la fonction [dTexte](../WDLang1/3029032.md) est limitée à l'usage de polices True Type.
<a name="NOTE0_5"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Fonction dDébutDessin, zoom et ascenseurs automatiques
<a name="fonction_docparampagetitleshort_zoom_ascenseurs_automatiques_ELTPARAGRAPHE000568"></a>L'option "Ascenseurs et zoom automatiques" disponible sur un champ Image est incompatible avec la fonction **dDébutDessin**. Si cette option est utilisée sur le champ Image, la fonction **dDébutDessin** entraîne un affichage figé dans le champ. Le zoom et les ascenseurs sont également figés. Le comportement redevient normal lors de l'appel de la fonction [dFinDessin](../WDLang1/3029019.md).
<a name="NOTE0_6"></a>


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Lesfonctionsdedessin.gif) ***Exemples unitaires (WINDEV)*** : **Les fonctions de dessin** <br>Utilisation des principales fonctions de dessin de WINDEV pour :<br>- Initialiser un champ Image pour dessiner<br>- Dessiner des figures simples<br>- Ecrire un texte dans un dessin<br>- Changer la couleur dans un dessin

<a name="XComposante"></a>

## Composante :
wd280pnt.dll
