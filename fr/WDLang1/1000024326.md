


## &lt;Image&gt;.DébutDessin (Fonction)

***En anglais : &lt;Image&gt;.StartDrawing***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Indique que les fonctions de dessin qui vont être utilisées sont destinées au champ Image spécifié. 

**Remarque** : La fonction **&lt;Image&gt;.DébutDessin** initialise tous les paramètres nécessaires à la création (ou à la poursuite) d'un dessin pour un élément donné.

![Linux](https://doc.pcsoft.fr/ext/images/fr/LX.png) **Attention** : L'utilisation de cette fonction sous Linux nécessite une configuration spécifique. Pour plus de détails, consultez [Les dessins](../WDLang1/3029035.md). 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Début du dessin dans le champ Image "IMG_ImageDessin"
ResDessin = IMG_ImageDessin.DébutDessin()
// Dessins dans le champ Image "IMG_ImageDessin"
...
// Fin des dessins dans le champ Image "IMG_ImageDessin"
```

```wl
IMG_Image1.DébutDessin()
IMG_Image1.Police("Arial", 12, iNormal, 0)
IMG_Image1.DessineTexte(4, 0, "J'écris mon texte dans un champ Image !")
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = <Champ Image>.DébutDessin([<Options>])`
---

**`<Résultat> : (Entier système)`**



- DC (device context) mémoire du champ Image, 

- 0 en cas d'erreur. 


Ce paramètre peut être utilisé pour appeler des routines système (fonctions de l'API Windows). Dans ce cas, il est conseillé d'utiliser un entier système.
![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cas particulier : 

- 1 en cas de succès, 

- 0 en cas d'erreur.




**`<Champ Image> : (Nom de champ)`**

Nom du champ Image à manipuler.

**`<Options> : (Constante ou combinaison de constantes de type entier optionnelle)`**

Options de dessin :


|   |   |
| --- | --- |
| *dAffichageAsynchrone* |   |
| *dAffichageManuel* |   |
| *dAvecOpacité* | Autorise la gestion de l'opacité dans les différentes fonctions de dessin utilisées avec le champ Image. Permet par exemple de créer un dessin enregistré sous forme de PNG avec gestion de la couche alpha. |
| *dEffacer*<br>(Valeur par défaut) | Efface le dessin présent dans le champ Image. |
| *dQuadrillageOpacité* | L'affichage du dessin est effectué sur un quadrillage afin de mettre en évidence les parties transparentes ou semi-transparentes du dessin. Le quadrillage n'est pas enregistré dans l'image.<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette constante n'est pas disponible. |
| *dSansEffacer* | N'efface pas le dessin présent dans le champ Image. |
| *dSurGraphe* | Permet de dessiner sur un champ Image dans lequel un graphe a déjà été dessiné. Dans ce cas, le dessin du graphe n'est pas effacé.<br>![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png) Cette constante n'est pas disponible. |





<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Utilisation dans le cadre de la syntaxe préfixée
<a name="utilisation_dans_cadre_syntaxe_prefixee_ELTPARAGRAPHE000445"></a>

- La fonction **&lt;Image&gt;.DébutDessin** doit être appelée avant l'utilisation des fonctions de dessin. La fonction **&lt;Image&gt;.DébutDessin** permet de définir les options de dessin utilisées sur le champ Image.

- \* Dans le cas du dessin dans un champ Image : 

	- les fonctions de dessin travaillent sur une copie ("bitmap") de l'image. Vous pouvez utiliser les fonctions de dessin de Windows (grâce à la fonction [API](../WDLang1/3014005.md) ou [AppelDLL32](../WDLang1/3014003.md)) mais ces fonctions Windows doivent utiliser le DC (Device Context) renvoyé par la fonction **&lt;Image&gt;.DébutDessin**.

	- la fonction [&lt;Image&gt;.FinDessin](../WDLang1/1000024327.md) ne doit pas être appelée dans le même traitement que la fonction **&lt;Image&gt;.DébutDessin**. Si la fonction [&lt;Image&gt;.FinDessin](../WDLang1/1000024327.md) est appelée dans le même traitement que la fonction **&lt;Image&gt;.DébutDessin**, le dessin n'apparaîtra pas : il sera automatiquement effacé.








<a name="NOTE0_2"></a>
<a name="NOTE0_3"></a>
<a name="NOTE0_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Dessin avec gestion de l'opacité
<a name="dessin_avec_gestion_opacite_ELTPARAGRAPHE000600"></a>Créer un dessin avec gestion de l'opacité permet d'enregistrer simplement des images au format PNG avec gestion de la couche Alpha.

**Pour enregistrer un dessin PNG avec gestion de la couche Alpha** :

1. Utilisez la fonction **&lt;Image&gt;.DébutDessin**. Cette fonction permet de définir si nécessaire l'élément sur lequel les fonctions de dessin vont intervenir, ainsi que le mode de dessin. La constante *dAvecOpacité* permet d'indiquer que le dessin gérera l'opacité. La constante *dQuadrillageOpacité* permet de faire apparaître un quadrillage sous les différentes zones du dessin.

2. Paramétrez l'opacité de vos dessins grâce aux fonctions suivantes :
	


|   |   |
| --- | --- |
| [&lt;Image&gt;.Fond](../WDLang1/1000023999.md) | Déclare la couleur de fond et son opacité pour les prochains dessins. |
| [&lt;Image&gt;.DessinePoint](../WDLang1/1000024006.md) | Déclare la couleur des points et leur opacité pour les prochains dessins. |
| [&lt;Image&gt;.Stylo](../WDLang1/1000024016.md) | Déclare la couleur des traits et leur opacité pour les prochains dessins. |


	**Remarque** : La fonction [&lt;Image&gt;.PixelOpacité](../WDLang1/1000024336.md) permet de connaître l'opacité d'un point.

3. Utilisez la fonction [&lt;Image&gt;.SauvePNG](../WDLang1/1000024345.md) pour sauvegarder votre dessin au format PNG avec gestion de la couche alpha (de l'opacité).




**Limite** : En mode "Gestion de l'opacité", la fonction [&lt;Image&gt;.DessineTexte](../WDLang1/1000024017.md) est limitée à l'usage de polices True Type.
<a name="NOTE0_5"></a>
<a name="NOTE0_6"></a>


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Lesfonctionsdedessin.gif) ***Exemples unitaires (WINDEV)*** : **Les fonctions de dessin** <br>Utilisation des principales fonctions de dessin de WINDEV pour :<br>- Initialiser un champ Image pour dessiner<br>- Dessiner des figures simples<br>- Ecrire un texte dans un dessin<br>- Changer la couleur dans un dessin

<a name="XComposante"></a>

## Composante :
wd280pnt.dll
