
## ThreadAttendSignal (Fonction)

***En anglais : ThreadWaitSignal***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Bloque le thread en cours jusqu'à la réception d'un signal envoyé par un autre thread. Cette fonction permet de simplifier la synchronisation entre threads en évitant de mettre en place une gestion avancée des signaux. 

Remarque : Cette fonction est équivalente à la fonction [SignalAttend](../WDLang1/3077007.md) avec un signal automatique pour un signal envoyé par la fonction [ThreadEnvoieSignal](../WDLang1/3077021.md). Le signal est donc automatiquement refermé.

**Rappels** : 

- Un thread est un processus lancé en parallèle de l'application en cours ("thread" principal). Il est par exemple possible de lancer l'exécution d'une tâche en traitement de fond (sauvegarde, ...).

- Les fonctions **ThreadAttendSignal** et [ThreadEnvoieSignal](../WDLang1/3077021.md) permettent de synchroniser les threads deux à deux.







<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple
<a class="notetitle" target="_blank" href="$DOC$=1000003077022&name=threadattendsignal_fonction&product=WD">Voir des exemples supplémentaires</a>

```wl
// Création d'un signal
SignalCrée("Allez-y", signalManuel, signalFermé)
// Exécution d'un premier thread
ThreadExécute("Thread1", threadNormal, "Thread_Premier")
// Bloque le thread en cours jusqu'à l'obtention du signal
ThreadAttendSignal()

// Exécution d'un second thread
ThreadExécute("Thread2", threadNormal, "Thread_Second")
// Bloque le thread en cours jusqu'à l'obtention du signal
ThreadAttendSignal()

// Modifie le signal pour exécuter les threads
SignalModifie("Allez-y", signalOuvert)
```

```wl
//----------------------------------------------
PROCEDURE Thread_Premier()
Trace(dbgInfo(dbgTraitement) + " - ThreadEnvoieSignal(threadPrincipal)")
ThreadEnvoieSignal(threadPrincipal)
SignalAttend("Allez-y")
Trace(dbgInfo(dbgTraitement) + " - Signal reçu")
```

```wl
//--------------------------------------------
PROCEDURE Thread_Second()
Trace(dbgInfo(dbgTraitement) + " - ThreadEnvoieSignal(threadPrincipal)")
ThreadEnvoieSignal(threadPrincipal)
SignalAttend("Allez-y")
Trace(dbgInfo(dbgTraitement) + " - Signal reçu")
```





<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = ThreadAttendSignal([<Durée maximale>])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si le thread courant a reçu un signal, 

- <u><u><u><u>Faux</u></u></u></u> si le thread n'a pas reçu de signal (la durée maximale s'est écoulée).




**`<Durée maximale> : (Entier optionnel, Durée optionnelle ou constante optionnelle)`**

Nombre de centièmes de seconde d'attente maximale. 

- Si à la fin de la durée spécifiée, le thread n'a pas reçu de signal, &lt;Résultat&gt; est égal à <u><u><u><u>Faux</u></u></u></u>. 

- Si ce paramètre n'est pas spécifié ou correspond à la constante *Infini*, l'attente est infinie.  


Ce paramètre peut correspondre à : 

- un entier correspondant au nombre de centièmes de seconde, 

- une variable de type Durée, 

- l'indication directe de la durée (par exemple 1 s ou 10 ms). 






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques




### Attente infinie
<a name="attente_infinie_ELTPARAGRAPHE000124"></a>Il est possible de terminer l'exécution d'un thread même si celui-ci est bloqué dans une attente infinie d'un signal. Il suffit d'utiliser la fonction [ThreadArrête](../WDLang1/3077019.md).


<a name="NOTE0_2"></a>




### Synchronisation de threads
<a name="synchronisation_threads_ELTPARAGRAPHE000136"></a>Les fonctions **ThreadAttendSignal** et [ThreadEnvoieSignal](../WDLang1/3077021.md) permettent de synchroniser les threads deux à deux. Pour synchroniser plusieurs threads sur un même signal, il est nécessaire d'utiliser les fonctions de gestion d'un signal :

- [SignalCrée](../WDLang1/3077009.md) : Crée un signal.

- [SignalAttend](../WDLang1/3077007.md) : Bloque le thread en cours et attend le signal.

- [SignalModifie](../WDLang1/3077017.md) : Modifie l'état d'un signal.

- [SignalDétruit](../WDLang1/3077025.md) : Détruit un signal.




Remarque : Les mécanismes internes de gestion des files et des piles permettent de s'affranchir de la synchronisation des threads (fonctions [Enfile](../WDLang1/1000018323.md) et [Défile](../WDLang1/1000018322.md) pour les files, fonctions [Empile](../WDLang1/1000017366.md) et [Dépile](../WDLang1/1000017372.md) pour les piles). 
<a name="NOTE0_3"></a>




### Divers
<a name="divers_ELTPARAGRAPHE000177"></a>La fonction **ThreadAttendSignal** peut être utilisée dans un traitement lié à un champ (code de clic d'un bouton par exemple) : elle est alors utilisée dans le thread principal.



<a name="XComposante"></a>

## Composante :
wd280vm.dll
