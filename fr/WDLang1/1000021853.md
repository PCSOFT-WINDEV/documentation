


## UI modifiable par l'utilisateur final
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000353"></a>
Les applications WINDEV permettent par défaut à l'utilisateur final de modifier l'interface de son application. 

L'utilisateur final peut ainsi décider de la présence de certains éléments dans son application, modifier et adapter les fenêtres à son usage personnel. 

Aujourd'hui, tout le monde personnalise l'écran de son smartphone, pourquoi ne pas faire de même avec ses applications ? 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Principe
<a name="principe_ELTTEXTE000377"></a>
Lorsque la modification de l'interface par l'utilisateur final est activée, plusieurs nouvelles options apparaissent en exécution pour l'utilisateur final : 

- **Personnaliser l'interface** (option du menu contextuel de la fenêtre) : Permet à l'utilisateur final de personnaliser l'interface de la fenêtre (voir ci-dessous). <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IMH_Modifiable_1%20-%20HC%20N%B0001.gif)


- **Notes repositionnables** (option du menu contextuel de la fenêtre) : Permet à l'utilisateur final d'ajouter des notes repositionnables dans la fenêtre. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IMH_Modifiable_1%20-%20HC%20N%B0002.gif)
Pour plus de détails, consultez [Note repositionnable (FAA)](../Editeurs/1000021820.md). 




Pour certains types de champs, une option du menu contextuel permet directement de modifier la bulle d'aide du champ (option "Editer la bulle d'aide"). 

**Remarques** : 

- Les options de menu apparaissent uniquement si le menu des FAA est activé sur la fenêtre. 
	Rappel : Pour activer le menu des FAA : 

	- Affichez l'onglet "UI" de la fenêtre de description de la fenêtre. 

	- Déroulez l'option "Menu contextuel" et cochez l'option "Afficher le menu des FAA (Système)".




- Lors du test d'une fenêtre ou du projet (![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Ico_Go_Fenetre_WD_bl.gif) et ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_GO_Projet_WD.gif)), les options de modification d'interface sont également disponibles. Si ces options sont utilisées, en fin de test, WINDEV propose automatiquement d'intégrer les modifications effectuées dans la fenêtre en cours. Pour plus de détails, consultez [Utilisation de la modification d'IHM lors d'un test de projet ou de fenêtre](../WDLang1/1000021927.md). 





### Personnaliser l'interface
<a name="personnaliser_interface_ELTPARAGRAPHE000066"></a>Si l'option "Personnaliser l'interface" est sélectionnée, il est possible de passer en mode modification (sous-option "Passer en mode modification"). 

Dans ce mode, l'utilisateur peut réaliser toutes les manipulations autorisées par le développeur : 

- Sélectionner un ou plusieurs champs, 

- Déplacer un ou plusieurs champs, 

- Créer un fil entre plusieurs champs, 

- Editer la bulle d'aide des champs.




Il est également possible de gérer les modifications en cours : 

- **Importer une personnalisation** : Importe une personnalisation précédemment exportée (fichier \*.wdmodif).  

- **Exporter la personnalisation de cette fenêtre** : Exporte la personnalisation de la fenêtre en cours sous forme d'un fichier au format ".wdmodif". 

- **Exporter toutes les personnalisations de l'application** : Exporte la personnalisation de l'application sous forme d'un fichier au format ".wdmodif".

- **Restaurer la configuration initiale** : Restaure la configuration initiale voulue par le développeur. 




**Remarque** : Le fichier d'export "\*.wdmodif" peut être directement ouvert dans l'éditeur de WINDEV. Dans ce cas, l'éditeur propose d'appliquer les modifications enregistrées directement dans la ou les fenêtres correspondantes dans le projet en cours. 

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mise en place et configuration
<a name="mise_place_configuration_ELTTEXTE000407"></a>


### Mise en place
<a name="mise_place_ELTPARAGRAPHE000091"></a>Par défaut, toutes les applications WINDEV créées ou compilées à partir de la version 21 permettent la modification de l'UI par l'utilisateur final. 

Ces options sont configurables : 

- au niveau du projet. Les options seront prises en compte pour toutes les fenêtres du projet. 
	Pour configurer la modification de l'interface par l'utilisateur final : 

	1. Affichez la fenêtre de description du projet : sous le volet "Projet", dans le groupe "Projet", cliquez sur "Description".

	2. Dans l'onglet "Avancé", cochez l'option "Modification de l'UI par l'utilisateur final". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IMH_Modifiable_2%20-%20HC%20N%B0001.gif&type=thumb)


	3. Le bouton "Options" permet de définir les différentes options autorisées. 

- au niveau de chaque fenêtre. Les options seront prises en compte uniquement pour la fenêtre sélectionnée. 

	1. Affichez la fenêtre de description de la fenêtre (option "Description" du menu contextuel de la fenêtre).  

	2. Dans l'onglet "Détail", cochez l'option "Modification de l'UI par l'utilisateur final". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IMH_Modifiable_2%20-%20HC%20N%B0002.gif)


	3. Le bouton "Options" permet de définir les différentes options autorisées. 




Remarque : Par défaut, le paramétrage des fenêtres correspond au paramétrage du projet. 


### Paramétrage pour le projet et les fenêtres
<a name="parametrage_pour_projet_les_fenetres_ELTPARAGRAPHE000135"></a>Les options de paramétrage de l'UI par l'utilisateur final sont les suivantes : 

- **Aucune modification**. Décoche automatiquement l'option "Modification de l'UI par l'utilisateur final". L'utilisateur final ne pourra pas modifier l'interface de son application. 
	Remarques : 

	- Les notes repositionnables ne seront plus utilisables par l'utilisateur final. 

	- Les options de modification d'interface ne sont plus disponibles lors du lancement de l'exécutable. Ces options restent disponibles en GO. 




- **Par défaut**. Affiche et permet d'utiliser les options par défaut. Le bouton "Voir" permet d'afficher les options par défaut. Ces options ne sont pas modifiables. 

- **Paramétrage spécifique** : Permet de définir les options pour le projet ou pour la fenêtre. Si un paramétrage spécifique est réalisé pour le projet, ces options sont automatiquement reportées sur les fenêtres. 





### Options disponibles
<a name="options_disponibles_ELTPARAGRAPHE000165"></a>Les options disponibles pour la modification de l'UI par l'utilisateur final sont les suivantes : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=IMH_Modifiable_2%20-%20HC%20N%B0003.gif)


- **Options concernant les champs** : 

	- Sélection : L'utilisateur peut sélectionner un champ. 

	- Sélection multiple : L'utilisateur peut sélectionner plusieurs champs à l'aide de la touche Ctrl ou via la souris. 

	- Déplacement : L'utilisateur final peut déplacer les champs dans la fenêtre. 

	- Redimensionnement : L'utilisateur final peut redimensionner les champs présent dans la fenêtre. 

	- Rendre visible/invisible : L'utilisateur peut rendre visibles ou invisibles des champs (cette option n'est pas disponible dans cette version). 

	- Modifier la bulle : L'utilisateur final peut modifier la bulle d'aide du champ. 
			Remarque : Une nouvelle option "Editer la bulle d'aide" est disponible. Cette option peut être disponible directement dans le menu contextuel du champ ou uniquement en passant en mode modification de la fenêtre. 




- **Options concernant le champ Fil** : 

	- Ajouter un fil : L'utilisateur final peut créer un champ Fil entre deux champs. 

	- Modifier les liaisons d'un fil : L'utilisateur final peut modifier les liaisons d'un champ Fil avec deux champs. 




- **Options concernant les notes repositionnables** (pour plus de détails sur les notes repositionnables, consultez [Note repositionnable (FAA)](../Editeurs/1000021820.md)). 

	- Ajouter une note repositionnable : L'utilisateur final aura la possibilité d'ajouter une note repositionnable dans les fenêtres de l'application (ou dans la fenêtre en cours). La fenêtre contiendra l'option de menu "Notes repositionnables .. Créer une note repositionnable". 

	- Modifier le texte : L'utilisateur final aura la possibilité de modifier le texte de la note repositionnable. 

	- Enroulé ou déroulé : L'utilisateur final pourra enrouler ou dérouler la note repositionnable. 

	- Enroulé automatique : L'utilisateur final pourra utiliser le mode "Enroulé automatique" : la note repositionnable se réduira automatiquement après 5 secondes. 







<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Programmation et fonctionnalités avancées
<a name="programmation_fonctionnalites_avancees_ELTTEXTE000443"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000235"></a>Le WLangage propose plusieurs propriétés et fonctions permettant de mettre en place et de gérer la modification de l'UI par l'utilisateur. 

Grâce à ces fonctions, il est notamment possible de décrire un éditeur en WLangage, avec gestion du undo/redo. 


### Configurer les options de la modification d'UI par programmation
<a name="configurer_les_options_modification_par_programmation_ELTPARAGRAPHE000242"></a>Pour configurer les options de la modification d'UI par programmation : 

1. Utilisez la propriété [FenEditionMode](../Proprietes/1000021824.md) pour configurer les actions autorisées sur la fenêtre et ses champs lorsque la fenêtre passe en mode "Modification de l'UI par l'utilisateur final". 

2. Utilisez la propriété [FenEditionAutorisée](../Proprietes/1000021850.md) pour configurer les manipulations autorisées sur un champ lorsque la fenêtre passe en mode "Modification de l'UI par l'utilisateur final".




Remarque : Pour ne pas permettre la configuration d'UI sur une fenêtre, il est possible d'utiliser la fonction [FAADésactive](../WDLang1/1000022018.md) avec la constante *faaPersonnaliserUI*. Dans ce cas, le menu contextuel "Personnaliser l'interface" ne sera plus disponible. 


### Fonctions WLangage permettant de gérer la modification d'UI
<a name="fonctions_wlangage_permettant_gerer_modification_ELTPARAGRAPHE000261"></a>Ces fonctions peuvent être regroupées par thèmes : 

- Fonctions d'activation et de sauvegarde : 
	


|   |   |
| --- | --- |
| [FenEdActive](../WDLang1/1000021843.md) | Permet : <br><br>	- de savoir si le mode "Modification de l'UI par l'utilisateur final" est activé dans une fenêtre (ou une fenêtre interne).<br><br>	- d'activer ou non le mode "Modification de l'UI par l'utilisateur final" dans une fenêtre (ou une fenêtre interne).<br><br><br> |
| [FenEdCharge](../WDLang1/1000021849.md) | Charge les modifications faites par l'utilisateur final dans une fenêtre. |
| [FenEdRestaure](../WDLang1/1000021869.md) | Annule toutes les modifications effectuées par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |
| [FenEdSauve](../WDLang1/1000021848.md) | Sauve les modifications réalisées en mode "Modification de l'UI par l'utilisateur final". |
| [FenEdSauveNote](../WDLang1/1000022120.md) | Exporte les notes repositionnables créées par l'utilisateur dans un fichier. |

- Fonctions de gestion de la sélection de champs : 
	


|   |   |
| --- | --- |
| [FenEdDésélectionneTout](../WDLang1/1000021873.md) | Désélectionne tous les champs lors de la modification de l'interface par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |
| [FenEdSelect](../WDLang1/1000021871.md) | Renvoie l'un des champs sélectionnés lors de la modification de l'interface par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |
| [FenEdSelectMoins](../WDLang1/1000021874.md) | Dé-sélectionne un champ lors de la modification de l'interface par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |
| [FenEdSelectOccurrence](../WDLang1/1000021870.md) | Indique le nombre de champs sélectionnés lors de la modification de l'interface par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |
| [FenEdSelectPlus](../WDLang1/1000021872.md) | Sélectionne un champ lors de la modification de l'interface par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |

- Fonctions de gestion du Undo/Redo : 
	


|   |   |
| --- | --- |
| [FenEdDéclareUndo](../WDLang1/1000021898.md) | Déclare comment annuler une action ajoutée avec la fonction [FenEdDo](../WDLang1/1000021897.md). |
| [FenEdDo](../WDLang1/1000021897.md) | Exécute une action (définie par programmation) avec support du Undo/Redo. |
| [FenEdRedo](../WDLang1/1000021905.md) | Exécute la dernière action annulée lors de la modification de l'interface par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |
| [FenEdUndo](../WDLang1/1000021904.md) | Annule la dernière action effectuée lors de la modification de l'interface par l'utilisateur final (mode "Modification de l'UI par l'utilisateur final" activé). |





### Comment connaître le type de modification effectuée par l'utilisateur ? 
<a name="comment_connaitre_type_modification_effectuee_par_utilisateur_ELTPARAGRAPHE000278"></a>Lorsque l'utilisateur effectue une modification d'interface (sélection, déplacement ou redimensionnement), un événement spécifique est exécuté. 

Pour connaître le type de modification, il suffit d'associer un événement à la modification d'interface. Cette opération peut être effectuée grâce à la propriété [Traitement](../Proprietes/1000020878.md) et aux constantes suivantes : 


|   |   |
| --- | --- |
| *trtFenEdChangeTaille* | Evénement exécuté lors du changement de taille des champs. |
| *trtFenEdDéplacement* | Evénement exécuté lors du déplacement des champs. |
| *trtFenEdSélection* | Evénement exécuté lors de la sélection des champs. |


Remarque : Dans la procédure appelée par la propriété [Traitement](../Proprietes/1000020878.md), il est également possible d'effectuer un traitement spécifique selon les modifications effectuées par l'utilisateur. 


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDObjetsGraphiques.gif) ***Exemples didactiques (WINDEV)*** : **WD Objets Graphiques** <br>Cet exemple didactique illustre la puissance du WLangage en matière de programmation orientée objet.<br>Cet exemple est un éditeur d'objets graphiques.<br><br>Il est possible de :<br>- déplacer, redimensionner les objets<br>- effectuer des sélections au lasso ou à la souris<br>- couper/copier/coller des objets<br>- supprimer/dupliquer des objets<br>- enregistrer les documents créés et de les imprimer.<br><br>Les principales fonctionnalités techniques présentées et documentées sont les suivantes :<br>- gestion d'un presse-papiers d'objets<br>- gestion du UNDO/REDO<br>- sérialisation et désérialisation d'objets<br>- algorithmes de gestion d'objets graphiques (redimensionnements proportionnels, gestion de règles de déplacement, etc...)
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDApplicationInteractive.gif) ***Exemples didactiques (WINDEV)*** : **WD Application Interactive** <br>Cet exemple montre l'utilisation des fonctions FenEdXXX dans une application interactive.<br>Cette application permet de gérer une maison connectée (allumer les lumières, connaître la température).<br><br>Les fonctions FenEdXXX permettent de déplacer les champs sur le plan de la maison, tout en bénéficiant de fonctionnalités avancées comme la sauvegarde des modifications, l'annulation,...


