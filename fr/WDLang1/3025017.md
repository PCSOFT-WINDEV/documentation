


## ChampClone (Fonction)

***En anglais : ControlClone***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Crée un nouveau champ. Ce nouveau champ est une copie d'un champ existant (y compris pour les colonnes d'un champ Table). 

Cette fonction peut être utilisée pour créer un nouveau champ dans une fenêtre, dans une page ou dans un état. 
Le nouveau champ est créé obligatoirement dans la même fenêtre (la même page ou le même état) que le champ source.

<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple
<a class="notetitle" target="_blank" href="$DOC$=1000003025017&name=champclone_fonction&product=WD">Voir des exemples supplémentaires</a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 
```wl
// Crée un nouveau volet dans un champ Onglet 
ChampClone(ONG_MonOnglet[1], "Volet 3")

// Crée un champ cloné dans un volet Onglet 
// alors que le champ original est dans la fenêtre
ChampClone(SAI_SAISIE1, "ONG_MonOnglet[2].CLONE_SAISIE1")
```
<a name="Exemple2"></a>

```wl
// Crée un nouveau champ Libellé dans un état (WINDEV, WEBDEV ou WINDEV Mobile) 
ChampClone(LIB_Libellé, "Clone", 10.8, 10.8)
```
<a name="Exemple3"></a>

```wl
xChamp est un Champ 
xChamp <- ChampClone(COL_Modèle, "COL_Clone" + i)
xChamp.Largeur = COL_Modèle.Largeur
xChamp.Libellé = "Matière " + i
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

### Créer un clone de champ dans une fenêtre ou une page

`<Résultat> = ChampClone(<Nom du champ source> , <Nom du champ destination> [, <X> , <Y>])`
---

**`<Résultat> : (Variable de type Champ)`**

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Nom de la variable de type [Champ](../WDLang1/1000020967.md) à associer au champ cloné. 

**`<Nom du champ source> : (Chaîne de caractères)`**

Nom du champ (ou de la colonne) à copier.
Si ce paramètre correspond au nom d'une colonne du champ Table :

- les paramètres &lt;X&gt; et &lt;Y&gt; sont ignorés.

- la nouvelle colonne est insérée à droite des autres colonnes du champ Table.

- le contenu du champ Table est automatiquement vidé.


Dans ce cas, si plusieurs champs Table possèdent des colonnes de même nom, le nom de la colonne doit être préfixé du nom du champ Table : &lt;Nom de la table&gt;.&lt;Nom de la colonne&gt;.

**`<Nom du champ destination> : (Chaîne de caractères)`**

Nom du champ (ou de la colonne) dynamique à créer.
Ce nom doit respecter les règles de nommage d'un nouveau champ utilisées par l'éditeur. Par exemple, il ne doit pas contenir de point, d'espace ou d'apostrophe.
Si ce paramètre correspond au nom d'une colonne du champ Table, le nom de la colonne ne doit pas être préfixé du nom du champ Table.
Il est possible de changer la parenté lors du clonage d'un champ. Ainsi, un champ peut être cloné sur un onglet et associé à cet onglet. Il suffit de préfixer le nom du champ à créer par le nom du champ Onglet (voir exemple). Le fonctionnement est identique pour les champs Tiroir et Boîte à outils. 

**`<X> : (Entier optionnel)`**

Abscisse du champ à créer (en pixels). 
Si ce paramètre n'est pas spécifié, le champ est créé à la position d'origine du champ source (position initiale connue grâce aux propriétés [XInitial](../Proprietes/2510140.md) et [YInitial](../Proprietes/2510087.md)).

**`<Y> : (Entier optionnel)`**

Ordonnée du champ à créer (en pixels). 
Si ce paramètre n'est pas spécifié, le champ est créé à la position d'origine du champ source (position initiale connue grâce aux propriétés [XInitial](../Proprietes/2510140.md) et [YInitial](../Proprietes/2510087.md)).


<a name="SYNTAXE2"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 
### Créer un clone de champ dans un état

`<Résultat> = ChampClone(<Nom du champ source de l'état> , <Nom du champ destination> [, <X> , <Y>])`
---

**`<Résultat> : (Variable de type Champ)`**

![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Nom de la variable de type [Champ](../WDLang1/1000020967.md) à associer au champ cloné. 

**`<Nom du champ source de l'état> : (Chaîne de caractères)`**

Nom du champ à copier.

**`<Nom du champ destination> : (Chaîne de caractères)`**

Nom du champ dynamique à créer.

**`<X> : (Réel optionnel)`**

Abscisse du champ à créer (en millimètres). 
Si ce paramètre n'est pas spécifié, le champ est créé à la position d'origine du champ source (position initiale connue grâce aux propriétés [XInitial](../Proprietes/2510140.md) et [YInitial](../Proprietes/2510087.md)).

**`<Y> : (Réel optionnel)`**

Ordonnée du champ à créer (en millimètres). 
Si ce paramètre n'est pas spécifié, le champ est créé à la position d'origine du champ source (position initiale connue grâce aux propriétés [XInitial](../Proprietes/2510140.md) et [YInitial](../Proprietes/2510087.md)).



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Caractéristiques du champ créé
<a name="caracteristiques_champ_cree_ELTPARAGRAPHE000167"></a>Le champ créé partage tous les paramètres initiaux du champ source, en particulier :

- son type (champ de saisie, champ Bouton, champ Table, ...),

- sa valeur initiale,

- son (ou ses) groupe(s),

- son menu contextuel (champ d'une fenêtre),

- son code (les mêmes traitements sont exécutés),

- ses liens HFSQL,

- le raccourci clavier (champ d'une fenêtre),

- la hauteur et la largeur du champ.




Par contre, le champ créé ne partage pas avec le champ source :

- les paramètres modifiés après sa création (valeur, couleur, ...),
	

- le nom,

- l'altitude (champ d'une fenêtre ou d'un état),

- l'ordre de navigation par la touche TAB (champ d'une fenêtre).



<a name="NOTE0_2"></a>


### Evénements exécutés
<a name="evenements_executes_ELTPARAGRAPHE000198"></a>L'événement "Initialisation" associé au champ est exécuté.

Le champ n'étant pas connu à la compilation du projet, il est possible de le manipuler grâce aux [opérateurs d'indirection](../Motscles/1512005.md).
<a name="NOTE0_3"></a>


### Conseil
<a name="conseil_ELTPARAGRAPHE000210"></a>Il est conseillé d'utiliser cette fonction dans l'événement "Déclarations globales" de la fenêtre ou de la page ou dans l'événement "Ouverture" associé à l'état. Cette fonction ne doit pas être utilisée dans l'événement "Initialisation" du champ.
<a name="NOTE0_4"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Clonage d'une colonne dans un champ Table
<a name="clonage_une_colonne_dans_champ_table_ELTPARAGRAPHE000219"></a>Dans une fenêtre, lors de l'utilisation de la fonction **ChampClone** sur une colonne du champ Table, le champ Table manipulé est entièrement vidé lors de la création de la nouvelle colonne.
<a name="NOTE0_5"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Clonage d'un menu
<a name="clonage_menu_ELTPARAGRAPHE000231"></a>Il est possible de cloner un menu grâce à la fonction [MenuClone](../WDLang1/1000017257.md).
<a name="NOTE0_6"></a>
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Clonage d'un volet d'onglet
<a name="clonage_volet_onglet_ELTPARAGRAPHE000245"></a>Lors de l'utilisation de la fonction **ChampClone** sur un volet d'onglet, le volet d'onglet et tous les champs présents sur ce volet d'onglet sont clonés (y compris le code associé). Si dans le volet d'onglet originel, des traitements manipulaient les champs présents sur ce volet, dans le volet d'onglet cloné, ces traitements manipuleront automatiquement les champs du volet cloné.
<a name="NOTE0_7"></a>


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LafonctionChampClone.gif) ***Exemples unitaires (WINDEV)*** : **La fonction ChampClone** <br>Utilisation des fonctions ChampClone et ChampSupprime.

<a name="XComposante"></a>

## Composante :
wd280vm.dll
