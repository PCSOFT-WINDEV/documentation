
## Crypte (Fonction)

***En anglais : Encrypt***

<DIV class="specObsolete">
	<IMG style="float:left;margin-right:10px;" src="https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=warning_big.png"><B>Avertissement</B><BR>
	A partir de la version <B>22</B>,  cette fonction est conservée par compatibilité. Pour plus de sécurité, il est recommandé d'utiliser la fonction [CrypteStandard](../WDLang1/1000021293.md). 
</DIV><a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Crypte une chaîne de caractères sous forme binaire ou sous forme ASCII.

**Remarques** :

- Cette chaîne de caractères pourra être décryptée avec la fonction [Décrypte](../WDLang1/3024035.md).

- Si le cryptage et le décryptage se font sur des plateformes différentes (par exemple cryptage sous Android et décryptage sous Windows), utilisez les fonctions [CrypteStandard](../WDLang1/1000021293.md) et [DécrypteStandard](../WDLang1/1000021294.md). Pour plus de détails, consultez le paragraphe "Remarques".





<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Cryptage d'une chaîne
Res = Crypte("Le numéro de ma carte bancaire 52327453829011", "MotDePasse")
```



```wl
// Encodage en base 64 d'une chaîne
bufBase64 est un Buffer = Crypte(bufAEncoder, "", compresseAucun + crypteAucun, encodeBASE64)
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`<Résultat> = Crypte(<Chaîne à crypter> , <Mot de passe> [, <Type de cryptage> [, <Format de la chaîne cryptée>]])`
---

**`<Résultat> : (Chaîne de caractères)`**



- Chaîne de caractères cryptée, 

- Chaîne vide ("") en cas d'erreur. Pour plus de détails sur l'erreur, utilisez la fonction [ErreurInfo](../WDLang1/3013008.md).




**`<Chaîne à crypter> : (Chaîne de caractères)`**

Texte à crypter.

**`<Mot de passe> : (Chaîne de caractères)`**

Mot de passe utilisé pour crypter la chaîne de caractères. Ce mot de passe sera utilisé pour décrypter la chaîne cryptée (fonction [Décrypte](../WDLang1/3024035.md)). Un mot de passe long permet d'optimiser la sécurité du cryptage.

**`<Type de cryptage> : (Constante ou combinaison de constante optionnelle)`**

Indique le type de cryptage et / ou de compression :

- Type de cryptage :
	


|   |   |
| --- | --- |
| *crypteAnsi* | Le cryptage réalisé est identique à celui réalisé dans une application WINDEV ou WEBDEV. Utile pour les applications cryptant en WINDEV Mobile et décryptant en WINDEV par exemple.<br>Pour utiliser cette constante, le paramètre &lt;Format de la chaîne cryptée&gt; doit correspondre à la constante *encodePCS*.<br><br>**Remarque** : Si la constante *crypteAnsi* n'est pas combinée à une autre constante précisant le type de cryptage, le paramètre &lt;Mot de passe&gt; est ignoré.<br>**Cette constante est utilisable uniquement en WINDEV Mobile pour Windows CE.**<br><br><br>![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cette constante n'a aucun effet. |
| *crypteAucun* | Aucun cryptage n'est effectué |
| *crypteRapide*<br>(Valeur par défaut) | La priorité est donnée à la rapidité du cryptage (algorithme sur 128 bits).<br><br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) L'algorithme utilisé sera de type BlowFish.<br><br><br><br> |
| *crypteRC516* | La priorité est donnée à la sécurité du cryptage (algorithme RC5 sur 16 rondes).<br><br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cette constante n'a aucun effet. |
| *crypteSécurisé* | La priorité est donnée à la sécurité du cryptage (algorithme RC5 sur 128 bits).<br><br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) L'algorithme utilisé sera de type PBE (Password Based Encryption).<br><br> |






- Type de compression :
	


|   |   |
| --- | --- |
| *compresseAucun*<br>(Valeur par défaut) | Aucune compression n'est effectuée.<br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cette constante n'a aucun effet. |
| *compresseChaîneCourte* | La chaîne sera compressée à l'aide d'un algorithme optimisé pour les chaînes de caractères de petite taille. Cette compression sera efficace uniquement si la constante *crypteAucun* est sélectionnée et si le paramètre &lt;Format de la chaîne cryptée&gt; correspond à la constante *encodeAucun*.<br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cette constante n'a aucun effet. |
| *compresseLZW* | La chaîne sera compressée avant d'être cryptée.<br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Cette constante n'a aucun effet. |






**`<Format de la chaîne cryptée> : (Constante optionnelle de type Entier)`**

Indique le format de la chaîne cryptée :


|   |   |
| --- | --- |
| *encodeAucun* | Format binaire. Le fichier crypté pourra comporter des caractères non-imprimables. La taille du fichier sera supérieure (environ 4 octets) à la taille du fichier d'origine. |
| *encodeBASE64* | Format BASE 64. Le fichier est crypté avec l'algorithme BASE64. La taille du fichier sera supérieure (environ 30%) à la taille du fichier d'origine. <br>Pour effectuer un encodage en base 64, il est également possible d'utiliser plus simplement la fonction [Encode](../WDLang1/1000022258.md) avec la constante *encodeBASE64* ou la constante *encodeBASE64URL*.<br>Le format base64 peut par exemple être utilisé pour insérer un fichier dans le corps d'un courrier électronique. |
| *encodePCS*<br>(Valeur par défaut) | Format ASCII. Le fichier crypté ne comportera que des caractères imprimables. La taille du fichier sera supérieure (environ 30%) à la taille du fichier d'origine. <br>Ce format peut par exemple être utilisé pour insérer un fichier crypté dans le corps d'un courrier électronique. |
| *encodeUUEncode* | Format UUEncode. Le fichier est crypté avec l'algorithme UUEncode. La taille du fichier sera supérieure (environ 30%) à la taille du fichier d'origine. <br>Ce format peut par exemple être utilisé pour insérer un fichier crypté dans le corps d'un courrier électronique. |





![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Ce paramètre est ignoré. La chaîne cryptée sera au format BASE 64.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png)![Universal Windows 10 App](https://doc.pcsoft.fr/ext/images/fr/UNIVERSALAPP.png)![Code Utilisateur (MCU)](https://doc.pcsoft.fr/ext/images/fr/MCU.png) 

### Format binaire d'une chaîne cryptée
<a name="format_binaire_une_chaine_cryptee_ELTPARAGRAPHE000247"></a>Lorsque &lt;Format de la chaîne cryptée&gt; correspond à la constante *encodeAucun*, il faut manipuler la chaîne cryptée obtenue avec précaution. En effet, cette chaîne cryptée peut contenir des caractères de fin de chaîne. Dans ce cas, la chaîne sera tronquée par les opérations d'affichage.

Une partie de l'information cryptée sera perdue si :

1. La chaîne cryptée est affichée dans un champ.

2. La valeur de ce champ est utilisée pour le décryptage.




Par contre, si la chaîne cryptée est manipulée uniquement sous forme d'une variable chaîne, il n'y aura pas de perte d'information.
<a name="NOTE0_2"></a>




### Cryptage/Décryptage d'un fichier externe
<a name="cryptagedecryptage_fichier_externe_ELTPARAGRAPHE000262"></a>Pour crypter/décrypter un fichier externe, utilisez les fonctions [fCrypte](../WDLang1/3036013.md) et [fDécrypte](../WDLang1/3036018.md).


<a name="NOTE0_3"></a>
<a name="NOTE0_4"></a>
![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) 

### Cryptage en Android / Java et décryptage par une application WINDEV (ou inversement)
<a name="cryptage_android_java_decryptage_par_une_application_windev_inversement_ELTPARAGRAPHE000293"></a>Attention : les algorithmes de cryptage / décryptage utilisés en Java et Android ne sont pas les mêmes que ceux utilisés par WINDEV. Il n'est donc pas possible de crypter une chaîne de caractères en Java ou Android et de la décrypter avec WINDEV (et inversement). 

Pour crypter une chaîne de caractères en Java ou Android et de la décrypter avec WINDEV (ou inversement), utilisez les fonctions  [CrypteStandard](../WDLang1/1000021293.md) et [DécrypteStandard](../WDLang1/1000021294.md).


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Lesfonctionsdechiffrement.gif) ***Exemples unitaires (WEBDEV)*** : **Les fonctions de chiffrement** <br>Utilisation des fonctions de chiffrement de WEBDEV.<br>Cet exemple permet de :<br>- chiffrer une chaîne de caractères<br>- Déchiffrer une chaîne de caractères
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Lesfonctionsdechiffrement_CrypteXXX,DecrypteXXX_.gif) ***Exemples unitaires (WINDEV)*** : **Les fonctions de chiffrement (CrypteXXX, DécrypteXXX)** <br>Utilisation des fonctions de chiffrement de WINDEV.<br>Cet exemple permet de :<br>- Chiffrer une chaîne de caractères<br>- Déchiffrer une chaîne de caractères
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Lesfonctionsdechiffrement.gif) ***Exemples unitaires (WINDEV Mobile)*** : **Les fonctions de chiffrement** <br>Utilisation des fonctions WLangage de chiffrement.<br>Cet exemple permet de :<br>- Chiffrer une chaîne de caractères<br>- Déchiffrer une chaîne de caractères
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDLimitationdedureedutilisation.gif) ***Exemples didactiques (WINDEV)*** : **WD Limitation de duree d utilisation** <br>Cet exemple montre comment limiter l'utilisation d'une application à une période donnée (période d'essai).<br>Dans cet exemple, nous abordons les principaux thèmes suivants :<br>	1/ la protection d'une application pour une durée donnée<br>	2/ la gestion de la base de registre<br><br>Résumé de l'exemple livré avec WINDEV :	<br>Lorsque cet exemple est lancé pour la première fois, il est activé pour une période d'essai de 5 jours.<br>L'information de la date de premier lancement est stockée dans la base de registre avec l'utilisation d'une clé de contrôle pour vérifier que l'utilisateur final n'a pas essayé de la modifier. A la fin de la période d'essai, l'application est bloquée, à moins que l'utilisateur final ne dispose du code de déverrouillage de l'application



<a name="XComposante"></a>

## Composante :
wd280std.dll
