
## CapteurDétecteFinSecousses (Fonction)

***En anglais : SensorDetectEndShake***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Permet d'être notifié lorsque l'appareil vient de subir des secousses sur n'importe lequel de ses 3 axes.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Détection de la fin des secousses
CapteurDétecteFinSecousses("ProcDétectionSecousse")
```

```wl
// Procédure ProcDétectionSecousse
PROCEDURE ProcDétectionSecousse(nDurée est un entier)
ToastAffiche(ChaîneConstruit("Fin des secousses. Durée : %1 millièmes de seconde", nDurée))

// Fin de la détection des secousses
CapteurDétecteFinSecousses("")
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = CapteurDétecteFinSecousses(<Procédure WLangage> [, <Sensibilité> [, <Durée du début de la secousse> [, <Intervalle>]]])`
---

**`<Résultat> : (Booléen)`**



- <u><u><u><u>Vrai</u></u></u></u> si la détection de la fin des secousses a pu être déclenchée, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire.




**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") appelée lorsque l'appareil s'arrête d'être secoué. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure>(<Durée>)
```
où &lt;Durée&gt; est  un entier correspondant à la durée (en millièmes de seconde) des secousses. 

Les paramètres de cette procédure sont optionnels. Il n'est pas nécessaire de passer des paramètres à cette procédure. En effet, ces paramètres sont renseignés automatiquement à chaque appel

Si le nom de la procédure correspond à une chaîne vide (""), la détection de la fin des secousses sera arrêtée.

**`<Sensibilité> : (Entier optionnel ou constante optionnelle de type Entier)`**

Indique le niveau de sensibilité aux secousses. Correspond :

- valeur comprise entre 0 et 2000 : 0 pour une sensibilité très élevée aux secousses, 2000 pour une sensibilité très faible aux secousses. 

- une des constantes suivantes :  
	


|   |   |
| --- | --- |
| *cptSensibilitéElevée* | Sensibilité élevée aux secousses. Même de faibles secousses de l'appareil déclencheront la notification. |
| *cptSensibilitéFaible* | Sensibilité faible aux secousses. Seules de fortes secousses de l'appareil déclencheront la notification. |
| *cptSensibilitéNormale* <br>(Valeur par défaut) | Sensibilité normale aux secousses |






**`<Durée du début de la secousse> : (Entier optionnel ou Durée optionnelle)`**

Durée minimale (en millièmes de seconde) durant laquelle l'appareil doit être secoué avant de débuter la détection des secousses. Par défaut, la durée minimale est de 200 millièmes de seconde.
Ce paramètre peut correspondre à : 

- un entier correspondant au nombre de millièmes de seconde, 

- une variable de type Durée, 

- l'indication directe de la durée (par exemple 1 s ou 10 ms). 




**`<Intervalle> : (Entier optionnel ou Durée optionnelle)`**

Intervalle de temps maximal (en millièmes de seconde) durant lequel les secousses de l'appareil peuvent rester en dessous du niveau de sensibilité spécifié avant de déclencher une notification de fin de secousses. Par défaut, la durée maximale est de 200 millièmes de seconde.
Cette durée peut correspondre à : 

- un entier correspondant au nombre de millièmes de seconde, 

- une variable de type Durée, 

- l'indication directe de la durée (par exemple 1 s ou 10 ms). 






<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Conditions d'utilisation
<a name="conditions_utilisation_ELTPARAGRAPHE000114"></a>

- La détection des secousses utilise le capteur de type accéléromètre de l'appareil. Si un tel capteur n'est pas présent sur l'appareil, la détection des secousses n'est pas possible. La sensibilité de la détection dépend de la qualité du capteur présent dans l'appareil.



<a name="NOTE0_2"></a>


### Cas particuliers
<a name="cas_particuliers_ELTPARAGRAPHE000135"></a>

- Si une détection de fin de secousses (déclenchée par la fonction **CapteurDétecteFinSecousses**) et une détection de début de secousses (déclenchée par la fonction [CapteurDétecteDébutSecousses](../WDLang1/1000019363.md)) sont en cours en même temps, les paramètres  &lt;Sensibilité&gt;, &lt;Durée de début de la secousse&gt; et &lt;Intervalle&gt; utilisés sont les mêmes dans les deux cas. Les valeurs prises en compte sont celles spécifiées par la fonction appelée en dernier.

- Il est conseillé de stopper la détection des secousses lorsqu'elle n'est plus nécessaire afin d'économiser la batterie de l'appareil. Pour cela, le paramètre &lt;Procédure WLangage&gt; doit correspondre à chaîne vide (""). 
	La fonction [CapteurTermine](../WDLang1/1000019644.md) permet d'arrêter toutes les détections en cours. 






<a name="XComposante"></a>

## Composante :
WDJS.DLL
