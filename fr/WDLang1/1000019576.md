
## dImageVersTableau (Fonction)

***En anglais : dImageToArray***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Copie les pixels RGB de l'image dans un tableau WLangage à 1 ou 2 dimensions. Le tableau de couleurs est vidé puis il est rempli avec des entiers représentant les couleurs (24 bits) de l'image.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
tabLuminance est un tableau de * par * entiers

dImageVersTableau("c:\test.png", tabLuminance, dComposanteRouge + dNiveauDeGris)

dDébutDessin(IMG_SansNom2)
nx, ny sont des entiers
POUR nx = 1 _A_ TableauInfo(tabLuminance, tiNombreLignes)
	POUR ny = 1 _A_ TableauInfo(tabLuminance, tiNombreColonnes)
		dPoint(nx-1, ny-1, tabLuminance[nx][ny])
	FIN
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

### Copier les pixels d'un fichier image dans un tableau

`dImageVersTableau(<Fichier Image> , <Tableau> [, <Options>])`
---

**`<Fichier Image> : (Chaîne de caractères)`**

Chemin du fichier image à manipuler.

**`<Tableau> : (Variable de type Tableau)`**

Nom du tableau de couleurs 24 bits dans lequel les pixels seront copiés. Ce tableau peut être un tableau à une ou deux dimensions. Dans le cas d'un tableau à deux dimensions, les dimensions représentent les axes X et Y de l'image. 

**`<Options> : (Constante ou combinaison de constantes optionnelle de type Entier)`**

Options de calcul du tableau : 


|   |   |
| --- | --- |
| *dComposanteBleu* | La composante Bleue de l'image sera copiée dans le tableau. |
| *dComposanteRouge* | La composante Rouge de l'image sera copiée dans le tableau. |
| *dComposanteRVB* | Toutes les composantes de l'image seront copiées dans le tableau. |
| *dComposanteVert* | La composante Verte de l'image sera copiée dans le tableau. |
| *dNiveauDeGris* | L'image en niveau de gris sera copiée dans le tableau. |






<a name="SYNTAXE2"></a>

### Copier les pixels d'une image en mémoire dans un tableau

`dImageVersTableau(<Image en mémoire> , <Tableau> [, <Options>])`
---

**`<Image en mémoire> : (Buffer ou chaîne de caractères)`**

Chaîne d'octets contenant l'image à manipuler. Ce paramètre peut par exemple correspondre à une image enregistrée en mémoire (fonctions [dSauveImageBmp](../WDLang1/3029026.md), [dSauveImageGif](../WDLang1/3029040.md), ...). 

**`<Tableau> : (Variable de type Tableau)`**

Nom du tableau de couleurs 24 bits dans lequel les pixels seront copiés. Ce tableau peut être un tableau à une ou deux dimensions. Dans le cas d'un tableau à deux dimensions, les dimensions représentent les axes X et Y de l'image. 

**`<Options> : (Constante ou combinaison de constantes optionnelle de type Entier)`**

Options de calcul du tableau : 


|   |   |
| --- | --- |
| *dComposanteBleu* | La composante Bleue de l'image sera copiée dans le tableau. |
| *dComposanteRouge* | La composante Rouge de l'image sera copiée dans le tableau. |
| *dComposanteRVB* | Toutes les composantes de l'image seront copiées dans le tableau. |
| *dComposanteVert* | La composante Verte de l'image sera copiée dans le tableau. |
| *dNiveauDeGris* | L'image en niveau de gris sera copiée dans le tableau. |









<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


- La couche alpha de l'image n'est pas renvoyée par cette fonction.

- **Changement de comportement en version 23** : Lors de la conversion d'un fichier PDF (c'est-à-dire une image vectorielle) en tableau de pixels, il faut donc appliquer un facteur de conversion afin de transformer une unité du PDF en pixel.
	A partir de la version 23, le facteur de conversion a été optimisé, ce qui a pour conséquence de réduire la taille de l'image en pixels. 
	Pour retrouver le comportement de la verson 22 (comportement non optimisé), il est possible d'utiliser le code suivant (ce code utilise une variable de type Image afin de convertir le PDF dans les dimensions voulues) : 
	
	```wl
	lCMonImageh est une chaîne = fRepEnCours() + ["\"] + "monfichier.pdf"
	iiMage est Image = dChargeImage(lCMonImageh, imgConvertir, 2479, 3504)
	bufImage est Buffer = dSauveImagePNG(iiMage, enMémoire)
	lTableauPixelSource est un tableau de * par * entiers
	dImageVersTableau(bufImage, lTableauPixelSource, dComposanteRVB + dNiveauDeGris)
	Trace(TableauInfo(lTableauPixelSource, tiNombreLignes) + TAB + ...
		TableauInfo(lTableauPixelSource, tiNombreColonnes))
	```





<a name="XComposante"></a>

## Classification Métier / UI :
Code neutre
## Composante :
wd280pnt.dll
