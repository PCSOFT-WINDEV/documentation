
## Télémétrie : Mode d'envoi des données
			

<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000113"></a>
Les données de télémétrie sont envoyées au serveur régulièrement et sont traitées par le serveur toutes les 2 heures. 

<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Paramétrage du mode d'envoi des données
<a name="parametrage_mode_envoi_des_donnees_ELTTEXTE000137"></a>


### Mode déconnecté par défaut
<a name="mode_deconnecte_par_defaut_ELTPARAGRAPHE000016"></a>La télémétrie fonctionne par défaut en mode "déconnecté" : 

- Si un envoi échoue, les informations sont conservées jusqu'au lendemain 23h59.

- Les informations sont conservées sur le disque et donc persistantes en cas d'arrêt puis relancement de l'application.

- Si un envoi finit par réussir, tous les envois en attente du jour et de la veille sont envoyés. 

- Les envois en attente de l'avant-veille ou plus anciens sont supprimés au fur et à mesure.




Si le mode déconnecté est désactivé, le fonctionnement est le suivant :  

- Si un envoi échoue, 3 essais sont effectués. 

- Si 3 envois consécutifs échouent, la télémétrie se désactive automatiquement jusqu'à la fin de l'application. 

- Au prochain lancement de l'application, le décompte des essais repart à 3.





### Paramétrage du mode connecté
<a name="parametrage_mode_connecte_ELTPARAGRAPHE000032"></a>Pour désactiver le mode déconnecté, il est nécessaire d'utiliser la fonction [TélémétrieParamètre](../WDLang1/1000021913.md) : 

```wl
TélémétrieParamètre(tpModeDéconnecté, Faux)
```


Dans ce cas, si 3 envois consécutifs échouent, la télémétrie se désactive automatiquement jusqu'à la fin de l'application.
Il est possible de personnaliser ce nombre d'essais grâce à la fonction [TélémétrieParamètre](../WDLang1/1000021913.md) :

```wl
TélémétrieParamètre(tpNombreEssaisEnvoi, 1)
```

Il est possible d'utiliser les valeurs suivantes : 

- 0 : Dans ce cas, les essais ne sont pas comptés. Les informations sont envoyées à chaque fois même si le serveur ne répond pas. 

- 1 : Dans ce cas, les informations sont envoyées une seule fois au lancement de l'application. Si cet envoi échoue, il n'y aura pas d'autre envoi. 


Il est également possible d'utiliser d'autres valeurs (consultez le détail de la fonction [TélémétrieParamètre](../WDLang1/1000021913.md)). 

Par défaut, la période d'envoi est de 1 heure et le nombre d'essais de 3. Il y a donc 3 heures de tentatives d'envoi. 
Remarque : Si le serveur n'a pas répondu dans les 3 heures, l'action est arrêtée (on considère qu'il n'existe plus ou que personne ne vérifie réellement son état, inutile d'insister).

Pour envoyer les informations toutes les demi-heures et s'arrêter si le serveur n'a pas répondu pendant 2 heures, le code correspondant est : 

```wl
TélémétrieParamètre(tpModeDéconnecté, Faux)
TélémétrieParamètre(tpPériodeMaximaleCollecte, 30 min)
TélémétrieParamètre(tpNombreEssaisEnvoi, 4)
```



