


## Gestion des assertions
			



<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000208"></a>
WINDEV, WEBDEV et WINDEV Mobile disposent en standard de plusieurs outils et fonctionnalités pour aider à mettre au point et à optimiser les applications ou sites.

Les principales fonctionnalités offertes en termes de mise au point sont les suivantes :

- Les assertions,

- [Les traces](../Editeurs/2019002.md),

- [Les logs d'exécution](../Editeurs/2019030.md),

- [Le débogueur](../Editeurs/2019001.md).




<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Les assertions
<a name="les_assertions_ELTTEXTE000232"></a>
Une assertion permet de vérifier une condition lors de l'exécution de l'application.

Si la condition n'est pas vérifiée, une boîte d'information s'affiche avec le détail de la vérification. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Erreur_Assertion.gif)
Le développeur a alors accès à la pile d'exécution, c'est-à-dire tous les appels qui ont abouti à ce résultat.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Mise en place
<a name="mise_place_ELTTEXTE000256"></a>
Pour définir une assertion, il suffit d'utiliser la fonction [dbgAssertion](../WDLang1/3014022.md) avec en paramètre : 

- la condition à vérifier,

- le message à afficher si jamais la condition n'est pas vérifiée.



```wl
// Variable CClient
clClient est un CClient
// Création du client
CréerClient(clClient)
// L'objet clClient doit avoir été instancié
dbgAssertion(clClient<>Null, "L'objet n'a pas été instancié")
```


Par défaut, les assertions sont actives uniquement en mode test.

Il est possible d'activer les assertions en déploiement : il suffit d'utiliser la fonction [dbgActiveAssertion](../WDLang1/3014021.md) : 

```wl
dbgActiveAssertion(Vrai)
```

**Attention** : La condition utilisée dans l'assertion est exécutée par le WLangage **uniquement** lorsque les assertions sont actives. Le fonctionnement peut donc être différent en mode test et en mode exécutable.

Il faut être particulièrement vigilant lors de l'utilisation de fonctions dans la condition fournie à la fonction [dbgAssertion](../WDLang1/3014022.md). En effet, si la fonction utilisée réalise une initialisation ou une connexion, cette opération ne sera pas réalisée dans l'application utilisée en mode "exécutable".

En revanche, ce mode de fonctionnement permet de réaliser "plus de tests" sans ralentir l'application en exploitation. La mise au point des applications est ainsi plus rapide.


### Conseil
<a name="conseil_ELTPARAGRAPHE000072"></a>Les assertions peuvent servir pour tester des cas "spécifiques" ou vérifier les "prérequis" d'une fonction. Il est ainsi possible de tester le cas qui ne devrait jamais arriver : 

- utilisation d'une chaîne vide alors qu'un nom logique est attendu, 

- saisie d'un chemin vers un fichier inexistant, ...




Les assertions ne peuvent pas remplacer la [gestion classique des erreurs](../WDLang1/3034004.md). Mais mettre une assertion permet d'être prévenu et de retrouver pourquoi un problème est survenu grâce à la pile d'exécution.

Les assertions permettent également de guider lors d'un développement à plusieurs développeurs : le code "appelant" ne doit pas provoquer d'assertions dans le code "appelé".
![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) 

### Personnalisation de la fenêtre des assertions
<a name="personnalisation_fenetre_des_assertions_ELTPARAGRAPHE000089"></a>Par défaut, les fenêtres de gestion des erreurs, des exceptions et des assertions sont intégrées à l'application. Ces fenêtres sont disponibles en français et en anglais. 

Pour personnaliser ces fenêtres (ou pour les traduire dans une autre langue), il suffit d'importer les fenêtres correspondantes dans votre projet. 

1. Dans le ruban : 

	- ![WINDEV](https://doc.pcsoft.fr/ext/images/fr/WD.png) Sous le volet "Projet", dans le groupe "Projet", déroulez "Importer" et sélectionnez "Des éléments WINDEV et leurs dépendances".




2. Sélectionnez le répertoire des éléments à importer : "Programmes\\Donnees\\Fenêtres prédéfinies\\Assertion - Erreur - Exception". 

3. Sélectionnez les fenêtres à importer : 
	

| WINDEV | WINDEV Mobile | Type de fenêtre |
| --- | --- | --- |
| WD_AfficheAssertion.wdw | WM_AfficheAssertion.WPW | Fenêtre de gestion des assertions |
| WD_AfficheErreur.wdw | WM_AfficheErreur.WPW | Fenêtre de gestion des erreurs |
| WD_AfficheException.wdw | WM_AfficheException.WPW | Fenêtre de gestion des exceptions |
| WD_ModeleErreur.wdt |   | Modèle utilisé par les fenêtres WINDEV. |



4. Validez. La ou les fenêtres sont intégrées à votre projet. Ces fenêtres seront automatiquement utilisées et remplaceront les fenêtres par défaut. 




**Remarque** : Pour utiliser les fenêtres par défaut, il suffit de supprimer les fenêtres importées de votre projet. 


