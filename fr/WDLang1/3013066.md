


## Désérialise (Fonction)

***En anglais : Deserialize***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Désérialise un buffer ou une chaîne de caractères contenant les données d'une classe, d'une structure, d'un tableau (y compris un tableau associatif), d'une file, d'une pile, une liste ou une variable d'un type avancé (par exemple [gglAgenda](../WDLang5/1000017418.md)) et leurs sous-éléments.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Cet exemple montre l'utilisation des fonctions Sérialise/Désérialise
// avec une variable de type Tableau. 
// Ces fonctions peuvent utiliser tous les types de variables WLangage.

MonTableau est un tableau de chaînes
bufRésultat est un Buffer

// Ajoute des éléments dans le tableau
Ajoute(MonTableau, "WINDEV")
Ajoute(MonTableau, "WEBDEV")
Ajoute(MonTableau, "WINDEV MOBILE")

// Sérialisation du tableau dans le buffer en JSON
// => Sauvegarde du tableau et de tout son contenu dans une chaîne JSON
Sérialise(MonTableau, bufRésultat, psdJSON)

// Désérialisation du buffer JSON
// => Reconstruction du tableau WLangage à partir de la chaîne JSON
MonTableauReconstruit est un tableau de chaînes
Désérialise(MonTableauReconstruit, bufRésultat, psdJSON)
```

<a name="XSYNTAXE"></a>
<a name="SYNTAXE1"></a>

## Syntaxe

`Désérialise(<Variable> , <Buffer> , <Paramètres>)`
---

**`<Variable> : (Type de la variable)`**

Variable de type structure, classe, tableau, file, liste ou pile. 

- Dans le cas d'une structure ou d'une classe, cette variable doit être allouée. 

- Dans le cas d'un tableau, d'une file, d'une liste ou d'une pile, cette variable est automatiquement allouée lors de la désérialisation.




La désérialisation sera effectuée dans cette variable.

**`<Buffer> : (Chaîne de caractères Ansi ou buffer)`**

Variable qui contient les données sérialisées. Il est nécessaire d'indiquer un nom de variable.

**`<Paramètres> : (Constante de type Entier)`**

Type de désérialisation (doit correspondre au type choisi pour la sérialisation) :


|   |   |
| --- | --- |
| *psdBinaire* | Désérialisation binaire.<br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) La désérialisation binaire n'est pas disponible. |
| *psdBinaireFormat16* | Désérialisation binaire au format compatible avec la version 16.<br><br>Ce format doit être utilisé si une application en version 17 (ou supérieure) doit fournir des données à une application en version 16 ou inférieure. <br>**Ce format ne doit pas être utilisé en mode Unicode.**<br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) La désérialisation binaire n'est pas disponible. |
| *psdJSON* | Désérialisation au format JSON.<br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) La désérialisation au format JSON n'est pas disponible. |
| *psdXML* | Désérialisation XML avec référence aux sous-objets.<br><br>Rappel : Ce type de sérialisation/désérialisation permet d'utiliser le format XML comme moyen de stockage et d'échange entre des applications écrites en WLangage. <br><br> |
| *psdXMLAgrégé* | Désérialisation XML avec agrégation directe des sous-objets. <br><br>Remarque : La sérialisation en mode *psdXMLAgrégé* permet de générer rapidement un fichier XML dans un format classique, utilisé pour des échanges avec d'autres systèmes. La désérialisation en mode *psdXMLAgrégé* est disponible, cependant les éléments WLangage (variants, tableaux, classes dérivées, ...) ne seront pas les mêmes que ceux d'origine.<br><br>![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Ce mode de désérialisation n'est pas disponible. |





<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Désérialisation
<a name="deserialisation_ELTPARAGRAPHE000146"></a>La désérialisation d'un tableau, d'une file ou d'une pile supprime le contenu de l'élément.

S'il y a des membres en plus dans la structure ou dans la classe :

- si on désérialise une structure ou une classe : les membres supplémentaires conservent leurs valeurs d'avant la désérialisation.

- si on désérialise un tableau de structures ou de classes : les membres supplémentaires prennent la valeur par défaut du type du membre.




S'il y a des membres en plus dans le buffer sérialisé, ils ne sont pas pris en compte lors de la désérialisation.

Pour désérialiser un tableau dynamique sans type, il est nécessaire d'allouer préalablement ce tableau.

Pour désérialiser une classe ou une structure contenant un tableau dynamique sans type, il est nécessaire d'allouer préalablement ce tableau.

La désérialisation XML nécessite la librairie wd280xml.dll ou wp280xml.dll.

Une variable de type avancé qui a été sérialisé avec un produit anglais (et dont les noms des propriétés sont en anglais dans le buffer de sérialisation) peut être désérialisée avec un produit français (et réciproquement).

Dans les variables de type avancé :

- les propriétés en lecture seule ne sont généralement pas désérialisables.

- les propriétés en écriture seule ne sont généralement pas sérialisables.


Les cas particuliers sont indiqués dans la documentation de chaque type.

![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Pour que le format de sérialisation soit compatible entre des applications WINDEV et des applications WINDEV Java, les noms des éléments sérialisés suivants ne doivent pas contenir des caractères spéciaux ou des caractères accentués : 

- classes,

- tableaux de classes,

- structures,

- tableau de structures.



<a name="NOTE0_2"></a>


### Rapidité
<a name="rapidite_ELTPARAGRAPHE000200"></a>La désérialisation binaire est plus rapide que la désérialisation XML.
<a name="NOTE0_3"></a>


### Limites
<a name="limites_ELTPARAGRAPHE000207"></a>

- Les tableaux fixes et les tableaux associatifs de structures locales ne peuvent pas être désérialisés.

- Les membres globaux des classes ne sont pas sérialisés/désérialisés.

- La sérialisation/désérialisation XML d'un tableau de structures avec un membre chaîne contenant un "\\0" ou Caract(0) renvoie l'erreur "Format de sérialisation incorrect". Il est nécessaire de faire une sérialisation/désérialisation binaire dans ce cas.

- Il n'est pas possible de sérialiser/désérialiser un tableau de classe ou de structure si cette classe ou cette structure contient un tableau dynamique sans type. Il est nécessaire d'utiliser un tableau dynamique typé dans cette classe ou cette structure.

- Pour sérialiser/désérialiser une classe, il est nécessaire d'avoir un constructeur sans paramètres obligatoires.

- ![Java](https://doc.pcsoft.fr/ext/images/fr/JAVA.png) Il n'est pas possible de sérialiser/désérialiser des variables de type File, Pile ou Liste.

- Seule la sérialisation de type JSON est disponible pour les variables de type [Enregistrement](../WDLang4/1000020962.md). Aucune désérialisation n'est disponible. 

- **Gestion des erreurs** : La fonction **Désérialise** ne retourne pas de code d'erreur. En cas d'erreur, la variable [ErreurDétectée](../WDLang1/3087001.md) est à <u><u><u><u>Vrai</u></u></u></u>. 





- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LesfonctionsSerialise_Deserialise.gif) ***Exemples unitaires (WEBDEV)*** : **Les fonctions Sérialise/Désérialise** <br>Utilisation des fonctions WLangage Sérialise et Désérialise.<br>La sérialisation consiste à sauvegarder une variable, un objet, une structure, un tableau ou tout autre élément dans un buffer.<br>Ce buffer peut ensuite être sauvegardé sur disque ou envoyé par socket. Cela permet la persistance des objets.<br>La fonction Désérialise permet de reconstruire un objet, un tableau ou une structure à partir d'un buffer.
- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=LesfonctionsSerialise_Deserialise.gif) ***Exemples unitaires (WINDEV)*** : **Les fonctions Sérialise/Désérialise** <br>Utilisation des fonctions WLangage Sérialise et Désérialise.<br>La sérialisation consiste à sauvegarder une variable, un objet, une structure, un tableau ou tout autre élément dans un buffer. Ce buffer peut être ensuite sauvegardé sur disque ou envoyé par socket. Cela permet la persistance des objets.<br>La fonction Désérialise permet de reconstruire un objet, un tableau ou une structure à partir d'un buffer.

<a name="XComposante"></a>

## Classification Métier / UI :
Code neutre
## Composante :
wd280vm.dll
