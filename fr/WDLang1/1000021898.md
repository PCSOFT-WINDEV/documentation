


## FenEdDéclareUndo (Fonction)

***En anglais : WinEdDeclareUndo***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Déclare comment annuler une action ajoutée avec la fonction [FenEdDo](../WDLang1/1000021897.md). Cette fonction est liée à la fonctionnalité "Modification de l'interface par l'utilisateur final".

Cette fonction est notamment utilisée dans le cas de la création d'un éditeur par programmation (voir "Remarques"). 
<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
FenEdDo(FEN_MonEditeur, ProcCréeLib, "Nouveau")
PROCEDURE INTERNE ProcCréeLib(sLib)
	pNouveau est un Champ
	pNouveau <- ChampCrée("LIB_" + DonneIdentifiant(), typTexte, 150, 150, 80, 20)
	pNouveau.Libellé = sLib 
	FenEdDéclareUndo(ProcAnnuler)
	PROCEDURE INTERNE ProcAnnuler()
		ChampSupprime(pNouveau)
	FIN
FIN
```

```wl
FenEdDéclareUndo(AnnulerOperation, CLIENT.IDClient)

// Gestion du Undo
PROCEDURE INTERNE AnnulerOperation(nIDClient)

SI HLitRecherchePremier(CLIENT, IDClient, nIDClient) ALORS
    SourceVersEcran()
FIN
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`FenEdDéclareUndo(<Procédure WLangage> [, <Paramètre 1> [... [, <Paramètre N>]]])`
---

**`<Procédure WLangage> : (Nom de procédure)`**

Nom d'une procédure WLangage à exécuter. Le code de cette procédure doit permettre d'annuler l'action créée avec la fonction [FenEdDo](../WDLang1/1000021897.md).

L'utilisation d'une procédure interne permet un accès direct aux variables locales. 

**`<Paramètre 1> : (Type quelconque optionnel)`**

Premier paramètre optionnel à passer à la procédure. 
 Ces paramètres sont généralement des valeurs permettant de rétablir l'état précédent. 



**`<Paramètre N> : (Type quelconque optionnel)`**

Nième paramètre optionnel à passer à la procédure.
 Ces paramètres sont généralement des valeurs permettant de rétablir l'état précédent.



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Exemple d'utilisation
<a name="exemple_utilisation_ELTPARAGRAPHE000050"></a>La fonction [FenEdDo](../WDLang1/1000021897.md) permet de créer des actions personnalisées (par exemple la création d'un champ) qui supportent le undo/redo.

Prenons un exemple simple : la création d'un éditeur d'objets graphiques. 

Un bouton permet de créer une forme. L'utilisateur doit pouvoir annuler la création de la forme. Les opérations effectuées sont les suivantes : 

- Passage de la fenêtre en mode modification de l'interface (fonction [FenEdActive](../WDLang1/1000021843.md)). 

- Appel de la fonction [FenEdDo](../WDLang1/1000021897.md). La procédure appelée par cette fonction permet de créer la forme. Cette procédure contient également l'appel à la fonction **FenEdDéclareUndo**. Cette fonction **FenEdDéclareUndo** permet de définir le comportement en cas d'annulation par l'utilisateur. 

- Passage de la fenêtre en mode normal (fonction [FenEdActive](../WDLang1/1000021843.md)). 




L'utilisateur final peut alors annuler cette action (Ctrl + Z ou fonction [FenEdUndo](../WDLang1/1000021904.md)) : la procédure &lt;Procédure WLangage&gt; sera alors appelée. 
<a name="NOTE0_2"></a>


### Erreur
<a name="erreur_ELTPARAGRAPHE000088"></a>Si la fonction **FenEdDéclareUndo** est appelée en dehors d'une procédure ajoutée avec la fonction [FenEdDo](../WDLang1/1000021897.md), une erreur WLangage est affichée. 


- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WDObjetsGraphiques.gif) ***Exemples didactiques (WINDEV)*** : **WD Objets Graphiques** <br>Cet exemple didactique illustre la puissance du WLangage en matière de programmation orientée objet.<br>Cet exemple est un éditeur d'objets graphiques.<br><br>Il est possible de :<br>- déplacer, redimensionner les objets<br>- effectuer des sélections au lasso ou à la souris<br>- couper/copier/coller des objets<br>- supprimer/dupliquer des objets<br>- enregistrer les documents créés et de les imprimer.<br><br>Les principales fonctionnalités techniques présentées et documentées sont les suivantes :<br>- gestion d'un presse-papiers d'objets<br>- gestion du UNDO/REDO<br>- sérialisation et désérialisation d'objets<br>- algorithmes de gestion d'objets graphiques (redimensionnements proportionnels, gestion de règles de déplacement, etc...)

<a name="XComposante"></a>

## Composante :
wd280obj.dll
