
## CapteurDétecteChangementAccélération (Fonction)

***En anglais : SensorDetectChangeAcceleration***



<a name="XUtilisation"></a>
<a name="Utilisation"></a>
<a name="description"></a>
Permet d'être notifié des accélérations de l'appareil sur n'importe lequel de ses 3 axes.


<a name="Exemple1"></a>
<a name="sample_code"></a>

## Exemple


```wl
// Détection des changements d'accélération
CapteurDétecteChangementAccélération("ProcDétectionAccélération", cptVertical)
```

```wl
// Procédure appelée par la fonction CapteurDétecteChangementAccélération	
PROCEDURE ProcDétectionAccélération(AccélérationVerticale est un réel, ...
	AccélérationHorizontale est un réel, AccélérationLatérale est un réel)
ToastAffiche(ChaîneConstruit("Accélération verticale détectée (%1 m/s²)", AccélérationVerticale))


// Arrêt de la détection des changements d'accélération
CapteurDétecteChangementAccélération("", cptVertical)
```

<a name="XSYNTAXE"></a>

## Syntaxe
<a name="SYNTAXE1"></a>

`<Résultat> = CapteurDétecteChangementAccélération(<Procédure WLangage> [, <Axe de déplacement> [, <Fréquence> [, <Seuil>]]])`
---

**`<Résultat> : (Entier)`**



- <u><u><u><u>Vrai</u></u></u></u> si la détection a pu être déclenchée, 

- <u><u><u><u>Faux</u></u></u></u> dans le cas contraire.




**`<Procédure WLangage> : (Nom de procédure)`**

Nom de la procédure WLangage (également nommée "callback") appelée lors de la détection de l'accélération de l'appareil sur l'un de ses axes. Cette procédure est de la forme : 

```txt
PROCEDURE <Nom de la procédure> (<Vertical>, <Longitudinal>, <Latéral>)
```
où 


- &lt;Vertical&gt; est un réel correspondant à la mesure de l'accélération de l'appareil sur l'axe vertical (Z) en m/s², 

- &lt;Longitudinal&gt; est un réel correspondant à la mesure de l'accélération de l'appareil sur l'axe longitudinal (Y) en m/s²,

- &lt;Latéral&gt; est un réel correspondant à la mesure de l'accélération de l'appareil sur l'axe horizontal (X) en m/s². 




Les paramètres de cette procédure sont optionnels. Il n'est pas nécessaire de passer des paramètres à cette procédure. En effet, ces paramètres sont renseignés automatiquement à chaque appel à condition que l'axe de déplacement correspondant soit spécifié dans le paramètre &lt;Axe de déplacement&gt;. Dans le cas contraire, ces paramètres valent 0.

Si le nom de la procédure correspond à une chaîne vide (""), les notifications de changement d'accélération ne seront plus envoyées.

**`<Axe de déplacement> : (Constante optionnelle de type Entier)`**

Axes de déplacement de l'appareil pour lesquels il est nécessaire de recevoir une notification lors du changement d'accélération : 


|   |   |
| --- | --- |
| *cptLatéral* | Notification lors de l'accélération de l'appareil sur l'axe horizontal. |
| *cptLongitudinal* | Notification lors de l'accélération de l'appareil sur l'axe longitudinal. |
| *cptVertical* | Notification lors de l'accélération de l'appareil sur l'axe vertical. |


Par défaut, une notification sera envoyée lors du changement d'accélération sur n'importe lequel des trois axes (équivalent à  *cptVertical* +  *cptLatéral* + *cptLongitudinal*).

**`<Fréquence> : (Constante optionnelle de type Entier)`**

Fréquence à la laquelle les notifications de changements d'accélération doivent être envoyées : 


|   |   |
| --- | --- |
| *cptFréquenceJeu* | Fréquence de notification nécessaire lors de l'utilisation de la fonction **CapteurDétecteChangementAccélération** dans un jeu. |
| *cptFréquenceNormal*<br>(Valeur par défaut) | Fréquence de notification moyenne. |
| *cptFréquenceRapide* | Fréquence de notification la plus rapide. |




**`<Seuil> : (Réel optionnel)`**

Seuil de tolérance au changement (en m/s²). Les notifications seront envoyées uniquement pour des changements d'accélération supérieurs à ce seuil. 

Si ce paramètre n'est pas spécifié, aucun seuil de tolérance ne sera fixé : les notifications seront envoyées pour chaque changement d'accélération (équivalent à un seuil de 0).



<a name="NOTE0"></a>
<a name="NOTE0_1"></a>

## Remarques


### Conditions d'utilisation
<a name="conditions_utilisation_ELTPARAGRAPHE000127"></a>

- Cette fonction ne peut pas être utilisée dans l'émulateur ou le simulateur. Dans ces deux cas, le résultat de la fonction correspondra toujours à <u><u><u><u>Faux</u></u></u></u>. 

- La détection des changements d'accélération utilise le capteur de type accéléromètre de l'appareil. Si un tel capteur n'est pas présent sur l'appareil, la  détection des changements d'accélération n'est pas possible. La sensibilité de la détection dépend de la qualité du capteur présent dans l'appareil.



<a name="NOTE0_2"></a>


### Accélération d'un appareil : définitions
<a name="acceleration_appareil_definitions_ELTPARAGRAPHE000139"></a>L'accélération peut être définie comme étant la mesure du changement de la vitesse de l'appareil dans une direction donnée. 

Le capteur de mouvement considère l'appareil comme étant au repos lorsqu'il est à plat, l'écran orienté vers le ciel et en mode portrait.
<br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Acceleration_Origine.gif)


Système de coordonnées (en considérant que l'appareil est à plat, l'écran en direction du plafond) : 

- L'origine se situe dans le coin inférieur gauche de l'écran. 

- L'axe des X représente l'axe horizontal et pointe vers la droite de l'écran. 

- L'axe des Y représente l'axe longitudinal et pointe vers le haut de l'écran. 

- L'axe des Z représente l'axe vertical et pointe en dehors de la face avant de l'écran. 




Le changement d'accélération peut être rapporté dans les trois dimensions suivantes : 

- **Accélération verticale** : Accélération de l'appareil sur l'axe vertical (Z). Cette accélération est exprimée en m/s². Lorsque l'appareil est posé à plat avec l'écran pointant vers le ciel, si l'appareil suit un mouvement ascendant avec une accélération de A m/s², la valeur totale de l'accélération verticale est  ~= A + 9,81, ce qui correspond à l'accélération verticale de l'appareil moins la force de la gravité terrestre.

- **Accélération longitudinale** : Accélération de l'appareil sur l'axe longitudinal (Y). Cette accélération est exprimée en m/s². Sa valeur est positive lors d'un mouvement de l'appareil vers l'arrière et négative lors d'un mouvement de l'appareil vers l'avant.

- **Accélération latérale** : Accélération de l'appareil sur l'axe horizontal (X). Cette accélération est exprimée en m/s². Sa valeur est positive lors d'un mouvement de l'appareil vers la gauche et négative lors d'un mouvement de l'appareil vers la droite.




**Remarque** :  Le capteur de mouvement (accéléromètre) ne peut pas différencier les accélérations de l'appareil causées par un mouvement et celle dues à l'attraction terrestre. L'accélération verticale mesurée au repos sera donc de 9,8m/s², ce qui correspond à la gravité terrestre moyenne.
<a name="NOTE0_3"></a>


### Arrêt de la détection
<a name="arret_detection_ELTPARAGRAPHE000165"></a>Il est conseillé de stopper la détection des changements d'accélération si elle n'est plus nécessaire afin d'économiser la batterie de l'appareil. Pour cela, le paramètre &lt;Procédure WLangage&gt; doit correspondre à chaîne vide (""). 

La fonction [CapteurTermine](../WDLang1/1000019644.md) permet d'arrêter toutes les détections en cours. 






- ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=WMSysteme.gif) ***Exemples multiplateforme (WINDEV Mobile)*** : **WM Système** <br>Cette application est un exemple didactique montrant quelques unes des fonctionnalités de WINDEV Mobile pour Android/iOS.<br>Les fonctions système utilisées sont : <br>- NFC<br>- Champ Multimédia<br>- Luminosité<br>- Volume<br>- WIFI<br>- Bluetooth<br>- Toast<br>- Boussole<br>- Accéléromètre<br>- Champ caméra<br>- LED<br>- Vibrations<br>- Notifications<br>- Fonctions de dessin<br>- Internet



<a name="XComposante"></a>

## Composante :
WDJS.DLL
