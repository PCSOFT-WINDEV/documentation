
## Leçon 2.2. Premiers test et déploiement de l'application


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000479"></a>


- Les configurations de projet.

- Configuration Android : 

	- Mon premier test en Android.

	- Premier déploiement sur un périphérique Android.




- Configuration iOS : 

	- Mon premier test sous iOS. 

	- Premier déploiement sur un périphérique iOS.








|   |   |
| --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 1 h |



| [Leçon précédente](../TutoWM/1410087563.md) | [Sommaire](../TutoWM/1410087586.md) | [Leçon suivante](../TutoWM/1410087564.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000526"></a>
La leçon précédente nous a permis de créer notre premier projet multiplateforme, avec sa première fenêtre. Dans cette leçon, nous allons tester et déployer cette application, aussi bien sur une plateforme Android que sur une plateforme iOS. 



- Pour suivre cette leçon, ré-ouvrez si nécessaire le projet que vous avez manipulé dans la leçon précédente.

	1. Affichez la page d'accueil de WINDEV (Ctrl + &lt;).

	2. Dans la page d'accueil, cliquez sur "Ouvrir un projet" puis dans la zone "Projets récents", double-cliquez sur "Mon_Projet_iOS_Android".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=exemple-WM.png)<br> | Corrigé | Un projet corrigé est disponible. Pour ouvrir le projet corrigé, dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 2 - Leçon 2.1 - Ma première application Android/iOS", double-cliquez sur "Mon projet Android/iOS - Corrigé". |





	3. Affichez si nécessaire la fenêtre FEN_Bienvenue dans l'éditeur : 

		- Dans le volet "Explorateur de projet", déroulez "Fenêtres" et double-cliquez sur "FEN_Bienvenue".

		- La fenêtre FEN_Bienvenue est affichée dans l'éditeur.  







<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Les configurations de projet
<a name="les_configurations_projet_ELTTEXTE000568"></a>
Dans la leçon précédente, nous avons créé un projet pouvant s'exécuter à la fois sur une plateforme Android et sur une plateforme iOS. WINDEV Mobile a automatiquement associé au projet deux configurations de projet, chacune correspondant à une plateforme. |   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | **Les configurations de projet** permettent de définir les différents types de générations supportées par le projet : Android, iOS, composant, ...<br><br>Les éléments du projet peuvent être :<br><br>- communs à plusieurs configurations (par exemple, une fenêtre utilisée en iOS et Android).<br><br>- spécifiques à une configuration (par exemple une classe utilisée uniquement par un composant).<br><br><br>A tout moment, vous pouvez travailler sur une configuration spécifique : les éléments n'appartenant pas à cette configuration apparaissent grisés sous l'éditeur de projet.<br><br>Pour plus de détails, consultez [Configuration de projet](../Editeurs/9000030.md). |







- Vous pouvez vérifier la présence des différentes configurations de projet dans le volet "Explorateur de projet" :

	1. Déroulez l'option "Configurations (Application iOS)" en haut du volet "Explorateur de projet". 

	2. Les deux configurations apparaissent : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%2003%20-%20HC%20N%B0001.jpg)


	3. Pour sélectionner l'une ou l'autre configuration, il suffit de double-cliquer sur le nom de la configuration voulue. 




Pour tester ou déployer une application WINDEV Mobile, il est nécessaire de sélectionner la configuration de projet correspondant à la plateforme voulue. 





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Premier test et déploiement sous Android
<a name="premier_test_deploiement_sous_android_ELTTEXTE000610"></a>


### Premier test sous Android
<a name="premier_test_sous_android_ELTPARAGRAPHE000087"></a>WINDEV Mobile permet de tester directement l'application sur le poste de développement grâce au mode simulation. Ce test réalise une simulation d'un périphérique Android sur le poste de développement. Ce test est utile quand le développeur ne dispose pas de périphérique Android. Cependant, ce test ne permet pas d'utiliser les composants matériels de l'appareil (GPS, SMS, appareil photo, ...).|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Pour Android, WINDEV Mobile permet également de réaliser un test de l'application via l'émulateur Android (AVD) fourni avec le SDK. Pour plus de détails, consultez [Tester avec l'émulateur Android](../Editeurs/9000099.md). |







- Nous allons tester la fenêtre FEN_Bienvenue en mode simulation dans une configuration Android.

	1. Sélectionnez si nécessaire la configuration Android de votre projet : 

		- Déroulez l'option "Configurations (Application iOS)" en haut du volet "Explorateur de projet". 

		- Double-cliquez sur le nom de la configuration Android. 




2. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_GO_Fen_WM_GAF.jpg)
 parmi les boutons d'accès rapide (ou utilisez la touche F9).

3. Validez si nécessaire le message d'information concernant le mode simulateur.

4. La fenêtre que vous avez créée se lance en exécution.

5. Cliquez sur le bouton "Afficher".

6. Validez la fenêtre système qui s'affiche. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet2%20-%20HC%20N%B0003.jpg&type=thumb)




- Tout développeur sait que tester un programme est souvent long, voire fastidieux. Avec WINDEV Mobile, en UN CLIC, vous testez la fenêtre, l'état ou la procédure que vous êtes en train de réaliser. C'est à la fois simple et rapide !




- Cliquez sur le bouton "x" situé dans le menu au-dessus de la coque du simulateur pour fermer la fenêtre.




- L'éditeur de WINDEV Mobile réapparaît. 


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Dans cette leçon, nous effectuons un test d'une fenêtre sous le simulateur. WINDEV Mobile permet d'effectuer plusieurs types de tests de votre application dans son ensemble. <br>Il est possible de tester votre application : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Go%20test%20Android%20-%20HC%20N%B0001.jpg)<br><br><br>- dans le simulateur proposé par WINDEV Mobile : sélectionnez "![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_ICO_PRJ_Simu_WM_GAF.jpg)<br> Déboguer sur simulateur XXX" parmi les options d'accès rapide. Cette option permet de tester rapidement le projet sur le PC. C'est cette option que nous utilisons dans ce cours. <br><br>- directement sur le téléphone mobile (option par défaut): sélectionnez l'option "![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_GO_Projet_WM_GAF.jpg)<br> Déboguer sur appareil mobile" parmi les boutons d'accès rapide : la génération sera effectuée et l'application sera copiée et exécutée sur le téléphone mobile connecté au poste en cours. Vous pouvez ainsi tester directement l'application sur votre matériel.  <br><br><br> |








### Premier déploiement sur un appareil Android
<a name="premier_deploiement_sur_appareil_android_ELTPARAGRAPHE000134"></a>Pour exécuter l'application de manière autonome sur l'appareil Android, il suffit de :

- Connecter l'appareil via un port USB.

- Générer l'application. Un fichier "apk" va être créé. Ce fichier contient tous les éléments nécessaires à l'exécution de l'application sur un appareil Android.

- Sélectionner votre appareil à la fin de la génération. La copie de l'application (fichier "apk") peut prendre quelques secondes.




Nous allons voir en détail ces différentes étapes.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | **Attention** : L'activation du débogage USB est nécessaire pour lancer les tests sur le téléphone. Si cette opération n'est pas effectuée, le téléphone ne sera pas détecté par WINDEV Mobile.<br><br>Pour activer le débogage USB :<br><br>1. Sur le téléphone, sélectionnez le menu "Paramètres".<br><br>2. Sélectionnez le choix "A propos de l'appareil".<br><br>3. Cliquez plusieurs fois sur l'option "Numéro de build" pour activer le mode développeur.<br><br>4. Remontez d'un niveau.<br><br>5. Le choix "Option de développement" apparaît. Sélectionnez cette option.<br><br>6. Cochez l'option "Débogage USB".<br><br><br>Remarque : Selon la version du téléphone et sa marque, les manipulations à effectuer peuvent varier. Par exemple, pour un matériel de type Samsung Galaxy Notes 3, il est nécessaire de "tapoter" plusieurs fois le champ "Numéro de version" de l'option "A propos de l'appareil" afin d'activer le choix "Option de développement". Dans tous les cas, une recherche Google avec "débogage usb &lt;nom périphérique&gt;" permet d'avoir le mode opératoire adapté au matériel utilisé. |









- Pour générer l'application Android :

	1. Sous le volet "Projet", dans le groupe "Génération", cliquez sur "Générer" (vous pouvez également cliquer sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Generation_Android.gif)
 parmi les boutons d'accès rapide).

	2. WINDEV Mobile propose de sélectionner la première fenêtre du projet. Pour notre exemple, sélectionnez "FEN_Bienvenue" et validez (bouton "OK"). 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet2%20-%20HC%20N%B0004.jpg)


	3. L'assistant de génération d'une application Android se lance.

4. La première étape de l'assistant consiste à demander le mode de génération de l'application. En effet, selon le mode choisi, le format de génération n'est pas le même. 
			Pour ce cours, choisissez l'option "Générer pour un déploiement libre (store privé, flotte d'entreprise, etc.)". Passez à l'étape suivante. 

5. L'étape suivante de l'assistant consiste à vérifier les outils nécessaires à la génération de l'application Android. 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%20-%20HC%20N%B0007.jpg&type=thumb)
L'assistant propose de :

	- **Télécharger et installer automatiquement le SDK Android et Gradle** : dans ce cas, vous devez uniquement valider la licence. WINDEV Mobile s'occupe de tout. Si une mise à jour est disponible, l'assistant de génération vous proposera automatiquement de réaliser les mises à jour nécessaires. Seule une connexion Internet est nécessaire. Cette option est disponible uniquement si vous n'avez pas précédemment téléchargé et installé Gradle.

	- **Utiliser les outils installés automatiquement**. Cette option est disponible uniquement si vous avez téléchargé et installé les outils lors d'une précédente génération.

	- **Spécifier l'emplacement des outils déjà installés sur votre poste**. Dans ce cas, il suffit de préciser les chemins d'installation de Gradle et du SDK Android.




Voilà, notre première application est générée et exécutée sur le périphérique Android.

<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Premier test et déploiement sous iOS
<a name="premier_test_deploiement_sous_ios_ELTTEXTE000766"></a>


### Test sous iOS
<a name="test_sous_ios_ELTPARAGRAPHE000267"></a>Pour une application iOS, WINDEV Mobile propose plusieurs types de tests : 

- **Test du projet ou d'une fenêtre sur le poste de développement grâce au mode simulation**. Ce test réalise une simulation d'un périphérique iOS sur le poste de développement. Ce test est utile quand le développeur ne dispose ni de Mac pour compiler l'application ni de périphérique iOS. Cependant, ce test ne permet pas d'utiliser les composants matériels de l'appareil (GPS, SMS, appareil photo, ...). 

- **Test d'un projet directement sur le matériel**. Ce test est utile quand le développeur ne dispose pas de Mac pour compiler l'application. Tous les composants de l'appareil sont accessibles. 






- Pour tester la fenêtre FEN_Bienvenue dans la configuration iOS en mode simulation : 

	1. Sélectionnez la configuration iOS de votre projet : 

		- Déroulez l'option "Configurations (Application Android)" en haut du volet "Explorateur de projet". 

		- Double-cliquez sur le nom de la configuration iOS. 




2. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_GO_Fen_WM_GAF.jpg)
 parmi les boutons d'accès rapide (ou utilisez la touche F9).

3. Validez si nécessaire le message d'information concernant le mode simulateur.

4. La fenêtre que vous avez créée se lance en exécution, dans une coque correspondant au matériel choisi (iPad ou iPhone).

5. Cliquez sur le bouton "Afficher".

6. Validez la fenêtre système qui s'affiche.  
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%2003%20-%20HC%20N%B0003.jpg&type=thumb)






- Vous possédez un iPhone ? Maintenant, testons le projet directement sur le périphérique. 




- Vérifiez tout d'abord que les conditions suivantes sont réunies : 

	- l'iPhone/iPad et le poste de développement doivent être sur le même réseau (Wifi par exemple). 

	- l'application WMDev doit être téléchargée sur l'iPhone/iPad ([https://itunes.apple.com/fr/app/WMDev/id1437792304](https://itunes.apple.com/fr/app/WMDev/id1437792304)). 

	- les ports réseau suivants doivent être ouverts : 

		- 64000 (64000 à 64005 si plusieurs WINDEV Mobile sont lancés en même temps). 

		- 27280


 Si un firewall est utilisé, il doit être configuré pour permettre l'utilisation de ces ports. 




- Parmi les boutons d'accès rapide, sélectionnez l'option "![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_GO_Projet_WM_GAF.jpg)
 Déboguer sur un nouvel iPhone/iPad". La fenêtre de connexion à un appareil iOS apparaît. Cette fenêtre contient un QR code spécifique. ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=Test_Appli_iOs%20-%20HC%20N%B0001.jpg)


	1. Lancez WMDev sur le poste mobile (iPhone ou iPad). 

	- Cliquez sur le bouton "+" puis sur le bouton affichant un code-barres. 

	- Scannez le code-barres affiché sous WINDEV Mobile dans la fenêtre de connexion à un appareil iOS. 





### Premier déploiement sur un appareil iOS
<a name="premier_deploiement_sur_appareil_ios_ELTPARAGRAPHE000322"></a>Pour exécuter l'application de manière autonome sur l'appareil, il suffit de :

- Générer l'application iOS (ou projet Xcode) sous WINDEV Mobile.

- Transférer le projet Xcode généré sur un poste Mac pour y être compilé.

- Compiler le projet Xcode afin de générer le programme.

- Le programme pourra ensuite être installé sur le matériel connecté ou lancé dans l'émulateur Xcode. Il fonctionnera de manière autonome.


Nous allons voir en détail ces différentes étapes.




- Pour générer l'application iOS :

	1. Sous le volet "Projet", dans le groupe "Génération", cliquez sur "Générer" (vous pouvez également cliquer sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Generation_iOS_WM_GAF.jpg)
 parmi les boutons d'accès rapide).

	2. L'assistant de génération d'une application iPhone/iPad se lance.
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%2003%20-%20HC%20N%B0002.jpg&type=thumb)


	3. La première étape de l'assistant permet de :

	- définir le nom de l'application, la société et le copyright.

	- saisir l'identifiant du bundle.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Cet identifiant est l'identifiant unique de votre application auprès de Apple. Il se définit et s'enregistre sur le compte développeur Apple.<br><br>Cet identifiant permettra d'enregistrer votre application pour pouvoir la tester et la déployer. Par défaut, WINDEV Mobile propose automatiquement un identifiant respectant les normes de développement Apple actuelles. Vous pouvez modifier cet identifiant. |





	- saisir l'adresse email utilisée par défaut pour envoyer les éventuels rapports d'erreur générés par l'application. 




La suite des manipulations doit être effectuée sur le Mac. Vous devez :

- Transférer le projet WINDEV Mobile sur le Mac.

- Compiler le projet sous Xcode.






- Pour transférer le projet WINDEV Mobile sur le Mac :

	1. Copiez le dossier complet généré dans le répertoire "EXE\\&lt;Nom de la configuration iOS&gt;" sur un support externe (clé USB, disque dur externe, répertoire partagé avec le Mac sur le réseau). Ce répertoire a pour nom &lt;Nom du projet&gt;.xcode.gen.

	2. Collez ce dossier sur le Mac qui va compiler l'application.

	3. Ouvrez le dossier sur le Mac et ouvrez le fichier nommé "Nom_du_projet.xcodeproj".

	4. Le projet s'ouvre dans Xcode.







WINDEV Mobile génère automatiquement un projet Xcode pour vos compilations iOS. Pour vous faciliter la mise au point des applications, WINDEV Mobile génère un “Scheme” pour Xcode.

- Pour compiler le projet sous Xcode :

	1. Dans la liste déroulante en haut à gauche, sélectionnez les options de compilation. Sélectionnez le scheme (correspondant à votre application) puis la cible de compilation (appareil actuellement connecté ou un simulateur).

	2. Pour lancer la compilation, cliquez sur l'option de menu "Product .. Clean" puis sur l'option de menu "Product .. Build".

	3. Un compte rendu de compilation apparaît en haut ("Succeeded" ou sinon le nombre de warnings et d'erreurs). Vous pouvez cliquer sur ces symboles pour voir la liste des erreurs/warnings.

	4. Une fois le programme compilé sans erreurs, vous pouvez lancer la simulation (Option "Product .. Run"). 

		- Si la cible de compilation est le simulateur, l'application est lancée dans la fenêtre du simulateur. 

		- Si la cible de compilation est l'appareil connecté, l'application est directement lancée sur l'appareil. 







Vous pouvez ensuite tester votre application directement sur votre iPhone ou iPad.
<a name="NOTE6]
[["></a>


## Conclusion
<a name="conclusion_ELTTEXTE000832"></a>
WINDEV Mobile permet de créer simplement une application. Mais que recouvre exactement ce terme **Application** ?

Une **application** est un outil qui permet de réaliser des tâches, des actions automatiquement.

Pour créer une application, WINDEV Mobile propose de créer un **projet**. Un projet relie entre eux les différents éléments du programme et les organise. C'est à partir du projet que pourra être créé le programme correspondant à l'application.

Si votre application manipule des données, WINDEV Mobile permet de définir la structure de la base de données grâce à **l'analyse**. L'analyse WINDEV Mobile contient la description des fichiers de données (appelés souvent "Tables" dans de nombreuses bases de données). Ces fichiers de données contiendront les données de l'application.

Nous utiliserons un projet manipulant des données dans la [partie 4](../TutoWM/1410087571.md) de ce cours. 










| [Leçon précédente](../TutoWM/1410087563.md) | [Sommaire](../TutoWM/1410087586.md) | [Leçon suivante](../TutoWM/1410087564.md) |
| --- | --- | --- |






