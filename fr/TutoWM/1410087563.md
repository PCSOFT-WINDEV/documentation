
## Leçon 2.1. Mon premier projet Android/iOS


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000417"></a>


- Configuration nécessaire.

- Créer un projet Android/iOS.

- Ma première fenêtre.





|   |   |
| --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 1 h |



| [Leçon précédente](../TutoWM/1410087562.md) | [Sommaire](../TutoWM/1410087586.md) | [Leçon suivante](../TutoWM/1410087596.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000464"></a>
Pour commencer à développer avec WINDEV Mobile, nous allons simplement créer un premier projet. Ce projet sera un projet **multiplateforme** utilisable aussi bien sur une plateforme Android que sur une plateforme iOS. En effet, dans de nombreux cas, le développement d'une application pour Mobile nécessite un fonctionnement à la fois sur Android et sur iOS.

Avec WINDEV Mobile, pas besoin de développer deux projets différents, de les maintenir et de les faire évoluer en parallèle. Il suffit de créer un seul projet associé à plusieurs plateformes, par exemple Android et iOS : c'est un projet **multiplateforme**. La différenciation des plateformes sera effectuée uniquement lors de la génération et lors du déploiement de l'application. 

|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Nous avons choisi de créer dans ce cours un projet multiplateforme. WINDEV Mobile permet également de créer : <br><br>- Un projet uniquement pour Android, <br><br>- Un projet uniquement pour iOS. <br><br><br>La création d'un projet uniquement pour Android ou uniquement pour iOS est similaire à celle présentée dans cette leçon. |







Le projet que nous allons créer contiendra simplement une fenêtre permettant d'afficher un message. 

Mais avant de créer notre premier projet, regardons la configuration nécessaire pour développer une application Android et/ou iOS.

<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Configuration nécessaire
<a name="configuration_necessaire_ELTTEXTE000506"></a>


### Configuration nécessaire pour Android
<a name="configuration_necessaire_pour_android_ELTPARAGRAPHE000049"></a>Pour développer une application pour la plateforme Android, il est nécessaire d'installer sur le poste de développement les éléments suivants :

- Le JDK : Le JDK (Java Development Kit) distribué par Oracle est utilisé pour compiler les fichiers Java générés.

- Le SDK Android de Google : Le SDK Android (Software Development Kit ou Kit de développement logiciel) est un ensemble de fichiers et d'applications distribué par Google afin de permettre la compilation d'applications pour le système d'exploitation Android.
	**Attention** : Le SDK Android est composé de parties correspondant aux versions des plateformes des matériels (6, 7, ...).
	Le téléchargement et l'installation du SDK Android sont proposés si nécessaire lors de la génération de l'application Android depuis WINDEV Mobile.

- L'outil Gradle : Cet outil est nécessaire à la compilation et à la génération des applications Android. Le téléchargement et l'installation de Gradle sont proposés si nécessaire lors de la génération de l'application Android depuis WINDEV Mobile. 




Pour plus de détails (adresses de téléchargement, ...), consultez [Installation des outils de développement Android](../Editeurs/9000042.md).

Après l'installation du JDK et du SDK, le redémarrage de la machine est conseillé.


### Configuration nécessaire pour iOS
<a name="configuration_necessaire_pour_ios_ELTPARAGRAPHE000069"></a>Pour développer une application WINDEV Mobile pour iPhone/iPad, il est nécessaire de posséder : 

- 1 PC 

- 1 Mac

- 1 iPhone et/ou iPad (optionnel)



**Pourquoi un PC ?**
WINDEV Mobile 28 est une application exclusivement Windows. 
L'application iOS sera créée, développée et mise au point sur le PC.

**Alors, pourquoi un Mac ?**
A la fin du développement, pour générer l'application iOS native, il faudra obligatoirement compiler cette application sur un Mac en utilisant le compilateur Xcode (version 13 minimum).

<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Mon premier projet
<a name="mon_premier_projet_ELTTEXTE000554"></a>


### Création du projet
<a name="creation_projet_ELTPARAGRAPHE000093"></a>Nous allons créer notre premier projet pour Android et iOS.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=exemple-WM.png)<br> | Corrigé | Un projet corrigé est disponible. Pour ouvrir ce projet : <br><br>1. Affichez la page d'accueil de WINDEV Mobile (Ctrl + &lt;). <br><br>2. Cliquez sur "Tutoriel" puis dans la zone "Partie 2 - Leçon 2.1 - Ma première application Android/iOS", double-cliquez sur "Mon projet Android/iOS - Corrigé".<br><br><br> |







- Pour créer un projet multiplateforme Android / iOS :

	1. Lancez WINDEV Mobile 28 (si ce n'est déjà fait). 

	2. Si nécessaire, affichez la page d'accueil de WINDEV Mobile (Ctrl + &lt;).

	3. Dans la page d'accueil, cliquez sur "Créer un projet" (icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%20-%20HC%20N%B0001%201.jpg)
) puis sur "Application Android ou iOS". 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%20-%20HC%20N%B0001.jpg&type=thumb)


	4. L'assistant de création de projet se lance. Les différentes étapes de l'assistant vont vous aider à créer votre projet. Tous les renseignements indiqués dans cet assistant pourront être modifiés par la suite.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Astuce : Autre méthode pour créer un projet :<br><br>		1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Nv_WM_GAF.jpg)<br> parmi les boutons d'accès rapide du menu de WINDEV Mobile.<br><br>		2. La fenêtre de création d'un nouvel élément s'affiche : cliquez sur "Projet".<br><br><br> |





5. La première étape de l'assistant permet de définir la plateforme d'exécution du projet : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%20-%20HC%20N%B0002.jpg&type=thumb)
Dans notre cas, sélectionnez "Multiplateforme Android et iOS" et passez à l'étape suivante. 

6. L'assistant propose de créer un projet vierge ou basé sur un exemple. Choisissez "Créer un projet vierge" et passez à l'étape suivante.

7. L'assistant propose de choisir le type d'appareils concernés par le projet :

	- Générer une application pour téléphones et tablettes.

	- Générer une application pour téléphones.

	- Générer une application pour tablettes.
						|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Si l'application est destinée à fonctionner sur plusieurs appareils Android et/ou iOS (téléphones de tailles différentes ou de résolutions différentes par exemple), il est conseillé d'utiliser une des options suivantes : <br><br>			- "Générer une application pour téléphones et tablettes",<br><br>			- "Générer une application pour téléphones".<br><br><br><br><br>Dans ce cas, WINDEV Mobile propose par défaut la plus petite résolution pour créer les fenêtres de l'application. L'utilisation des ancrages (voir [Leçon 2.3 Interface (UI)](../TutoWM/1410087564.md) et [Leçon 4.2 Développement de l'application](../TutoWM/1410087572.md)) permettra à l'application de fonctionner sur tous les supports. |




![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet%20-%20HC%20N%B0004.jpg&type=thumb)




<a name="NOTE5"></a>
<a name="NOTE5_1"></a>


## Ma première fenêtre
<a name="premiere_fenetre_ELTTEXTE000650"></a>


### Présentation
<a name="presentation_ELTPARAGRAPHE000181"></a>La première fenêtre que nous allons créer permet à l'utilisateur d'afficher un message de bienvenue grâce au bouton "Afficher".

Vous pouvez être tenté de dire que c'est trop simple, trop basique, mais nous vous conseillons de réaliser cette fenêtre. Vous risquez d'être surpris par la facilité et l'intuitivité de l'éditeur de WINDEV Mobile. De plus, cette fenêtre vous permettra de découvrir des concepts fondamentaux pour la suite de ce cours et de voir tout le processus de développement d'une application Android/iOS avec WINDEV Mobile.


### Création de la fenêtre
<a name="creation_fenetre_ELTPARAGRAPHE000188"></a>

- Pour créer la fenêtre :

	1. Dans la fenêtre de création d'un nouvel élément, cliquez sur "Fenêtre" puis sur "Fenêtre".
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Ici, comme nous venons de créer un nouveau projet, la fenêtre de création d'un nouvel élément s'affiche automatiquement.<br><br>Pour afficher la fenêtre de création d'un nouvel élément, il suffit de cliquer sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Nv_WM_GAF.jpg)<br> parmi les boutons d'accès rapide de WINDEV Mobile : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet2%20-%20HC%20N%B0005%201.jpg)<br> |





	2. L'assistant de création d'une fenêtre s'affiche.

	3. Dans la liste des fenêtres proposées, sélectionnez "Vierge" (la configuration par défaut sélectionnée étant "iOS", l'assistant propose de créer une fenêtre pour iPhone). Le nom du gabarit utilisé est affiché en bas à droite de l'assistant. Le gabarit "Phoenix" que nous avons sélectionné lors de la création du projet est sélectionné par défaut.
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Les gabarits permettent de créer rapidement des interfaces professionnelles. Un gabarit définit le look de la fenêtre mais également le look de tous les champs qui seront utilisés dans cette fenêtre. Ainsi, aucune faute de goût n'est possible. |





	4. Validez. La fenêtre est automatiquement créée sous l'éditeur. La fenêtre de sauvegarde de l'élément créé apparaît. Cette fenêtre affiche et permet de renseigner :

		- le titre de l'élément. Pour une fenêtre, ce titre sera affiché dans l'Action Bar de la fenêtre.

		- le nom de l'élément qui correspond au nom de la fenêtre. Ce nom sera utilisé en programmation.

		- l'emplacement de l'élément. Cet emplacement correspond au répertoire de sauvegarde du fichier physique correspondant à l'élément. La fenêtre est un fichier d'extension "WDW", enregistré dans le répertoire du projet. 




5. Indiquez le titre de l'élément : "Bienvenue". Le nom de l'élément est automatiquement proposé : "FEN_Bienvenue". ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet2%20-%20HC%20N%B0001.jpg)

			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Observez bien le nom de la fenêtre que WINDEV Mobile propose par défaut : ce nom commence par les lettres "FEN_". Ce préfixe est automatiquement ajouté car le projet utilise une charte de programmation.<br><br>La charte de programmation permet de définir un préfixe pour chaque type d'objet et ainsi d'identifier rapidement l'élément manipulé :<br><br>		- une fenêtre commence par "FEN_",<br><br>		- un bouton commence par "BTN_",<br><br>		- etc.<br><br><br><br><br>Si vous ne voulez pas utiliser cette charte, il suffit de la débrancher : sous le volet "Projet", dans le groupe "Autres actions", déroulez l'option "Charte" et décochez l'option "Utiliser la charte". |





6. Validez l'enregistrement de la fenêtre en cliquant sur le bouton "OK".

7. La fenêtre est affichée dans l'éditeur de fenêtres. Cette fenêtre est composée de plusieurs zones : 

	- La barre système, dans laquelle l'heure est affichée. 

	- L'Action Bar. Les "Action Bars" remplacent la barre de titre d'une fenêtre et permettent d'afficher plusieurs informations : l'icône de l'application, le titre de la fenêtre, certaines options de menu, le menu déroulant de votre fenêtre.

	- La zone d'affichage de la fenêtre, qui va contenir les différents champs de votre application. 





### Affichage d'un message
<a name="affichage_message_ELTPARAGRAPHE000247"></a>Vous allez maintenant créer un champ Bouton permettant d'afficher un message.



- Pour créer le champ Bouton "Afficher" :

	1. Sous le volet "Création", dans le groupe "Champs usuels", cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Bouton_WM_GAF.jpg)
. Le champ apparaît en création sous la souris.

	2. Déplacez la souris dans la fenêtre vers la position où le champ doit être créé (par exemple en haut de la fenêtre). Pour poser le champ dans la fenêtre, il suffit de cliquer dans la fenêtre.

	3. Faites un clic droit de la souris sur le champ que vous venez de créer. Le menu contextuel du champ apparaît. Dans ce menu contextuel, sélectionnez l'option "Description". La fenêtre de description du champ Bouton s'affiche.







- Modifiez les caractéristiques du champ en saisissant les informations suivantes : 
![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet2%20-%20HC%20N%B0002.jpg&type=thumb)


	1. Ce champ a pour nom : "BTN_Afficher".

2. Ce champ a pour libellé : "Afficher".


|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Pour modifier le nom et le libellé du champ Bouton, nous avons utilisé la fenêtre de description du champ (également appelée "Fenêtre à 7 onglets").<br><br>Il est également possible de modifier le nom et le libellé du champ directement depuis la fenêtre en cours d'édition :<br><br>1. Cliquez sur le champ pour le sélectionner.<br><br>2. Appuyez sur la touche Entrée ou Espace : le libellé passe en édition.<br><br>3. Saisissez le nouveau libellé et validez.<br><br><br> |







- Validez la fenêtre de description du champ (bouton "OK"). Le nouveau libellé du champ apparaît sous l'éditeur de fenêtres.




- Pour améliorer l'UI de notre première fenêtre, nous allons centrer le champ Bouton dans la fenêtre : 

	1. Cliquez si nécessaire sur le champ Bouton pour le sélectionner. 

	2. Sous le volet "Alignement" du ruban, dans le groupe "Centrage et répartition", cliquez sur "Centrer dans le parent (Horz.)". 

	3. Le résultat est immédiat.  





|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | WINDEV Mobile propose de nombreuses options d'alignement. Si vous ne savez pas quel alignement choisir, survolez les différentes options proposées par le volet "Alignement" de WINDEV Mobile. Lors du survol avec la souris d'une option, les champs sélectionnés dans la fenêtre sont automatiquement positionnés et/ou redimensionnés en fonction de l'option survolée.<br><br>Si le positionnement vous convient, il suffit de cliquer sur l'option.<br><br>Si le positionnement ne vous convient pas, il suffit de ne plus survoler les options d'alignement : les champs sont replacés à leur position d'origine. |







- Nous allons afficher un message dans une boîte de dialogue (une mini-fenêtre proposée par le système). Pour cela, nous allons utiliser notre première fonction WLangage, la fonction [Info](../WDLang1/3021011.md).
	|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | Le WLangage est le langage de programmation fourni avec WINDEV Mobile. C'est un langage de 5ème génération (L5G) possédant des ordres évolués. |





	1. Sélectionnez le champ si nécessaire.
			Remarques : 

		- Lorsque le champ est sélectionné, des poignées apparaissent autour du champ. 

		- Pour sélectionner un champ, il suffit de cliquer dessus avec la souris.




2. Affichez le menu contextuel du champ (clic droit de la souris).

3. Sélectionnez l'option "Code". Cette option ouvre l'éditeur de code de WINDEV Mobile, dans lequel toutes les instructions WLangage peuvent être saisies. 
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | L'éditeur de code propose différents événements pour chaque type de champ. Ce sont les événements WLangage liés au champ. <br><br>Ainsi, pour le champ "Bouton", deux événements sont affichés :<br><br>		- "Initialisation", exécuté lors de l'affichage de la fenêtre.<br><br>		- "Clic", exécuté lorsque l'utilisateur clique sur le champ.<br><br><br><br><br>Remarque : Des événements supplémentaires peuvent être ajoutés si nécessaire. |





4. Dans l'événement "Clic" du champ "BTN_Afficher", saisissez le code WLangage suivant : 
			
		```wl
		Info(Bonjour)
		```



**Remarque sur l'aide à la saisie** : Dès la saisie des deux premiers caractères, WINDEV Mobile propose tous les mots du vocabulaire WLangage contenant ces caractères. L'assistance au développement est poussée très loin. Vous ne pouvez plus vous tromper en saisissant le nom d'un élément : les erreurs de syntaxe sont minimisées. Il suffit de sélectionner le mot désiré et de valider par la touche Entrée. Vous pourrez ainsi vous concentrer sur l'algorithme.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png)<br> | Note | En saisissant ce code WLangage sous l'éditeur de code, vous constatez que les différents éléments saisis utilisent des couleurs différentes. C'est la coloration syntaxique. L'éditeur de code permet ainsi d'identifier rapidement les différents éléments manipulés par le code :<br><br>- les fonctions du WLangage apparaissent en bleu,<br><br>- les chaînes de caractères (entre guillemets) apparaissent en violet,<br><br>- les noms de champs apparaissent en cyan.<br><br><br>Ces couleurs peuvent être modifiées élément par élément dans les options de l'éditeur de code (sous le volet "Accueil", dans le groupe "Environnement", déroulez "Options" et sélectionnez "Options de l'éditeur de code"). |




La fonction [Info](../WDLang1/3021011.md) affiche le message passé en paramètre.



- Enregistrez les modifications en cliquant sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_Sauver_WM_GAF.jpg)
 parmi les boutons d'accès rapide ou en utilisant la combinaison de touches Ctrl + S.




- Fermez l'éditeur de code (croix en haut à droite de l'éditeur de code). L'éditeur de fenêtres réapparaît.




La leçon suivante va nous permettre de tester immédiatement ce projet. 

| [Leçon précédente](../TutoWM/1410087562.md) | [Sommaire](../TutoWM/1410087586.md) | [Leçon suivante](../TutoWM/1410087596.md) |
| --- | --- | --- |




