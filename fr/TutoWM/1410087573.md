
## Leçon 4.3. Gérer l'orientation des fenêtres avec les agencements


<a name="NOTE1"></a>
<a name="NOTE1_1"></a>


## Ce que vous allez apprendre dans cette leçon ...
<a name="que_vous_allez_apprendre_dans_cette_lecon_ELTTEXTE000207"></a>


- L'intérêt des ancrages.

- Créer un agencement.

- Utiliser un agencement.





|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=dur%E9e.png)<br> | <br>Durée estimée : 15 mn |



| [Leçon précédente](../TutoWM/1410087572.md) | [Sommaire](../TutoWM/1410087586.md) | [Leçon suivante](../TutoWM/1410087574.md) |
| --- | --- | --- |





<a name="NOTE2"></a>
<a name="NOTE2_1"></a>


## Présentation
<a name="presentation_ELTTEXTE000254"></a>
Une application pour mobile peut le plus souvent être utilisée aussi bien en mode portrait qu'en mode paysage. 

L'interface d'une fenêtre utilisée en mode portrait peut varier pour être utilisée en mode paysage. 

Par défaut, WINDEV Mobile permet de gérer le changement d'orientation de l'appareil grâce aux ancrages. 

La plupart du temps, les ancrages suffisent à adapter l'affichage aux différentes orientations. 

Mais si l'interface doit changer selon l'orientation (positionnement des champs différent en mode portrait et paysage par exemple), les ancrages ne suffisent plus.

Pour gérer une interface différente entre le mode portrait et le mode paysage, WINDEV Mobile propose la technique des agencements. 



- Pour suivre cette leçon, ouvrez si nécessaire le projet "WM Gestion Produits" que vous avez manipulé dans la leçon précédente.

	1. Affichez la page d'accueil de WINDEV Mobile (Ctrl + &lt;).  

	2. Dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 4 - Développement d'une application Android/iOS", double-cliquez sur "Gestion de produits Android/iOS - Exercice".

	3. WINDEV Mobile vous propose d'ouvrir le projet que vous avez manipulé dans la leçon précédente. Vous pouvez ouvrir le projet présent sur votre poste ou ouvrir le projet original. Choisissez "Ouvrir la copie locale". 
			|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=exemple-WM.png) | Corrigé | Un projet corrigé est disponible. Ce projet contient les différentes fenêtres créées dans cette leçon. Pour ouvrir le projet corrigé, dans la page d'accueil, cliquez sur "Tutoriel" puis dans la zone "Partie 4 - Développement d'une application Android/iOS", double-cliquez sur "Gestion de produits Android/iOS - Corrigé". |











<a name="NOTE3"></a>
<a name="NOTE3_1"></a>


## Utilisation des ancrages
<a name="utilisation_des_ancrages_ELTTEXTE000296"></a>


- Nous avons déjà utilisé les ancrages dans la fenêtre "FEN_Fiche_du_produit". En mode test, nous obtenons les interfaces suivantes : 
	


|   |   |
| --- | --- |
| <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Ancrages_Test%20-%20HC%20N%B0001.jpg&type=thumb)<br> | <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Ancrages_Test%20-%20HC%20N%B0002.jpg&type=thumb)<br> |




En mode paysage, nous retrouvons tous les champs affichés en mode portrait, cependant beaucoup d'espace est perdu et il est nécessaire de faire défiler la fenêtre pour accéder à tous les champs.

Nous allons améliorer l'affichage en mode paysage grâce aux agencements.|   |   |   |
| --- | --- | --- |
| ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=note.png) | Note | L'agencement permet de définir plusieurs vues d'une fenêtre dans un même projet sans dupliquer cette fenêtre. <br><br>Il est ainsi par exemple possible de définir :<br><br>- une vue spécifique pour le mode portrait, <br><br>- une vue spécifique pour le mode paysage, <br><br>- une vue spécifique au téléphone, <br><br>- une vue spécifique à la tablette, <br><br>- ...<br><br><br> |







- Pour créer un nouvel agencement : 

	1. Ouvrez si nécessaire la fenêtre "FEN_Fiche_du_produit". 

	2. Sous le volet "Fenêtre", dans le groupe "Agencements", déroulez "Agencements" et sélectionnez l'option "Ajouter des agencements". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Agencement%201%20-%20HC%20N%B0001.jpg)


	3. L'assistant de création d'un agencement se lance. 

4. Passez à l'étape suivante de l'assistant. 

5. L'assistant propose de gérer les différences entre le téléphone et la tablette. Dans notre exemple, nous ne gérons pas les tablettes. Conservez l'option "Cette fenêtre s'affichera uniquement sur téléphone". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Agencement%201%20-%20HC%20N%B0002.jpg)




- Dans notre exemple, deux agencements sont créés. Ces agencements sont affichés sous forme de vignettes, à droite de la fenêtre "FEN_Fiche_du_produit". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Agencement%201%20-%20HC%20N%B0005.jpg&type=thumb)





- Nous allons modifier l'agencement du mode paysage : 

	1. Double-cliquez sur la vignette de l'agencement paysage "Paysage - MultiOS Téléphone" : la fenêtre correspondant à cet agencement s'affiche au centre de l'éditeur. 

	2. L'option ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Agencement%202%20-%20HC%20N%B0001.jpg) (en haut à droite de la fenêtre principale, dans la barre de titre) permet de savoir si le mode "Dissociation automatique" est activé. Si ce mode est activé, toute modification de position ou de taille effectuée sur un champ d'une des fenêtres spécifiques de l'agencement ne sera pas reportée sur les autres. Conservez le mode "Dissociation automatique" activé. 

	3. Nous allons modifier la position des champs dans l'agencement : 

		- Sélectionnez le champ Image correspondant à la photo du produit ainsi que les deux champs Bouton et déplacez-les vers la gauche de la fenêtre. Placez les deux champs Bouton sous le champ Image.  <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Agencement%202%20-%20HC%20N%B0002.jpg&type=thumb)


		- Sélectionnez les champs "Libellé" et "Description" et placez-les à droite du champ Image. Modifiez la taille des champs si nécessaire. <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Agencement%202%20-%20HC%20N%B0003.jpg&type=thumb)




- Sélectionnez le champ Image. Le champ Image ainsi que les deux champs Bouton sont entourés d'un trait rouge. En effet, il y a un conflit d'ancrage avec le champ Libellé. 




- Nous allons donc modifier l'ancrage de ces champs : 

	1. Sélectionnez le champ Image et les deux champs Bouton. 

	2. Affichez le menu contextuel et sélectionnez l'option "Agencements .. Dissocier l'ancrage". <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Agencement%202%20-%20HC%20N%B0007.jpg&type=thumb)


	3. Définissez le nouvel ancrage des champs : 

	- Affichez le menu contextuel des champs et sélectionnez l'option "Ancrage". 

	- Dans la fenêtre qui s'affiche, sélectionnez ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_MP%20-%20Ancrage%20fiche%20-%20HC%20N%B0002%201.jpg). 




- Vous obtenez l'interface suivante : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_WM%20-%20Agencement%20final%20-%20HC%20N%B0002.jpg&type=thumb)





<a name="NOTE4"></a>
<a name="NOTE4_1"></a>


## Tester l'application
<a name="tester_application_ELTTEXTE000338"></a>


- Pour lancer le test du projet :

	1. Cliquez sur ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=ICO_GO_simu_PRJ_WM_GAF.jpg) parmi les boutons d'accès rapide.

	2. Votre projet démarre par la fenêtre de menu. 

	3. Cliquez sur la liste des produits. 

	4. Cliquez sur un produit. La fiche produit apparaît en mode portrait. 

	5. Changez l'orientation de la fenêtre en cliquant sur l'icône ![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P2_WM%20-%20Mon%20Premier%20Projet2%20-%20HC%20N%B0007.jpg) du menu du simulateur. 

	6. L'agencement que nous avons défini pour le mode paysage est automatiquement affiché : <br>![](https://doc.pcsoft.fr/fr-FR/images/image.awp?langid=5&name=P4_WM%20-%20Agencement%20final%20-%20HC%20N%B0003.jpg&type=thumb)


	7. Fermez la fenêtre de test de l'application.






| [Leçon précédente](../TutoWM/1410087572.md) | [Sommaire](../TutoWM/1410087586.md) | [Leçon suivante](../TutoWM/1410087574.md) |
| --- | --- | --- |




